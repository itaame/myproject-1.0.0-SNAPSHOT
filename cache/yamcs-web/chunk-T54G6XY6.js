import{b as O,d as U,e as W,f as K}from"./chunk-WVE4Y3TR.js";import{Ca as s,E as T,Ea as S,Fa as E,Ia as q,Ie as L,J as k,K as R,Ka as A,Oa as C,Pa as x,X as a,Y as l,a as y,aa as p,b,bc as B,ca as _,cb as D,e as v,ga as u,ha as P,ia as I,ja as M,ka as c,la as r,lg as Y,ma as d,mb as F,of as N,qa as $,qb as j,ra as w,rg as V,sa as m,tb as z,tc as G,tg as H,ug as J}from"./chunk-SAZ6MTOG.js";var X=t=>({c:t});function Z(t,i){t&1&&s(0," s ")}function ee(t,i){if(t&1&&(c(0,"div")(1,"mat-icon",2),s(2,"toll"),r(),c(3,"a",3),s(4),r(),d(5,"br"),r()),t&2){let e=i.$implicit,n=m(2);a(3),_("routerLink",e.link)("queryParams",A(3,X,n.yamcs.context)),a(),S(" ",e.label," ")}}function te(t,i){if(t&1){let e=$();c(0,"mat-toolbar"),d(1,"span",4),c(2,"ya-button",5),w("click",function(){k(e);let o=m(2);return R(o.loadMoreData())}),s(3," Load more "),r(),d(4,"span",4),r()}if(t&2){let e=m();a(2),_("disabled",!e.continuationToken)}}function ie(t,i){if(t&1&&(c(0,"div",1),s(1),p(2,Z,1,0),s(3),C(4,"async"),r(),I(5,ee,6,5,"div",null,P),p(7,te,5,1,"mat-toolbar")),t&2){let e=i,n=m();a(),E(" Showing ",e.resources.length," of ",e.totalSize," result "),a(),u(e.totalSize!==1?2:-1),a(),S(' for "',x(4,5,n.term$),'". '),a(2),M(e.resources),a(2),u(e.resources.length?7:-1)}}var h=class t{constructor(i,e,n,o){this.yamcs=i;this.messageService=o;this.term$=new v(null);this.result$=new v(null);e.setTitle("Search"),n.queryParamMap.subscribe(Q=>{let g=Q.get("q")??"";this.fetchPage(g).then(f=>{this.term$.next(g),this.result$.next({resources:this.toResources(f.parameters||[]),totalSize:f.totalSize,continuationToken:f.continuationToken})})})}loadMoreData(){let i=this.term$.value??"",e=this.result$.value?.continuationToken;this.fetchPage(i,e).then(n=>{let o=this.result$.value;o.resources=[...o.resources,...this.toResources(n.parameters||[])],this.result$.next(b(y({},o),{continuationToken:n.continuationToken}))})}toResources(i){return i.map(e=>({label:e.qualifiedName,type:"Parameter",link:["/telemetry/parameters"+e.qualifiedName]}))}fetchPage(i,e){let n=this.yamcs.yamcsClient.getParameters(this.yamcs.instance,{q:i,next:e,limit:50,searchMembers:!0});return n.catch(o=>this.messageService.showError(o)),n}static{this.\u0275fac=function(e){return new(e||t)(l(Y),l(F),l(j),l(N))}}static{this.\u0275cmp=T({type:t,selectors:[["ng-component"]],standalone:!0,features:[q],decls:6,vars:3,consts:[[1,"panel-content"],[2,"margin-bottom","1em"],[1,"icon12",2,"vertical-align","middle","margin-right","4px"],[1,"ya-link",3,"routerLink","queryParams"],[2,"flex","1 1 auto"],[3,"click","disabled"]],template:function(e,n){if(e&1&&(c(0,"app-instance-page")(1,"app-instance-toolbar"),s(2,"Search results"),r(),c(3,"div",0),p(4,ie,8,7),C(5,"async"),r()()),e&2){let o;a(4),u((o=x(5,1,n.result$))?4:-1,o)}},dependencies:[U,O,V,D,z,B,G,L],encapsulation:2,changeDetection:0})}};var Te=[{path:"",canActivate:[H,W],canActivateChild:[J],runGuardsAndResolvers:"always",component:K,children:[{path:"",pathMatch:"full",component:h}]}];export{Te as ROUTES};
