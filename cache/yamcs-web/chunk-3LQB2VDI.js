import{b as Et,d as Dt,e as ti,f as ni}from"./chunk-WVE4Y3TR.js";import{$b as De,Ae as Ne,B as Ot,Ba as D,Bb as U,Ca as r,Cb as et,Da as E,Db as W,E as b,Ea as C,Ed as Pt,Ee as te,Fa as Se,Fb as V,Fd as Nt,Gb as it,Gd as Rt,Ha as Z,Hb as vt,Hd as Bt,I as ke,Ia as L,Id as $t,Ie as lt,J as v,Ja as Mt,Jb as P,Jd as jt,Jf as Je,K as x,Ka as z,Kb as Ee,Kd as qt,Ke as Re,Lb as xt,Ld as Oe,Nb as Ft,Oa as f,Ob as nt,Pa as k,Pb as ot,Pe as J,Pf as ne,Q as B,Qa as X,Qe as Be,Sb as at,Se as $e,Td as Me,Te as je,U as ye,Ud as Ae,Ue as qe,Va as be,Wd as Ve,X as l,Y as g,Ze as Ge,a as he,aa as d,af as st,ag as Qe,bc as kt,ca as m,cb as F,da as pt,df as He,e as Q,ea as Y,ec as we,ff as $,ga as p,gc as yt,ge as Gt,ha as w,hb as At,hc as St,he as Ht,hf as Ye,ia as I,ib as Ct,ic as bt,ie as Yt,j as ve,ja as O,jc as Lt,ka as o,ke as Ut,la as a,le as Wt,lf as Ue,lg as j,ma as u,mb as ft,mf as We,na as M,ne as Kt,nf as ee,oa as A,oc as Ie,oe as zt,of as K,og as Ze,qa as S,qb as gt,qe as Xt,qf as Ke,ra as h,rb as Le,re as Jt,rg as T,sa as c,sb as Vt,sf as ie,sg as Tt,tb as ht,te as Qt,tf as ze,tg as ei,ub as Te,uc as rt,ue as Zt,ug as ii,vf as Xe,x as R,y as xe,ye as Fe,zb as tt,ze as Pe}from"./chunk-SAZ6MTOG.js";var pi=()=>({exact:!0}),oi=i=>({c:i}),wt=class i{constructor(e){this.yamcs=e}static{this.\u0275fac=function(t){return new(t||i)(g(j))}}static{this.\u0275cmp=b({type:i,selectors:[["app-links-page-tabs"]],standalone:!0,features:[L],decls:10,vars:12,consts:[["rla","routerLinkActive"],["rlb","routerLinkActive"],["tabPanel",""],["mat-tab-nav-bar","",1,"secondary",3,"mat-stretch-tabs","tabPanel"],["mat-tab-link","","routerLink","/links","routerLinkActive","",3,"routerLinkActiveOptions","active","queryParams"],["mat-tab-link","","routerLink","/links/log","routerLinkActive","",3,"active","queryParams"]],template:function(t,n){if(t&1&&(o(0,"nav",3)(1,"a",4,0),r(3," Links "),a(),o(4,"a",5,1),r(6," Action log "),a()(),o(7,"mat-tab-nav-panel",null,2),u(9,"router-outlet"),a()),t&2){let s=D(2),_=D(5),y=D(8);m("mat-stretch-tabs",!1)("tabPanel",y),l(),m("routerLinkActiveOptions",Mt(7,pi))("active",s.isActive)("queryParams",z(8,oi,n.yamcs.context)),l(3),m("active",_.isActive)("queryParams",z(10,oi,n.yamcs.context))}},dependencies:[T,Le,ht,Te,Fe,Ne,Pe],styles:[".mat-mdc-tab-link[_ngcontent-%COMP%]{height:36px;min-width:0;font-size:13px}"],changeDetection:0})}};function ui(i,e){if(i&1){let t=S();u(0,"ya-date-time-input",14)(1,"ya-date-time-input",15),o(2,"ya-button",16),h("click",function(){v(t);let s=c();return x(s.applyCustomDates())}),r(3,"Apply"),a()}if(i&2){let t=c();l(2),m("disabled",t.filterForm.invalid)}}function _i(i,e){if(i&1){let t=S();o(0,"ya-button",17),h("click",function(){v(t);let s=c();return x(s.jumpToNow())}),r(1,"Jump to now"),a()}}function Ci(i,e){i&1&&(o(0,"th",18),r(1,"Time"),a())}function fi(i,e){if(i&1&&(o(0,"td",19),r(1),f(2,"datetime"),a()),i&2){let t=e.$implicit;l(),E(k(2,1,t.time))}}function gi(i,e){i&1&&(o(0,"th",18),r(1,"User"),a())}function hi(i,e){if(i&1&&(o(0,"td",19),r(1),a()),i&2){let t=e.$implicit;l(),E(t.user||"-")}}function vi(i,e){i&1&&(o(0,"th",18),r(1,"Action"),a())}function xi(i,e){if(i&1&&(o(0,"td",19),u(1,"span",20),f(2,"actionLogFormat"),a()),i&2){let t=e.$implicit;l(),m("innerHTML",k(2,1,t.summary)||"-",ye)}}function ki(i,e){i&1&&u(0,"th",21)}function yi(i,e){i&1&&u(0,"td",19)}function Si(i,e){i&1&&u(0,"tr",22)}function bi(i,e){i&1&&u(0,"tr",23)}var oe=class i{constructor(e,t,n,s,_){this.yamcs=e;this.messageService=t;this.router=n;this.route=s;this.interval=B();this.customStart=B();this.customStop=B();this.filterForm=new vt({interval:new P("NO_LIMIT"),customStart:new P(null),customStop:new P(null)});this.displayedColumns=["time","user","summary","actions"];this.intervalOptions=[{id:"PT1H",label:"Last hour"},{id:"PT6H",label:"Last 6 hours"},{id:"P1D",label:"Last 24 hours"},{id:"NO_LIMIT",label:"No limit"},{id:"CUSTOM",label:"Custom",group:!0}];this.dataSource=new Zt;_.setTitle("Links")}ngOnInit(){this.initializeOptions(),this.loadData(),this.filterForm.get("interval").valueChanges.forEach(e=>{if(e==="CUSTOM"){let t=new Date,n=this.validStart||t,s=this.validStop||t;this.filterForm.get("customStart").setValue(J.toISOString(n)),this.filterForm.get("customStop").setValue(J.toISOString(s))}else e==="NO_LIMIT"?(this.validStart=null,this.validStop=null,this.appliedInterval=e,this.loadData()):e&&(this.validStop=new Date,this.validStart=J.subtractDuration(this.validStop,e),this.appliedInterval=e,this.loadData())})}initializeOptions(){if(this.interval())if(this.appliedInterval=this.interval(),this.filterForm.get("interval").setValue(this.appliedInterval),this.appliedInterval==="CUSTOM"){let e=this.customStart();this.filterForm.get("customStart").setValue(e),this.validStart=J.toDate(e);let t=this.customStop();this.filterForm.get("customStop").setValue(t),this.validStop=J.toDate(t)}else this.appliedInterval==="NO_LIMIT"?(this.validStart=null,this.validStop=null):(this.validStop=new Date,this.validStart=J.subtractDuration(this.validStop,this.appliedInterval));else this.appliedInterval="NO_LIMIT",this.validStop=null,this.validStart=null}jumpToNow(){this.filterForm.get("interval").setValue("NO_LIMIT")}applyCustomDates(){let{controls:e}=this.filterForm;this.validStart=J.toDate(e.customStart.value),this.validStop=J.toDate(e.customStop.value),this.appliedInterval="CUSTOM",this.loadData()}loadData(){this.updateURL();let e={service:"LinksApi"};this.validStart&&(e.start=this.validStart.toISOString()),this.validStop&&(e.stop=this.validStop.toISOString()),this.yamcs.yamcsClient.getAuditRecords(this.yamcs.instance,e).then(t=>this.dataSource.data=t.records||[]).catch(t=>this.messageService.showError(t))}updateURL(){let{controls:e}=this.filterForm;this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{interval:this.appliedInterval,customStart:this.appliedInterval==="CUSTOM"?e.customStart.value:null,customStop:this.appliedInterval==="CUSTOM"?e.customStop.value:null},queryParamsHandling:"merge"})}static{this.\u0275fac=function(t){return new(t||i)(g(j),g(K),g(Vt),g(gt),g(ft))}}static{this.\u0275cmp=b({type:i,selectors:[["app-links-action-log-tab"]],inputs:{interval:[1,"interval"],customStart:[1,"customStart"],customStop:[1,"customStop"]},standalone:!0,features:[L],decls:25,vars:7,consts:[[1,"panel-content"],[2,"margin-top","16px",3,"formGroup"],[1,"filter-bar"],["icon","access_time","formControlName","interval",3,"options"],["mat-table","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","time"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","user"],["matColumnDef","summary"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["formControlName","customStart"],["formControlName","customStop"],[3,"click","disabled"],[3,"click"],["mat-header-cell",""],["mat-cell",""],[3,"innerHTML"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(t,n){t&1&&(o(0,"app-instance-page")(1,"app-instance-toolbar"),r(2,"Links"),a(),o(3,"div",0),u(4,"app-links-page-tabs"),o(5,"form",1)(6,"div",2),u(7,"ya-select",3),d(8,ui,4,1)(9,_i,2,0,"ya-button"),a()(),o(10,"table",4),M(11,5),d(12,Ci,2,0,"th",6)(13,fi,3,3,"td",7),A(),M(14,8),d(15,gi,2,0,"th",6)(16,hi,2,1,"td",7),A(),M(17,9),d(18,vi,2,0,"th",6)(19,xi,3,3,"td",7),A(),M(20,10),d(21,ki,1,0,"th",11)(22,yi,1,0,"td",7),A(),d(23,Si,1,0,"tr",12)(24,bi,1,0,"tr",13),a()()()),t&2&&(l(5),m("formGroup",n.filterForm),l(2),m("options",n.intervalOptions),l(),p(n.filterForm.value.interval==="CUSTOM"?8:-1),l(),p(n.filterForm.value.interval!=="CUSTOM"?9:-1),l(),m("dataSource",n.dataSource),l(13),m("matHeaderRowDef",n.displayedColumns),l(),m("matRowDefColumns",n.displayedColumns))},dependencies:[Dt,Et,wt,T,xt,V,it,ot,at,Gt,Yt,zt,Ut,Ht,Xt,Wt,Kt,Jt,Qt,lt,$e,Ge,Je,ne],encapsulation:2,changeDetection:0})}};function Li(i,e){if(i&1&&(u(0,"ya-led",0),f(1,"async")),i&2){let t=c();m("matTooltip",t.link.status)("color",k(1,3,t.okColor$))("fade",t.parentLink&&t.parentLink.status!=="OK")}}function Ti(i,e){if(i&1&&u(0,"ya-led",1),i&2){let t=c();m("matTooltip",t.link.status)("fade",t.parentLink&&t.parentLink.status!=="OK")}}function Ei(i,e){if(i&1&&u(0,"ya-led",1),i&2){let t=c();m("matTooltip",t.link.status)("fade",t.parentLink&&t.parentLink.status!=="OK")}}function Di(i,e){if(i&1&&u(0,"ya-led",2),i&2){let t=c();m("matTooltip",t.link.status)("fade",t.parentLink&&t.parentLink.status!=="OK")}}var wi=2e3,ct=class i{constructor(e){this.prevInCount=-1;this.prevOutCount=-1;this.active$=new Q(!1);this.okColor$=this.active$.pipe(ve(e=>e?Ue:We));this.activeExpiration=-1;this.syncSubscription=e.syncFast(()=>{new Date().getTime()>=this.activeExpiration&&(this.active$.next(!1),this.activeExpiration=-1)})}ngOnChanges(){if(this.link.status==="OK"){let e=this.prevInCount!==-1&&this.prevInCount<this.link.dataInCount,t=this.prevOutCount!==-1&&this.prevOutCount<this.link.dataOutCount;(e||t)&&(this.active$.next(!0),this.activeExpiration=new Date().getTime()+wi)}else this.active$.next(!1),this.activeExpiration=-1;this.prevInCount=this.link.dataInCount,this.prevOutCount=this.link.dataOutCount}ngOnDestroy(){this.syncSubscription?.unsubscribe()}static{this.\u0275fac=function(t){return new(t||i)(g(Ze))}}static{this.\u0275cmp=b({type:i,selectors:[["app-link-status"]],inputs:{link:"link",parentLink:"parentLink"},standalone:!0,features:[ke,L],decls:4,vars:1,consts:[[3,"matTooltip","color","fade"],["color","red",3,"matTooltip","fade"],["color","#aaa",3,"matTooltip","fade"]],template:function(t,n){if(t&1&&d(0,Li,2,5,"ya-led",0)(1,Ti,1,2,"ya-led",1)(2,Ei,1,2,"ya-led",1)(3,Di,1,2,"ya-led",2),t&2){let s;p((s=n.link.status)==="OK"?0:s==="UNAVAIL"?1:s==="FAILED"?2:s==="DISABLED"?3:-1)}},dependencies:[T,F,Ie,ee],styles:["[_nghost-%COMP%]{line-height:0;font-size:0}"],changeDetection:0})}};function Ii(i,e){i&1&&(o(0,"span",4),r(1,"(optional)"),a())}function Oi(i,e){if(i&1&&(o(0,"p"),r(1),a()),i&2){let t=e.$implicit;l(),E(t)}}function Mi(i,e){if(i&1&&(o(0,"ya-help"),I(1,Oi,2,1,"p",null,w),a()),i&2){let t=c();l(),O(t.description)}}function Ai(i,e){if(i&1&&(o(0,"div",1)(1,"div",2),f(2,"async"),o(3,"div",3),r(4,"boolean"),a()(),r(5),d(6,Ii,2,0,"span",4)(7,Mi,3,0,"ya-help"),u(8,"ya-errors",5,0)(10,"br"),M(11,6),u(12,"input",7),r(13," True "),u(14,"input",8),r(15," False "),A(),a()),i&2){let t=e,n=D(9),s=c();l(),Y("error",k(2,7,n.invalid$)),l(4),C(" ",t.name," "),l(),p(t.required?-1:6),l(),p(t.description!=null&&t.description.length?7:-1),l(),m("controlName",t.name),l(3),m("formGroup",s.formGroup)}}var ae=class i{constructor(){this.option=B.required();this.validators=[];this.onChange=e=>{};this.subscriptions=[];this.formGroup=new vt({enabled:new P(null)})}ngOnInit(){this.subscriptions.push(this.formGroup.valueChanges.subscribe(()=>{let e=this.formGroup.get("enabled").value;e==="true"?this.onChange(!0):e==="false"?this.onChange(!1):this.onChange(null)})),this.option().required&&this.validators.push(W.required)}writeValue(e){e===!0?this.formGroup.setValue({enabled:"true"}):e===!1&&this.formGroup.setValue({enabled:"false"})}registerOnChange(e){this.onChange=e}registerOnTouched(e){}validate(e){for(let t of this.validators){let n=t(e);if(n)return n}return null}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=b({type:i,selectors:[["app-boolean-option"]],inputs:{option:[1,"option"]},standalone:!0,features:[Z([{provide:tt,useExisting:R(()=>i),multi:!0},{provide:et,useExisting:R(()=>i),multi:!0}]),L],decls:1,vars:1,consts:[["err",""],[1,"label"],[1,"meta"],[1,"item"],[1,"hint"],[3,"controlName"],[3,"formGroup"],["type","radio","formControlName","enabled","value","true"],["type","radio","formControlName","enabled","value","false"]],template:function(t,n){if(t&1&&d(0,Ai,16,9,"div",1),t&2){let s;p((s=n.option())?0:-1,s)}},dependencies:[T,F,U,Ft,V,it,ot,at,st,$],styles:[".meta[_ngcontent-%COMP%]{position:absolute;top:0;right:0;display:flex}.meta[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{flex:none;background-color:#eee;font-weight:400;font-family:Roboto Mono,monospace;color:#000000a7;padding-left:2px;padding-right:2px;margin-left:10px}.meta.error[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{background-color:#dc143c;color:#fff}.members[_ngcontent-%COMP%], .entries[_ngcontent-%COMP%]{margin-top:5px;padding-top:5px;padding-left:10px;border-left:1px solid rgba(0,0,0,.1)}.meta[_ngcontent-%COMP%]   .item.menu[_ngcontent-%COMP%]:hover{background-color:#5787b1;color:#fff;cursor:pointer}",".ng-invalid[_nghost-%COMP%]:not(.ng-pristine)     input{border-color:#dc143c!important}.label[_ngcontent-%COMP%]{position:relative}"],changeDetection:0})}};function Vi(i,e){i&1&&(o(0,"span",4),r(1,"(optional)"),a())}function Fi(i,e){i&1&&(o(0,"ya-help"),r(1),a()),i&2&&(l(),C(" ",e," "))}function Pi(i,e){if(i&1&&(o(0,"div",1)(1,"div",2),f(2,"async"),o(3,"div",3),r(4,"float"),a()(),r(5),d(6,Vi,2,0,"span",4)(7,Fi,2,1,"ya-help"),u(8,"ya-errors",5,0)(10,"input",6),a()),i&2){let t,n=e,s=D(9),_=c();l(),Y("error",k(2,7,s.invalid$)),l(4),C(" ",n.name," "),l(),p(n.required?-1:6),l(),p((t=n.description)?7:-1,t),l(),m("controlName",n.name),l(2),m("formControl",_.formControl)}}var re=class i{constructor(){this.option=B.required();this.formControl=new P(null);this.validators=[];this.onChange=e=>{};this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.formControl.valueChanges.subscribe(e=>{e===null||e===""?this.onChange(null):this.onChange(e)})),this.option().required&&this.validators.push(W.required),this.validators.push(te.requireFloat)}writeValue(e){this.formControl.setValue(e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){}validate(e){for(let t of this.validators){let n=t(e);if(n)return n}return null}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=b({type:i,selectors:[["app-float-option"]],inputs:{option:[1,"option"]},standalone:!0,features:[Z([{provide:tt,useExisting:R(()=>i),multi:!0},{provide:et,useExisting:R(()=>i),multi:!0}]),L],decls:1,vars:1,consts:[["err",""],[1,"label"],[1,"meta"],[1,"item"],[1,"hint"],[3,"controlName"],["type","text","autocomplete","off",3,"formControl"]],template:function(t,n){if(t&1&&d(0,Pi,11,9,"div",1),t&2){let s;p((s=n.option())?0:-1,s)}},dependencies:[T,F,U,V,nt,st,$],styles:[".meta[_ngcontent-%COMP%]{position:absolute;top:0;right:0;display:flex}.meta[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{flex:none;background-color:#eee;font-weight:400;font-family:Roboto Mono,monospace;color:#000000a7;padding-left:2px;padding-right:2px;margin-left:10px}.meta.error[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{background-color:#dc143c;color:#fff}.members[_ngcontent-%COMP%], .entries[_ngcontent-%COMP%]{margin-top:5px;padding-top:5px;padding-left:10px;border-left:1px solid rgba(0,0,0,.1)}.meta[_ngcontent-%COMP%]   .item.menu[_ngcontent-%COMP%]:hover{background-color:#5787b1;color:#fff;cursor:pointer}",".ng-invalid[_nghost-%COMP%]:not(.ng-pristine)     input{border-color:#dc143c!important}.label[_ngcontent-%COMP%]{position:relative}"],changeDetection:0})}};function Ni(i,e){i&1&&(o(0,"span",4),r(1,"(optional)"),a())}function Ri(i,e){i&1&&(o(0,"ya-help"),r(1),a()),i&2&&(l(),C(" ",e," "))}function Bi(i,e){if(i&1&&(o(0,"div",1)(1,"div",2),f(2,"async"),o(3,"div",3),r(4,"integer"),a()(),r(5),d(6,Ni,2,0,"span",4)(7,Ri,2,1,"ya-help"),u(8,"ya-errors",5,0)(10,"input",6),a()),i&2){let t,n=e,s=D(9),_=c();l(),Y("error",k(2,7,s.invalid$)),l(4),C(" ",n.name," "),l(),p(n.required?-1:6),l(),p((t=n.description)?7:-1,t),l(),m("controlName",n.name),l(2),m("formControl",_.formControl)}}var le=class i{constructor(){this.option=B.required();this.formControl=new P(null);this.validators=[];this.onChange=e=>{};this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.formControl.valueChanges.subscribe(e=>{e===null||e===""?this.onChange(null):this.onChange(e)})),this.option().required&&this.validators.push(W.required),this.validators.push(te.requireInteger)}writeValue(e){this.formControl.setValue(e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){}validate(e){for(let t of this.validators){let n=t(e);if(n)return n}return null}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=b({type:i,selectors:[["app-integer-option"]],inputs:{option:[1,"option"]},standalone:!0,features:[Z([{provide:tt,useExisting:R(()=>i),multi:!0},{provide:et,useExisting:R(()=>i),multi:!0}]),L],decls:1,vars:1,consts:[["err",""],[1,"label"],[1,"meta"],[1,"item"],[1,"hint"],[3,"controlName"],["type","text","autocomplete","off",3,"formControl"]],template:function(t,n){if(t&1&&d(0,Bi,11,9,"div",1),t&2){let s;p((s=n.option())?0:-1,s)}},dependencies:[T,F,U,V,nt,st,$],styles:[".meta[_ngcontent-%COMP%]{position:absolute;top:0;right:0;display:flex}.meta[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{flex:none;background-color:#eee;font-weight:400;font-family:Roboto Mono,monospace;color:#000000a7;padding-left:2px;padding-right:2px;margin-left:10px}.meta.error[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{background-color:#dc143c;color:#fff}.members[_ngcontent-%COMP%], .entries[_ngcontent-%COMP%]{margin-top:5px;padding-top:5px;padding-left:10px;border-left:1px solid rgba(0,0,0,.1)}.meta[_ngcontent-%COMP%]   .item.menu[_ngcontent-%COMP%]:hover{background-color:#5787b1;color:#fff;cursor:pointer}",".ng-invalid[_nghost-%COMP%]:not(.ng-pristine)     input{border-color:#dc143c!important}.label[_ngcontent-%COMP%]{position:relative}"],changeDetection:0})}};function $i(i,e){i&1&&(o(0,"span",4),r(1,"(optional)"),a())}function ji(i,e){i&1&&(o(0,"ya-help"),r(1),a()),i&2&&(l(),C(" ",e," "))}function qi(i,e){if(i&1&&(o(0,"div",1)(1,"div",2),f(2,"async"),o(3,"div",3),r(4,"string"),a()(),r(5),d(6,$i,2,0,"span",4)(7,ji,2,1,"ya-help"),u(8,"ya-errors",5,0)(10,"input",6),a()),i&2){let t,n=e,s=D(9),_=c();l(),Y("error",k(2,7,s.invalid$)),l(4),C(" ",n.name," "),l(),p(n.required?-1:6),l(),p((t=n.description)?7:-1,t),l(),m("controlName",n.name),l(2),m("formControl",_.formControl)}}var se=class i{constructor(){this.option=B.required();this.formControl=new P(null);this.validators=[];this.onChange=e=>{};this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.formControl.valueChanges.subscribe(()=>{let e=this.formControl.value;this.onChange(e)})),this.option().required&&this.validators.push(W.required)}writeValue(e){this.formControl.setValue(e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){}validate(e){for(let t of this.validators){let n=t(e);if(n)return n}return null}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=b({type:i,selectors:[["app-string-option"]],inputs:{option:[1,"option"]},standalone:!0,features:[Z([{provide:tt,useExisting:R(()=>i),multi:!0},{provide:et,useExisting:R(()=>i),multi:!0}]),L],decls:1,vars:1,consts:[["err",""],[1,"label"],[1,"meta"],[1,"item"],[1,"hint"],[3,"controlName"],["type","text","autocomplete","off",3,"formControl"]],template:function(t,n){if(t&1&&d(0,qi,11,9,"div",1),t&2){let s;p((s=n.option())?0:-1,s)}},dependencies:[T,F,U,V,nt,st,$],styles:[".meta[_ngcontent-%COMP%]{position:absolute;top:0;right:0;display:flex}.meta[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{flex:none;background-color:#eee;font-weight:400;font-family:Roboto Mono,monospace;color:#000000a7;padding-left:2px;padding-right:2px;margin-left:10px}.meta.error[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{background-color:#dc143c;color:#fff}.members[_ngcontent-%COMP%], .entries[_ngcontent-%COMP%]{margin-top:5px;padding-top:5px;padding-left:10px;border-left:1px solid rgba(0,0,0,.1)}.meta[_ngcontent-%COMP%]   .item.menu[_ngcontent-%COMP%]:hover{background-color:#5787b1;color:#fff;cursor:pointer}",".ng-invalid[_nghost-%COMP%]:not(.ng-pristine)     input{border-color:#dc143c!important}.label[_ngcontent-%COMP%]{position:relative}"],changeDetection:0})}};function Gi(i,e){i&1&&u(0,"hr",5)}function Hi(i,e){if(i&1&&u(0,"app-boolean-option",6),i&2){let t=c().$implicit;m("formControlName",t.name)("option",t)}}function Yi(i,e){if(i&1&&u(0,"app-float-option",6),i&2){let t=c().$implicit;m("formControlName",t.name)("option",t)}}function Ui(i,e){if(i&1&&u(0,"app-integer-option",6),i&2){let t=c().$implicit;m("formControlName",t.name)("option",t)}}function Wi(i,e){if(i&1&&u(0,"app-string-option",6),i&2){let t=c().$implicit;m("formControlName",t.name)("option",t)}}function Ki(i,e){if(i&1&&d(0,Gi,1,0,"hr",5)(1,Hi,1,2,"app-boolean-option",6)(2,Yi,1,2,"app-float-option",6)(3,Ui,1,2,"app-integer-option",6)(4,Wi,1,2,"app-string-option",6),i&2){let t,n=e.$implicit,s=e.$index;p(s!==0?0:-1),l(),p((t=n.type)==="BOOLEAN"?1:t==="FLOAT"?2:t==="INTEGER"?3:t==="STRING"?4:-1)}}var ce=class i{constructor(e,t){this.dialogRef=e;this.data=t;this.form=new vt({});for(let n of this.options){let s=new P(n.default??null);this.form.addControl(n.name,s)}}get options(){return this.data.action.spec?.options||[]}sendRequest(){let e=this.form.value;this.dialogRef.close(e)}static{this.\u0275fac=function(t){return new(t||i)(g(Pt),g(Nt))}}static{this.\u0275cmp=b({type:i,selectors:[["ng-component"]],standalone:!0,features:[L],decls:11,vars:3,consts:[["mat-dialog-title",""],[1,"ya-form",3,"formGroup"],["align","end"],["mat-dialog-close",""],["appearance","primary",3,"click","disabled"],[1,"half-break"],[3,"formControlName","option"]],template:function(t,n){t&1&&(o(0,"h2",0),r(1),a(),o(2,"mat-dialog-content")(3,"form",1),I(4,Ki,5,2,null,null,w),a()(),o(6,"mat-dialog-actions",2)(7,"ya-button",3),r(8,"CANCEL"),a(),o(9,"ya-button",4),h("click",function(){return n.sendRequest()}),r(10," SUBMIT "),a()()),t&2&&(l(),E(n.data.action.label),l(2),m("formGroup",n.form),l(),O(n.options),l(5),m("disabled",!n.form.valid))},dependencies:[ae,re,le,T,xt,V,it,ot,at,Bt,$t,qt,jt,lt,se],encapsulation:2,changeDetection:0})}};var mt=class i{constructor(){this.dialog=Ot(Rt);this.yamcs=Ot(j);this.messageService=Ot(K);this.snackBar=Ot(Oe)}runAction(e,t){t.spec?this.dialog.open(ce,{data:{action:t},width:"600px"}).afterClosed().subscribe(n=>{n&&this.submitRequest(e,t,n)}):this.submitRequest(e,t)}submitRequest(e,t,n){this.snackBar.open(`Running '${t.label}' ...`,void 0,{horizontalPosition:"end"}),this.yamcs.yamcsClient.runLinkAction(this.yamcs.instance,e,t.id,n).then(()=>{this.snackBar.open(`'${t.label}' successful`,void 0,{duration:3e3,horizontalPosition:"end"})}).catch(s=>{this.messageService.showError(s),this.snackBar.open(`'${t.label}' failed`,void 0,{duration:3e3,horizontalPosition:"end"})})}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=xe({token:i,factory:i.\u0275fac,providedIn:"root"})}};function zi(i,e){if(i&1&&(r(0),u(1,"br")),i&2){let t=e.$implicit;C(" ",t||"-"," ")}}function Xi(i,e){if(i&1&&I(0,zi,2,1,"br",null,w),i&2){let t=c();O(t)}}function Ji(i,e){i&1&&r(0," - ")}function Qi(i,e){if(i&1&&d(0,Xi,2,0)(1,Ji,1,0),i&2){let t=e;p(t.length?0:-1),l(),p(t.length?-1:1)}}function Zi(i,e){if(i&1&&(o(0,"div",1),r(1),a(),o(2,"div",2),d(3,Qi,2,2),a()),i&2){let t,n=e.$implicit,s=c(2);l(),E(n.key),l(2),p((t=s.getEntriesForValue(n.value))?3:-1,t)}}function tn(i,e){if(i&1&&(u(0,"br")(1,"mat-divider"),I(2,Zi,4,2,null,null,w),f(4,"keyvalue")),i&2){let t=c();l(2),O(k(4,0,t.link.extra))}}function en(i,e){if(i&1){let t=S();o(0,"ya-button",8),h("click",function(){v(t);let s=c(2);return x(s.enableLink())}),r(1,"ENABLE LINK"),a()}}function nn(i,e){if(i&1){let t=S();o(0,"ya-button",8),h("click",function(){v(t);let s=c(2);return x(s.disableLink())}),r(1,"DISABLE LINK"),a()}}function on(i,e){if(i&1&&(o(0,"mat-icon"),r(1," check "),a()),i&2){let t=c().$implicit;pt("visibility",t.checked?"visible":"hidden")}}function an(i,e){i&1&&r(0," ... ")}function rn(i,e){if(i&1){let t=S();o(0,"button",11),h("click",function(){let s=v(t).$implicit,_=c(4);return x(_.runAction(s))}),d(1,on,2,2,"mat-icon",12),r(2),d(3,an,1,0),a()}if(i&2){let t=e.$implicit;m("disabled",!t.enabled),l(),p(t.style==="CHECK_BOX"?1:-1),l(),C(" ",t.label," "),l(),p(t.spec?3:-1)}}function ln(i,e){if(i&1&&(u(0,"mat-divider"),I(1,rn,4,4,"button",10,w)),i&2){let t=c(3);l(),O(t.link.actions)}}function sn(i,e){if(i&1){let t=S();o(0,"button",9),h("click",function(){v(t);let s=c(2);return x(s.resetCounters())}),r(1,"Reset counters"),a(),d(2,ln,3,0)}if(i&2){let t=c(2);l(2),p(t.link.actions?2:-1)}}function cn(i,e){if(i&1&&(o(0,"div",4),d(1,en,2,0,"ya-button")(2,nn,2,0,"ya-button"),o(3,"ya-button",5),r(4,"MORE"),a(),o(5,"mat-menu",6,0),d(7,sn,3,1,"ng-template",7),a()()),i&2){let t=D(6),n=c();l(),p(n.link.status==="DISABLED"?1:-1),l(),p(n.link.status!=="DISABLED"?2:-1),l(),m("matMenuTriggerFor",t),l(2),m("overlapTrigger",!1)}}var me=class i{constructor(e,t,n,s){this.authService=e;this.yamcs=t;this.messageService=n;this.linkService=s}mayControlLinks(){return this.authService.getUser().hasSystemPrivilege("ControlLinks")}enableLink(){this.yamcs.yamcsClient.enableLink(this.link.instance,this.link.name).catch(e=>this.messageService.showError(e))}disableLink(){this.yamcs.yamcsClient.disableLink(this.link.instance,this.link.name).catch(e=>this.messageService.showError(e))}resetCounters(){this.yamcs.yamcsClient.resetLinkCounters(this.link.instance,this.link.name).catch(e=>this.messageService.showError(e))}runAction(e){this.linkService.runAction(this.link.name,e)}getEntriesForValue(e){if(e==null)return[];let t=[];if(Array.isArray(e))for(let n=0;n<e.length;n++)typeof e[n]=="object"?t.push(""+JSON.stringify(e[n])):t.push(""+e[n]);else t.push(""+e);return t}static{this.\u0275fac=function(t){return new(t||i)(g(Tt),g(j),g(K),g(mt))}}static{this.\u0275cmp=b({type:i,selectors:[["app-link-detail"]],inputs:{link:"link"},standalone:!0,features:[L],decls:31,vars:13,consts:[["moreActions",""],[1,"block-title"],[1,"block"],[3,"link"],[1,"action-bar"],["dropdown","true",3,"matMenuTriggerFor"],["yPosition","below",1,"ya-menu",3,"overlapTrigger"],["matMenuContent",""],[3,"click"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"disabled"],["mat-menu-item","",3,"click","disabled"],[3,"visibility"]],template:function(t,n){t&1&&(o(0,"div",1),r(1,"Name"),a(),o(2,"div",2),r(3),a(),o(4,"div",1),r(5,"Class"),a(),o(6,"div",2),r(7),a(),u(8,"br")(9,"mat-divider"),o(10,"div",1),r(11,"Status"),a(),o(12,"div",2),u(13,"app-link-status",3),r(14),a(),o(15,"div",1),r(16,"In count"),a(),o(17,"div",2),r(18),f(19,"number"),a(),o(20,"div",1),r(21,"Out count"),a(),o(22,"div",2),r(23),f(24,"number"),a(),o(25,"div",1),r(26,"Detail"),a(),o(27,"div",2),r(28),a(),d(29,tn,5,2)(30,cn,8,4,"div",4)),t&2&&(l(3),C(" ",n.link.name,`
`),l(4),C(" ",n.link.type,`
`),l(6),m("link",n.link),l(),C(" ",n.link.status,`
`),l(4),C(" ",k(19,9,n.link.dataInCount),`
`),l(5),C(" ",k(24,11,n.link.dataOutCount),`
`),l(5),C(" ",n.link.detailedStatus||"-",`
`),l(),p(n.link.extra?29:-1),l(),p(n.mayControlLinks()?30:-1))},dependencies:[ct,T,Ct,At,kt,rt,bt,yt,St,Lt,lt],encapsulation:2,changeDetection:0})}};var mn=i=>["/links",i],pn=i=>({c:i}),dn=()=>[];function un(i,e){if(i&1){let t=S();o(0,"ya-page-button",39),h("click",function(){v(t);let s=c();return x(s.enableSelectedLinks())}),r(1," Enable "),a()}if(i&2){let t=c();m("disabled",!t.allowGroupEnable())}}function _n(i,e){if(i&1){let t=S();o(0,"ya-page-button",40),h("click",function(){v(t);let s=c();return x(s.disableSelectedLinks())}),r(1," Disable "),a()}if(i&2){let t=c();m("disabled",!t.allowGroupDisable())}}function Cn(i,e){if(i&1&&(o(0,"ya-page-button",4),r(1," More "),a()),i&2){let t=c(),n=D(7);m("disabled",t.selection.isEmpty())("matMenuTriggerFor",n)}}function fn(i,e){if(i&1&&(o(0,"mat-icon"),r(1," check "),a()),i&2){let t=c().$implicit;pt("visibility",t.checked?"visible":"hidden")}}function gn(i,e){i&1&&r(0," ... ")}function hn(i,e){if(i&1){let t=S();o(0,"button",43),h("click",function(){let s=v(t).$implicit,_=c(2),y=c(2);return x(y.runAction(_.link.name,s))}),d(1,fn,2,2,"mat-icon",44),r(2),d(3,gn,1,0),a()}if(i&2){let t=e.$implicit;m("disabled",!t.enabled),l(),p(t.style==="CHECK_BOX"?1:-1),l(),C(" ",t.label," "),l(),p(t.spec?3:-1)}}function vn(i,e){if(i&1&&(u(0,"mat-divider"),I(1,hn,4,4,"button",42,w)),i&2){let t=c();l(),O(t.link.actions)}}function xn(i,e){i&1&&d(0,vn,3,0),i&2&&p(e.link.actions?0:-1)}function kn(i,e){if(i&1){let t=S();o(0,"button",41),h("click",function(){v(t);let s=c();return x(s.resetCountersForSelectedLinks())}),r(1,"Reset counters"),a(),d(2,xn,1,1),f(3,"async")}if(i&2){let t,n=c();l(2),p((t=k(3,1,n.detailLink$))?2:-1,t)}}function yn(i,e){i&1&&(o(0,"ya-detail-toolbar"),r(1,"Link Detail"),a(),o(2,"div",45),u(3,"app-link-detail",46),a()),i&2&&(l(3),m("link",e.link))}function Sn(i,e){if(i&1&&(o(0,"div",45),r(1),a()),i&2){let t=c(2);l(),C("",t.selection.selected.length," links selected")}}function bn(i,e){if(i&1&&(o(0,"ya-detail-toolbar"),r(1,"Select a link"),a(),d(2,Sn,2,1,"div",45)),i&2){let t=c();l(2),p(t.selection.hasValue()?2:-1)}}function Ln(i,e){if(i&1){let t=S();o(0,"th",47)(1,"input",48),h("change",function(s){v(t);let _=c();return x(s?_.masterToggle():null)}),a()()}if(i&2){let t=c();l(),m("checked",t.selection.hasValue()&&t.isAllSelected())}}function Tn(i,e){if(i&1){let t=S();o(0,"td",49)(1,"input",50),h("click",function(s){return v(t),x(s.stopPropagation())})("change",function(s){let _=v(t).$implicit,y=c();return x(s?y.selection.toggle(_):null)}),a()()}if(i&2){let t=e.$implicit,n=c();l(),m("checked",n.selection.isSelected(t))}}function En(i,e){i&1&&(o(0,"th",51),r(1,"Name"),a())}function Dn(i,e){if(i&1&&(o(0,"div",53),u(1,"app-link-status",57),a()),i&2){let t=c().$implicit;l(),m("link",t.link)("parentLink",t.parentLink)}}function wn(i,e){if(i&1){let t=S();o(0,"ya-icon-action",58),h("click",function(s){v(t);let _=c().$implicit,y=c();return x(y.expandItem(s,_))}),a()}if(i&2){let t=c().$implicit;m("icon",t.expanded?"expand_more":"chevron_right")}}function In(i,e){if(i&1&&(o(0,"td",52),d(1,Dn,2,2,"div",53),o(2,"a",54),u(3,"ya-highlight",55),a(),d(4,wn,1,1,"ya-icon-action",56),a()),i&2){let t=e.$implicit,n=c();l(),p(t.link.parentName?1:-1),l(),m("routerLink",z(6,mn,t.link.name))("queryParams",z(8,pn,n.yamcs.context)),l(),m("text",t.link.name)("term",n.filterControl.value),l(),p(t.hasChildren?4:-1)}}function On(i,e){i&1&&(o(0,"th",51),r(1,"Class"),a())}function Mn(i,e){if(i&1&&(o(0,"td",59),u(1,"ya-highlight",55),a()),i&2){let t=e.$implicit,n=c();l(),m("text",t.link.type)("term",n.filterControl.value)}}function An(i,e){i&1&&u(0,"th",60)}function Vn(i,e){if(i&1&&u(0,"app-link-status",46),i&2){let t=c().$implicit;m("link",t.link)}}function Fn(i,e){if(i&1&&(o(0,"td",61),d(1,Vn,1,1,"app-link-status",46),a()),i&2){let t=e.$implicit;l(),p(t.link.parentName?-1:1)}}function Pn(i,e){i&1&&(o(0,"th",51),r(1,"Detail"),a())}function Nn(i,e){if(i&1&&(o(0,"td",59),r(1),a()),i&2){let t=e.$implicit;l(),C(" ",t.link.detailedStatus||"-"," ")}}function Rn(i,e){i&1&&(o(0,"th",62),r(1,"In"),a())}function Bn(i,e){if(i&1&&(o(0,"td",63),r(1),f(2,"number"),a()),i&2){let t=e.$implicit;l(),C(" ",k(2,1,t.link.dataInCount)," ")}}function $n(i,e){i&1&&(o(0,"th",62),r(1,"Out"),a())}function jn(i,e){if(i&1&&(o(0,"td",63),r(1),f(2,"number"),a()),i&2){let t=e.$implicit;l(),C(" ",k(2,1,t.link.dataOutCount)," ")}}function qn(i,e){i&1&&u(0,"th",64)}function Gn(i,e){if(i&1&&(o(0,"mat-icon"),r(1," check "),a()),i&2){let t=c().$implicit;pt("visibility",t.checked?"visible":"hidden")}}function Hn(i,e){i&1&&r(0," ... ")}function Yn(i,e){if(i&1){let t=S();o(0,"button",43),h("click",function(){let s=v(t).$implicit,_=c(3).$implicit,y=c();return x(y.runAction(_.link.name,s))}),d(1,Gn,2,2,"mat-icon",44),r(2),d(3,Hn,1,0),a()}if(i&2){let t=e.$implicit;m("disabled",!t.enabled),l(),p(t.style==="CHECK_BOX"?1:-1),l(),C(" ",t.label," "),l(),p(t.spec?3:-1)}}function Un(i,e){if(i&1&&(u(0,"mat-divider"),I(1,Yn,4,4,"button",42,w)),i&2){let t=c(2).$implicit;l(),O(t.link.actions||Mt(0,dn))}}function Wn(i,e){if(i&1){let t=S();o(0,"ya-more")(1,"button",43),h("click",function(){v(t);let s=c().$implicit,_=c();return x(_.enableLink(s.link.name))}),r(2," Enable link "),a(),o(3,"button",43),h("click",function(){v(t);let s=c().$implicit,_=c();return x(_.disableLink(s.link.name))}),r(4," Disable link "),a(),u(5,"mat-divider"),o(6,"button",41),h("click",function(){v(t);let s=c().$implicit,_=c();return x(_.resetCounters(s.link.name))}),r(7,"Reset counters"),a(),d(8,Un,3,1),a()}if(i&2){let t=c().$implicit;l(),m("disabled",t.link.status!=="DISABLED"),l(2),m("disabled",t.link.status==="DISABLED"),l(5),p(t.link.actions?8:-1)}}function Kn(i,e){if(i&1&&(o(0,"td",59),d(1,Wn,9,3,"ya-more"),a()),i&2){let t=c();l(),p(t.mayControlLinks()?1:-1)}}function zn(i,e){i&1&&u(0,"tr",65)}function Xn(i,e){if(i&1){let t=S();o(0,"tr",66),h("click",function(){let s=v(t).$implicit,_=c();return x(_.toggleOne(s))}),a()}if(i&2){let t=e.$implicit,n=c();Y("selected",n.selection.isSelected(t))("disabled",t.link.status==="DISABLED")}}var pe=class i{constructor(e,t,n,s,_,y,_e,_t){this.yamcs=e;this.authService=t;this.changeDetection=s;this.route=_;this.router=y;this.messageService=_e;this.linkService=_t;this.filterControl=new Ee;this.detailLink$=new Q(null);this.columns=[{id:"select",label:"",alwaysVisible:!0},{id:"status",label:"",alwaysVisible:!0},{id:"name",label:"Name",alwaysVisible:!0},{id:"className",label:"Class name"},{id:"in",label:"In count",visible:!0},{id:"out",label:"Out count",visible:!0},{id:"detailedStatus",label:"Detail",visible:!0},{id:"actions",label:"",alwaysVisible:!0}];this.dataSource=new Zt;this.selection=new we(!0,[]);this.itemsByName={};this.tableTrackerFn=(e,t)=>t.link.name;n.setTitle("Links"),this.dataSource.filterPredicate=(N,It)=>N.link.name.toLowerCase().indexOf(It)>=0||N.link.type.toLowerCase().indexOf(It)>=0,this.selectionSubscription=this.selection.changed.subscribe(()=>{let N=this.selection.selected;N.length===1?this.detailLink$.next(N[0]):this.detailLink$.next(null)})}ngAfterViewInit(){let e=this.route.snapshot.queryParamMap;e.has("filter")&&(this.filterControl.setValue(e.get("filter")),this.dataSource.filter=e.get("filter").toLowerCase()),this.filterControl.valueChanges.subscribe(()=>{this.updateURL();let t=this.filterControl.value||"";this.dataSource.filter=t.toLowerCase();for(let n of this.selection.selected)this.dataSource.filteredData.indexOf(n)===-1&&this.selection.deselect(n)}),this.yamcs.yamcsClient.getLinks(this.yamcs.instance).then(t=>{for(let n of t){let s={link:n,hasChildren:!1,expanded:!1};this.itemsByName[n.name]=s}for(let n of t)if(n.parentName){let s=this.itemsByName[n.parentName];s.hasChildren=!0,this.itemsByName[n.name].parentLink=s.link}this.updateDataSource(),this.linkSubscription=this.yamcs.yamcsClient.createLinkSubscription({instance:this.yamcs.instance},n=>{this.processLinkEvent(n)})})}expandItem(e,t){if(t.expanded=!t.expanded,!t.expanded)for(let n of this.selection.selected)n.parentLink&&n.parentLink.name===t.link.name&&this.selection.deselect(n);this.updateDataSource(),e.stopPropagation()}enableLink(e){this.yamcs.yamcsClient.enableLink(this.yamcs.instance,e).catch(t=>this.messageService.showError(t))}disableLink(e){this.yamcs.yamcsClient.disableLink(this.yamcs.instance,e).catch(t=>this.messageService.showError(t))}resetCounters(e){this.yamcs.yamcsClient.resetLinkCounters(this.yamcs.instance,e).catch(t=>this.messageService.showError(t))}runAction(e,t){this.linkService.runAction(e,t)}mayControlLinks(){return this.authService.getUser().hasSystemPrivilege("ControlLinks")}processLinkEvent(e){let t=[];for(let s of e.links||[]){t.push(s.name);let _=this.detailLink$.value;if(_&&_.link.name===s.name){_.link=s;for(let y of Object.values(this.itemsByName))y.link.parentName===s.name&&(y.parentLink=s);this.detailLink$.next(he({},_))}if(s.name in this.itemsByName)this.itemsByName[s.name].link=s;else{let y={link:s,hasChildren:!1,expanded:!1};this.itemsByName[s.name]=y}for(let y of Object.values(this.itemsByName))y.parentLink&&y.parentLink.name===s.name&&(y.parentLink=s),s.parentName&&s.parentName===y.link.name&&(y.hasChildren=!0)}let n=[];for(let s in this.itemsByName)if(t.indexOf(s)===-1){let _=this.itemsByName[s];this.selection.deselect(_),n.push(s)}for(let s of n)delete this.itemsByName[s];this.updateDataSource(),this.changeDetection.detectChanges()}updateDataSource(){let e=Object.values(this.itemsByName).filter(t=>{let n=t.link.parentName;return n?this.itemsByName[n].expanded:!0});e.sort((t,n)=>{let s=t.link.name.split("."),_=n.link.name.split(".");for(let y=0;y<Math.max(s.length,_.length);y++){let _e=y<s.length?s[y]:"",_t=y<_.length?_[y]:"",N=_e.localeCompare(_t);if(N!==0)return N}return 0}),this.dataSource.data=e}allowGroupEnable(){for(let e of this.selection.selected)if(e.link.disabled)return!0;return!1}allowGroupDisable(){for(let e of this.selection.selected)if(!e.link.disabled)return!0;return!1}isAllSelected(){let e=this.selection.selected.length,t=this.dataSource.filteredData.length;return e===t&&t>0}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.filteredData.forEach(e=>this.selection.select(e))}toggleOne(e){(!this.selection.isSelected(e)||this.selection.selected.length>1)&&this.selection.clear(),this.selection.toggle(e)}enableSelectedLinks(){for(let e of this.selection.selected)this.enableLink(e.link.name)}disableSelectedLinks(){for(let e of this.selection.selected)this.disableLink(e.link.name)}resetCountersForSelectedLinks(){for(let e of this.selection.selected)this.resetCounters(e.link.name)}updateURL(){let e=this.filterControl.value;this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:e||null},queryParamsHandling:"merge"})}selectNext(){let e=this.dataSource.filteredData,t=0;if(this.selection.hasValue()){let n=this.selection.selected[this.selection.selected.length-1];e.indexOf(n)!==-1&&(t=Math.min(e.indexOf(n)+1,e.length-1))}this.selection.clear(),this.selection.select(e[t])}selectPrevious(){let e=this.dataSource.filteredData,t=0;if(this.selection.hasValue()){let n=this.selection.selected[0];e.indexOf(n)!==-1&&(t=Math.max(e.indexOf(n)-1,0))}this.selection.clear(),this.selection.select(e[t])}applySelection(){if(this.selection.hasValue()&&this.selection.selected.length===1){let e=this.selection.selected[0];this.router.navigate(["/links",e.link.name],{queryParams:{c:this.yamcs.context}})}}ngOnDestroy(){this.selectionSubscription?.unsubscribe(),this.linkSubscription?.cancel()}static{this.\u0275fac=function(t){return new(t||i)(g(j),g(Tt),g(ft),g(be),g(gt),g(Vt),g(K),g(mt))}}static{this.\u0275cmp=b({type:i,selectors:[["ng-component"]],standalone:!0,features:[L],decls:62,vars:21,consts:[["moreActions",""],["columnChooser",""],["icon","link",3,"disabled"],["icon","link_off",3,"disabled"],["dropdown","true",3,"disabled","matMenuTriggerFor"],["yPosition","below",1,"ya-menu",3,"overlapTrigger"],["matMenuContent",""],[1,"table-wrapper"],[1,"panel-content"],[1,"filter-bar",2,"margin-top","16px"],["placeholder","Filter links",3,"onArrowDown","onArrowUp","onEnter","formControl"],["preferenceKey","links",3,"columns"],["mat-table","",1,"ya-data-table","expand",3,"dataSource","trackBy"],["cdkColumnDef","select"],["mat-header-cell","","class","checkbox",4,"cdkHeaderCellDef"],["mat-cell","","class","checkbox",4,"cdkCellDef"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","style","white-space: nowrap",4,"matCellDef"],["matColumnDef","className"],["mat-cell","",4,"matCellDef"],["matColumnDef","status"],["mat-header-cell","","class","status",4,"matHeaderCellDef"],["mat-cell","","class","status","style","line-height: 0",4,"matCellDef"],["matColumnDef","detailedStatus"],["matColumnDef","in"],["mat-header-cell","","style","text-align: center",4,"matHeaderCellDef"],["mat-cell","","style","text-align: center",4,"matCellDef"],["matColumnDef","out"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"selected","disabled","click",4,"matRowDef","matRowDefColumns"],[1,"legend"],[1,"legend-item"],["color","rgba(0, 100, 0)",3,"fade"],["color","rgba(0, 255, 0)",3,"fade"],["color","red",3,"fade"],["color","#aaa",3,"fade"],["icon","link",3,"click","disabled"],["icon","link_off",3,"click","disabled"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"disabled"],["mat-menu-item","",3,"click","disabled"],[3,"visibility"],[2,"padding","0 16px"],[3,"link"],["mat-header-cell","",1,"checkbox"],["type","checkbox",3,"change","checked"],["mat-cell","",1,"checkbox"],["type","checkbox",3,"click","change","checked"],["mat-header-cell",""],["mat-cell","",2,"white-space","nowrap"],[2,"display","inline-block","margin-right","10px"],[3,"routerLink","queryParams"],[3,"text","term"],[3,"icon"],[3,"link","parentLink"],[3,"click","icon"],["mat-cell",""],["mat-header-cell","",1,"status"],["mat-cell","",1,"status",2,"line-height","0"],["mat-header-cell","",2,"text-align","center"],["mat-cell","",2,"text-align","center"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(t,n){if(t&1){let s=S();o(0,"app-instance-page")(1,"app-instance-toolbar"),r(2," Links \xA0\xA0\xA0 "),d(3,un,2,1,"ya-page-button",2)(4,_n,2,1,"ya-page-button",3)(5,Cn,2,2,"ya-page-button",4),o(6,"mat-menu",5,0),d(8,kn,4,3,"ng-template",6),a()(),o(9,"ya-detail-pane"),d(10,yn,4,1),f(11,"async"),d(12,bn,3,1),a(),o(13,"div",7)(14,"div",8),u(15,"app-links-page-tabs"),o(16,"div",9)(17,"ya-search-filter",10),h("onArrowDown",function(){return v(s),x(n.selectNext())})("onArrowUp",function(){return v(s),x(n.selectPrevious())})("onEnter",function(){return v(s),x(n.applySelection())}),a(),u(18,"ya-column-chooser",11,1),a(),o(20,"table",12),M(21,13),d(22,Ln,2,1,"th",14)(23,Tn,2,1,"td",15),A(),M(24,16),d(25,En,2,0,"th",17)(26,In,5,10,"td",18),A(),M(27,19),d(28,On,2,0,"th",17)(29,Mn,2,2,"td",20),A(),M(30,21),d(31,An,1,0,"th",22)(32,Fn,2,1,"td",23),A(),M(33,24),d(34,Pn,2,0,"th",17)(35,Nn,2,1,"td",20),A(),M(36,25),d(37,Rn,2,0,"th",26)(38,Bn,3,3,"td",27),A(),M(39,28),d(40,$n,2,0,"th",26)(41,jn,3,3,"td",27),A(),M(42,29),d(43,qn,1,0,"th",30)(44,Kn,2,1,"td",20),A(),d(45,zn,1,0,"tr",31),f(46,"async"),d(47,Xn,1,4,"tr",32),f(48,"async"),a(),o(49,"div",33)(50,"div",34),u(51,"ya-led",35),r(52," OK "),a(),o(53,"div",34),u(54,"ya-led",36),r(55," OK, activity "),a(),o(56,"div",34),u(57,"ya-led",37),r(58," Error "),a(),o(59,"div",34),u(60,"ya-led",38),r(61," Disabled "),a()()()()()}if(t&2){let s,_=D(19);l(3),p(n.mayControlLinks()?3:-1),l(),p(n.mayControlLinks()?4:-1),l(),p(n.mayControlLinks()?5:-1),l(),m("overlapTrigger",!1),l(4),p((s=k(11,15,n.detailLink$))?10:12,s),l(7),m("formControl",n.filterControl),l(),m("columns",n.columns),l(2),m("dataSource",n.dataSource)("trackBy",n.tableTrackerFn),l(25),m("matHeaderRowDef",k(46,17,_.displayedColumns$)),l(2),m("matRowDefColumns",k(48,19,_.displayedColumns$)),l(4),m("fade",!1),l(3),m("fade",!1),l(3),m("fade",!1),l(3),m("fade",!1)}},dependencies:[Dt,Et,me,ct,wt,T,F,Ct,V,nt,ht,Me,Ae,Ve,kt,rt,bt,yt,St,Lt,Gt,Yt,zt,Ut,Ht,Xt,Wt,Kt,Jt,Qt,Re,je,qe,Ye,Be,ee,Ke,ie,Xe],styles:[".detail[_ngcontent-%COMP%]{background-color:#fafafa;float:right;height:100%;width:450px;overflow:auto;border-left:1px solid #d3d3d3;box-sizing:border-box}.table-wrapper[_ngcontent-%COMP%]{position:relative;overflow:auto;height:100%}tr.disabled[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], tr.disabled[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-style:italic;color:#aaa}.legend[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12px;margin-top:12px;margin-left:10px;font-family:Roboto,sans-serif}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-right:10px}.legend-item[_ngcontent-%COMP%]   ya-led[_ngcontent-%COMP%]{margin-right:4px}"],changeDetection:0})}};function Jn(i,e){i&1&&(o(0,"label"),r(1," CLCW check timeout (milliseconds) "),o(2,"ya-help",11)(3,"p"),r(4," Timeout associated to acknowledgment CLCWs. If a command frame is not acknowledged within this time, it will be retransmitted. "),a(),o(5,"p"),r(6," Other names: "),o(7,"code"),r(8,"T1_Initial"),a(),r(9," \xA0\u2022\xA0 "),o(10,"code"),r(11,"Timer_Initial_Value"),a(),r(12," . "),a()(),u(13,"input",12),a())}function Qn(i,e){i&1&&(o(0,"label"),r(1," V(R) "),o(2,"ya-help",13)(3,"p"),r(4," The N(S) frame sequence number expected to be seen by FARM-1 in the next Type-AD transfer frame. "),a(),o(5,"p"),r(6," Other name: "),o(7,"code"),r(8,"Receiver_Frame_Sequence_Number"),a(),r(9," . "),a()(),u(10,"input",14),a())}function Zn(i,e){if(i&1&&(u(0,"mat-divider",10),d(1,Jn,14,0,"label")(2,Qn,11,0,"label")),i&2){let t=c();l(),p(t.form.controls.type.value=="WITH_CLCW_CHECK"?1:-1),l(),p(t.form.controls.type.value=="SET_VR"?2:-1)}}var to=i=>{let e=i.get("type").value,t=i.get("clcwCheckTimeout").value,n=i.get("vr").value;return e=="WITH_CLCW_CHECK"&&(t===null||t==="")?{combined:"CLCW Check Timeout must be specified"}:e=="SET_VR"&&(n===null||n=="")?{combined:"V(R) must be specified"}:null},de=class i{constructor(e,t,n){this.dialogRef=e;this.data=n;this.form=t.group({type:["WITH_CLCW_CHECK",W.required],clcwCheckTimeout:"3000",vr:null},{validators:[to]})}sendRequest(){let e=this.form.value,t={type:e.type};t.type==="WITH_CLCW_CHECK"?t.clcwCheckInitializeTimeout=Number(e.clcwCheckTimeout):t.type==="SET_VR"&&(t.vR=Number(e.vr)),this.dialogRef.close(t)}static{this.\u0275fac=function(t){return new(t||i)(g(Pt),g(De),g(Nt))}}static{this.\u0275cmp=b({type:i,selectors:[["app-initiate-cop1-dialog"]],standalone:!0,features:[L],decls:26,vars:3,consts:[["mat-dialog-title",""],[1,"ya-form",3,"formGroup"],["type","radio","formControlName","type","value","WITHOUT_CLCW_CHECK"],[2,"font-weight","normal"],["type","radio","formControlName","type","value","WITH_CLCW_CHECK"],["type","radio","formControlName","type","value","UNLOCK"],["type","radio","formControlName","type","value","SET_VR"],["align","end"],["mat-dialog-close",""],["appearance","primary",3,"click","disabled"],[2,"margin-top","1em","margin-bottom","1em"],["dialogTitle","CLCW Check Timeout"],["type","text","formControlName","clcwCheckTimeout"],["dialogTitle","V(R)"],["type","text","formControlName","vr"]],template:function(t,n){t&1&&(o(0,"h2",0),r(1,"Initiate COP-1 AD Service"),a(),o(2,"mat-dialog-content")(3,"form",1)(4,"label"),u(5,"input",2),o(6,"span",3),r(7,"Without CLCW check"),a()(),o(8,"label"),u(9,"input",4),o(10,"span",3),r(11,"With CLCW check"),a()(),o(12,"label"),u(13,"input",5),o(14,"span",3),r(15,"With Unlock"),a()(),o(16,"label"),u(17,"input",6),o(18,"span",3),r(19,"With Set V(R)"),a()(),d(20,Zn,3,2),a()(),o(21,"mat-dialog-actions",7)(22,"ya-button",8),r(23,"CANCEL"),a(),o(24,"ya-button",9),h("click",function(){return n.sendRequest()}),r(25," INITIATE "),a()()),t&2&&(l(3),m("formGroup",n.form),l(17),p(n.form.controls.type.value=="WITH_CLCW_CHECK"||n.form.controls.type.value=="SET_VR"?20:-1),l(4),m("disabled",!n.form.valid))},dependencies:[T,xt,U,Ft,V,it,ot,at,Bt,$t,qt,jt,rt,lt,$],encapsulation:2})}};var mi=i=>({c:i});function eo(i,e){if(i&1){let t=S();o(0,"ya-page-button",11),h("click",function(){v(t);let s=c(),_=c();return x(_.enableLink(s.name))}),r(1," Enable "),a()}if(i&2){let t=c();m("disabled",!t.disabled)}}function io(i,e){if(i&1){let t=S();o(0,"ya-page-button",12),h("click",function(){v(t);let s=c(),_=c();return x(_.disableLink(s.name))}),r(1," Disable "),a()}if(i&2){let t=c();m("disabled",t.disabled)}}function no(i,e){if(i&1&&(o(0,"ya-page-button",4),r(1,"More"),a()),i&2){c();let t=D(8);m("matMenuTriggerFor",t)}}function oo(i,e){if(i&1&&(o(0,"mat-icon"),r(1," check "),a()),i&2){let t=c().$implicit;pt("visibility",t.checked?"visible":"hidden")}}function ao(i,e){if(i&1){let t=S();o(0,"button",15),h("click",function(){let s=v(t).$implicit,_=c(3),y=c();return x(y.runAction(_.name,s))}),d(1,oo,2,2,"mat-icon",16),r(2),a()}if(i&2){let t=e.$implicit;m("disabled",!t.enabled),l(),p(t.style==="CHECK_BOX"?1:-1),l(),C(" ",t.label," ")}}function ro(i,e){if(i&1&&(u(0,"mat-divider"),I(1,ao,3,3,"button",14,w)),i&2){let t=c(2);l(),O(t.actions)}}function lo(i,e){if(i&1){let t=S();o(0,"button",13),h("click",function(){v(t);let s=c(),_=c();return x(_.resetCounters(s.name))}),r(1,"Reset counters"),a(),d(2,ro,3,0)}if(i&2){let t=c();l(2),p(t.actions?2:-1)}}function so(i,e){if(i&1&&(r(0),u(1,"br")),i&2){let t=e.$implicit;C(" ",t||"-"," ")}}function co(i,e){if(i&1&&I(0,so,2,1,"br",null,w),i&2){let t=c();O(t)}}function mo(i,e){i&1&&r(0," - ")}function po(i,e){if(i&1&&d(0,co,2,0)(1,mo,1,0),i&2){let t=e;p(t.length?0:-1),l(),p(t.length?-1:1)}}function uo(i,e){if(i&1&&(o(0,"dt"),r(1),a(),o(2,"dd"),d(3,po,2,2),a()),i&2){let t,n=e.$implicit,s=c(3);l(),E(n.key),l(2),p((t=s.getEntriesForValue(n.value))?3:-1,t)}}function _o(i,e){if(i&1&&(o(0,"div",17),u(1,"mat-divider"),a(),o(2,"dl",18),I(3,uo,4,2,null,null,w),f(5,"keyvalue"),a()),i&2){let t=c();l(3),O(k(5,0,t.extra))}}function Co(i,e){if(i&1&&(o(0,"mat-icon",19),r(1,"toll"),a(),o(2,"a",20),r(3),a(),u(4,"br")),i&2){let t=e.$implicit,n=c(3);l(2),m("routerLink","/telemetry/parameters"+t)("queryParams",z(3,mi,n.yamcs.context)),l(),C(" ",t," ")}}function fo(i,e){if(i&1&&(o(0,"div",17),u(1,"mat-divider"),a(),o(2,"h4"),r(3,"System parameters"),a(),I(4,Co,5,5,null,null,w)),i&2){let t=c();l(4),O(t.parameters)}}function go(i,e){if(i&1){let t=S();o(0,"ya-text-action",27),h("click",function(){v(t);let s=c(4),_=c();return x(_.openInitiateCop1Dialog(s.name))}),r(1," INITIATE AD "),a()}}function ho(i,e){if(i&1){let t=S();o(0,"ya-text-action",28),h("click",function(){v(t);let s=c(4),_=c();return x(_.resumeCop1(s.name))}),r(1," RESUME AD "),a()}}function vo(i,e){if(i&1){let t=S();o(0,"ya-text-action",29),h("click",function(){v(t);let s=c(4),_=c();return x(_.disableCop1(s.name))}),r(1," TERMINATE AD "),a()}}function xo(i,e){if(i&1&&(o(0,"div",21),d(1,go,2,0,"ya-text-action",24)(2,ho,2,0,"ya-text-action",25)(3,vo,2,0,"ya-text-action",26),a()),i&2){let t=c();l(),p(t.cop1Active?-1:1),l(),p(t.state==="SUSPENDED"?2:-1),l(),p(t.cop1Active?3:-1)}}function ko(i,e){i&1&&r(0," AD (Sequence-controlled service) ")}function yo(i,e){i&1&&r(0," BD (Expedited service) ")}function So(i,e){if(i&1&&r(0),i&2){let t=c(2);C(" of ",t.txLimit," ")}}function bo(i,e){if(i&1&&(o(0,"div",17),u(1,"mat-divider"),a(),o(2,"h4"),r(3," COP-1 "),d(4,xo,4,3,"div",21),a(),o(5,"dl",18)(6,"dt"),r(7," Service "),o(8,"ya-help")(9,"p"),r(10," COP-1 provides two service modes that determine how reliably frames are transmitted: "),a(),o(11,"table",22)(12,"tr")(13,"td",23),r(14,"AD (Sequence-controlled)"),a(),o(15,"td"),r(16,"Sends Type-AD and Type-BC Transfer Frames."),a()(),o(17,"tr")(18,"td",23),r(19,"BD (Expedited)"),a(),o(20,"td"),r(21,"Sends Type-BD Transfer Frames. There are no retransmissions."),a()()()()(),o(22,"dd"),d(23,ko,1,0)(24,yo,1,0),a()(),o(25,"dl",18)(26,"dt"),r(27,"Wait queue"),a(),o(28,"dd"),r(29),a(),o(30,"dt"),r(31,"Enqueue TCs with bypass"),a(),o(32,"dd"),r(33),f(34,"nvl"),a()(),o(35,"dl",18)(36,"dt"),r(37,"TX state"),a(),o(38,"dd"),r(39),a(),o(40,"dt"),r(41,"V(S)"),a(),o(42,"dd"),r(43),f(44,"nvl"),a(),o(45,"dt"),r(46,"Sent queue"),a(),o(47,"dd"),r(48),a(),o(49,"dt"),r(50,"Out queue"),a(),o(51,"dd"),r(52),a(),o(53,"dt"),r(54,"Last frame TX attempts"),a(),o(55,"dd"),r(56),f(57,"nvl"),d(58,So,1,1),a()(),o(59,"dl",18)(60,"dt"),r(61,"On TX timeout"),a(),o(62,"dd"),r(63),a(),o(64,"dt"),r(65,"Retransmission delay"),a(),o(66,"dd"),r(67),a()(),o(68,"h4"),r(69,"CLCW"),a(),o(70,"dl",8)(71,"dt"),r(72,"Received"),a(),o(73,"dd"),r(74),f(75,"datetime"),a(),o(76,"dt"),r(77,"Lockout"),a(),o(78,"dd"),r(79),f(80,"nvl"),a(),o(81,"dt"),r(82,"Wait"),a(),o(83,"dd"),r(84),f(85,"nvl"),a(),o(86,"dt"),r(87,"Retransmit"),a(),o(88,"dd"),r(89),f(90,"nvl"),a(),o(91,"dt"),r(92,"N(R)"),a(),o(93,"dd"),r(94),f(95,"nvl"),a()(),o(96,"dl",18)(97,"dt"),r(98,"NN(R)"),a(),o(99,"dd"),r(100),f(101,"nvl"),a()()),i&2){let t=e,n=c(),s=c(2);l(4),p(s.mayControlLinks()?4:-1),l(19),p(t.cop1Active?23:-1),l(),p(t.cop1Active?-1:24),l(5),C("",t.waitQueueNumTC||0," TCs"),l(4),C(" ",X(34,20,!n.bdAbsolutePriority,"-")," "),l(6),E(t.state||"-"),l(4),E(X(44,23,t.vS,"-")),l(5),Se("",t.sentQueueNumFrames||0," frames (limit: ",n.windowWidth,")"),l(4),E(t.outQueueNumFrames||0),l(4),C(" ",X(57,26,t.txCount,"-")," "),l(2),p(t.txCount?58:-1),l(5),E(n.timeoutType||"-"),l(4),C("",n.t1," ms"),l(7),E(k(75,29,t.clcw==null?null:t.clcw.receptionTime)||"-"),l(5),C(" ",X(80,31,t.clcw==null?null:t.clcw.lockout,"-")," "),l(5),C(" ",X(85,34,t.clcw==null?null:t.clcw.wait,"-")," "),l(5),C(" ",X(90,37,t.clcw==null?null:t.clcw.retransmit,"-")," "),l(5),E(X(95,40,t.clcw==null?null:t.clcw.nR,"-")),l(6),E(X(101,43,t.nnR,"-"))}}function Lo(i,e){if(i&1&&(d(0,bo,102,46),f(1,"async")),i&2){let t,n=c(2);p((t=k(1,1,n.cop1Status$))?0:-1,t)}}function To(i,e){if(i&1&&(o(0,"app-instance-page")(1,"app-instance-toolbar"),u(2,"ya-page-icon-button",1),r(3),d(4,eo,2,1,"ya-page-button",2)(5,io,2,1,"ya-page-button",3)(6,no,2,1,"ya-page-button",4),o(7,"mat-menu",5,0),d(9,lo,3,1,"ng-template",6),a()(),o(10,"div",7)(11,"dl",8)(12,"dt"),r(13,"Type"),a(),o(14,"dd"),r(15),a(),o(16,"dt"),r(17,"Status"),a(),o(18,"dd",9),u(19,"app-link-status",10),r(20),a(),o(21,"dt"),r(22,"In count"),a(),o(23,"dd"),r(24),f(25,"number"),a(),o(26,"dt"),r(27,"Out count"),a(),o(28,"dd"),r(29),f(30,"number"),a(),o(31,"dt"),r(32,"Detail"),a(),o(33,"dd"),r(34),a()(),d(35,_o,6,2)(36,fo,6,0)(37,Lo,2,3),f(38,"async"),a()()),i&2){let t,n=e,s=c();l(2),m("queryParams",z(21,mi,s.yamcs.context)),l(),C(" Links / ",n.name," \xA0\xA0\xA0 "),l(),p(s.mayControlLinks()?4:-1),l(),p(s.mayControlLinks()?5:-1),l(),p(s.mayControlLinks()?6:-1),l(),m("overlapTrigger",!1),l(8),E(n.type),l(4),m("link",n),l(),C(" \xA0 ",n.status," "),l(4),E(k(25,15,n.dataInCount)),l(5),E(k(30,17,n.dataOutCount)),l(5),E(n.detailedStatus||"-"),l(),p(n.extra?35:-1),l(),p(n.parameters?36:-1),l(),p((t=k(38,19,s.cop1Config$))?37:-1,t)}}var ue=class i{constructor(e,t,n,s,_,y,_e){this.title=e;this.yamcs=n;this.authService=s;this.messageService=_;this.dialog=y;this.linkService=_e;this.link$=new Q(null);this.cop1Config$=new Q(null);this.cop1Status$=new Q(null);t.paramMap.subscribe(_t=>{let N=_t.get("link");this.changeLink(N)}),this.linkSubscription=this.yamcs.yamcsClient.createLinkSubscription({instance:this.yamcs.instance},_t=>{for(let N of _t.links||[]){let It=this.link$.value;It&&It.name===N.name&&this.link$.next(N)}})}changeLink(e){this.cop1Subscription?.cancel(),this.cop1Status$.next(null),this.cop1Config$.next(null),this.yamcs.yamcsClient.getLink(this.yamcs.instance,e).then(t=>{this.link$.next(t),this.title.setTitle(e),t.type.indexOf("Cop1Tc")!==-1&&(this.yamcs.yamcsClient.getCop1Config(this.yamcs.instance,e).then(n=>{this.cop1Config$.next(n)}),this.cop1Subscription=this.yamcs.yamcsClient.createCop1Subscription({instance:t.instance,link:e},n=>{this.cop1Status$.next(n)}))})}openInitiateCop1Dialog(e){this.dialog.open(de,{width:"400px"}).afterClosed().subscribe(n=>{n&&this.initiateCop1(e,n)})}initiateCop1(e,t){this.yamcs.yamcsClient.initiateCop1(this.yamcs.instance,e,t).catch(n=>this.messageService.showError(n))}disableCop1(e){this.yamcs.yamcsClient.disableCop1(this.yamcs.instance,e).catch(t=>this.messageService.showError(t))}resumeCop1(e){this.yamcs.yamcsClient.resumeCop1(this.yamcs.instance,e).catch(t=>this.messageService.showError(t))}mayControlLinks(){return this.authService.getUser().hasSystemPrivilege("ControlLinks")}enableLink(e){this.yamcs.yamcsClient.enableLink(this.yamcs.instance,e).catch(t=>this.messageService.showError(t))}disableLink(e){this.yamcs.yamcsClient.disableLink(this.yamcs.instance,e).catch(t=>this.messageService.showError(t))}resetCounters(e){this.yamcs.yamcsClient.resetLinkCounters(this.yamcs.instance,e).catch(t=>this.messageService.showError(t))}runAction(e,t){this.linkService.runAction(e,t)}getEntriesForValue(e){if(e==null)return[];let t=[];if(Array.isArray(e))for(let n=0;n<e.length;n++)typeof e[n]=="object"?t.push(""+JSON.stringify(e[n])):t.push(""+e[n]);else t.push(""+e);return t}ngOnDestroy(){this.linkSubscription?.cancel(),this.cop1Subscription?.cancel()}static{this.\u0275fac=function(t){return new(t||i)(g(ft),g(gt),g(j),g(Tt),g(K),g(Rt),g(mt))}}static{this.\u0275cmp=b({type:i,selectors:[["ng-component"]],standalone:!0,features:[L],decls:2,vars:3,consts:[["moreActions",""],["routerLink","..","icon","arrow_back",3,"queryParams"],["icon","link",3,"disabled"],["icon","link_off",3,"disabled"],["dropdown","true",3,"matMenuTriggerFor"],["yPosition","below",1,"ya-menu",3,"overlapTrigger"],["matMenuContent",""],[1,"form-content"],[1,"dl-horizontal",2,"margin-top","0"],[2,"display","flex","align-items","center"],[3,"link"],["icon","link",3,"click","disabled"],["icon","link_off",3,"click","disabled"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"disabled"],["mat-menu-item","",3,"click","disabled"],[3,"visibility"],[1,"section-divider"],[1,"dl-horizontal"],[1,"icon12",2,"vertical-align","middle"],[1,"ya-link",2,"margin-left","0.5em",3,"routerLink","queryParams"],[2,"float","right"],[1,"ya-data-table"],["width","1",2,"white-space","nowrap"],["icon","adjust"],["icon","redo"],["icon","not_interested"],["icon","adjust",3,"click"],["icon","redo",3,"click"],["icon","not_interested",3,"click"]],template:function(t,n){if(t&1&&(d(0,To,39,23,"app-instance-page"),f(1,"async")),t&2){let s;p((s=k(1,1,n.link$))?0:-1,s)}},dependencies:[Dt,Et,ct,T,F,Ct,At,ht,kt,rt,bt,yt,St,Lt,$,ie,ze,He,ne,Qe],encapsulation:2,changeDetection:0})}};var Ll=[{path:"",canActivate:[ei,ti],canActivateChild:[ii],runGuardsAndResolvers:"always",component:ni,children:[{path:"",pathMatch:"full",component:pe},{path:"log",component:oe},{path:":link",component:ue}]}];export{Ll as ROUTES};
