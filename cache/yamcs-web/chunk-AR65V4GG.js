import{b as er,d as tr,e as nr,f as ir,g as ar}from"./chunk-SRH5RNIC.js";import"./chunk-664KCE5Z.js";import{a as Mn}from"./chunk-VHKOYFL3.js";import{a as jo,b as zo}from"./chunk-YM7KQBEK.js";import{a as Go}from"./chunk-CS6YXD3A.js";import{a as Wo}from"./chunk-FLUSJCAZ.js";import{a as An,b as Ho,c as Zo,d as Ko,e as Jo}from"./chunk-HUPVRRB6.js";import{a as St}from"./chunk-JMTGRK3T.js";import{b as Ct,d as Ot,e as ui,f as Uo}from"./chunk-WVE4Y3TR.js";import{$ as da,$a as Wt,$b as he,$d as yo,$e as wn,A as zt,Aa as fa,Ac as sn,Ad as po,B as sa,Ba as _e,Bb as fe,Bc as Va,Bd as Qe,Bf as Tn,Ca as m,Cc as Qa,Cd as uo,Ce as xo,Da as K,Db as pe,Dc as Fa,Dd as dn,De as Xe,E as V,Ea as N,Ec as Ra,Ed as le,Ef as gt,Fa as mi,Fb as j,Fc as Ie,Fd as De,Ff as Qo,G as ca,Gb as J,Gc as At,Gd as Be,Ge as yn,Ha as tt,Hb as ya,Hc as di,Hd as se,He as kn,Hf as Fo,Ia as Q,Ic as Ia,Id as ve,Ie as z,If as Ro,J as D,Ja as Ut,Jb as Mt,Jc as Ne,Jd as ge,K as $,Ka as je,Kb as ka,Kc as Na,Kd as Ce,Ke as vn,Kf as Io,Lb as ee,Lc as Ba,Le as $e,Mb as Jt,Mc as cn,Mf as No,Nc as Xa,Oa as v,Ob as en,Oc as Ue,Pa as w,Pb as te,Pc as k,Pd as fo,Pe as xe,Pf as Bo,Q as Ee,Qa as $t,Qc as La,Qd as ho,Qe as bn,Rb as va,Rc as qa,Rd as go,Sb as ne,Sd as Co,Se as xn,Tb as ba,Tc as Ya,Td as pn,Te as wo,Ub as xa,Uc as mn,Ud as un,Ue as Eo,Uf as Xo,V as Dt,Va as Gt,Vb as wa,Vc as Te,Ve as Po,Vf as Dn,Wb as tn,Wc as ja,Wd as fn,X as p,Xa as ha,Xb as Ea,Xc as Ge,Xd as Oo,Y as T,Yb as Pa,Yc as pi,Zc as za,Zd as So,Ze as ft,Zf as Lo,_ as ma,_b as Ta,_c as st,_d as _o,a as Z,aa as y,ac as Da,ae as hn,bc as Pe,bd as Ua,bf as To,c as ci,ca as g,cb as ue,cd as Ga,da as pa,db as ga,dd as Wa,df as En,e as W,ea as Se,ec as nn,ed as We,ef as Do,eg as qo,fd as Ha,ff as Me,fg as $n,ga as x,gc as ot,gd as Za,ge as ct,h as na,ha as L,hb as Ca,hd as Ka,he as mt,hf as $o,hg as Yo,ia as q,ic as an,id as Ja,ie as gn,j as jt,ja as Y,jb as Oa,jc as on,jd as eo,ka as l,kd as to,ke as dt,la as s,ld as no,le as Cn,lg as ie,ma as O,mb as nt,md as io,na as oe,nb as Sa,ne as pt,oa as re,oc as $a,od as ao,oe as ko,of as ht,p as ia,pb as _a,pd as oo,q as aa,qa as F,qb as Ht,qe as On,qf as Mo,ra as P,rb as Zt,re as Sn,rg as R,sa as h,sb as it,sc as Ma,sf as Pn,sg as Le,tb as Kt,tc as rn,te as ut,tf as Ao,tg as fi,uc as rt,ud as ro,ue as _n,ug as hi,v as oa,vc as Ve,vd as lo,vf as Vo,w as ra,wa as ce,wc as Aa,wd as so,we as vo,x as et,xa as me,xc as ln,xd as co,xe as bo,y as la,ya as de,yc as lt,yd as mo,za as ua,zb as at,zc as ze}from"./chunk-SAZ6MTOG.js";var Vn=class n{constructor(t,e){this.dialogRef=t;this.form=e.group({executionTime:["",[pe.required]],tags:[[],[]]})}schedule(){this.dialogRef.close(this.form.value)}static{this.\u0275fac=function(e){return new(e||n)(T(le),T(he))}}static{this.\u0275cmp=V({type:n,selectors:[["app-schedule-script-dialog"]],standalone:!0,features:[Q],decls:26,vars:3,consts:[["mat-dialog-title",""],[1,"hint"],[1,"ya-form",3,"formGroup"],[1,"label"],["formControlName","executionTime",3,"showMillis"],[1,"half-break"],["dialogTitle","Timeline Tags"],["formControlName","tags"],["align","end"],[2,"flex","1 1 auto"],["mat-dialog-close",""],["appearance","primary",3,"click","disabled"]],template:function(e,i){e&1&&(l(0,"h2",0),m(1,"Run later"),s(),l(2,"mat-dialog-content")(3,"div",1)(4,"p"),m(5,"This script will be submitted to the Yamcs Timeline, for execution at a later time."),s()(),l(6,"form",2)(7,"div",3),m(8," Execution time "),O(9,"br")(10,"ya-date-time-input",4),s(),O(11,"hr",5),l(12,"div",3),m(13," Timeline tags "),l(14,"span",1),m(15,"(optional)"),s(),l(16,"ya-help",6),m(17," Tags allow to categorise items per band. Bands only show items for which one of the tags is matching. "),s(),O(18,"br")(19,"ya-tag-select",7),s()()(),l(20,"mat-dialog-actions",8),O(21,"div",9),l(22,"ya-button",10),m(23,"CANCEL"),s(),l(24,"ya-button",11),P("click",function(){return i.schedule()}),m(25,"SCHEDULE"),s()()),e&2&&(p(6),g("formGroup",i.form),p(4),g("showMillis",!0),p(14),g("disabled",!i.form.valid))},dependencies:[R,ee,j,J,te,ne,se,ve,Ce,ge,z,xn,Me,Tn],encapsulation:2,changeDetection:0})}};function Kl(n,t){if(n&1){let e=F();m(0," \xA0 "),O(1,"ya-icon-action",9),l(2,"mat-menu",10,0)(4,"button",11),P("click",function(){D(e);let a=h();return $(a.runScript())}),m(5,"Run now"),s(),l(6,"button",11),P("click",function(){D(e);let a=h();return $(a.openScheduleScriptDialog())}),m(7,"Run later..."),s()()}if(n&2){let e=_e(3),i=h();p(),g("matMenuTriggerFor",i.form.valid?e:null)("padding",!1)("disabled",!i.form.valid),p(),g("overlapTrigger",!1)}}var Qn=class n{constructor(t,e,i,a,o,r,c){this.yamcs=i;this.messageService=a;this.authService=o;this.router=r;this.dialog=c;this.scriptOptions$=new W([]);t.setTitle("Run a script"),this.form=e.group({script:["",[pe.required]],args:[""]}),i.yamcsClient.getActivityScripts(this.yamcs.instance).then(d=>{for(let f of d.scripts||[])this.scriptOptions$.next([...this.scriptOptions$.value,{id:f,label:f}])}).catch(d=>a.showError(d))}runScript(){let t=this.createActivityDefinition();this.yamcs.yamcsClient.startActivity(this.yamcs.instance,t).then(e=>{this.authService.getUser().hasSystemPrivilege("ReadActivities")?this.router.navigateByUrl(`/activities/${e.id}?c=${this.yamcs.context}`):this.dialog.open(Do,{width:"500px",data:{icon:"done",closeText:"OK",content:`
                <p>The procedure has started executing.</p>
                <p>
                  Note that you do not have sufficient privileges
                  to follow up on submitted procedures.
                </p>
              `}}).afterClosed().subscribe(()=>this.form.reset())}).catch(e=>this.messageService.showError(e))}showSchedule(){let t=this.yamcs.connectionInfo$.value?.instance?.capabilities||[];return t.indexOf("timeline")!==-1&&t.indexOf("activities")!==-1&&this.authService.getUser().hasSystemPrivilege("ControlTimeline")}openScheduleScriptDialog(){this.dialog.open(Vn,{width:"600px"}).afterClosed().subscribe(t=>{let e=this.form.value;if(t){let i={type:"ACTIVITY",duration:"0s",name:e.script,start:t.executionTime,tags:t.tags,activityDefinition:this.createActivityDefinition()};this.yamcs.yamcsClient.createTimelineItem(this.yamcs.instance,i).then(()=>{this.messageService.showInfo("Script scheduled"),this.router.navigateByUrl(`/activities?c=${this.yamcs.context}`)}).catch(a=>this.messageService.showError(a))}})}createActivityDefinition(){let t=this.form.value,e={type:"SCRIPT",args:{processor:this.yamcs.processor||null,script:t.script}};return t.args&&(e.args.args=t.args),e}static{this.\u0275fac=function(e){return new(e||n)(T(nt),T(he),T(ie),T(ht),T(Le),T(it),T(Be))}}static{this.\u0275cmp=V({type:n,selectors:[["ng-component"]],standalone:!0,features:[Q],decls:23,vars:6,consts:[["sendMenu","matMenu"],[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],[1,"label"],[1,"hint"],["formControlName","script",3,"options"],["type","text","formControlName","args"],[2,"flex","1 1 auto"],["appearance","primary",3,"click","disabled"],["icon","arrow_drop_down",2,"line-height","12px",3,"matMenuTriggerFor","padding","disabled"],[1,"ya-menu",3,"overlapTrigger"],["mat-menu-item","",3,"click"]],template:function(e,i){e&1&&(l(0,"app-instance-page")(1,"app-instance-toolbar"),m(2,"Run a script"),s(),l(3,"div",1)(4,"form",2)(5,"div",3),m(6," Script "),l(7,"span",4),m(8,"(required)"),s(),O(9,"br")(10,"ya-select",5),v(11,"async"),s(),O(12,"br"),l(13,"div",3),m(14," Script arguments "),O(15,"input",6),s()(),l(16,"p"),m(17,"\xA0"),s(),l(18,"mat-toolbar"),O(19,"span",7),l(20,"ya-button",8),P("click",function(){return i.runScript()}),m(21,"Run"),s(),y(22,Kl,8,4),s()()()),e&2&&(p(4),g("formGroup",i.form),p(6),g("options",w(11,4,i.scriptOptions$)),p(10),g("disabled",!i.form.valid),p(2),x(i.showSchedule()?22:-1))},dependencies:[Ot,Ct,R,ue,ee,fe,j,J,te,ne,an,ot,on,rn,z,bn,ft],encapsulation:2,changeDetection:0})}};var Fn=class n{constructor(t){this.dialogRef=t}confirmDiscard(){this.dialogRef.close(!0)}static{this.\u0275fac=function(e){return new(e||n)(T(le))}}static{this.\u0275cmp=V({type:n,selectors:[["app-stack-file-page-dirty-dialog"]],standalone:!0,features:[Q],decls:10,vars:0,consts:[["align","end"],["mat-dialog-close",""],["appearance","primary",3,"click"]],template:function(e,i){e&1&&(l(0,"mat-dialog-content")(1,"h3"),m(2,"Close without saving?"),s(),l(3,"p"),m(4,"You have unsaved changes, close without saving?"),s()(),l(5,"mat-dialog-actions",0)(6,"ya-button",1),m(7,"CANCEL"),s(),l(8,"ya-button",2),P("click",function(){return i.confirmDiscard()}),m(9,"OK"),s()())},dependencies:[R,se,Ce,ge,z],encapsulation:2})}};var sr=n=>sa(Vt).canDeactivate(n),Vt=class n{constructor(t,e,i){this.dialog=t;this.authService=e;this.dialogOpen$=new W(!1);this.bucket=i.getStackBucket()}canDeactivate(t){return this.dialogOpen$.value?new ci(e=>{this.dialogRef.afterClosed().subscribe({next:i=>{e.next(i===!0),e.complete()},error:()=>{e.next(!1),e.complete()}})}):t.hasPendingChanges()&&this.mayManageStacks()?new ci(e=>{this.dialogOpen$.next(!0),this.dialogRef=this.dialog.open(Fn,{width:"400px"}),this.dialogRef.afterClosed().subscribe({next:i=>{this.dialogOpen$.next(!1),e.next(i===!0),e.complete()},error:()=>{this.dialogOpen$.next(!1),e.next(!1),e.complete()}})}):na(!0)}mayManageStacks(){let t=this.authService.getUser();return t.hasObjectPrivilege("ManageBucket",this.bucket)||t.hasSystemPrivilege("ManageAnyBucket")}static{this.\u0275fac=function(e){return new(e||n)(zt(Be),zt(Le),zt($e))}}static{this.\u0275prov=la({token:n,factory:n.\u0275fac})}};function Jl(n,t){if(n&1&&(l(0,"tr")(1,"th"),m(2),s(),l(3,"td"),m(4),s()()),n&2){let e=t.$implicit;p(2),K(e.name),p(2),K(e.description||"-")}}function es(n,t){if(n&1&&(l(0,"p"),m(1,"\xA0"),s(),l(2,"p"),m(3,"Verifiers:"),s(),l(4,"table",1),q(5,Jl,5,2,"tr",null,L),s()),n&2){let e=h();p(5),Y(e.verifiers)}}function ts(n,t){if(n&1&&(l(0,"tr")(1,"th"),m(2),s(),l(3,"td"),m(4),s()()),n&2){let e=t.$implicit;p(2),K(e.name.replace("Acknowledge_","")),p(2),K(e.description||"-")}}function ns(n,t){if(n&1&&(l(0,"p"),m(1,"\xA0"),s(),l(2,"p"),m(3,"Extra acknowledgments:"),s(),l(4,"table",1),q(5,ts,5,2,"tr",null,L),s()),n&2){let e=h();p(5),Y(e.extra)}}var _t=class n{constructor(){this.verifiers=[];this.extra=[]}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=V({type:n,selectors:[["app-advance-ack-help"]],inputs:{verifiers:"verifiers",extra:"extra"},standalone:!0,features:[Q],decls:29,vars:2,consts:[["dialogTitle","Await acknowledgement success","dialogWidth","800px"],["yaSimpleTable","",2,"width","100%"],["width","1"]],template:function(e,i){e&1&&(l(0,"ya-help",0)(1,"p"),m(2," Configure the acknowledgment which is required to be successful before advancing to the next command in the stack. "),s(),l(3,"table",1)(4,"tr")(5,"th",2),m(6,"Queued"),s(),l(7,"td"),m(8,"The command was accepted into a Yamcs queue."),s()(),l(9,"tr")(10,"th"),m(11,"Released"),s(),l(12,"td"),m(13,"The command was released from its assigned Yamcs queue."),s()(),l(14,"tr")(15,"th"),m(16,"Sent"),s(),l(17,"td"),m(18,"The command was processed by a Yamcs link."),s()(),l(19,"tr")(20,"th"),m(21,"Completed"),s(),l(22,"td")(23,"p"),m(24,"The command completed successfully."),s(),l(25,"p"),m(26," This requires the configuration of a success verifier in the Mission Database specification. "),s()()()(),y(27,es,7,0)(28,ns,7,0),s()),e&2&&(p(27),x(i.verifiers.length?27:-1),p(),x(i.extra.length?28:-1))},dependencies:[R,Ro,Me],encapsulation:2,changeDetection:0})}};var Nn=class n{static create(t,e,i,a,o){let r=a+(a<<8)+t+(e<<4)|0;return new n(t,e,i,r,o,[],[])}constructor(t,e,i,a,o,r,c){this.type=t,this.value=e,this.from=i,this.hash=a,this.end=o,this.children=r,this.positions=c,this.hashProp=[[Ie.contextHash,a]]}addChild(t,e){t.prop(Ie.contextHash)!=this.hash&&(t=new Ne(t.type,t.children,t.positions,t.length,this.hashProp)),this.children.push(t),this.positions.push(e)}toTree(t,e=this.end){let i=this.children.length-1;return i>=0&&(e=Math.max(e,this.positions[i]+this.children[i].length+this.from)),new Ne(t.types[this.type],this.children,this.positions,e-this.from).balance({makeTree:(a,o,r)=>new Ne(At.none,a,o,r,this.hashProp)})}},_=function(n){return n[n.Document=1]="Document",n[n.CodeBlock=2]="CodeBlock",n[n.FencedCode=3]="FencedCode",n[n.Blockquote=4]="Blockquote",n[n.HorizontalRule=5]="HorizontalRule",n[n.BulletList=6]="BulletList",n[n.OrderedList=7]="OrderedList",n[n.ListItem=8]="ListItem",n[n.ATXHeading1=9]="ATXHeading1",n[n.ATXHeading2=10]="ATXHeading2",n[n.ATXHeading3=11]="ATXHeading3",n[n.ATXHeading4=12]="ATXHeading4",n[n.ATXHeading5=13]="ATXHeading5",n[n.ATXHeading6=14]="ATXHeading6",n[n.SetextHeading1=15]="SetextHeading1",n[n.SetextHeading2=16]="SetextHeading2",n[n.HTMLBlock=17]="HTMLBlock",n[n.LinkReference=18]="LinkReference",n[n.Paragraph=19]="Paragraph",n[n.CommentBlock=20]="CommentBlock",n[n.ProcessingInstructionBlock=21]="ProcessingInstructionBlock",n[n.Escape=22]="Escape",n[n.Entity=23]="Entity",n[n.HardBreak=24]="HardBreak",n[n.Emphasis=25]="Emphasis",n[n.StrongEmphasis=26]="StrongEmphasis",n[n.Link=27]="Link",n[n.Image=28]="Image",n[n.InlineCode=29]="InlineCode",n[n.HTMLTag=30]="HTMLTag",n[n.Comment=31]="Comment",n[n.ProcessingInstruction=32]="ProcessingInstruction",n[n.Autolink=33]="Autolink",n[n.HeaderMark=34]="HeaderMark",n[n.QuoteMark=35]="QuoteMark",n[n.ListMark=36]="ListMark",n[n.LinkMark=37]="LinkMark",n[n.EmphasisMark=38]="EmphasisMark",n[n.CodeMark=39]="CodeMark",n[n.CodeText=40]="CodeText",n[n.CodeInfo=41]="CodeInfo",n[n.LinkTitle=42]="LinkTitle",n[n.LinkLabel=43]="LinkLabel",n[n.URL=44]="URL",n}(_||{}),Si=class{constructor(t,e){this.start=t,this.content=e,this.marks=[],this.parsers=[]}},_i=class{constructor(){this.text="",this.baseIndent=0,this.basePos=0,this.depth=0,this.markers=[],this.pos=0,this.indent=0,this.next=-1}forward(){this.basePos>this.pos&&this.forwardInner()}forwardInner(){let t=this.skipSpace(this.basePos);this.indent=this.countIndent(t,this.pos,this.indent),this.pos=t,this.next=t==this.text.length?-1:this.text.charCodeAt(t)}skipSpace(t){return Ft(this.text,t)}reset(t){for(this.text=t,this.baseIndent=this.basePos=this.pos=this.indent=0,this.forwardInner(),this.depth=1;this.markers.length;)this.markers.pop()}moveBase(t){this.basePos=t,this.baseIndent=this.countIndent(t,this.pos,this.indent)}moveBaseColumn(t){this.baseIndent=t,this.basePos=this.findColumn(t)}addMarker(t){this.markers.push(t)}countIndent(t,e=0,i=0){for(let a=e;a<t;a++)i+=this.text.charCodeAt(a)==9?4-i%4:1;return i}findColumn(t){let e=0;for(let i=0;e<this.text.length&&i<t;e++)i+=this.text.charCodeAt(e)==9?4-i%4:1;return e}scrub(){if(!this.baseIndent)return this.text;let t="";for(let e=0;e<this.basePos;e++)t+=" ";return t+this.text.slice(this.basePos)}};function cr(n,t,e){if(e.pos==e.text.length||n!=t.block&&e.indent>=t.stack[e.depth+1].value+e.baseIndent)return!0;if(e.indent>=e.baseIndent+4)return!1;let i=(n.type==_.OrderedList?Vi:Ai)(e,t,!1);return i>0&&(n.type!=_.BulletList||Mi(e,t,!1)<0)&&e.text.charCodeAt(e.pos+i-1)==n.value}var _r={[_.Blockquote](n,t,e){return e.next!=62?!1:(e.markers.push(I(_.QuoteMark,t.lineStart+e.pos,t.lineStart+e.pos+1)),e.moveBase(e.pos+(be(e.text.charCodeAt(e.pos+1))?2:1)),n.end=t.lineStart+e.text.length,!0)},[_.ListItem](n,t,e){return e.indent<e.baseIndent+n.value&&e.next>-1?!1:(e.moveBaseColumn(e.baseIndent+n.value),!0)},[_.OrderedList]:cr,[_.BulletList]:cr,[_.Document](){return!0}};function be(n){return n==32||n==9||n==10||n==13}function Ft(n,t=0){for(;t<n.length&&be(n.charCodeAt(t));)t++;return t}function mr(n,t,e){for(;t>e&&be(n.charCodeAt(t-1));)t--;return t}function yr(n){if(n.next!=96&&n.next!=126)return-1;let t=n.pos+1;for(;t<n.text.length&&n.text.charCodeAt(t)==n.next;)t++;if(t<n.pos+3)return-1;if(n.next==96){for(let e=t;e<n.text.length;e++)if(n.text.charCodeAt(e)==96)return-1}return t}function kr(n){return n.next!=62?-1:n.text.charCodeAt(n.pos+1)==32?2:1}function Mi(n,t,e){if(n.next!=42&&n.next!=45&&n.next!=95)return-1;let i=1;for(let a=n.pos+1;a<n.text.length;a++){let o=n.text.charCodeAt(a);if(o==n.next)i++;else if(!be(o))return-1}return e&&n.next==45&&xr(n)>-1&&n.depth==t.stack.length&&t.parser.leafBlockParsers.indexOf(Tr.SetextHeading)>-1||i<3?-1:1}function vr(n,t){for(let e=n.stack.length-1;e>=0;e--)if(n.stack[e].type==t)return!0;return!1}function Ai(n,t,e){return(n.next==45||n.next==43||n.next==42)&&(n.pos==n.text.length-1||be(n.text.charCodeAt(n.pos+1)))&&(!e||vr(t,_.BulletList)||n.skipSpace(n.pos+2)<n.text.length)?1:-1}function Vi(n,t,e){let i=n.pos,a=n.next;for(;a>=48&&a<=57;){i++;if(i==n.text.length)return-1;a=n.text.charCodeAt(i)}return i==n.pos||i>n.pos+9||a!=46&&a!=41||i<n.text.length-1&&!be(n.text.charCodeAt(i+1))||e&&!vr(t,_.OrderedList)&&(n.skipSpace(i+1)==n.text.length||i>n.pos+1||n.next!=49)?-1:i+1-n.pos}function br(n){if(n.next!=35)return-1;let t=n.pos+1;for(;t<n.text.length&&n.text.charCodeAt(t)==35;)t++;if(t<n.text.length&&n.text.charCodeAt(t)!=32)return-1;let e=t-n.pos;return e>6?-1:e}function xr(n){if(n.next!=45&&n.next!=61||n.indent>=n.baseIndent+4)return-1;let t=n.pos+1;for(;t<n.text.length&&n.text.charCodeAt(t)==n.next;)t++;let e=t;for(;t<n.text.length&&be(n.text.charCodeAt(t));)t++;return t==n.text.length?e:-1}var yi=/^[ \t]*$/,wr=/-->/,Er=/\?>/,ki=[[/^<(?:script|pre|style)(?:\s|>|$)/i,/<\/(?:script|pre|style)>/i],[/^\s*<!--/,wr],[/^\s*<\?/,Er],[/^\s*<![A-Z]/,/>/],[/^\s*<!\[CDATA\[/,/\]\]>/],[/^\s*<\/?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|\/?>|$)/i,yi],[/^\s*(?:<\/[a-z][\w-]*\s*>|<[a-z][\w-]*(\s+[a-z:_][\w-.]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*>)\s*$/i,yi]];function Pr(n,t,e){if(n.next!=60)return-1;let i=n.text.slice(n.pos);for(let a=0,o=ki.length-(e?1:0);a<o;a++)if(ki[a][0].test(i))return a;return-1}function dr(n,t){let e=n.countIndent(t,n.pos,n.indent),i=n.countIndent(n.skipSpace(t),t,e);return i>=e+5?e+1:i}function Ze(n,t,e){let i=n.length-1;i>=0&&n[i].to==t&&n[i].type==_.CodeText?n[i].to=e:n.push(I(_.CodeText,t,e))}var Rn={LinkReference:void 0,IndentedCode(n,t){let e=t.baseIndent+4;if(t.indent<e)return!1;let i=t.findColumn(e),a=n.lineStart+i,o=n.lineStart+t.text.length,r=[],c=[];for(Ze(r,a,o);n.nextLine()&&t.depth>=n.stack.length;)if(t.pos==t.text.length){Ze(c,n.lineStart-1,n.lineStart);for(let d of t.markers)c.push(d)}else{if(t.indent<e)break;{if(c.length){for(let f of c)f.type==_.CodeText?Ze(r,f.from,f.to):r.push(f);c=[]}Ze(r,n.lineStart-1,n.lineStart);for(let f of t.markers)r.push(f);o=n.lineStart+t.text.length;let d=n.lineStart+t.findColumn(t.baseIndent+4);d<o&&Ze(r,d,o)}}return c.length&&(c=c.filter(d=>d.type!=_.CodeText),c.length&&(t.markers=c.concat(t.markers))),n.addNode(n.buffer.writeElements(r,-a).finish(_.CodeBlock,o-a),a),!0},FencedCode(n,t){let e=yr(t);if(e<0)return!1;let i=n.lineStart+t.pos,a=t.next,o=e-t.pos,r=t.skipSpace(e),c=mr(t.text,t.text.length,r),d=[I(_.CodeMark,i,i+o)];r<c&&d.push(I(_.CodeInfo,n.lineStart+r,n.lineStart+c));for(let f=!0;n.nextLine()&&t.depth>=n.stack.length;f=!1){let u=t.pos;if(t.indent-t.baseIndent<4)for(;u<t.text.length&&t.text.charCodeAt(u)==a;)u++;if(u-t.pos>=o&&t.skipSpace(u)==t.text.length){for(let S of t.markers)d.push(S);d.push(I(_.CodeMark,n.lineStart+t.pos,n.lineStart+u)),n.nextLine();break}else{f||Ze(d,n.lineStart-1,n.lineStart);for(let b of t.markers)d.push(b);let S=n.lineStart+t.basePos,C=n.lineStart+t.text.length;S<C&&Ze(d,S,C)}}return n.addNode(n.buffer.writeElements(d,-i).finish(_.FencedCode,n.prevLineEnd()-i),i),!0},Blockquote(n,t){let e=kr(t);return e<0?!1:(n.startContext(_.Blockquote,t.pos),n.addNode(_.QuoteMark,n.lineStart+t.pos,n.lineStart+t.pos+1),t.moveBase(t.pos+e),null)},HorizontalRule(n,t){if(Mi(t,n,!1)<0)return!1;let e=n.lineStart+t.pos;return n.nextLine(),n.addNode(_.HorizontalRule,e),!0},BulletList(n,t){let e=Ai(t,n,!1);if(e<0)return!1;n.block.type!=_.BulletList&&n.startContext(_.BulletList,t.basePos,t.next);let i=dr(t,t.pos+1);return n.startContext(_.ListItem,t.basePos,i-t.baseIndent),n.addNode(_.ListMark,n.lineStart+t.pos,n.lineStart+t.pos+e),t.moveBaseColumn(i),null},OrderedList(n,t){let e=Vi(t,n,!1);if(e<0)return!1;n.block.type!=_.OrderedList&&n.startContext(_.OrderedList,t.basePos,t.text.charCodeAt(t.pos+e-1));let i=dr(t,t.pos+e);return n.startContext(_.ListItem,t.basePos,i-t.baseIndent),n.addNode(_.ListMark,n.lineStart+t.pos,n.lineStart+t.pos+e),t.moveBaseColumn(i),null},ATXHeading(n,t){let e=br(t);if(e<0)return!1;let i=t.pos,a=n.lineStart+i,o=mr(t.text,t.text.length,i),r=o;for(;r>i&&t.text.charCodeAt(r-1)==t.next;)r--;(r==o||r==i||!be(t.text.charCodeAt(r-1)))&&(r=t.text.length);let c=n.buffer.write(_.HeaderMark,0,e).writeElements(n.parser.parseInline(t.text.slice(i+e+1,r),a+e+1),-a);r<t.text.length&&c.write(_.HeaderMark,r-i,o-i);let d=c.finish(_.ATXHeading1-1+e,t.text.length-i);return n.nextLine(),n.addNode(d,a),!0},HTMLBlock(n,t){let e=Pr(t,n,!1);if(e<0)return!1;let i=n.lineStart+t.pos,a=ki[e][1],o=[],r=a!=yi;for(;!a.test(t.text)&&n.nextLine();){if(t.depth<n.stack.length){r=!1;break}for(let f of t.markers)o.push(f)}r&&n.nextLine();let c=a==wr?_.CommentBlock:a==Er?_.ProcessingInstructionBlock:_.HTMLBlock,d=n.prevLineEnd();return n.addNode(n.buffer.writeElements(o,-i).finish(c,d-i),i),!0},SetextHeading:void 0},vi=class{constructor(t){this.stage=0,this.elts=[],this.pos=0,this.start=t.start,this.advance(t.content)}nextLine(t,e,i){if(this.stage==-1)return!1;let a=i.content+`
`+e.scrub(),o=this.advance(a);return o>-1&&o<a.length?this.complete(t,i,o):!1}finish(t,e){return(this.stage==2||this.stage==3)&&Ft(e.content,this.pos)==e.content.length?this.complete(t,e,e.content.length):!1}complete(t,e,i){return t.addLeafElement(e,I(_.LinkReference,this.start,this.start+i,this.elts)),!0}nextStage(t){return t?(this.pos=t.to-this.start,this.elts.push(t),this.stage++,!0):(t===!1&&(this.stage=-1),!1)}advance(t){for(;;){if(this.stage==-1)return-1;if(this.stage==0){if(!this.nextStage(Fr(t,this.pos,this.start,!0)))return-1;if(t.charCodeAt(this.pos)!=58)return this.stage=-1;this.elts.push(I(_.LinkMark,this.pos+this.start,this.pos+this.start+1)),this.pos++}else if(this.stage==1){if(!this.nextStage(Vr(t,Ft(t,this.pos),this.start)))return-1}else if(this.stage==2){let e=Ft(t,this.pos),i=0;if(e>this.pos){let a=Qr(t,e,this.start);if(a){let o=Ci(t,a.to-this.start);o>0&&(this.nextStage(a),i=o)}}return i||(i=Ci(t,this.pos)),i>0&&i<t.length?i:-1}else return Ci(t,this.pos)}}};function Ci(n,t){for(;t<n.length;t++){let e=n.charCodeAt(t);if(e==10)break;if(!be(e))return-1}return t}var bi=class{nextLine(t,e,i){let a=e.depth<t.stack.length?-1:xr(e),o=e.next;if(a<0)return!1;let r=I(_.HeaderMark,t.lineStart+e.pos,t.lineStart+a);return t.nextLine(),t.addLeafElement(i,I(o==61?_.SetextHeading1:_.SetextHeading2,i.start,t.prevLineEnd(),[...t.parser.parseInline(i.content,i.start),r])),!0}finish(){return!1}},Tr={LinkReference(n,t){return t.content.charCodeAt(0)==91?new vi(t):null},SetextHeading(){return new bi}},is=[(n,t)=>br(t)>=0,(n,t)=>yr(t)>=0,(n,t)=>kr(t)>=0,(n,t)=>Ai(t,n,!0)>=0,(n,t)=>Vi(t,n,!0)>=0,(n,t)=>Mi(t,n,!0)>=0,(n,t)=>Pr(t,n,!0)>=0],as={text:"",end:0},xi=class{constructor(t,e,i,a){this.parser=t,this.input=e,this.ranges=a,this.line=new _i,this.atEnd=!1,this.reusePlaceholders=new Map,this.stoppedAt=null,this.rangeI=0,this.to=a[a.length-1].to,this.lineStart=this.absoluteLineStart=this.absoluteLineEnd=a[0].from,this.block=Nn.create(_.Document,0,this.lineStart,0,0),this.stack=[this.block],this.fragments=i.length?new Di(i,e):null,this.readLine()}get parsedPos(){return this.absoluteLineStart}advance(){if(this.stoppedAt!=null&&this.absoluteLineStart>this.stoppedAt)return this.finish();let{line:t}=this;for(;;){for(let i=0;;){let a=t.depth<this.stack.length?this.stack[this.stack.length-1]:null;for(;i<t.markers.length&&(!a||t.markers[i].from<a.end);){let o=t.markers[i++];this.addNode(o.type,o.from,o.to)}if(!a)break;this.finishContext()}if(t.pos<t.text.length)break;if(!this.nextLine())return this.finish()}if(this.fragments&&this.reuseFragment(t.basePos))return null;e:for(;;){for(let i of this.parser.blockParsers)if(i){let a=i(this,t);if(a!=!1){if(a==!0)return null;t.forward();continue e}}break}let e=new Si(this.lineStart+t.pos,t.text.slice(t.pos));for(let i of this.parser.leafBlockParsers)if(i){let a=i(this,e);a&&e.parsers.push(a)}e:for(;this.nextLine()&&t.pos!=t.text.length;){if(t.indent<t.baseIndent+4){for(let i of this.parser.endLeafBlock)if(i(this,t,e))break e}for(let i of e.parsers)if(i.nextLine(this,t,e))return null;e.content+=`
`+t.scrub();for(let i of t.markers)e.marks.push(i)}return this.finishLeaf(e),null}stopAt(t){if(this.stoppedAt!=null&&this.stoppedAt<t)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=t}reuseFragment(t){if(!this.fragments.moveTo(this.absoluteLineStart+t,this.absoluteLineStart)||!this.fragments.matches(this.block.hash))return!1;let e=this.fragments.takeNodes(this);return e?(this.absoluteLineStart+=e,this.lineStart=Rr(this.absoluteLineStart,this.ranges),this.moveRangeI(),this.absoluteLineStart<this.to?(this.lineStart++,this.absoluteLineStart++,this.readLine()):(this.atEnd=!0,this.readLine()),!0):!1}get depth(){return this.stack.length}parentType(t=this.depth-1){return this.parser.nodeSet.types[this.stack[t].type]}nextLine(){return this.lineStart+=this.line.text.length,this.absoluteLineEnd>=this.to?(this.absoluteLineStart=this.absoluteLineEnd,this.atEnd=!0,this.readLine(),!1):(this.lineStart++,this.absoluteLineStart=this.absoluteLineEnd+1,this.moveRangeI(),this.readLine(),!0)}moveRangeI(){for(;this.rangeI<this.ranges.length-1&&this.absoluteLineStart>=this.ranges[this.rangeI].to;)this.rangeI++,this.absoluteLineStart=Math.max(this.absoluteLineStart,this.ranges[this.rangeI].from)}scanLine(t){let e=as;if(e.end=t,t>=this.to)e.text="";else if(e.text=this.lineChunkAt(t),e.end+=e.text.length,this.ranges.length>1){let i=this.absoluteLineStart,a=this.rangeI;for(;this.ranges[a].to<e.end;){a++;let o=this.ranges[a].from,r=this.lineChunkAt(o);e.end=o+r.length,e.text=e.text.slice(0,this.ranges[a-1].to-i)+r,i=e.end-e.text.length}}return e}readLine(){let{line:t}=this,{text:e,end:i}=this.scanLine(this.absoluteLineStart);for(this.absoluteLineEnd=i,t.reset(e);t.depth<this.stack.length;t.depth++){let a=this.stack[t.depth],o=this.parser.skipContextMarkup[a.type];if(!o)throw new Error("Unhandled block context "+_[a.type]);if(!o(a,this,t))break;t.forward()}}lineChunkAt(t){let e=this.input.chunk(t),i;if(this.input.lineChunks)i=e==`
`?"":e;else{let a=e.indexOf(`
`);i=a<0?e:e.slice(0,a)}return t+i.length>this.to?i.slice(0,this.to-t):i}prevLineEnd(){return this.atEnd?this.lineStart:this.lineStart-1}startContext(t,e,i=0){this.block=Nn.create(t,i,this.lineStart+e,this.block.hash,this.lineStart+this.line.text.length),this.stack.push(this.block)}startComposite(t,e,i=0){this.startContext(this.parser.getNodeType(t),e,i)}addNode(t,e,i){typeof t=="number"&&(t=new Ne(this.parser.nodeSet.types[t],kt,kt,(i??this.prevLineEnd())-e)),this.block.addChild(t,e-this.block.from)}addElement(t){this.block.addChild(t.toTree(this.parser.nodeSet),t.from-this.block.from)}addLeafElement(t,e){this.addNode(this.buffer.writeElements(Ti(e.children,t.marks),-e.from).finish(e.type,e.to-e.from),e.from)}finishContext(){let t=this.stack.pop(),e=this.stack[this.stack.length-1];e.addChild(t.toTree(this.parser.nodeSet),t.from-e.from),this.block=e}finish(){for(;this.stack.length>1;)this.finishContext();return this.addGaps(this.block.toTree(this.parser.nodeSet,this.lineStart))}addGaps(t){return this.ranges.length>1?Dr(this.ranges,0,t.topNode,this.ranges[0].from,this.reusePlaceholders):t}finishLeaf(t){for(let i of t.parsers)if(i.finish(this,t))return;let e=Ti(this.parser.parseInline(t.content,t.start),t.marks);this.addNode(this.buffer.writeElements(e,-t.start).finish(_.Paragraph,t.content.length),t.start)}elt(t,e,i,a){return typeof t=="string"?I(this.parser.getNodeType(t),e,i,a):new Xn(t,e)}get buffer(){return new Bn(this.parser.nodeSet)}};function Dr(n,t,e,i,a){let o=n[t].to,r=[],c=[],d=e.from+i;function f(u,S){for(;S?u>=o:u>o;){let C=n[t+1].from-o;i+=C,u+=C,t++,o=n[t].to}}for(let u=e.firstChild;u;u=u.nextSibling){f(u.from+i,!0);let S=u.from+i,C,b=a.get(u.tree);b?C=b:u.to+i>o?(C=Dr(n,t,u,i,a),f(u.to+i,!1)):C=u.toTree(),r.push(C),c.push(S-d)}return f(e.to+i,!1),new Ne(e.type,r,c,e.to+i-d,e.tree?e.tree.propValues:void 0)}var It=class n extends Ba{constructor(t,e,i,a,o,r,c,d,f){super(),this.nodeSet=t,this.blockParsers=e,this.leafBlockParsers=i,this.blockNames=a,this.endLeafBlock=o,this.skipContextMarkup=r,this.inlineParsers=c,this.inlineNames=d,this.wrappers=f,this.nodeTypes=Object.create(null);for(let u of t.types)this.nodeTypes[u.name]=u.id}createParse(t,e,i){let a=new xi(this,t,e,i);for(let o of this.wrappers)a=o(a,t,e,i);return a}configure(t){let e=wi(t);if(!e)return this;let{nodeSet:i,skipContextMarkup:a}=this,o=this.blockParsers.slice(),r=this.leafBlockParsers.slice(),c=this.blockNames.slice(),d=this.inlineParsers.slice(),f=this.inlineNames.slice(),u=this.endLeafBlock.slice(),S=this.wrappers;if(Qt(e.defineNodes)){a=Object.assign({},a);let C=i.types.slice(),b;for(let E of e.defineNodes){let{name:A,block:B,composite:G,style:X}=typeof E=="string"?{name:E}:E;if(C.some(Ye=>Ye.name==A))continue;G&&(a[C.length]=(Ye,Wl,Hl)=>G(Wl,Hl,Ye.value));let Re=C.length,Je=G?["Block","BlockContext"]:B?Re>=_.ATXHeading1&&Re<=_.SetextHeading2?["Block","LeafBlock","Heading"]:["Block","LeafBlock"]:void 0;C.push(At.define({id:Re,name:A,props:Je&&[[Ie.group,Je]]})),X&&(b||(b={}),Array.isArray(X)||X instanceof Xa?b[A]=X:Object.assign(b,X))}i=new di(C),b&&(i=i.extend(Ue(b)))}if(Qt(e.props)&&(i=i.extend(...e.props)),Qt(e.remove))for(let C of e.remove){let b=this.blockNames.indexOf(C),E=this.inlineNames.indexOf(C);b>-1&&(o[b]=r[b]=void 0),E>-1&&(d[E]=void 0)}if(Qt(e.parseBlock))for(let C of e.parseBlock){let b=c.indexOf(C.name);if(b>-1)o[b]=C.parse,r[b]=C.leaf;else{let E=C.before?In(c,C.before):C.after?In(c,C.after)+1:c.length-1;o.splice(E,0,C.parse),r.splice(E,0,C.leaf),c.splice(E,0,C.name)}C.endLeaf&&u.push(C.endLeaf)}if(Qt(e.parseInline))for(let C of e.parseInline){let b=f.indexOf(C.name);if(b>-1)d[b]=C.parse;else{let E=C.before?In(f,C.before):C.after?In(f,C.after)+1:f.length-1;d.splice(E,0,C.parse),f.splice(E,0,C.name)}}return e.wrap&&(S=S.concat(e.wrap)),new n(i,o,r,c,u,a,d,f,S)}getNodeType(t){let e=this.nodeTypes[t];if(e==null)throw new RangeError(`Unknown node type '${t}'`);return e}parseInline(t,e){let i=new Pi(this,t,e);e:for(let a=e;a<i.end;){let o=i.char(a);for(let r of this.inlineParsers)if(r){let c=r(i,o,a);if(c>=0){a=c;continue e}}a++}return i.resolveMarkers(0)}};function Qt(n){return n!=null&&n.length>0}function wi(n){if(!Array.isArray(n))return n;if(n.length==0)return null;let t=wi(n[0]);if(n.length==1)return t;let e=wi(n.slice(1));if(!e||!t)return t||e;let i=(r,c)=>(r||kt).concat(c||kt),a=t.wrap,o=e.wrap;return{props:i(t.props,e.props),defineNodes:i(t.defineNodes,e.defineNodes),parseBlock:i(t.parseBlock,e.parseBlock),parseInline:i(t.parseInline,e.parseInline),remove:i(t.remove,e.remove),wrap:a?o?(r,c,d,f)=>a(o(r,c,d,f),c,d,f):a:o}}function In(n,t){let e=n.indexOf(t);if(e<0)throw new RangeError(`Position specified relative to unknown parser ${t}`);return e}var $r=[At.none];for(let n=1,t;t=_[n];n++)$r[n]=At.define({id:n,name:t,props:n>=_.Escape?[]:[[Ie.group,n in _r?["Block","BlockContext"]:["Block","LeafBlock"]]],top:t=="Document"});var kt=[],Bn=class{constructor(t){this.nodeSet=t,this.content=[],this.nodes=[]}write(t,e,i,a=0){return this.content.push(t,e,i,4+a*4),this}writeElements(t,e=0){for(let i of t)i.writeTo(this,e);return this}finish(t,e){return Ne.build({buffer:this.content,nodeSet:this.nodeSet,reused:this.nodes,topID:t,length:e})}},Ke=class{constructor(t,e,i,a=kt){this.type=t,this.from=e,this.to=i,this.children=a}writeTo(t,e){let i=t.content.length;t.writeElements(this.children,e),t.content.push(this.type,this.from+e,this.to+e,t.content.length+4-i)}toTree(t){return new Bn(t).writeElements(this.children,-this.from).finish(this.type,this.to-this.from)}},Xn=class{constructor(t,e){this.tree=t,this.from=e}get to(){return this.from+this.tree.length}get type(){return this.tree.type.id}get children(){return kt}writeTo(t,e){t.nodes.push(this.tree),t.content.push(t.nodes.length-1,this.from+e,this.to+e,-1)}toTree(){return this.tree}};function I(n,t,e,i){return new Ke(n,t,e,i)}var Mr={resolve:"Emphasis",mark:"EmphasisMark"},Ar={resolve:"Emphasis",mark:"EmphasisMark"},yt={},Ei={},Oe=class{constructor(t,e,i,a){this.type=t,this.from=e,this.to=i,this.side=a}},pr="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~",Nt=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\u2010-\u2027]/;try{Nt=new RegExp("[\\p{S}|\\p{P}]","u")}catch{}var Oi={Escape(n,t,e){if(t!=92||e==n.end-1)return-1;let i=n.char(e+1);for(let a=0;a<pr.length;a++)if(pr.charCodeAt(a)==i)return n.append(I(_.Escape,e,e+2));return-1},Entity(n,t,e){if(t!=38)return-1;let i=/^(?:#\d+|#x[a-f\d]+|\w+);/i.exec(n.slice(e+1,e+31));return i?n.append(I(_.Entity,e,e+1+i[0].length)):-1},InlineCode(n,t,e){if(t!=96||e&&n.char(e-1)==96)return-1;let i=e+1;for(;i<n.end&&n.char(i)==96;)i++;let a=i-e,o=0;for(;i<n.end;i++)if(n.char(i)==96){if(o++,o==a&&n.char(i+1)!=96)return n.append(I(_.InlineCode,e,i+1,[I(_.CodeMark,e,e+a),I(_.CodeMark,i+1-a,i+1)]))}else o=0;return-1},HTMLTag(n,t,e){if(t!=60||e==n.end-1)return-1;let i=n.slice(e+1,n.end),a=/^(?:[a-z][-\w+.]+:[^\s>]+|[a-z\d.!#$%&'*+/=?^_`{|}~-]+@[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?(?:\.[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?)*)>/i.exec(i);if(a)return n.append(I(_.Autolink,e,e+1+a[0].length,[I(_.LinkMark,e,e+1),I(_.URL,e+1,e+a[0].length),I(_.LinkMark,e+a[0].length,e+1+a[0].length)]));let o=/^!--[^>](?:-[^-]|[^-])*?-->/i.exec(i);if(o)return n.append(I(_.Comment,e,e+1+o[0].length));let r=/^\?[^]*?\?>/.exec(i);if(r)return n.append(I(_.ProcessingInstruction,e,e+1+r[0].length));let c=/^(?:![A-Z][^]*?>|!\[CDATA\[[^]*?\]\]>|\/\s*[a-zA-Z][\w-]*\s*>|\s*[a-zA-Z][\w-]*(\s+[a-zA-Z:_][\w-.:]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*(\/\s*)?>)/.exec(i);return c?n.append(I(_.HTMLTag,e,e+1+c[0].length)):-1},Emphasis(n,t,e){if(t!=95&&t!=42)return-1;let i=e+1;for(;n.char(i)==t;)i++;let a=n.slice(e-1,e),o=n.slice(i,i+1),r=Nt.test(a),c=Nt.test(o),d=/\s|^$/.test(a),f=/\s|^$/.test(o),u=!f&&(!c||d||r),S=!d&&(!r||f||c),C=u&&(t==42||!S||r),b=S&&(t==42||!u||c);return n.append(new Oe(t==95?Mr:Ar,e,i,(C?1:0)|(b?2:0)))},HardBreak(n,t,e){if(t==92&&n.char(e+1)==10)return n.append(I(_.HardBreak,e,e+2));if(t==32){let i=e+1;for(;n.char(i)==32;)i++;if(n.char(i)==10&&i>=e+2)return n.append(I(_.HardBreak,e,i+1))}return-1},Link(n,t,e){return t==91?n.append(new Oe(yt,e,e+1,1)):-1},Image(n,t,e){return t==33&&n.char(e+1)==91?n.append(new Oe(Ei,e,e+2,1)):-1},LinkEnd(n,t,e){if(t!=93)return-1;for(let i=n.parts.length-1;i>=0;i--){let a=n.parts[i];if(a instanceof Oe&&(a.type==yt||a.type==Ei)){if(!a.side||n.skipSpace(a.to)==e&&!/[(\[]/.test(n.slice(e+1,e+2)))return n.parts[i]=null,-1;let o=n.takeContent(i),r=n.parts[i]=os(n,o,a.type==yt?_.Link:_.Image,a.from,e+1);if(a.type==yt)for(let c=0;c<i;c++){let d=n.parts[c];d instanceof Oe&&d.type==yt&&(d.side=0)}return r.to}}return-1}};function os(n,t,e,i,a){let{text:o}=n,r=n.char(a),c=a;if(t.unshift(I(_.LinkMark,i,i+(e==_.Image?2:1))),t.push(I(_.LinkMark,a-1,a)),r==40){let d=n.skipSpace(a+1),f=Vr(o,d-n.offset,n.offset),u;f&&(d=n.skipSpace(f.to),d!=f.to&&(u=Qr(o,d-n.offset,n.offset),u&&(d=n.skipSpace(u.to)))),n.char(d)==41&&(t.push(I(_.LinkMark,a,a+1)),c=d+1,f&&t.push(f),u&&t.push(u),t.push(I(_.LinkMark,d,c)))}else if(r==91){let d=Fr(o,a-n.offset,n.offset,!1);d&&(t.push(d),c=d.to)}return I(e,i,c,t)}function Vr(n,t,e){if(n.charCodeAt(t)==60){for(let a=t+1;a<n.length;a++){let o=n.charCodeAt(a);if(o==62)return I(_.URL,t+e,a+1+e);if(o==60||o==10)return!1}return null}else{let a=0,o=t;for(let r=!1;o<n.length;o++){let c=n.charCodeAt(o);if(be(c))break;if(r)r=!1;else if(c==40)a++;else if(c==41){if(!a)break;a--}else c==92&&(r=!0)}return o>t?I(_.URL,t+e,o+e):o==n.length?null:!1}}function Qr(n,t,e){let i=n.charCodeAt(t);if(i!=39&&i!=34&&i!=40)return!1;let a=i==40?41:i;for(let o=t+1,r=!1;o<n.length;o++){let c=n.charCodeAt(o);if(r)r=!1;else{if(c==a)return I(_.LinkTitle,t+e,o+1+e);c==92&&(r=!0)}}return null}function Fr(n,t,e,i){for(let a=!1,o=t+1,r=Math.min(n.length,o+999);o<r;o++){let c=n.charCodeAt(o);if(a)a=!1;else{if(c==93)return i?!1:I(_.LinkLabel,t+e,o+1+e);if(i&&!be(c)&&(i=!1),c==91)return!1;c==92&&(a=!0)}}return null}var Pi=class{constructor(t,e,i){this.parser=t,this.text=e,this.offset=i,this.parts=[]}char(t){return t>=this.end?-1:this.text.charCodeAt(t-this.offset)}get end(){return this.offset+this.text.length}slice(t,e){return this.text.slice(t-this.offset,e-this.offset)}append(t){return this.parts.push(t),t.to}addDelimiter(t,e,i,a,o){return this.append(new Oe(t,e,i,(a?1:0)|(o?2:0)))}get hasOpenLink(){for(let t=this.parts.length-1;t>=0;t--){let e=this.parts[t];if(e instanceof Oe&&(e.type==yt||e.type==Ei))return!0}return!1}addElement(t){return this.append(t)}resolveMarkers(t){for(let i=t;i<this.parts.length;i++){let a=this.parts[i];if(!(a instanceof Oe&&a.type.resolve&&a.side&2))continue;let o=a.type==Mr||a.type==Ar,r=a.to-a.from,c,d=i-1;for(;d>=t;d--){let A=this.parts[d];if(A instanceof Oe&&A.side&1&&A.type==a.type&&!(o&&(a.side&1||A.side&2)&&(A.to-A.from+r)%3==0&&((A.to-A.from)%3||r%3))){c=A;break}}if(!c)continue;let f=a.type.resolve,u=[],S=c.from,C=a.to;if(o){let A=Math.min(2,c.to-c.from,r);S=c.to-A,C=a.from+A,f=A==1?"Emphasis":"StrongEmphasis"}c.type.mark&&u.push(this.elt(c.type.mark,S,c.to));for(let A=d+1;A<i;A++)this.parts[A]instanceof Ke&&u.push(this.parts[A]),this.parts[A]=null;a.type.mark&&u.push(this.elt(a.type.mark,a.from,C));let b=this.elt(f,S,C,u);this.parts[d]=o&&c.from!=S?new Oe(c.type,c.from,S,c.side):null,(this.parts[i]=o&&a.to!=C?new Oe(a.type,C,a.to,a.side):null)?this.parts.splice(i,0,b):this.parts[i]=b}let e=[];for(let i=t;i<this.parts.length;i++){let a=this.parts[i];a instanceof Ke&&e.push(a)}return e}findOpeningDelimiter(t){for(let e=this.parts.length-1;e>=0;e--){let i=this.parts[e];if(i instanceof Oe&&i.type==t)return e}return null}takeContent(t){let e=this.resolveMarkers(t);return this.parts.length=t,e}skipSpace(t){return Ft(this.text,t-this.offset)+this.offset}elt(t,e,i,a){return typeof t=="string"?I(this.parser.getNodeType(t),e,i,a):new Xn(t,e)}};function Ti(n,t){if(!t.length)return n;if(!n.length)return t;let e=n.slice(),i=0;for(let a of t){for(;i<e.length&&e[i].to<a.to;)i++;if(i<e.length&&e[i].from<a.from){let o=e[i];o instanceof Ke&&(e[i]=new Ke(o.type,o.from,o.to,Ti(o.children,[a])))}else e.splice(i++,0,a)}return e}var rs=[_.CodeBlock,_.ListItem,_.OrderedList,_.BulletList],Di=class{constructor(t,e){this.fragments=t,this.input=e,this.i=0,this.fragment=null,this.fragmentEnd=-1,this.cursor=null,t.length&&(this.fragment=t[this.i++])}nextFragment(){this.fragment=this.i<this.fragments.length?this.fragments[this.i++]:null,this.cursor=null,this.fragmentEnd=-1}moveTo(t,e){for(;this.fragment&&this.fragment.to<=t;)this.nextFragment();if(!this.fragment||this.fragment.from>(t?t-1:0))return!1;if(this.fragmentEnd<0){let o=this.fragment.to;for(;o>0&&this.input.read(o-1,o)!=`
`;)o--;this.fragmentEnd=o?o-1:0}let i=this.cursor;i||(i=this.cursor=this.fragment.tree.cursor(),i.firstChild());let a=t+this.fragment.offset;for(;i.to<=a;)if(!i.parent())return!1;for(;;){if(i.from>=a)return this.fragment.from<=e;if(!i.childAfter(a))return!1}}matches(t){let e=this.cursor.tree;return e&&e.prop(Ie.contextHash)==t}takeNodes(t){let e=this.cursor,i=this.fragment.offset,a=this.fragmentEnd-(this.fragment.openEnd?1:0),o=t.absoluteLineStart,r=o,c=t.block.children.length,d=r,f=c;for(;;){if(e.to-i>a){if(e.type.isAnonymous&&e.firstChild())continue;break}let u=Rr(e.from-i,t.ranges);if(e.to-i<=t.ranges[t.rangeI].to)t.addNode(e.tree,u);else{let S=new Ne(t.parser.nodeSet.types[_.Paragraph],[],[],0,t.block.hashProp);t.reusePlaceholders.set(S,e.tree),t.addNode(S,u)}if(e.type.is("Block")&&(rs.indexOf(e.type.id)<0?(r=e.to-i,c=t.block.children.length):(r=d,c=f,d=e.to-i,f=t.block.children.length)),!e.nextSibling())break}for(;t.block.children.length>c;)t.block.children.pop(),t.block.positions.pop();return r-o}};function Rr(n,t){let e=n;for(let i=1;i<t.length;i++){let a=t[i-1].to,o=t[i].from;a<n&&(e-=o-a)}return e}var ls=Ue({"Blockquote/...":k.quote,HorizontalRule:k.contentSeparator,"ATXHeading1/... SetextHeading1/...":k.heading1,"ATXHeading2/... SetextHeading2/...":k.heading2,"ATXHeading3/...":k.heading3,"ATXHeading4/...":k.heading4,"ATXHeading5/...":k.heading5,"ATXHeading6/...":k.heading6,"Comment CommentBlock":k.comment,Escape:k.escape,Entity:k.character,"Emphasis/...":k.emphasis,"StrongEmphasis/...":k.strong,"Link/... Image/...":k.link,"OrderedList/... BulletList/...":k.list,"BlockQuote/...":k.quote,"InlineCode CodeText":k.monospace,"URL Autolink":k.url,"HeaderMark HardBreak QuoteMark ListMark LinkMark EmphasisMark CodeMark":k.processingInstruction,"CodeInfo LinkLabel":k.labelName,LinkTitle:k.string,Paragraph:k.content}),Ir=new It(new di($r).extend(ls),Object.keys(Rn).map(n=>Rn[n]),Object.keys(Rn).map(n=>Tr[n]),Object.keys(Rn),is,_r,Object.keys(Oi).map(n=>Oi[n]),Object.keys(Oi),[]);function ss(n,t,e){let i=[];for(let a=n.firstChild,o=t;;a=a.nextSibling){let r=a?a.from:e;if(r>o&&i.push({from:o,to:r}),!a)break;o=a.to}return i}function Nr(n){let{codeParser:t,htmlParser:e}=n;return{wrap:cn((a,o)=>{let r=a.type.id;if(t&&(r==_.CodeBlock||r==_.FencedCode)){let c="";if(r==_.FencedCode){let f=a.node.getChild(_.CodeInfo);f&&(c=o.read(f.from,f.to))}let d=t(c);if(d)return{parser:d,overlay:f=>f.type.id==_.CodeText}}else if(e&&(r==_.HTMLBlock||r==_.HTMLTag))return{parser:e,overlay:ss(a.node,a.from,a.to)};return null})}}var cs={resolve:"Strikethrough",mark:"StrikethroughMark"},ms={defineNodes:[{name:"Strikethrough",style:{"Strikethrough/...":k.strikethrough}},{name:"StrikethroughMark",style:k.processingInstruction}],parseInline:[{name:"Strikethrough",parse(n,t,e){if(t!=126||n.char(e+1)!=126||n.char(e+2)==126)return-1;let i=n.slice(e-1,e),a=n.slice(e+2,e+3),o=/\s|^$/.test(i),r=/\s|^$/.test(a),c=Nt.test(i),d=Nt.test(a);return n.addDelimiter(cs,e,e+2,!r&&(!d||o||c),!o&&(!c||r||d))},after:"Emphasis"}]};function Rt(n,t,e=0,i,a=0){let o=0,r=!0,c=-1,d=-1,f=!1,u=()=>{i.push(n.elt("TableCell",a+c,a+d,n.parser.parseInline(t.slice(c,d),a+c)))};for(let S=e;S<t.length;S++){let C=t.charCodeAt(S);C==124&&!f?((!r||c>-1)&&o++,r=!1,i&&(c>-1&&u(),i.push(n.elt("TableDelimiter",S+a,S+a+1))),c=d=-1):(f||C!=32&&C!=9)&&(c<0&&(c=S),d=S+1),f=!f&&C==92}return c>-1&&(o++,i&&u()),o}function ur(n,t){for(let e=t;e<n.length;e++){let i=n.charCodeAt(e);if(i==124)return!0;i==92&&e++}return!1}var Br=/^\|?(\s*:?-+:?\s*\|)+(\s*:?-+:?\s*)?$/,Ln=class{constructor(){this.rows=null}nextLine(t,e,i){if(this.rows==null){this.rows=!1;let a;if((e.next==45||e.next==58||e.next==124)&&Br.test(a=e.text.slice(e.pos))){let o=[];Rt(t,i.content,0,o,i.start)==Rt(t,a,e.pos)&&(this.rows=[t.elt("TableHeader",i.start,i.start+i.content.length,o),t.elt("TableDelimiter",t.lineStart+e.pos,t.lineStart+e.text.length)])}}else if(this.rows){let a=[];Rt(t,e.text,e.pos,a,t.lineStart),this.rows.push(t.elt("TableRow",t.lineStart+e.pos,t.lineStart+e.text.length,a))}return!1}finish(t,e){return this.rows?(t.addLeafElement(e,t.elt("Table",e.start,e.start+e.content.length,this.rows)),!0):!1}},ds={defineNodes:[{name:"Table",block:!0},{name:"TableHeader",style:{"TableHeader/...":k.heading}},"TableRow",{name:"TableCell",style:k.content},{name:"TableDelimiter",style:k.processingInstruction}],parseBlock:[{name:"Table",leaf(n,t){return ur(t.content,0)?new Ln:null},endLeaf(n,t,e){if(e.parsers.some(a=>a instanceof Ln)||!ur(t.text,t.basePos))return!1;let i=n.scanLine(n.absoluteLineEnd+1).text;return Br.test(i)&&Rt(n,t.text,t.basePos)==Rt(n,i,t.basePos)},before:"SetextHeading"}]},$i=class{nextLine(){return!1}finish(t,e){return t.addLeafElement(e,t.elt("Task",e.start,e.start+e.content.length,[t.elt("TaskMarker",e.start,e.start+3),...t.parser.parseInline(e.content.slice(3),e.start+3)])),!0}},ps={defineNodes:[{name:"Task",block:!0,style:k.list},{name:"TaskMarker",style:k.atom}],parseBlock:[{name:"TaskList",leaf(n,t){return/^\[[ xX]\][ \t]/.test(t.content)&&n.parentType().name=="ListItem"?new $i:null},after:"SetextHeading"}]},fr=/(www\.)|(https?:\/\/)|([\w.+-]+@)|(mailto:|xmpp:)/gy,hr=/[\w-]+(\.[\w-]+)+(\/[^\s<]*)?/gy,us=/[\w-]+\.[\w-]+($|\/)/,gr=/[\w.+-]+@[\w-]+(\.[\w.-]+)+/gy,Cr=/\/[a-zA-Z\d@.]+/gy;function Or(n,t,e,i){let a=0;for(let o=t;o<e;o++)n[o]==i&&a++;return a}function fs(n,t){hr.lastIndex=t;let e=hr.exec(n);if(!e||us.exec(e[0])[0].indexOf("_")>-1)return-1;let i=t+e[0].length;for(;;){let a=n[i-1],o;if(/[?!.,:*_~]/.test(a)||a==")"&&Or(n,t,i,")")>Or(n,t,i,"("))i--;else if(a==";"&&(o=/&(?:#\d+|#x[a-f\d]+|\w+);$/.exec(n.slice(t,i))))i=t+o.index;else break}return i}function Sr(n,t){gr.lastIndex=t;let e=gr.exec(n);if(!e)return-1;let i=e[0][e[0].length-1];return i=="_"||i=="-"?-1:t+e[0].length-(i=="."?1:0)}var hs={parseInline:[{name:"Autolink",parse(n,t,e){let i=e-n.offset;fr.lastIndex=i;let a=fr.exec(n.text),o=-1;if(!a)return-1;if(a[1]||a[2]){if(o=fs(n.text,i+a[0].length),o>-1&&n.hasOpenLink){let r=/([^\[\]]|\[[^\]]*\])*/.exec(n.text.slice(i,o));o=i+r[0].length}}else a[3]?o=Sr(n.text,i):(o=Sr(n.text,i+a[0].length),o>-1&&a[0]=="xmpp:"&&(Cr.lastIndex=o,a=Cr.exec(n.text),a&&(o=a.index+a[0].length)));return o<0?-1:(n.addElement(n.elt("URL",e,o+n.offset)),o+n.offset)}}]},Xr=[ds,ps,ms,hs];function Lr(n,t,e){return(i,a,o)=>{if(a!=n||i.char(o+1)==n)return-1;let r=[i.elt(e,o,o+1)];for(let c=o+1;c<i.end;c++){let d=i.char(c);if(d==n)return i.addElement(i.elt(t,o,c+1,r.concat(i.elt(e,c,c+1))));if(d==92&&r.push(i.elt("Escape",c,c+++2)),be(d))break}return-1}}var qr={defineNodes:[{name:"Superscript",style:k.special(k.content)},{name:"SuperscriptMark",style:k.processingInstruction}],parseInline:[{name:"Superscript",parse:Lr(94,"Superscript","SuperscriptMark")}]},Yr={defineNodes:[{name:"Subscript",style:k.special(k.content)},{name:"SubscriptMark",style:k.processingInstruction}],parseInline:[{name:"Subscript",parse:Lr(126,"Subscript","SubscriptMark")}]},jr={defineNodes:[{name:"Emoji",style:k.character}],parseInline:[{name:"Emoji",parse(n,t,e){let i;return t!=58||!(i=/^[a-zA-Z_0-9]+:/.exec(n.slice(e+1,n.end)))?-1:n.addElement(n.elt("Emoji",e,e+1+i[0].length))}}]};var gs=54,Cs=1,Os=55,Ss=2,_s=56,ys=3,zr=4,ks=5,qn=6,el=7,tl=8,nl=9,il=10,vs=11,bs=12,xs=13,Qi=57,ws=14,Ur=58,al=20,Es=22,ol=23,Ps=24,Ri=26,rl=27,Ts=28,Ds=31,$s=34,Ms=36,As=37,Vs=0,Qs=1,Fs={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},Rs={dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},Gr={dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}};function Is(n){return n==45||n==46||n==58||n>=65&&n<=90||n==95||n>=97&&n<=122||n>=161}function ll(n){return n==9||n==10||n==13||n==32}var Wr=null,Hr=null,Zr=0;function Ii(n,t){let e=n.pos+t;if(Zr==e&&Hr==n)return Wr;let i=n.peek(t);for(;ll(i);)i=n.peek(++t);let a="";for(;Is(i);)a+=String.fromCharCode(i),i=n.peek(++t);return Hr=n,Zr=e,Wr=a?a.toLowerCase():i==Ns||i==Bs?void 0:null}var sl=60,Yn=62,Ni=47,Ns=63,Bs=33,Xs=45;function Kr(n,t){this.name=n,this.parent=t}var Ls=[qn,il,el,tl,nl],qs=new uo({start:null,shift(n,t,e,i){return Ls.indexOf(t)>-1?new Kr(Ii(i,1)||"",n):n},reduce(n,t){return t==al&&n?n.parent:n},reuse(n,t,e,i){let a=t.type.id;return a==qn||a==Ms?new Kr(Ii(i,1)||"",n):n},strict:!1}),Ys=new Qe((n,t)=>{if(n.next!=sl){n.next<0&&t.context&&n.acceptToken(Qi);return}n.advance();let e=n.next==Ni;e&&n.advance();let i=Ii(n,0);if(i===void 0)return;if(!i)return n.acceptToken(e?ws:qn);let a=t.context?t.context.name:null;if(e){if(i==a)return n.acceptToken(vs);if(a&&Rs[a])return n.acceptToken(Qi,-2);if(t.dialectEnabled(Vs))return n.acceptToken(bs);for(let o=t.context;o;o=o.parent)if(o.name==i)return;n.acceptToken(xs)}else{if(i=="script")return n.acceptToken(el);if(i=="style")return n.acceptToken(tl);if(i=="textarea")return n.acceptToken(nl);if(Fs.hasOwnProperty(i))return n.acceptToken(il);a&&Gr[a]&&Gr[a][i]?n.acceptToken(Qi,-1):n.acceptToken(qn)}},{contextual:!0}),js=new Qe(n=>{for(let t=0,e=0;;e++){if(n.next<0){e&&n.acceptToken(Ur);break}if(n.next==Xs)t++;else if(n.next==Yn&&t>=2){e>=3&&n.acceptToken(Ur,-2);break}else t=0;n.advance()}});function zs(n){for(;n;n=n.parent)if(n.name=="svg"||n.name=="math")return!0;return!1}var Us=new Qe((n,t)=>{if(n.next==Ni&&n.peek(1)==Yn){let e=t.dialectEnabled(Qs)||zs(t.context);n.acceptToken(e?ks:zr,2)}else n.next==Yn&&n.acceptToken(zr,1)});function Bi(n,t,e){let i=2+n.length;return new Qe(a=>{for(let o=0,r=0,c=0;;c++){if(a.next<0){c&&a.acceptToken(t);break}if(o==0&&a.next==sl||o==1&&a.next==Ni||o>=2&&o<i&&a.next==n.charCodeAt(o-2))o++,r++;else if((o==2||o==i)&&ll(a.next))r++;else if(o==i&&a.next==Yn){c>r?a.acceptToken(t,-r):a.acceptToken(e,-(r-2));break}else if((a.next==10||a.next==13)&&c){a.acceptToken(t,1);break}else o=r=0;a.advance()}})}var Gs=Bi("script",gs,Cs),Ws=Bi("style",Os,Ss),Hs=Bi("textarea",_s,ys),Zs=Ue({"Text RawText":k.content,"StartTag StartCloseTag SelfClosingEndTag EndTag":k.angleBracket,TagName:k.tagName,"MismatchedCloseTag/TagName":[k.tagName,k.invalid],AttributeName:k.attributeName,"AttributeValue UnquotedAttributeValue":k.attributeValue,Is:k.definitionOperator,"EntityReference CharacterReference":k.character,Comment:k.blockComment,ProcessingInst:k.processingInstruction,DoctypeDecl:k.documentMeta}),cl=dn.deserialize({version:14,states:",xOVO!rOOO!WQ#tO'#CqO!]Q#tO'#CzO!bQ#tO'#C}O!gQ#tO'#DQO!lQ#tO'#DSO!qOaO'#CpO!|ObO'#CpO#XOdO'#CpO$eO!rO'#CpOOO`'#Cp'#CpO$lO$fO'#DTO$tQ#tO'#DVO$yQ#tO'#DWOOO`'#Dk'#DkOOO`'#DY'#DYQVO!rOOO%OQ&rO,59]O%ZQ&rO,59fO%fQ&rO,59iO%qQ&rO,59lO%|Q&rO,59nOOOa'#D^'#D^O&XOaO'#CxO&dOaO,59[OOOb'#D_'#D_O&lObO'#C{O&wObO,59[OOOd'#D`'#D`O'POdO'#DOO'[OdO,59[OOO`'#Da'#DaO'dO!rO,59[O'kQ#tO'#DROOO`,59[,59[OOOp'#Db'#DbO'pO$fO,59oOOO`,59o,59oO'xQ#|O,59qO'}Q#|O,59rOOO`-E7W-E7WO(SQ&rO'#CsOOQW'#DZ'#DZO(bQ&rO1G.wOOOa1G.w1G.wOOO`1G/Y1G/YO(mQ&rO1G/QOOOb1G/Q1G/QO(xQ&rO1G/TOOOd1G/T1G/TO)TQ&rO1G/WOOO`1G/W1G/WO)`Q&rO1G/YOOOa-E7[-E7[O)kQ#tO'#CyOOO`1G.v1G.vOOOb-E7]-E7]O)pQ#tO'#C|OOOd-E7^-E7^O)uQ#tO'#DPOOO`-E7_-E7_O)zQ#|O,59mOOOp-E7`-E7`OOO`1G/Z1G/ZOOO`1G/]1G/]OOO`1G/^1G/^O*PQ,UO,59_OOQW-E7X-E7XOOOa7+$c7+$cOOO`7+$t7+$tOOOb7+$l7+$lOOOd7+$o7+$oOOO`7+$r7+$rO*[Q#|O,59eO*aQ#|O,59hO*fQ#|O,59kOOO`1G/X1G/XO*kO7[O'#CvO*|OMhO'#CvOOQW1G.y1G.yOOO`1G/P1G/POOO`1G/S1G/SOOO`1G/V1G/VOOOO'#D['#D[O+_O7[O,59bOOQW,59b,59bOOOO'#D]'#D]O+pOMhO,59bOOOO-E7Y-E7YOOQW1G.|1G.|OOOO-E7Z-E7Z",stateData:",]~O!^OS~OUSOVPOWQOXROYTO[]O][O^^O`^Oa^Ob^Oc^Ox^O{_O!dZO~OfaO~OfbO~OfcO~OfdO~OfeO~O!WfOPlP!ZlP~O!XiOQoP!ZoP~O!YlORrP!ZrP~OUSOVPOWQOXROYTOZqO[]O][O^^O`^Oa^Ob^Oc^Ox^O!dZO~O!ZrO~P#dO![sO!euO~OfvO~OfwO~OS|OT}OhyO~OS!POT}OhyO~OS!ROT}OhyO~OS!TOT}OhyO~OS}OT}OhyO~O!WfOPlX!ZlX~OP!WO!Z!XO~O!XiOQoX!ZoX~OQ!ZO!Z!XO~O!YlORrX!ZrX~OR!]O!Z!XO~O!Z!XO~P#dOf!_O~O![sO!e!aO~OS!bO~OS!cO~Oi!dOSgXTgXhgX~OS!fOT!gOhyO~OS!hOT!gOhyO~OS!iOT!gOhyO~OS!jOT!gOhyO~OS!gOT!gOhyO~Of!kO~Of!lO~Of!mO~OS!nO~Ok!qO!`!oO!b!pO~OS!rO~OS!sO~OS!tO~Oa!uOb!uOc!uO!`!wO!a!uO~Oa!xOb!xOc!xO!b!wO!c!xO~Oa!uOb!uOc!uO!`!{O!a!uO~Oa!xOb!xOc!xO!b!{O!c!xO~OT~bac!dx{!d~",goto:"%p!`PPPPPPPPPPPPPPPPPPPP!a!gP!mPP!yP!|#P#S#Y#]#`#f#i#l#r#x!aP!a!aP$O$U$l$r$x%O%U%[%bPPPPPPPP%hX^OX`pXUOX`pezabcde{!O!Q!S!UR!q!dRhUR!XhXVOX`pRkVR!XkXWOX`pRnWR!XnXXOX`pQrXR!XpXYOX`pQ`ORx`Q{aQ!ObQ!QcQ!SdQ!UeZ!e{!O!Q!S!UQ!v!oR!z!vQ!y!pR!|!yQgUR!VgQjVR!YjQmWR![mQpXR!^pQtZR!`tS_O`ToXp",nodeNames:"\u26A0 StartCloseTag StartCloseTag StartCloseTag EndTag SelfClosingEndTag StartTag StartTag StartTag StartTag StartTag StartCloseTag StartCloseTag StartCloseTag IncompleteCloseTag Document Text EntityReference CharacterReference InvalidEntity Element OpenTag TagName Attribute AttributeName Is AttributeValue UnquotedAttributeValue ScriptText CloseTag OpenTag StyleText CloseTag OpenTag TextareaText CloseTag OpenTag CloseTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag CloseTag DoctypeDecl",maxTerm:67,context:qs,nodeProps:[["closedBy",-10,1,2,3,7,8,9,10,11,12,13,"EndTag",6,"EndTag SelfClosingEndTag",-4,21,30,33,36,"CloseTag"],["openedBy",4,"StartTag StartCloseTag",5,"StartTag",-4,29,32,35,37,"OpenTag"],["group",-9,14,17,18,19,20,39,40,41,42,"Entity",16,"Entity TextContent",-3,28,31,34,"TextContent Entity"],["isolate",-11,21,29,30,32,33,35,36,37,38,41,42,"ltr",-3,26,27,39,""]],propSources:[Zs],skippedNodes:[0],repeatNodeCount:9,tokenData:"!<p!aR!YOX$qXY,QYZ,QZ[$q[]&X]^,Q^p$qpq,Qqr-_rs3_sv-_vw3}wxHYx}-_}!OH{!O!P-_!P!Q$q!Q![-_![!]Mz!]!^-_!^!_!$S!_!`!;x!`!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4U-_4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!Z$|c`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr$qrs&}sv$qvw+Pwx(tx!^$q!^!_*V!_!a&X!a#S$q#S#T&X#T;'S$q;'S;=`+z<%lO$q!R&bX`P!a`!cpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&Xq'UV`P!cpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}P'pT`POv'kw!^'k!_;'S'k;'S;=`(P<%lO'kP(SP;=`<%l'kp([S!cpOv(Vx;'S(V;'S;=`(h<%lO(Vp(kP;=`<%l(Vq(qP;=`<%l&}a({W`P!a`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t`)jT!a`Or)esv)ew;'S)e;'S;=`)y<%lO)e`)|P;=`<%l)ea*SP;=`<%l(t!Q*^V!a`!cpOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!Q*vP;=`<%l*V!R*|P;=`<%l&XW+UYkWOX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+PW+wP;=`<%l+P!Z+}P;=`<%l$q!a,]``P!a`!cp!^^OX&XXY,QYZ,QZ]&X]^,Q^p&Xpq,Qqr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!_-ljhS`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q[/ebhSkWOX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+PS0rXhSqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0mS1bP;=`<%l0m[1hP;=`<%l/^!V1vchS`P!a`!cpOq&Xqr1krs&}sv1kvw0mwx(tx!P1k!P!Q&X!Q!^1k!^!_*V!_!a&X!a#s1k#s$f&X$f;'S1k;'S;=`3R<%l?Ah1k?Ah?BY&X?BY?Mn1k?MnO&X!V3UP;=`<%l1k!_3[P;=`<%l-_!Z3hV!`h`P!cpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}!_4WihSkWc!ROX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst>]tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^/^!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!Z5zbkWOX5uXZ7SZ[5u[^7S^p5uqr5urs7Sst+Ptw5uwx7Sx!]5u!]!^7w!^!a7S!a#S5u#S#T7S#T;'S5u;'S;=`8n<%lO5u!R7VVOp7Sqs7St!]7S!]!^7l!^;'S7S;'S;=`7q<%lO7S!R7qOa!R!R7tP;=`<%l7S!Z8OYkWa!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!Z8qP;=`<%l5u!_8{ihSkWOX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst/^tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^:j!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!_:sbhSkWa!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!V<QchSOp7Sqr;{rs7Sst0mtw;{wx7Sx!P;{!P!Q7S!Q!];{!]!^=]!^!a7S!a#s;{#s$f7S$f;'S;{;'S;=`>P<%l?Ah;{?Ah?BY7S?BY?Mn;{?MnO7S!V=dXhSa!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!V>SP;=`<%l;{!_>YP;=`<%l8t!_>dhhSkWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^/^!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!Z@TakWOX@OXZAYZ[@O[^AY^p@Oqr@OrsAYsw@OwxAYx!]@O!]!^Az!^!aAY!a#S@O#S#TAY#T;'S@O;'S;=`Bq<%lO@O!RA]UOpAYq!]AY!]!^Ao!^;'SAY;'S;=`At<%lOAY!RAtOb!R!RAwP;=`<%lAY!ZBRYkWb!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!ZBtP;=`<%l@O!_COhhSkWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^Dj!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!_DsbhSkWb!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!VFQbhSOpAYqrE{rsAYswE{wxAYx!PE{!P!QAY!Q!]E{!]!^GY!^!aAY!a#sE{#s$fAY$f;'SE{;'S;=`G|<%l?AhE{?Ah?BYAY?BY?MnE{?MnOAY!VGaXhSb!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!VHPP;=`<%lE{!_HVP;=`<%lBw!ZHcW!bx`P!a`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t!aIYlhS`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OKQ!O!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!aK_khS`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!`&X!`!aMS!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!TM_X`P!a`!cp!eQOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!aNZ!ZhSfQ`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OMz!O!PMz!P!Q$q!Q![Mz![!]Mz!]!^-_!^!_*V!_!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f$}-_$}%OMz%O%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4UMz4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Je-_$Je$JgMz$Jg$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!a!$PP;=`<%lMz!R!$ZY!a`!cpOq*Vqr!$yrs(Vsv*Vwx)ex!a*V!a!b!4t!b;'S*V;'S;=`*s<%lO*V!R!%Q]!a`!cpOr*Vrs(Vsv*Vwx)ex}*V}!O!%y!O!f*V!f!g!']!g#W*V#W#X!0`#X;'S*V;'S;=`*s<%lO*V!R!&QX!a`!cpOr*Vrs(Vsv*Vwx)ex}*V}!O!&m!O;'S*V;'S;=`*s<%lO*V!R!&vV!a`!cp!dPOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!'dX!a`!cpOr*Vrs(Vsv*Vwx)ex!q*V!q!r!(P!r;'S*V;'S;=`*s<%lO*V!R!(WX!a`!cpOr*Vrs(Vsv*Vwx)ex!e*V!e!f!(s!f;'S*V;'S;=`*s<%lO*V!R!(zX!a`!cpOr*Vrs(Vsv*Vwx)ex!v*V!v!w!)g!w;'S*V;'S;=`*s<%lO*V!R!)nX!a`!cpOr*Vrs(Vsv*Vwx)ex!{*V!{!|!*Z!|;'S*V;'S;=`*s<%lO*V!R!*bX!a`!cpOr*Vrs(Vsv*Vwx)ex!r*V!r!s!*}!s;'S*V;'S;=`*s<%lO*V!R!+UX!a`!cpOr*Vrs(Vsv*Vwx)ex!g*V!g!h!+q!h;'S*V;'S;=`*s<%lO*V!R!+xY!a`!cpOr!+qrs!,hsv!+qvw!-Swx!.[x!`!+q!`!a!/j!a;'S!+q;'S;=`!0Y<%lO!+qq!,mV!cpOv!,hvx!-Sx!`!,h!`!a!-q!a;'S!,h;'S;=`!.U<%lO!,hP!-VTO!`!-S!`!a!-f!a;'S!-S;'S;=`!-k<%lO!-SP!-kO{PP!-nP;=`<%l!-Sq!-xS!cp{POv(Vx;'S(V;'S;=`(h<%lO(Vq!.XP;=`<%l!,ha!.aX!a`Or!.[rs!-Ssv!.[vw!-Sw!`!.[!`!a!.|!a;'S!.[;'S;=`!/d<%lO!.[a!/TT!a`{POr)esv)ew;'S)e;'S;=`)y<%lO)ea!/gP;=`<%l!.[!R!/sV!a`!cp{POr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!0]P;=`<%l!+q!R!0gX!a`!cpOr*Vrs(Vsv*Vwx)ex#c*V#c#d!1S#d;'S*V;'S;=`*s<%lO*V!R!1ZX!a`!cpOr*Vrs(Vsv*Vwx)ex#V*V#V#W!1v#W;'S*V;'S;=`*s<%lO*V!R!1}X!a`!cpOr*Vrs(Vsv*Vwx)ex#h*V#h#i!2j#i;'S*V;'S;=`*s<%lO*V!R!2qX!a`!cpOr*Vrs(Vsv*Vwx)ex#m*V#m#n!3^#n;'S*V;'S;=`*s<%lO*V!R!3eX!a`!cpOr*Vrs(Vsv*Vwx)ex#d*V#d#e!4Q#e;'S*V;'S;=`*s<%lO*V!R!4XX!a`!cpOr*Vrs(Vsv*Vwx)ex#X*V#X#Y!+q#Y;'S*V;'S;=`*s<%lO*V!R!4{Y!a`!cpOr!4trs!5ksv!4tvw!6Vwx!8]x!a!4t!a!b!:]!b;'S!4t;'S;=`!;r<%lO!4tq!5pV!cpOv!5kvx!6Vx!a!5k!a!b!7W!b;'S!5k;'S;=`!8V<%lO!5kP!6YTO!a!6V!a!b!6i!b;'S!6V;'S;=`!7Q<%lO!6VP!6lTO!`!6V!`!a!6{!a;'S!6V;'S;=`!7Q<%lO!6VP!7QOxPP!7TP;=`<%l!6Vq!7]V!cpOv!5kvx!6Vx!`!5k!`!a!7r!a;'S!5k;'S;=`!8V<%lO!5kq!7yS!cpxPOv(Vx;'S(V;'S;=`(h<%lO(Vq!8YP;=`<%l!5ka!8bX!a`Or!8]rs!6Vsv!8]vw!6Vw!a!8]!a!b!8}!b;'S!8];'S;=`!:V<%lO!8]a!9SX!a`Or!8]rs!6Vsv!8]vw!6Vw!`!8]!`!a!9o!a;'S!8];'S;=`!:V<%lO!8]a!9vT!a`xPOr)esv)ew;'S)e;'S;=`)y<%lO)ea!:YP;=`<%l!8]!R!:dY!a`!cpOr!4trs!5ksv!4tvw!6Vwx!8]x!`!4t!`!a!;S!a;'S!4t;'S;=`!;r<%lO!4t!R!;]V!a`!cpxPOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!;uP;=`<%l!4t!V!<TXiS`P!a`!cpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X",tokenizers:[Gs,Ws,Hs,Us,Ys,js,0,1,2,3,4,5],topRules:{Document:[0,15]},dialects:{noMatch:0,selfClosing:509},tokenPrec:511});function ml(n,t){let e=Object.create(null);for(let i of n.getChildren(ol)){let a=i.getChild(Ps),o=i.getChild(Ri)||i.getChild(rl);a&&(e[t.read(a.from,a.to)]=o?o.type.id==Ri?t.read(o.from+1,o.to-1):t.read(o.from,o.to):"")}return e}function Jr(n,t){let e=n.getChild(Es);return e?t.read(e.from,e.to):" "}function Fi(n,t,e){let i;for(let a of e)if(!a.attrs||a.attrs(i||(i=ml(n.node.parent.firstChild,t))))return{parser:a.parser};return null}function Xi(n=[],t=[]){let e=[],i=[],a=[],o=[];for(let c of n)(c.tag=="script"?e:c.tag=="style"?i:c.tag=="textarea"?a:o).push(c);let r=t.length?Object.create(null):null;for(let c of t)(r[c.name]||(r[c.name]=[])).push(c);return cn((c,d)=>{let f=c.type.id;if(f==Ts)return Fi(c,d,e);if(f==Ds)return Fi(c,d,i);if(f==$s)return Fi(c,d,a);if(f==al&&o.length){let u=c.node,S=u.firstChild,C=S&&Jr(S,d),b;if(C){for(let E of o)if(E.tag==C&&(!E.attrs||E.attrs(b||(b=ml(S,d))))){let A=u.lastChild,B=A.type.id==As?A.from:u.to;if(B>S.to)return{parser:E.parser,overlay:[{from:S.to,to:B}]}}}}if(r&&f==ol){let u=c.node,S;if(S=u.firstChild){let C=r[d.read(S.from,S.to)];if(C)for(let b of C){if(b.tagName&&b.tagName!=Jr(u.parent,d))continue;let E=u.lastChild;if(E.type.id==Ri){let A=E.from+1,B=E.lastChild,G=E.to-(B&&B.isError?0:1);if(G>A)return{parser:b.parser,overlay:[{from:A,to:G}]}}else if(E.type.id==rl)return{parser:b.parser,overlay:[{from:E.from,to:E.to}]}}}}return null})}var Ks=99,dl=1,Js=100,ec=101,pl=2,ul=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],tc=58,nc=40,fl=95,ic=91,jn=45,ac=46,oc=35,rc=37,lc=38,sc=92,cc=10;function Bt(n){return n>=65&&n<=90||n>=97&&n<=122||n>=161}function hl(n){return n>=48&&n<=57}var mc=new Qe((n,t)=>{for(let e=!1,i=0,a=0;;a++){let{next:o}=n;if(Bt(o)||o==jn||o==fl||e&&hl(o))!e&&(o!=jn||a>0)&&(e=!0),i===a&&o==jn&&i++,n.advance();else if(o==sc&&n.peek(1)!=cc)n.advance(),n.next>-1&&n.advance(),e=!0;else{e&&n.acceptToken(o==nc?Js:i==2&&t.canShift(pl)?pl:ec);break}}}),dc=new Qe(n=>{if(ul.includes(n.peek(-1))){let{next:t}=n;(Bt(t)||t==fl||t==oc||t==ac||t==ic||t==tc&&Bt(n.peek(1))||t==jn||t==lc)&&n.acceptToken(Ks)}}),pc=new Qe(n=>{if(!ul.includes(n.peek(-1))){let{next:t}=n;if(t==rc&&(n.advance(),n.acceptToken(dl)),Bt(t)){do n.advance();while(Bt(n.next)||hl(n.next));n.acceptToken(dl)}}}),uc=Ue({"AtKeyword import charset namespace keyframes media supports":k.definitionKeyword,"from to selector":k.keyword,NamespaceName:k.namespace,KeyframeName:k.labelName,KeyframeRangeName:k.operatorKeyword,TagName:k.tagName,ClassName:k.className,PseudoClassName:k.constant(k.className),IdName:k.labelName,"FeatureName PropertyName":k.propertyName,AttributeName:k.attributeName,NumberLiteral:k.number,KeywordQuery:k.keyword,UnaryQueryOp:k.operatorKeyword,"CallTag ValueName":k.atom,VariableName:k.variableName,Callee:k.operatorKeyword,Unit:k.unit,"UniversalSelector NestingSelector":k.definitionOperator,MatchOp:k.compareOperator,"ChildOp SiblingOp, LogicOp":k.logicOperator,BinOp:k.arithmeticOperator,Important:k.modifier,Comment:k.blockComment,ColorLiteral:k.color,"ParenthesizedContent StringLiteral":k.string,":":k.punctuation,"PseudoOp #":k.derefOperator,"; ,":k.separator,"( )":k.paren,"[ ]":k.squareBracket,"{ }":k.brace}),fc={__proto__:null,lang:32,"nth-child":32,"nth-last-child":32,"nth-of-type":32,"nth-last-of-type":32,dir:32,"host-context":32,url:60,"url-prefix":60,domain:60,regexp:60,selector:138},hc={__proto__:null,"@import":118,"@media":142,"@charset":146,"@namespace":150,"@keyframes":156,"@supports":168},gc={__proto__:null,not:132,only:132},gl=dn.deserialize({version:14,states:":jQYQ[OOO#_Q[OOP#fOWOOOOQP'#Cd'#CdOOQP'#Cc'#CcO#kQ[O'#CfO$_QXO'#CaO$fQ[O'#ChO$qQ[O'#DTO$vQ[O'#DWOOQP'#Em'#EmO${QdO'#DgO%jQ[O'#DtO${QdO'#DvO%{Q[O'#DxO&WQ[O'#D{O&`Q[O'#ERO&nQ[O'#ETOOQS'#El'#ElOOQS'#EW'#EWQYQ[OOO&uQXO'#CdO'jQWO'#DcO'oQWO'#EsO'zQ[O'#EsQOQWOOP(UO#tO'#C_POOO)C@[)C@[OOQP'#Cg'#CgOOQP,59Q,59QO#kQ[O,59QO(aQ[O'#E[O({QWO,58{O)TQ[O,59SO$qQ[O,59oO$vQ[O,59rO(aQ[O,59uO(aQ[O,59wO(aQ[O,59xO)`Q[O'#DbOOQS,58{,58{OOQP'#Ck'#CkOOQO'#DR'#DROOQP,59S,59SO)gQWO,59SO)lQWO,59SOOQP'#DV'#DVOOQP,59o,59oOOQO'#DX'#DXO)qQ`O,59rOOQS'#Cp'#CpO${QdO'#CqO)yQvO'#CsO+ZQtO,5:ROOQO'#Cx'#CxO)lQWO'#CwO+oQWO'#CyO+tQ[O'#DOOOQS'#Ep'#EpOOQO'#Dj'#DjO+|Q[O'#DqO,[QWO'#EtO&`Q[O'#DoO,jQWO'#DrOOQO'#Eu'#EuO)OQWO,5:`O,oQpO,5:bOOQS'#Dz'#DzO,wQWO,5:dO,|Q[O,5:dOOQO'#D}'#D}O-UQWO,5:gO-ZQWO,5:mO-cQWO,5:oOOQS-E8U-E8UO-kQdO,59}O-{Q[O'#E^O.YQWO,5;_O.YQWO,5;_POOO'#EV'#EVP.eO#tO,58yPOOO,58y,58yOOQP1G.l1G.lO/[QXO,5:vOOQO-E8Y-E8YOOQS1G.g1G.gOOQP1G.n1G.nO)gQWO1G.nO)lQWO1G.nOOQP1G/Z1G/ZO/iQ`O1G/^O0SQXO1G/aO0jQXO1G/cO1QQXO1G/dO1hQWO,59|O1mQ[O'#DSO1tQdO'#CoOOQP1G/^1G/^O${QdO1G/^O1{QpO,59]OOQS,59_,59_O${QdO,59aO2TQWO1G/mOOQS,59c,59cO2YQ!bO,59eOOQS'#DP'#DPOOQS'#EY'#EYO2eQ[O,59jOOQS,59j,59jO2mQWO'#DjO2xQWO,5:VO2}QWO,5:]O&`Q[O,5:XO&`Q[O'#E_O3VQWO,5;`O3bQWO,5:ZO(aQ[O,5:^OOQS1G/z1G/zOOQS1G/|1G/|OOQS1G0O1G0OO3sQWO1G0OO3xQdO'#EOOOQS1G0R1G0ROOQS1G0X1G0XOOQS1G0Z1G0ZO4TQtO1G/iOOQO1G/i1G/iOOQO,5:x,5:xO4kQ[O,5:xOOQO-E8[-E8[O4xQWO1G0yPOOO-E8T-E8TPOOO1G.e1G.eOOQP7+$Y7+$YOOQP7+$x7+$xO${QdO7+$xOOQS1G/h1G/hO5TQXO'#ErO5[QWO,59nO5aQtO'#EXO6XQdO'#EoO6cQWO,59ZO6hQpO7+$xOOQS1G.w1G.wOOQS1G.{1G.{OOQS7+%X7+%XOOQS1G/P1G/PO6pQWO1G/POOQS-E8W-E8WOOQS1G/U1G/UO${QdO1G/qOOQO1G/w1G/wOOQO1G/s1G/sO6uQWO,5:yOOQO-E8]-E8]O7TQXO1G/xOOQS7+%j7+%jO7[QYO'#CsOOQO'#EQ'#EQO7gQ`O'#EPOOQO'#EP'#EPO7rQWO'#E`O7zQdO,5:jOOQS,5:j,5:jO8VQtO'#E]O${QdO'#E]O9WQdO7+%TOOQO7+%T7+%TOOQO1G0d1G0dO9kQpO<<HdO9sQWO,5;^OOQP1G/Y1G/YOOQS-E8V-E8VO${QdO'#EZO9{QWO,5;ZOOQT1G.u1G.uOOQP<<Hd<<HdOOQS7+$k7+$kO:TQdO7+%]OOQO7+%d7+%dOOQO,5:k,5:kO3{QdO'#EaO7rQWO,5:zOOQS,5:z,5:zOOQS-E8^-E8^OOQS1G0U1G0UO:[QtO,5:wOOQS-E8Z-E8ZOOQO<<Ho<<HoOOQPAN>OAN>OO;]QdO,5:uOOQO-E8X-E8XOOQO<<Hw<<HwOOQO,5:{,5:{OOQO-E8_-E8_OOQS1G0f1G0f",stateData:";o~O#ZOS#[QQ~OUYOXYO]VO^VOqXOxWO![aO!]ZO!i[O!k]O!m^O!p_O!v`O#XRO#bTO~OQfOUYOXYO]VO^VOqXOxWO![aO!]ZO!i[O!k]O!m^O!p_O!v`O#XeO#bTO~O#U#gP~P!ZO#[jO~O#XlO~O]qO^qOqsOtoOxrO!OtO!RvO#VuO#bnO~O!TwO~P#pO`}O#WzO#XyO~O#X!OO~O#X!QO~OQ![Ob!TOf![Oh![On!YOq!ZO#W!WO#X!SO#e!UO~Ob!^O!d!`O!g!aO#X!]O!T#hP~Oh!fOn!YO#X!eO~Oh!hO#X!hO~Ob!^O!d!`O!g!aO#X!]O~O!Y#hP~P%jO]WX]!WX^WXqWXtWXxWX!OWX!RWX!TWX#VWX#bWX~O]!mO~O!Y!nO#U#gX!S#gX~O#U#gX!S#gX~P!ZO#]!qO#^!qO#_!sO~OUYOXYO]VO^VOqXOxWO#XRO#bTO~OtoO!TwO~O`!zO#WzO#XyO~O!S#gP~P!ZOb#RO~Ob#SO~Op#TO|#UO~OP#WObgXjgX!YgX!dgX!ggX#XgXagXQgXfgXhgXngXqgXtgX!XgX#UgX#WgX#egXpgX!SgX~Ob!^Oj#XO!d!`O!g!aO#X!]O!Y#hP~Ob#[O~Op#`O#X#]O~Ob!^O!d!`O!g!aO#X#aO~Ot#eO!b#dO!T#hX!Y#hX~Ob#hO~Oj#XO!Y#jO~O!Y#kO~Oh#lOn!YO~O!T#mO~O!TwO!b#dO~O!TwO!Y#pO~O!X#rO!Y!Va#U!Va!S!Va~P${O!Y#QX#U#QX!S#QX~P!ZO!Y!nO#U#ga!S#ga~O#]!qO#^!qO#_#xO~O]qO^qOqsOxrO!OtO!RvO#VuO#bnO~Ot#Oa!T#Oaa#Oa~P.pOp#zO|#{O~O]qO^qOqsOxrO#bnO~Ot}i!O}i!R}i!T}i#V}ia}i~P/qOt!Pi!O!Pi!R!Pi!T!Pi#V!Pia!Pi~P/qOt!Qi!O!Qi!R!Qi!T!Qi#V!Qia!Qi~P/qO!S#|O~Oa#fP~P(aOa#cP~P${Oa$TOj#XO~O!Y$VO~Oa$WOh$XOo$XO~Op$ZO#X#]O~O]!`Xa!^X!b!^X~O]$[O~Oa$]O!b#dO~Ot#eO!T#ha!Y#ha~O!b#dOt!ca!T!ca!Y!caa!ca~O!Y$bO~O!S$iO#X$dO#e$cO~Oj#XOt$kO!X$mO!Y!Vi#U!Vi!S!Vi~P${O!Y#Qa#U#Qa!S#Qa~P!ZO!Y!nO#U#gi!S#gi~Oa#fX~P#pOa$qO~Oj#XOQ!{Xa!{Xb!{Xf!{Xh!{Xn!{Xq!{Xt!{X#W!{X#X!{X#e!{X~Ot$sOa#cX~P${Oa$uO~Oj#XOp$vO~Oa$wO~O!b#dOt#Ra!T#Ra!Y#Ra~Oa$yO~P.pOP#WOtgX!TgX~O#e$cOt!sX!T!sX~Ot${O!TwO~O!S%PO#X$dO#e$cO~Oj#XOQ#PXb#PXf#PXh#PXn#PXq#PXt#PX!X#PX!Y#PX#U#PX#W#PX#X#PX#e#PX!S#PX~Ot$kO!X%SO!Y!Vq#U!Vq!S!Vq~P${Oj#XOp%TO~OtoOa#fa~Ot$sOa#ca~Oa%WO~P${Oj#XOQ#Pab#Paf#Pah#Pan#Paq#Pat#Pa!X#Pa!Y#Pa#U#Pa#W#Pa#X#Pa#e#Pa!S#Pa~Oa!}at!}a~P${O#Zo#[#ej!R#e~",goto:"-g#jPPP#kP#nP#w$WP#w$g#wPP$mPPP$s$|$|P%`P$|P$|%z&^PPPP$|&vP&z'Q#wP'W#w'^P#wP#w#wPPP'd'y(WPP#nPP(_(_(i(_P(_P(_(_P#nP#nP#nP(l#nP(o(r(u(|#nP#nP)R)X)h)v)|*S*^*d*n*t*zPPPPPPPPPP+Q+ZP+v+yP,o,r,x-RRkQ_bOPdhw!n#tkYOPdhotuvw!n#R#h#tkSOPdhotuvw!n#R#h#tQmTR!tnQ{VR!xqQ!x}Q#Z!XR#y!zq![Z]!T!m#S#U#X#q#{$Q$[$k$l$s$x%Up![Z]!T!m#S#U#X#q#{$Q$[$k$l$s$x%UU$f#m$h${R$z$eq!XZ]!T!m#S#U#X#q#{$Q$[$k$l$s$x%Up![Z]!T!m#S#U#X#q#{$Q$[$k$l$s$x%UQ!f^R#l!gT#^!Z#_Q|VR!yqQ!x|R#y!yQ!PWR!{rQ!RXR!|sQxUQ!wpQ#i!cQ#o!jQ#p!kQ$}$gR%Z$|SgPwQ!phQ#s!nR$n#tZfPhw!n#ta!b[`a!V!^!`#d#eR#b!^R!g^R!i_R#n!iS$g#m$hR%X${V$e#m$h${Q!rjR#w!rQdOShPwU!ldh#tR#t!nQ$Q#SU$r$Q$x%UQ$x$[R%U$sQ#_!ZR$Y#_Q$t$QR%V$tQpUS!vp$pR$p#}Q$l#qR%R$lQ!ogS#u!o#vR#v!pQ#f!_R$`#fQ$h#mR%O$hQ$|$gR%Y$|_cOPdhw!n#t^UOPdhw!n#tQ!uoQ!}tQ#OuQ#PvQ#}#RR$a#hR$R#SQ!VZQ!d]Q#V!TQ#q!m[$P#S$Q$[$s$x%UQ$S#UQ$U#XS$j#q$lQ$o#{R%Q$kR$O#RQiPR#QwQ!c[Q!kaR#Y!VU!_[a!VQ!j`Q#c!^Q#g!`Q$^#dR$_#e",nodeNames:"\u26A0 Unit VariableName Comment StyleSheet RuleSet UniversalSelector TagSelector TagName NestingSelector ClassSelector ClassName PseudoClassSelector : :: PseudoClassName PseudoClassName ) ( ArgList ValueName ParenthesizedValue ColorLiteral NumberLiteral StringLiteral BinaryExpression BinOp CallExpression Callee CallLiteral CallTag ParenthesizedContent ] [ LineNames LineName , PseudoClassName ArgList IdSelector # IdName AttributeSelector AttributeName MatchOp ChildSelector ChildOp DescendantSelector SiblingSelector SiblingOp } { Block Declaration PropertyName Important ; ImportStatement AtKeyword import KeywordQuery FeatureQuery FeatureName BinaryQuery LogicOp UnaryQuery UnaryQueryOp ParenthesizedQuery SelectorQuery selector MediaStatement media CharsetStatement charset NamespaceStatement namespace NamespaceName KeyframesStatement keyframes KeyframeName KeyframeList KeyframeSelector KeyframeRangeName SupportsStatement supports AtRule Styles",maxTerm:117,nodeProps:[["isolate",-2,3,24,""],["openedBy",17,"(",32,"[",50,"{"],["closedBy",18,")",33,"]",51,"}"]],propSources:[uc],skippedNodes:[0,3,87],repeatNodeCount:11,tokenData:"J^~R!^OX$}X^%u^p$}pq%uqr)Xrs.Rst/utu6duv$}vw7^wx7oxy9^yz9oz{9t{|:_|}?Q}!O?c!O!P@Q!P!Q@i!Q![Ab![!]B]!]!^CX!^!_$}!_!`Cj!`!aC{!a!b$}!b!cDw!c!}$}!}#OFa#O#P$}#P#QFr#Q#R6d#R#T$}#T#UGT#U#c$}#c#dHf#d#o$}#o#pH{#p#q6d#q#rI^#r#sIo#s#y$}#y#z%u#z$f$}$f$g%u$g#BY$}#BY#BZ%u#BZ$IS$}$IS$I_%u$I_$I|$}$I|$JO%u$JO$JT$}$JT$JU%u$JU$KV$}$KV$KW%u$KW&FU$}&FU&FV%u&FV;'S$};'S;=`JW<%lO$}`%QSOy%^z;'S%^;'S;=`%o<%lO%^`%cSo`Oy%^z;'S%^;'S;=`%o<%lO%^`%rP;=`<%l%^~%zh#Z~OX%^X^'f^p%^pq'fqy%^z#y%^#y#z'f#z$f%^$f$g'f$g#BY%^#BY#BZ'f#BZ$IS%^$IS$I_'f$I_$I|%^$I|$JO'f$JO$JT%^$JT$JU'f$JU$KV%^$KV$KW'f$KW&FU%^&FU&FV'f&FV;'S%^;'S;=`%o<%lO%^~'mh#Z~o`OX%^X^'f^p%^pq'fqy%^z#y%^#y#z'f#z$f%^$f$g'f$g#BY%^#BY#BZ'f#BZ$IS%^$IS$I_'f$I_$I|%^$I|$JO'f$JO$JT%^$JT$JU'f$JU$KV%^$KV$KW'f$KW&FU%^&FU&FV'f&FV;'S%^;'S;=`%o<%lO%^l)[UOy%^z#]%^#]#^)n#^;'S%^;'S;=`%o<%lO%^l)sUo`Oy%^z#a%^#a#b*V#b;'S%^;'S;=`%o<%lO%^l*[Uo`Oy%^z#d%^#d#e*n#e;'S%^;'S;=`%o<%lO%^l*sUo`Oy%^z#c%^#c#d+V#d;'S%^;'S;=`%o<%lO%^l+[Uo`Oy%^z#f%^#f#g+n#g;'S%^;'S;=`%o<%lO%^l+sUo`Oy%^z#h%^#h#i,V#i;'S%^;'S;=`%o<%lO%^l,[Uo`Oy%^z#T%^#T#U,n#U;'S%^;'S;=`%o<%lO%^l,sUo`Oy%^z#b%^#b#c-V#c;'S%^;'S;=`%o<%lO%^l-[Uo`Oy%^z#h%^#h#i-n#i;'S%^;'S;=`%o<%lO%^l-uS!X[o`Oy%^z;'S%^;'S;=`%o<%lO%^~.UWOY.RZr.Rrs.ns#O.R#O#P.s#P;'S.R;'S;=`/o<%lO.R~.sOh~~.vRO;'S.R;'S;=`/P;=`O.R~/SXOY.RZr.Rrs.ns#O.R#O#P.s#P;'S.R;'S;=`/o;=`<%l.R<%lO.R~/rP;=`<%l.Rn/zYxQOy%^z!Q%^!Q![0j![!c%^!c!i0j!i#T%^#T#Z0j#Z;'S%^;'S;=`%o<%lO%^l0oYo`Oy%^z!Q%^!Q![1_![!c%^!c!i1_!i#T%^#T#Z1_#Z;'S%^;'S;=`%o<%lO%^l1dYo`Oy%^z!Q%^!Q![2S![!c%^!c!i2S!i#T%^#T#Z2S#Z;'S%^;'S;=`%o<%lO%^l2ZYf[o`Oy%^z!Q%^!Q![2y![!c%^!c!i2y!i#T%^#T#Z2y#Z;'S%^;'S;=`%o<%lO%^l3QYf[o`Oy%^z!Q%^!Q![3p![!c%^!c!i3p!i#T%^#T#Z3p#Z;'S%^;'S;=`%o<%lO%^l3uYo`Oy%^z!Q%^!Q![4e![!c%^!c!i4e!i#T%^#T#Z4e#Z;'S%^;'S;=`%o<%lO%^l4lYf[o`Oy%^z!Q%^!Q![5[![!c%^!c!i5[!i#T%^#T#Z5[#Z;'S%^;'S;=`%o<%lO%^l5aYo`Oy%^z!Q%^!Q![6P![!c%^!c!i6P!i#T%^#T#Z6P#Z;'S%^;'S;=`%o<%lO%^l6WSf[o`Oy%^z;'S%^;'S;=`%o<%lO%^d6gUOy%^z!_%^!_!`6y!`;'S%^;'S;=`%o<%lO%^d7QS|So`Oy%^z;'S%^;'S;=`%o<%lO%^b7cSXQOy%^z;'S%^;'S;=`%o<%lO%^~7rWOY7oZw7owx.nx#O7o#O#P8[#P;'S7o;'S;=`9W<%lO7o~8_RO;'S7o;'S;=`8h;=`O7o~8kXOY7oZw7owx.nx#O7o#O#P8[#P;'S7o;'S;=`9W;=`<%l7o<%lO7o~9ZP;=`<%l7on9cSb^Oy%^z;'S%^;'S;=`%o<%lO%^~9tOa~n9{UUQjWOy%^z!_%^!_!`6y!`;'S%^;'S;=`%o<%lO%^n:fWjW!RQOy%^z!O%^!O!P;O!P!Q%^!Q![>T![;'S%^;'S;=`%o<%lO%^l;TUo`Oy%^z!Q%^!Q![;g![;'S%^;'S;=`%o<%lO%^l;nYo`#e[Oy%^z!Q%^!Q![;g![!g%^!g!h<^!h#X%^#X#Y<^#Y;'S%^;'S;=`%o<%lO%^l<cYo`Oy%^z{%^{|=R|}%^}!O=R!O!Q%^!Q![=j![;'S%^;'S;=`%o<%lO%^l=WUo`Oy%^z!Q%^!Q![=j![;'S%^;'S;=`%o<%lO%^l=qUo`#e[Oy%^z!Q%^!Q![=j![;'S%^;'S;=`%o<%lO%^l>[[o`#e[Oy%^z!O%^!O!P;g!P!Q%^!Q![>T![!g%^!g!h<^!h#X%^#X#Y<^#Y;'S%^;'S;=`%o<%lO%^n?VSt^Oy%^z;'S%^;'S;=`%o<%lO%^l?hWjWOy%^z!O%^!O!P;O!P!Q%^!Q![>T![;'S%^;'S;=`%o<%lO%^n@VU#bQOy%^z!Q%^!Q![;g![;'S%^;'S;=`%o<%lO%^~@nTjWOy%^z{@}{;'S%^;'S;=`%o<%lO%^~AUSo`#[~Oy%^z;'S%^;'S;=`%o<%lO%^lAg[#e[Oy%^z!O%^!O!P;g!P!Q%^!Q![>T![!g%^!g!h<^!h#X%^#X#Y<^#Y;'S%^;'S;=`%o<%lO%^bBbU]QOy%^z![%^![!]Bt!];'S%^;'S;=`%o<%lO%^bB{S^Qo`Oy%^z;'S%^;'S;=`%o<%lO%^nC^S!Y^Oy%^z;'S%^;'S;=`%o<%lO%^dCoS|SOy%^z;'S%^;'S;=`%o<%lO%^bDQU!OQOy%^z!`%^!`!aDd!a;'S%^;'S;=`%o<%lO%^bDkS!OQo`Oy%^z;'S%^;'S;=`%o<%lO%^bDzWOy%^z!c%^!c!}Ed!}#T%^#T#oEd#o;'S%^;'S;=`%o<%lO%^bEk[![Qo`Oy%^z}%^}!OEd!O!Q%^!Q![Ed![!c%^!c!}Ed!}#T%^#T#oEd#o;'S%^;'S;=`%o<%lO%^nFfSq^Oy%^z;'S%^;'S;=`%o<%lO%^nFwSp^Oy%^z;'S%^;'S;=`%o<%lO%^bGWUOy%^z#b%^#b#cGj#c;'S%^;'S;=`%o<%lO%^bGoUo`Oy%^z#W%^#W#XHR#X;'S%^;'S;=`%o<%lO%^bHYS!bQo`Oy%^z;'S%^;'S;=`%o<%lO%^bHiUOy%^z#f%^#f#gHR#g;'S%^;'S;=`%o<%lO%^fIQS!TUOy%^z;'S%^;'S;=`%o<%lO%^nIcS!S^Oy%^z;'S%^;'S;=`%o<%lO%^fItU!RQOy%^z!_%^!_!`6y!`;'S%^;'S;=`%o<%lO%^`JZP;=`<%l$}",tokenizers:[dc,pc,mc,1,2,3,4,new po("m~RRYZ[z{a~~g~aO#^~~dP!P!Qg~lO#_~~",28,105)],topRules:{StyleSheet:[0,4],Styles:[1,86]},specialized:[{term:100,get:n=>fc[n]||-1},{term:58,get:n=>hc[n]||-1},{term:101,get:n=>gc[n]||-1}],tokenPrec:1219});var Li=null;function qi(){if(!Li&&typeof document=="object"&&document.body){let{style:n}=document.body,t=[],e=new Set;for(let i in n)i!="cssText"&&i!="cssFloat"&&typeof n[i]=="string"&&(/[A-Z]/.test(i)&&(i=i.replace(/[A-Z]/g,a=>"-"+a.toLowerCase())),e.has(i)||(t.push(i),e.add(i)));Li=t.sort().map(i=>({type:"property",label:i}))}return Li||[]}var Cl=["active","after","any-link","autofill","backdrop","before","checked","cue","default","defined","disabled","empty","enabled","file-selector-button","first","first-child","first-letter","first-line","first-of-type","focus","focus-visible","focus-within","fullscreen","has","host","host-context","hover","in-range","indeterminate","invalid","is","lang","last-child","last-of-type","left","link","marker","modal","not","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","part","placeholder","placeholder-shown","read-only","read-write","required","right","root","scope","selection","slotted","target","target-text","valid","visited","where"].map(n=>({type:"class",label:n})),Ol=["above","absolute","activeborder","additive","activecaption","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","antialiased","appworkspace","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic-abegede-gez","ethiopic-halehame-aa-er","ethiopic-halehame-gez","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","graytext","grid","groove","hand","hard-light","help","hidden","hide","higher","highlight","highlighttext","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","justify","keep-all","landscape","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-hexadecimal","lower-latin","lower-norwegian","lowercase","ltr","luminosity","manipulation","match","matrix","matrix3d","medium","menu","menutext","message-box","middle","min-intrinsic","mix","monospace","move","multiple","multiple_mask_images","multiply","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","opacity","open-quote","optimizeLegibility","optimizeSpeed","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","text","text-bottom","text-top","textarea","textfield","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","to","top","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-latin","uppercase","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"].map(n=>({type:"keyword",label:n})).concat(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"].map(n=>({type:"constant",label:n}))),Cc=["a","abbr","address","article","aside","b","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dialog","div","dl","dt","em","figcaption","figure","footer","form","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","meter","nav","ol","output","p","pre","ruby","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","tr","u","ul"].map(n=>({type:"type",label:n})),Oc=["@charset","@color-profile","@container","@counter-style","@font-face","@font-feature-values","@font-palette-values","@import","@keyframes","@layer","@media","@namespace","@page","@position-try","@property","@scope","@starting-style","@supports","@view-transition"].map(n=>({type:"keyword",label:n})),Fe=/^(\w[\w-]*|-\w[\w-]*|)$/,Sc=/^-(-[\w-]*)?$/;function _c(n,t){var e;if((n.name=="("||n.type.isError)&&(n=n.parent||n),n.name!="ArgList")return!1;let i=(e=n.parent)===null||e===void 0?void 0:e.firstChild;return i?.name!="Callee"?!1:t.sliceString(i.from,i.to)=="var"}var Sl=new Na,yc=["Declaration"];function kc(n){for(let t=n;;){if(t.type.isTop)return t;if(!(t=t.parent))return n}}function _l(n,t,e){if(t.to-t.from>4096){let i=Sl.get(t);if(i)return i;let a=[],o=new Set,r=t.cursor(Ia.IncludeAnonymous);if(r.firstChild())do for(let c of _l(n,r.node,e))o.has(c.label)||(o.add(c.label),a.push(c));while(r.nextSibling());return Sl.set(t,a),a}else{let i=[],a=new Set;return t.cursor().iterate(o=>{var r;if(e(o)&&o.matchContext(yc)&&((r=o.node.nextSibling)===null||r===void 0?void 0:r.name)==":"){let c=n.sliceString(o.from,o.to);a.has(c)||(a.add(c),i.push({label:c,type:"variable"}))}}),i}}var vc=n=>t=>{let{state:e,pos:i}=t,a=Te(e).resolveInner(i,-1),o=a.type.isError&&a.from==a.to-1&&e.doc.sliceString(a.from,a.to)=="-";if(a.name=="PropertyName"||(o||a.name=="TagName")&&/^(Block|Styles)$/.test(a.resolve(a.to).name))return{from:a.from,options:qi(),validFor:Fe};if(a.name=="ValueName")return{from:a.from,options:Ol,validFor:Fe};if(a.name=="PseudoClassName")return{from:a.from,options:Cl,validFor:Fe};if(n(a)||(t.explicit||o)&&_c(a,e.doc))return{from:n(a)||o?a.from:i,options:_l(e.doc,kc(a),n),validFor:Sc};if(a.name=="TagName"){for(let{parent:d}=a;d;d=d.parent)if(d.name=="Block")return{from:a.from,options:qi(),validFor:Fe};return{from:a.from,options:Cc,validFor:Fe}}if(a.name=="AtKeyword")return{from:a.from,options:Oc,validFor:Fe};if(!t.explicit)return null;let r=a.resolve(i),c=r.childBefore(i);return c&&c.name==":"&&r.name=="PseudoClassSelector"?{from:i,options:Cl,validFor:Fe}:c&&c.name==":"&&r.name=="Declaration"||r.name=="ArgList"?{from:i,options:Ol,validFor:Fe}:r.name=="Block"||r.name=="Styles"?{from:i,options:qi(),validFor:Fe}:null},bc=vc(n=>n.name=="VariableName"),Xt=mn.define({name:"css",parser:gl.configure({props:[st.add({Declaration:Ua()}),We.add({"Block KeyframeList":Ha})]}),languageData:{commentTokens:{block:{open:"/*",close:"*/"}},indentOnInput:/^\s*\}$/,wordChars:"-"}});function yl(){return new Ge(Xt,Xt.data.of({autocomplete:bc}))}var Lt=["_blank","_self","_top","_parent"],Yi=["ascii","utf-8","utf-16","latin1","latin1"],ji=["get","post","put","delete"],zi=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],ye=["true","false"],M={},xc={a:{attrs:{href:null,ping:null,type:null,media:null,target:Lt,hreflang:null}},abbr:M,address:M,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:null,hreflang:null,type:null,shape:["default","rect","circle","poly"]}},article:M,aside:M,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["autoplay"],loop:["loop"],controls:["controls"]}},b:M,base:{attrs:{href:null,target:Lt}},bdi:M,bdo:M,blockquote:{attrs:{cite:null}},body:M,br:M,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["autofocus"],disabled:["autofocus"],formenctype:zi,formmethod:ji,formnovalidate:["novalidate"],formtarget:Lt,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:M,center:M,cite:M,code:M,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["disabled"],checked:["checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["disabled"],multiple:["multiple"]}},datalist:{attrs:{data:null}},dd:M,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["open"]}},dfn:M,div:M,dl:M,dt:M,em:M,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["disabled"],form:null,name:null}},figcaption:M,figure:M,footer:M,form:{attrs:{action:null,name:null,"accept-charset":Yi,autocomplete:["on","off"],enctype:zi,method:ji,novalidate:["novalidate"],target:Lt}},h1:M,h2:M,h3:M,h4:M,h5:M,h6:M,head:{children:["title","base","link","style","meta","script","noscript","command"]},header:M,hgroup:M,hr:M,html:{attrs:{manifest:null}},i:M,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["autofocus"],checked:["checked"],disabled:["disabled"],formenctype:zi,formmethod:ji,formnovalidate:["novalidate"],formtarget:Lt,multiple:["multiple"],readonly:["readonly"],required:["required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:M,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["autofocus"],disabled:["disabled"],keytype:["RSA"]}},label:{attrs:{for:null,form:null}},legend:M,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:null,media:null,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:M,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:Yi,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:M,noscript:M,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["typemustmatch"]}},ol:{attrs:{reversed:["reversed"],start:null,type:["1","a","A","i","I"]},children:["li","script","template","ul","ol"]},optgroup:{attrs:{disabled:["disabled"],label:null}},option:{attrs:{disabled:["disabled"],label:null,selected:["selected"],value:null}},output:{attrs:{for:null,form:null,name:null}},p:M,param:{attrs:{name:null,value:null}},pre:M,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:M,rt:M,ruby:M,samp:M,script:{attrs:{type:["text/javascript"],src:null,async:["async"],defer:["defer"],charset:Yi}},section:M,select:{attrs:{form:null,name:null,size:null,autofocus:["autofocus"],disabled:["disabled"],multiple:["multiple"]}},slot:{attrs:{name:null}},small:M,source:{attrs:{src:null,type:null,media:null}},span:M,strong:M,style:{attrs:{type:["text/css"],media:null,scoped:null}},sub:M,summary:M,sup:M,table:M,tbody:M,td:{attrs:{colspan:null,rowspan:null,headers:null}},template:M,textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["autofocus"],disabled:["disabled"],readonly:["readonly"],required:["required"],wrap:["soft","hard"]}},tfoot:M,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:M,time:{attrs:{datetime:null}},title:M,tr:M,track:{attrs:{src:null,label:null,default:null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:null}},ul:{children:["li","script","template","ul","ol"]},var:M,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["autoplay"],mediagroup:["movie"],muted:["muted"],controls:["controls"]}},wbr:M},xl={accesskey:null,class:null,contenteditable:ye,contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["ar","bn","de","en-GB","en-US","es","fr","hi","id","ja","pa","pt","ru","tr","zh"],spellcheck:ye,autocorrect:ye,autocapitalize:ye,style:null,tabindex:null,title:null,translate:["yes","no"],rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"],role:"alert application article banner button cell checkbox complementary contentinfo dialog document feed figure form grid gridcell heading img list listbox listitem main navigation region row rowgroup search switch tab table tabpanel textbox timer".split(" "),"aria-activedescendant":null,"aria-atomic":ye,"aria-autocomplete":["inline","list","both","none"],"aria-busy":ye,"aria-checked":["true","false","mixed","undefined"],"aria-controls":null,"aria-describedby":null,"aria-disabled":ye,"aria-dropeffect":null,"aria-expanded":["true","false","undefined"],"aria-flowto":null,"aria-grabbed":["true","false","undefined"],"aria-haspopup":ye,"aria-hidden":ye,"aria-invalid":["true","false","grammar","spelling"],"aria-label":null,"aria-labelledby":null,"aria-level":null,"aria-live":["off","polite","assertive"],"aria-multiline":ye,"aria-multiselectable":ye,"aria-owns":null,"aria-posinset":null,"aria-pressed":["true","false","mixed","undefined"],"aria-readonly":ye,"aria-relevant":null,"aria-required":ye,"aria-selected":["true","false","undefined"],"aria-setsize":null,"aria-sort":["ascending","descending","none","other"],"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null},wl="beforeunload copy cut dragstart dragover dragleave dragenter dragend drag paste focus blur change click load mousedown mouseenter mouseleave mouseup keydown keyup resize scroll unload".split(" ").map(n=>"on"+n);for(let n of wl)xl[n]=null;var Ui=(()=>{class n{constructor(e,i){this.tags=Object.assign(Object.assign({},xc),e),this.globalAttrs=Object.assign(Object.assign({},xl),i),this.allTags=Object.keys(this.tags),this.globalAttrNames=Object.keys(this.globalAttrs)}}return n.default=new n,n})();function vt(n,t,e=n.length){if(!t)return"";let i=t.firstChild,a=i&&i.getChild("TagName");return a?n.sliceString(a.from,Math.min(a.to,e)):""}function bt(n,t=!1){for(;n;n=n.parent)if(n.name=="Element")if(t)t=!1;else return n;return null}function El(n,t,e){let i=e.tags[vt(n,bt(t))];return i?.children||e.allTags}function Gi(n,t){let e=[];for(let i=bt(t);i&&!i.type.isTop;i=bt(i.parent)){let a=vt(n,i);if(a&&i.lastChild.name=="CloseTag")break;a&&e.indexOf(a)<0&&(t.name=="EndTag"||t.from>=i.firstChild.to)&&e.push(a)}return e}var Pl=/^[:\-\.\w\u00b7-\uffff]*$/;function kl(n,t,e,i,a){let o=/\s*>/.test(n.sliceDoc(a,a+5))?"":">",r=bt(e,!0);return{from:i,to:a,options:El(n.doc,r,t).map(c=>({label:c,type:"type"})).concat(Gi(n.doc,e).map((c,d)=>({label:"/"+c,apply:"/"+c+o,type:"type",boost:99-d}))),validFor:/^\/?[:\-\.\w\u00b7-\uffff]*$/}}function vl(n,t,e,i){let a=/\s*>/.test(n.sliceDoc(i,i+5))?"":">";return{from:e,to:i,options:Gi(n.doc,t).map((o,r)=>({label:o,apply:o+a,type:"type",boost:99-r})),validFor:Pl}}function wc(n,t,e,i){let a=[],o=0;for(let r of El(n.doc,e,t))a.push({label:"<"+r,type:"type"});for(let r of Gi(n.doc,e))a.push({label:"</"+r+">",type:"type",boost:99-o++});return{from:i,to:i,options:a,validFor:/^<\/?[:\-\.\w\u00b7-\uffff]*$/}}function Ec(n,t,e,i,a){let o=bt(e),r=o?t.tags[vt(n.doc,o)]:null,c=r&&r.attrs?Object.keys(r.attrs):[],d=r&&r.globalAttrs===!1?c:c.length?c.concat(t.globalAttrNames):t.globalAttrNames;return{from:i,to:a,options:d.map(f=>({label:f,type:"property"})),validFor:Pl}}function Pc(n,t,e,i,a){var o;let r=(o=e.parent)===null||o===void 0?void 0:o.getChild("AttributeName"),c=[],d;if(r){let f=n.sliceDoc(r.from,r.to),u=t.globalAttrs[f];if(!u){let S=bt(e),C=S?t.tags[vt(n.doc,S)]:null;u=C?.attrs&&C.attrs[f]}if(u){let S=n.sliceDoc(i,a).toLowerCase(),C='"',b='"';/^['"]/.test(S)?(d=S[0]=='"'?/^[^"]*$/:/^[^']*$/,C="",b=n.sliceDoc(a,a+1)==S[0]?"":S[0],S=S.slice(1),i++):d=/^[^\s<>='"]*$/;for(let E of u)c.push({label:E,apply:C+E+b,type:"constant"})}}return{from:i,to:a,options:c,validFor:d}}function Tl(n,t){let{state:e,pos:i}=t,a=Te(e).resolveInner(i,-1),o=a.resolve(i);for(let r=i,c;o==a&&(c=a.childBefore(r));){let d=c.lastChild;if(!d||!d.type.isError||d.from<d.to)break;o=a=c,r=d.from}return a.name=="TagName"?a.parent&&/CloseTag$/.test(a.parent.name)?vl(e,a,a.from,i):kl(e,n,a,a.from,i):a.name=="StartTag"?kl(e,n,a,i,i):a.name=="StartCloseTag"||a.name=="IncompleteCloseTag"?vl(e,a,i,i):a.name=="OpenTag"||a.name=="SelfClosingTag"||a.name=="AttributeName"?Ec(e,n,a,a.name=="AttributeName"?a.from:i,i):a.name=="Is"||a.name=="AttributeValue"||a.name=="UnquotedAttributeValue"?Pc(e,n,a,a.name=="Is"?i:a.from,i):t.explicit&&(o.name=="Element"||o.name=="Text"||o.name=="Document")?wc(e,n,a,i):null}function Dl(n){return Tl(Ui.default,n)}function Tc(n){let{extraTags:t,extraGlobalAttributes:e}=n,i=e||t?new Ui(t,e):Ui.default;return a=>Tl(i,a)}var Dc=An.parser.configure({top:"SingleExpression"}),$l=[{tag:"script",attrs:n=>n.type=="text/typescript"||n.lang=="ts",parser:Ho.parser},{tag:"script",attrs:n=>n.type=="text/babel"||n.type=="text/jsx",parser:Zo.parser},{tag:"script",attrs:n=>n.type=="text/typescript-jsx",parser:Ko.parser},{tag:"script",attrs(n){return/^(importmap|speculationrules|application\/(.+\+)?json)$/i.test(n.type)},parser:Dc},{tag:"script",attrs(n){return!n.type||/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i.test(n.type)},parser:An.parser},{tag:"style",attrs(n){return(!n.lang||n.lang=="css")&&(!n.type||/^(text\/)?(x-)?(stylesheet|css)$/i.test(n.type))},parser:Xt.parser}],Ml=[{name:"style",parser:Xt.parser.configure({top:"Styles"})}].concat(wl.map(n=>({name:n,parser:An.parser}))),Al=mn.define({name:"html",parser:cl.configure({props:[st.add({Element(n){let t=/^(\s*)(<\/)?/.exec(n.textAfter);return n.node.to<=n.pos+t[0].length?n.continue():n.lineIndent(n.node.from)+(t[2]?0:n.unit)},"OpenTag CloseTag SelfClosingTag"(n){return n.column(n.node.from)+n.unit},Document(n){if(n.pos+/\s*/.exec(n.textAfter)[0].length<n.node.to)return n.continue();let t=null,e;for(let i=n.node;;){let a=i.lastChild;if(!a||a.name!="Element"||a.to!=i.to)break;t=i=a}return t&&!((e=t.lastChild)&&(e.name=="CloseTag"||e.name=="SelfClosingTag"))?n.lineIndent(t.from)+n.unit:null}}),We.add({Element(n){let t=n.firstChild,e=n.lastChild;return!t||t.name!="OpenTag"?null:{from:t.to,to:e.name=="CloseTag"?e.from:n.to}}}),eo.add({"OpenTag CloseTag":n=>n.getChild("TagName")})]}),languageData:{commentTokens:{block:{open:"<!--",close:"-->"}},indentOnInput:/^\s*<\/\w+\W$/,wordChars:"-._"}}),zn=Al.configure({wrap:Xi($l,Ml)});function Vl(n={}){let t="",e;n.matchClosingTags===!1&&(t="noMatch"),n.selfClosingTags===!0&&(t=(t?t+" ":"")+"selfClosing"),(n.nestedLanguages&&n.nestedLanguages.length||n.nestedAttributes&&n.nestedAttributes.length)&&(e=Xi((n.nestedLanguages||[]).concat($l),(n.nestedAttributes||[]).concat(Ml)));let i=e?Al.configure({wrap:e,dialect:t}):t?zn.configure({dialect:t}):zn;return new Ge(i,[zn.data.of({autocomplete:Tc(n)}),n.autoCloseTags!==!1?$c:[],Jo().support,yl().support])}var bl=new Set("area base br col command embed frame hr img input keygen link meta param source track wbr menuitem".split(" ")),$c=ze.inputHandler.of((n,t,e,i,a)=>{if(n.composing||n.state.readOnly||t!=e||i!=">"&&i!="/"||!zn.isActiveAt(n.state,t,-1))return!1;let o=a(),{state:r}=o,c=r.changeByRange(d=>{var f,u,S;let C=r.doc.sliceString(d.from-1,d.to)==i,{head:b}=d,E=Te(r).resolveInner(b,-1),A;if(C&&i==">"&&E.name=="EndTag"){let B=E.parent;if(((u=(f=B.parent)===null||f===void 0?void 0:f.lastChild)===null||u===void 0?void 0:u.name)!="CloseTag"&&(A=vt(r.doc,B.parent,b))&&!bl.has(A)){let G=b+(r.doc.sliceString(b,b+1)===">"?1:0),X=`</${A}>`;return{range:d,changes:{from:b,to:G,insert:X}}}}else if(C&&i=="/"&&E.name=="IncompleteCloseTag"){let B=E.parent;if(E.from==b-2&&((S=B.lastChild)===null||S===void 0?void 0:S.name)!="CloseTag"&&(A=vt(r.doc,B,b))&&!bl.has(A)){let G=b+(r.doc.sliceString(b,b+1)===">"?1:0),X=`${A}>`;return{range:Ve.cursor(b+X.length,-1),changes:{from:b,to:G,insert:X}}}}return{range:d}});return c.changes.empty?!1:(n.dispatch([o,r.update(c,{userEvent:"input.complete",scrollIntoView:!0})]),!0)});var Rl=qa({commentTokens:{block:{open:"<!--",close:"-->"}}}),Il=new Ie,Nl=Ir.configure({props:[We.add(n=>!n.is("Block")||n.is("Document")||Zi(n)!=null||Mc(n)?void 0:(t,e)=>({from:e.doc.lineAt(t.from).to,to:t.to})),Il.add(Zi),st.add({Document:()=>null}),La.add({Document:Rl})]});function Zi(n){let t=/^(?:ATX|Setext)Heading(\d)$/.exec(n.name);return t?+t[1]:void 0}function Mc(n){return n.name=="OrderedList"||n.name=="BulletList"}function Ac(n,t){let e=n;for(;;){let i=e.nextSibling,a;if(!i||(a=Zi(i.type))!=null&&a<=t)break;e=i}return e.to}var Vc=Wa.of((n,t,e)=>{for(let i=Te(n).resolveInner(e,-1);i&&!(i.from<t);i=i.parent){let a=i.type.prop(Il);if(a==null)continue;let o=Ac(i,a);if(o>e)return{from:e,to:o}}return null});function Ki(n){return new Ya(Rl,n,[Vc],"markdown")}var Qc=Ki(Nl),Fc=Nl.configure([Xr,Yr,qr,jr,{props:[We.add({Table:(n,t)=>({from:t.doc.lineAt(n.from).to,to:n.to})})]}]),Bl=Ki(Fc);function Rc(n,t){return e=>{if(e&&n){let i=null;if(e=/\S*/.exec(e)[0],typeof n=="function"?i=n(e):i=pi.matchLanguageName(n,e,!0),i instanceof pi)return i.support?i.support.language.parser:ja.getSkippingParser(i.load());if(i)return i.parser}return t?t.parser:null}}var xt=class{constructor(t,e,i,a,o,r,c){this.node=t,this.from=e,this.to=i,this.spaceBefore=a,this.spaceAfter=o,this.type=r,this.item=c}blank(t,e=!0){let i=this.spaceBefore+(this.node.name=="Blockquote"?">":"");if(t!=null){for(;i.length<t;)i+=" ";return i}else{for(let a=this.to-this.from-i.length-this.spaceAfter.length;a>0;a--)i+=" ";return i+(e?this.spaceAfter:"")}}marker(t,e){let i=this.node.name=="OrderedList"?String(+Ll(this.item,t)[2]+e):"";return this.spaceBefore+i+this.type+this.spaceAfter}};function Xl(n,t){let e=[];for(let a=n;a&&a.name!="Document";a=a.parent)(a.name=="ListItem"||a.name=="Blockquote"||a.name=="FencedCode")&&e.push(a);let i=[];for(let a=e.length-1;a>=0;a--){let o=e[a],r,c=t.lineAt(o.from),d=o.from-c.from;if(o.name=="FencedCode")i.push(new xt(o,d,d,"","","",null));else if(o.name=="Blockquote"&&(r=/^ *>( ?)/.exec(c.text.slice(d))))i.push(new xt(o,d,d+r[0].length,"",r[1],">",null));else if(o.name=="ListItem"&&o.parent.name=="OrderedList"&&(r=/^( *)\d+([.)])( *)/.exec(c.text.slice(d)))){let f=r[3],u=r[0].length;f.length>=4&&(f=f.slice(0,f.length-4),u-=4),i.push(new xt(o.parent,d,d+u,r[1],f,r[2],o))}else if(o.name=="ListItem"&&o.parent.name=="BulletList"&&(r=/^( *)([-+*])( {1,4}\[[ xX]\])?( +)/.exec(c.text.slice(d)))){let f=r[4],u=r[0].length;f.length>4&&(f=f.slice(0,f.length-4),u-=4);let S=r[2];r[3]&&(S+=r[3].replace(/[xX]/," ")),i.push(new xt(o.parent,d,d+u,r[1],f,S,o))}}return i}function Ll(n,t){return/^(\s*)(\d+)(?=[.)])/.exec(t.sliceString(n.from,n.from+10))}function Wi(n,t,e,i=0){for(let a=-1,o=n;;){if(o.name=="ListItem"){let c=Ll(o,t),d=+c[2];if(a>=0){if(d!=a+1)return;e.push({from:o.from+c[1].length,to:o.from+c[0].length,insert:String(a+2+i)})}a=d}let r=o.nextSibling;if(!r)break;o=r}}function Ji(n,t){let e=/^[ \t]*/.exec(n)[0].length;if(!e||t.facet(za)!="	")return n;let i=lt(n,4,e),a="";for(let o=i;o>0;)o>=4?(a+="	",o-=4):(a+=" ",o--);return a+n.slice(e)}var Ic=({state:n,dispatch:t})=>{let e=Te(n),{doc:i}=n,a=null,o=n.changeByRange(r=>{if(!r.empty||!Bl.isActiveAt(n,r.from))return a={range:r};let c=r.from,d=i.lineAt(c),f=Xl(e.resolveInner(c,-1),i);for(;f.length&&f[f.length-1].from>c-d.from;)f.pop();if(!f.length)return a={range:r};let u=f[f.length-1];if(u.to-u.spaceAfter.length>c-d.from)return a={range:r};let S=c>=u.to-u.spaceAfter.length&&!/\S/.test(d.text.slice(u.to));if(u.item&&S){let B=u.node.firstChild,G=u.node.getChild("ListItem","ListItem");if(B.to>=c||G&&G.to<c||d.from>0&&!/[^\s>]/.test(i.lineAt(d.from-1).text)){let X=f.length>1?f[f.length-2]:null,Re,Je="";X&&X.item?(Re=d.from+X.from,Je=X.marker(i,1)):Re=d.from+(X?X.to:0);let Ye=[{from:Re,to:c,insert:Je}];return u.node.name=="OrderedList"&&Wi(u.item,i,Ye,-2),X&&X.node.name=="OrderedList"&&Wi(X.item,i,Ye),{range:Ve.cursor(Re+Je.length),changes:Ye}}else{let X=Fl(f,n,d);return{range:Ve.cursor(c+X.length+1),changes:{from:d.from,insert:X+n.lineBreak}}}}if(u.node.name=="Blockquote"&&S&&d.from){let B=i.lineAt(d.from-1),G=/>\s*$/.exec(B.text);if(G&&G.index==u.from){let X=n.changes([{from:B.from+G.index,to:B.to},{from:d.from+u.from,to:d.to}]);return{range:r.map(X),changes:X}}}let C=[];u.node.name=="OrderedList"&&Wi(u.item,i,C);let b=u.item&&u.item.from<d.from,E="";if(!b||/^[\s\d.)\-+*>]*/.exec(d.text)[0].length>=u.to)for(let B=0,G=f.length-1;B<=G;B++)E+=B==G&&!b?f[B].marker(i,1):f[B].blank(B<G?lt(d.text,4,f[B+1].from)-E.length:null);let A=c;for(;A>d.from&&/\s/.test(d.text.charAt(A-d.from-1));)A--;return E=Ji(E,n),Nc(u.node,n.doc)&&(E=Fl(f,n,d)+n.lineBreak+E),C.push({from:A,to:c,insert:n.lineBreak+E}),{range:Ve.cursor(A+E.length+1),changes:C}});return a?!1:(t(n.update(o,{scrollIntoView:!0,userEvent:"input"})),!0)};function Ql(n){return n.name=="QuoteMark"||n.name=="ListMark"}function Nc(n,t){if(n.name!="OrderedList"&&n.name!="BulletList")return!1;let e=n.firstChild,i=n.getChild("ListItem","ListItem");if(!i)return!1;let a=t.lineAt(e.to),o=t.lineAt(i.from),r=/^[\s>]*$/.test(a.text);return a.number+(r?0:1)<o.number}function Fl(n,t,e){let i="";for(let a=0,o=n.length-2;a<=o;a++)i+=n[a].blank(a<o?lt(e.text,4,n[a+1].from)-i.length:null,a<o);return Ji(i,t)}function Bc(n,t){let e=n.resolveInner(t,-1),i=t;Ql(e)&&(i=e.from,e=e.parent);for(let a;a=e.childBefore(i);)if(Ql(a))i=a.from;else if(a.name=="OrderedList"||a.name=="BulletList")e=a.lastChild,i=e.to;else break;return e}var Xc=({state:n,dispatch:t})=>{let e=Te(n),i=null,a=n.changeByRange(o=>{let r=o.from,{doc:c}=n;if(o.empty&&Bl.isActiveAt(n,o.from)){let d=c.lineAt(r),f=Xl(Bc(e,r),c);if(f.length){let u=f[f.length-1],S=u.to-u.spaceAfter.length+(u.spaceAfter?1:0);if(r-d.from>S&&!/\S/.test(d.text.slice(S,r-d.from)))return{range:Ve.cursor(d.from+S),changes:{from:d.from+S,to:r}};if(r-d.from==S&&(!u.item||d.from<=u.item.from||!/\S/.test(d.text.slice(0,u.to)))){let C=d.from+u.from;if(u.item&&u.node.from<u.item.from&&/\S/.test(d.text.slice(u.from,u.to))){let b=u.blank(lt(d.text,4,u.to)-lt(d.text,4,u.from));return C==d.from&&(b=Ji(b,n)),{range:Ve.cursor(C+b.length),changes:{from:C,to:d.from+u.to,insert:b}}}if(C<r)return{range:Ve.cursor(C),changes:{from:C,to:r}}}}}return i={range:o}});return i?!1:(t(n.update(a,{scrollIntoView:!0,userEvent:"delete"})),!0)},Lc=[{key:"Enter",run:Ic},{key:"Backspace",run:Xc}],ql=Vl({matchClosingTags:!1});function Yl(n={}){let{codeLanguages:t,defaultCodeLanguage:e,addKeymap:i=!0,base:{parser:a}=Qc,completeHTMLTags:o=!0,htmlTagLanguage:r=ql}=n;if(!(a instanceof It))throw new RangeError("Base parser provided to `markdown` should be a Markdown parser");let c=n.extensions?[n.extensions]:[],d=[r.support],f;e instanceof Ge?(d.push(e.support),f=e.language):e&&(f=e);let u=t||f?Rc(t,f):void 0;c.push(Nr({codeParser:u,htmlParser:r.language.parser})),i&&d.push(Aa.high(sn.of(Lc)));let S=Ki(a.configure(c));return o&&d.push(S.data.of({autocomplete:qc})),new Ge(S,d)}function qc(n){let{state:t,pos:e}=n,i=/<[:\-\.\w\u00b7-\uffff]*$/.exec(t.sliceDoc(e-25,e));if(!i)return null;let a=Te(t).resolveInner(e,-1);for(;a&&!a.type.isTop;){if(a.name=="CodeBlock"||a.name=="FencedCode"||a.name=="ProcessingInstructionBlock"||a.name=="CommentBlock"||a.name=="Link"||a.name=="Image")return null;a=a.parent}return{from:e-i[0].length,to:e,options:Yc(),validFor:/^<[:\-\.\w\u00b7-\uffff]*$/}}var Hi=null;function Yc(){if(Hi)return Hi;let n=Dl(new oo(ln.create({extensions:ql}),0,!0));return Hi=n?n.options:[]}var jc=["editorContainer"],wt=class n{constructor(){this.height=Ee("100px");this.editorContainerRef=da.required("editorContainer");this.editorView=null;this.onChange=t=>{};this.text=ma("")}ngAfterViewInit(){let t=this.editorContainerRef().nativeElement;this.initializeEditor(t)}writeValue(t){this.initialDocString=t||void 0,this.text.set(this.initialDocString||""),this.editorView?.dispatch({changes:{from:0,to:this.editorView.state.doc.length,insert:this.initialDocString}})}registerOnChange(t){this.onChange=t}registerOnTouched(t){}initializeEditor(t){let e=[Fa(),to(),Va(),Qa(),ln.allowMultipleSelections.of(!0),Ga(),Za(Ka,{fallback:!0}),Ja(),ro(),so(),Ra(),ao(),sn.of([...lo,...io,...no,...co,...mo]),ze.lineWrapping,Yl(),ze.updateListener.of(a=>{if(a.docChanged){let o=a.state.doc.toString();this.text.set(o),this.onChange(o)}})],i=ze.theme({"&":{height:"100%",fontSize:"12px"},".cm-scroller":{overflow:"auto",fontFamily:"'Roboto Mono', monospace"},"&.cm-focused":{outline:"none"}},{dark:!1});e.push(i),this.editorView=new ze({doc:this.initialDocString,extensions:e,parent:t})}gotoMarkdownDocs(){window.open("https://www.markdownguide.org/basic-syntax/","_blank","noreferrer")}ngOnDestroy(){this.editorView?.destroy(),this.editorView=null}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=V({type:n,selectors:[["app-markdown-input"]],viewQuery:function(e,i){e&1&&ua(i.editorContainerRef,jc,5),e&2&&fa()},inputs:{height:[1,"height"]},standalone:!0,features:[tt([{provide:at,useExisting:et(()=>n),multi:!0}]),Q],decls:9,vars:2,consts:[["editorContainer",""],["appearance","text","icon","open_in_new",1,"help",3,"click"],["animationDuration","0ms",1,"small-tabs",3,"mat-stretch-tabs"],["label","Write"],[1,"editor-container"],["label","Preview"],[1,"preview-container"],[3,"text"]],template:function(e,i){if(e&1){let a=F();l(0,"ya-button",1),P("click",function(){return D(a),$(i.gotoMarkdownDocs())}),m(1,` Markdown syntax
`),s(),l(2,"mat-tab-group",2)(3,"mat-tab",3),O(4,"div",4,0),s(),l(6,"mat-tab",5)(7,"div",6),O(8,"app-markdown",7),s()()()}e&2&&(p(2),g("mat-stretch-tabs",!1),p(6),g("text",i.text()))},dependencies:[St,R,vo,bo,z],styles:["[_nghost-%COMP%]{display:block;position:relative}.help[_ngcontent-%COMP%]{position:absolute;top:0;right:0;z-index:2000}.editor-container[_ngcontent-%COMP%]{border-bottom:1px solid #d3d3d3;border-left:1px solid #d3d3d3;border-right:1px solid #d3d3d3;height:100px}.preview-container[_ngcontent-%COMP%]{border-bottom:1px solid #d3d3d3;border-left:1px solid #d3d3d3;border-right:1px solid #d3d3d3;background-color:#fafafa;height:100px}"],changeDetection:0})}};function zc(n,t){if(n&1&&(l(0,"mat-option",3),v(1,"memberPath"),m(2),v(3,"memberPath"),s()),n&2){let e=t.$implicit;g("value",w(1,2,e)),p(2),N(" ",w(3,4,e)," ")}}var Un=class n{constructor(t){this.onChange=t=>{};this.formControl=new Mt("");this.filteredOptions=this.formControl.valueChanges.pipe(ra(e=>this.onChange(e)),aa(300),oa(e=>e?t.yamcsClient.getParameters(t.instance,{q:e,limit:20,searchMembers:!0}):Promise.resolve({parameters:[]})),jt(e=>e.parameters||[]))}writeValue(t){this.formControl.setValue(t??null)}registerOnChange(t){this.onChange=t}registerOnTouched(t){}static{this.\u0275fac=function(e){return new(e||n)(T(ie))}}static{this.\u0275cmp=V({type:n,selectors:[["app-parameter-input"]],standalone:!0,features:[tt([{provide:at,useExisting:et(()=>n),multi:!0}]),Q],decls:6,vars:4,consts:[["auto",""],["type","text","autocomplete","off",1,"ya-input",3,"formControl","matAutocomplete"],[1,"ya-autocomplete"],[3,"value"]],template:function(e,i){if(e&1&&(O(0,"input",1),l(1,"mat-autocomplete",2,0),q(3,zc,4,6,"mat-option",3,L),v(5,"async"),s()),e&2){let a=_e(2);g("formControl",i.formControl)("matAutocomplete",a),p(3),Y(w(5,2,i.filteredOptions))}},dependencies:[R,ue,fe,j,en,_o,Da,yo,Lo],encapsulation:2,changeDetection:0})}};function Uc(n,t){if(n&1){let e=F();l(0,"tr")(1,"td",11),O(2,"app-parameter-input",12),s(),l(3,"td",13)(4,"ya-icon-action",14),P("click",function(){let a=D(e).$index,o=h();return $(o.moveParameterControlDown(a))}),s(),l(5,"ya-icon-action",15),P("click",function(){let a=D(e).$index,o=h();return $(o.moveParameterControlUp(a))}),s(),l(6,"ya-text-action",16),P("click",function(){let a=D(e).$index,o=h();return $(o.removeParameterControl(a))}),m(7," DELETE "),s()()()}if(n&2){let e=t.$index,i=t.$count;p(2),g("formControlName",e),p(2),g("disabled",e===i-1),p(),g("disabled",e===0)}}var qt=class n{constructor(t,e){this.dialogRef=t;this.data=e;if(this.form=new ya({parameters:new Pa([]),comment:new Mt("")}),e.entry){let i=(e.entry.parameters||[]).map(a=>a.parameter);for(let a of i)this.addParameterControl();this.form.setValue({parameters:i||[],comment:e.entry.comment||""})}this.parameterFormArray.length||this.addParameterControl()}get parameterFormArray(){return this.form.controls.parameters}get parameterControls(){return this.parameterFormArray.controls}addParameterControl(){this.parameterFormArray.push(new Mt(""))}removeParameterControl(t){this.parameterFormArray.removeAt(t)}moveParameterControlDown(t){let e=this.parameterFormArray.controls[t];this.parameterFormArray.removeAt(t),this.parameterFormArray.insert(t+1,e)}moveParameterControlUp(t){let e=this.parameterFormArray.controls[t];this.parameterFormArray.removeAt(t),this.parameterFormArray.insert(t-1,e)}save(){let{value:t}=this.form,e={comment:t.comment,parameters:t.parameters.map(i=>({parameter:i}))};this.dialogRef.close(e)}static{this.\u0275fac=function(e){return new(e||n)(T(le),T(De))}}static{this.\u0275cmp=V({type:n,selectors:[["app-edit-check-entry-dialog"]],standalone:!0,features:[Q],decls:24,vars:2,consts:[["mat-dialog-title",""],[1,"ya-form",3,"formGroup"],[1,"label"],["formArrayName","parameters",1,"parameter-table",2,"width","100%"],["colspan","1"],["icon","add_circle_outline",3,"click"],["formControlName","comment"],["align","end"],[2,"flex","1 1 auto"],["mat-dialog-close",""],["appearance","primary",3,"click"],[2,"width","100%"],[3,"formControlName"],[2,"white-space","nowrap"],["icon","keyboard_arrow_down",3,"click","disabled"],["icon","keyboard_arrow_up",3,"click","disabled"],["icon","delete",3,"click"]],template:function(e,i){e&1&&(l(0,"h2",0),m(1,"Check step"),s(),l(2,"mat-dialog-content")(3,"form",1)(4,"div",2),m(5," Parameters "),O(6,"br"),l(7,"table",3),q(8,Uc,8,3,"tr",null,L),l(10,"tr")(11,"td",4)(12,"ya-button",5),P("click",function(){return i.addParameterControl()}),m(13," \xA0Add "),s()()()()(),O(14,"br"),l(15,"div",2),m(16," Comment "),O(17,"app-markdown-input",6),s()()(),l(18,"mat-dialog-actions",7),O(19,"div",8),l(20,"ya-button",9),m(21,"CANCEL"),s(),l(22,"ya-button",10),P("click",function(){return i.save()}),m(23),s()()),e&2&&(p(3),g("formGroup",i.form),p(5),Y(i.parameterControls),p(15),N(" ",i.data.edit?"UPDATE":"ADD TO STACK"," "))},dependencies:[wt,Un,R,ee,j,J,te,ne,va,se,ve,Ce,ge,z,bn,En],styles:[".parameter-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{margin-left:0;padding-left:0}[_nghost-%COMP%]     .parameter-table input{margin:0!important}"],changeDetection:0})}};var Wc=["top"],Hc=["searchFilter"];function Zc(n,t){if(n&1){let e=F();l(0,"ya-breadcrumb",10),P("click",function(){let a=D(e).$implicit,o=h(3);return $(o.changeSystem(a.system))}),s()}if(n&2){let e=t.$implicit;g("action",!0)("label",e.name)}}function Kc(n,t){if(n&1){let e=F();l(0,"div",3)(1,"ya-breadcrumb-trail")(2,"ya-breadcrumb",8),P("click",function(){D(e);let a=h(2);return $(a.changeSystem(""))}),s(),q(3,Zc,1,2,"ya-breadcrumb",9,L),s()()}if(n&2){let e=h();p(2),g("action",!0),p(),Y(e)}}function Jc(n,t){n&1&&y(0,Kc,5,1,"div",3),n&2&&x(t.length?0:-1)}function em(n,t){n&1&&(l(0,"th",24),m(1,"Name"),s())}function tm(n,t){if(n&1){let e=F();l(0,"mat-icon",26),m(1,"folder"),s(),l(2,"a",27),P("click",function(){D(e);let a=h().$implicit,o=h(2);return $(o.selectRow(a))}),m(3),v(4,"filename"),s()}if(n&2){let e=h().$implicit;p(3),N("",w(4,1,e.name),"/")}}function nm(n,t){if(n&1&&O(0,"ya-highlight",28),n&2){let e=h(2).$implicit,i=h(2);g("text",e.command.qualifiedName)("term",i.filterControl.value)}}function im(n,t){if(n&1&&(O(0,"ya-highlight",28),v(1,"slice")),n&2){let e=h(2).$implicit,i=h(2);g("text",$t(1,2,e.command.qualifiedName,i.system.length+1))("term",i.filterControl.value)}}function am(n,t){if(n&1){let e=F();l(0,"mat-icon",26),m(1,"rss_feed"),s(),l(2,"a",27),P("click",function(){D(e);let a=h().$implicit,o=h(2);return $(o.selectRow(a))}),y(3,nm,1,2,"ya-highlight",28)(4,im,2,5,"ya-highlight",28),s()}if(n&2){let e=h(3);p(3),x(e.system?-1:3),p(),x(e.system?4:-1)}}function om(n,t){if(n&1&&(l(0,"td",25),y(1,tm,5,3)(2,am,5,2),s()),n&2){let e=t.$implicit;p(),x(e.system?1:-1),p(),x(e.command?2:-1)}}function rm(n,t){n&1&&(l(0,"th",24),m(1,"Description"),s())}function lm(n,t){if(n&1&&m(0),n&2){let e=h().$implicit;N(" ",e.system.shortDescription||"-"," ")}}function sm(n,t){if(n&1&&O(0,"ya-highlight",28),n&2){let e=h(4);g("text",t)("term",e.filterControl.value)}}function cm(n,t){n&1&&m(0," - ")}function mm(n,t){if(n&1&&y(0,sm,1,2,"ya-highlight",28)(1,cm,1,0),n&2){let e,i=h().$implicit;x((e=i.command.shortDescription)?0:1,e)}}function dm(n,t){if(n&1&&(l(0,"td",29),y(1,lm,1,1)(2,mm,2,1),s()),n&2){let e=t.$implicit;p(),x(e.system?1:-1),p(),x(e.command?2:-1)}}function pm(n,t){n&1&&(l(0,"th",24),m(1,"Significance"),s())}function um(n,t){n&1&&O(0,"app-significance-level",31),n&2&&g("level",t.consequenceLevel)}function fm(n,t){n&1&&m(0," - ")}function hm(n,t){if(n&1&&(l(0,"td",30),y(1,um,1,1,"app-significance-level",31)(2,fm,1,0),s()),n&2){let e,i=t.$implicit;p(),x((e=i.command==null?null:i.command.effectiveSignificance)?1:2,e)}}function gm(n,t){if(n&1&&(l(0,"th",24),m(1),s()),n&2){let e=h().$implicit;p(),N(" ",e.label," ")}}function Cm(n,t){if(n&1&&O(0,"ya-highlight",28),n&2){let e=h(4);g("text",t)("term",e.filterControl.value)}}function Om(n,t){n&1&&m(0," - ")}function Sm(n,t){if(n&1&&(l(0,"td",30),y(1,Cm,1,2,"ya-highlight",28),v(2,"alias"),y(3,Om,1,0),s()),n&2){let e,i=t.$implicit,a=h().$implicit;p(),x((e=$t(2,1,i.command,a.id))?1:3,e)}}function _m(n,t){if(n&1&&(oe(0,18),y(1,gm,2,1,"th",32)(2,Sm,4,4,"td",21),re()),n&2){let e=t.$implicit;g("matColumnDef",e.id)}}function ym(n,t){n&1&&O(0,"th",33)}function km(n,t){n&1&&O(0,"td",30)}function vm(n,t){n&1&&O(0,"tr",34)}function bm(n,t){if(n&1&&O(0,"tr",35),n&2){let e=t.$implicit,i=h(2);Se("selected",i.selection.isSelected(e))}}function xm(n,t){if(n&1&&(l(0,"table",6),oe(1,11),y(2,em,2,0,"th",12)(3,om,3,2,"td",13),re(),oe(4,14),y(5,rm,2,0,"th",12)(6,dm,3,2,"td",15),re(),oe(7,16),y(8,pm,2,0,"th",12)(9,hm,3,1,"td",17),re(),q(10,_m,3,1,"ng-container",18,L),v(12,"async"),oe(13,19),y(14,ym,1,0,"th",20)(15,km,1,0,"td",21),re(),y(16,vm,1,0,"tr",22),v(17,"async"),y(18,bm,1,2,"tr",23),v(19,"async"),s()),n&2){let e=h(),i=_e(8);g("dataSource",e.dataSource),p(10),Y(w(12,3,e.aliasColumns$)),p(6),g("matHeaderRowDef",w(17,5,i.displayedColumns$)),p(2),g("matRowDefColumns",w(19,7,i.displayedColumns$))}}var Gn=class n{constructor(t,e){this.yamcs=t;this.changeDetection=e;this.pageSize=100;this.system=null;this.breadcrumb$=new W([]);this.filterControl=new ka;this.columns=[{id:"name",label:"Name",alwaysVisible:!0},{id:"significance",label:"Significance",visible:!0},{id:"shortDescription",label:"Description"},{id:"actions",label:"",alwaysVisible:!0}];this.aliasColumns$=new W([]);this.selection=new nn(!1);this.selectedCommand$=new W(null);this.onChange=t=>{};this.onTouched=()=>{};this.dataSource=new ar(t),this.selectedCommand$.subscribe(async i=>{if(i&&i.command){let a=await this.yamcs.yamcsClient.getCommand(this.yamcs.instance,i.command.qualifiedName);return this.onChange(a)}else return this.onChange(null)})}ngAfterViewInit(){this.changeSystem(""),this.searchFilter.filter.nativeElement.focus(),this.filterControl.valueChanges.subscribe(()=>{this.paginator.pageIndex=0,this.updateDataSource()}),this.paginator.page.subscribe(()=>{this.updateDataSource(),this.top.nativeElement.scrollIntoView()})}changeSystem(t,e=0){this.system=t,this.updateBrowsePath(),this.paginator.pageIndex=e,this.updateDataSource()}updateDataSource(){let t={system:this.system||"/",noAbstract:!0,details:!0,pos:this.paginator.pageIndex*this.pageSize,limit:this.pageSize,fields:["name","qualifiedName","alias","effectiveSignificance","shortDescription"]},e=this.filterControl.value;e&&(t.q=e.toLowerCase()),this.dataSource.loadCommands(t).then(()=>{this.selection.clear(),this.updateBrowsePath();for(let a of this.aliasColumns$.value){let o=this.columns.indexOf(a);o!==-1&&this.columns.splice(o,1)}let i=[];for(let a of this.dataSource.getAliasNamespaces()){let o={id:a,label:a,alwaysVisible:!0};i.push(o)}this.columns.splice(1,0,...i),this.aliasColumns$.next(i),this.columnChooser.recalculate(this.columns)})}selectRow(t){return t.system?(this.selectedCommand$.next(null),this.changeSystem(t.name)):this.selectedCommand$.next(t),!1}updateBrowsePath(){let t=[],e="";if(this.system)for(let i of this.system.slice(1).split("/"))e+="/"+i,t.push({name:i,system:e});this.breadcrumb$.next(t)}selectNext(){let t=this.dataSource.items$.value,e=0;if(this.selection.hasValue()){let i=this.selection.selected[0];t.indexOf(i)!==-1&&(e=Math.min(t.indexOf(i)+1,t.length-1))}this.selection.select(t[e])}selectPrevious(){let t=this.dataSource.items$.value,e=0;if(this.selection.hasValue()){let i=this.selection.selected[0];t.indexOf(i)!==-1&&(e=Math.max(t.indexOf(i)-1,0))}this.selection.select(t[e])}applySelection(){if(this.selection.hasValue()){let t=this.selection.selected[0],e=this.dataSource.items$.value;t.command&&e.indexOf(t)!==-1&&this.selectRow(t)}}writeValue(t){this.path=t}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}static{this.\u0275fac=function(e){return new(e||n)(T(ie),T(Gt))}}static{this.\u0275cmp=V({type:n,selectors:[["app-command-selector"]],viewQuery:function(e,i){if(e&1&&(ce(Wc,7),ce(hn,5),ce(vn,5),ce(Hc,5)),e&2){let a;me(a=de())&&(i.top=a.first),me(a=de())&&(i.paginator=a.first),me(a=de())&&(i.columnChooser=a.first),me(a=de())&&(i.searchFilter=a.first)}},inputs:{path:"path"},standalone:!0,features:[tt([{provide:at,useExisting:et(()=>n),multi:!0}]),Q],decls:12,vars:12,consts:[["top",""],["searchFilter",""],["columnChooser",""],[1,"filter-bar"],["placeholder","Search by name","icon","search",3,"onArrowDown","onArrowUp","onEnter","formControl"],["preferenceKey","sendCommand",3,"columns"],["mat-table","",1,"ya-data-table","expand",3,"dataSource"],[3,"pageSize","hidePageSize","showFirstLastButtons","length"],["icon","account_tree",3,"click","action"],[3,"action","label"],[3,"click","action","label"],["cdkColumnDef","name"],["mat-header-cell","",4,"cdkHeaderCellDef"],["mat-cell","","class","primary-td",4,"cdkCellDef"],["cdkColumnDef","shortDescription"],["mat-cell","","class","wrap200",4,"cdkCellDef"],["cdkColumnDef","significance"],["mat-cell","",4,"cdkCellDef"],[3,"matColumnDef"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"selected",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"primary-td"],[1,"icon12",2,"vertical-align","middle"],["href","",3,"click"],[3,"text","term"],["mat-cell","",1,"wrap200"],["mat-cell",""],[3,"level"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(e,i){if(e&1){let a=F();O(0,"span",null,0),y(2,Jc,1,1),v(3,"async"),l(4,"div",3)(5,"ya-search-filter",4,1),P("onArrowDown",function(){return D(a),$(i.selectNext())})("onArrowUp",function(){return D(a),$(i.selectPrevious())})("onEnter",function(){return D(a),$(i.applySelection())}),s(),O(7,"ya-column-chooser",5,2),s(),y(9,xm,20,9,"table",6),O(10,"mat-paginator",7),v(11,"async")}if(e&2){let a;p(2),x((a=w(3,8,i.breadcrumb$))?2:-1,a),p(3),g("formControl",i.filterControl),p(2),g("columns",i.columns),p(2),x(i.dataSource?9:-1),p(),g("pageSize",i.pageSize)("hidePageSize",!0)("showFirstLastButtons",!0)("length",w(11,10,i.dataSource.totalSize$))}},dependencies:[Mn,R,ue,Oa,j,en,pn,un,fn,Pe,hn,ct,gn,ko,dt,mt,On,Cn,pt,Sn,ut,kn,yn,vn,$o,Vo,Io,Dn],styles:[".pullRight[_ngcontent-%COMP%]{float:right}.primary-td[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:7px}"],changeDetection:0})}};var wm=["commandSelector"],Em=["commandForm"],Pm=()=>[];function Tm(n,t){if(n&1&&(l(0,"div",3)(1,"form",4)(2,"h2"),m(3,"Select command"),s(),l(4,"div",5),O(5,"app-command-selector",6,0),s()()(),l(7,"div",7)(8,"mat-toolbar")(9,"mat-toolbar-row")(10,"ya-button",8),m(11,"CANCEL"),s()()()()),n&2){let e=h();p(),g("formGroup",e.selectCommandForm)}}function Dm(n,t){if(n&1){let e=F();l(0,"ya-text-action",15),P("click",function(){let a=D(e),o=h(2);return $(o.returnToList(a))}),m(1),s()}n&2&&(g("padding",!1),p(),N(" ",t," "))}function $m(n,t){if(n&1&&(l(0,"div"),m(1),O(2,"br"),l(3,"h2"),m(4),s()()),n&2){let e=t.$implicit;p(),N(" ",e.namespace," "),p(3),K(e.name)}}function Mm(n,t){n&1&&O(0,"input",21)}function Am(n,t){if(n&1&&(l(0,"form",13)(1,"p"),m(2,"\xA0"),s(),l(3,"h3"),m(4,"Stack comment"),s(),O(5,"app-markdown-input",16),l(6,"p"),m(7,"\xA0"),s(),l(8,"h3"),m(9,"Stack advancement"),s(),l(10,"div",17),m(11," Advance when "),O(12,"app-advance-ack-help",18)(13,"br"),l(14,"div",19),O(15,"ya-select",20,2),y(17,Mm,1,0,"input",21),s()(),O(18,"br"),l(19,"div",17),m(20," Wait (ms) "),l(21,"ya-help",22)(22,"p"),m(23,"Wait time before advancing to the next command in the stack."),s(),l(24,"p"),m(25,"This triggers after successful acknowledgment."),s()(),O(26,"br")(27,"input",23),s()()),n&2){let e,i=h(2);g("formGroup",i.stackOptionsForm)("ngClass",i.stackOptionsForm.disabled&&"disabled"),p(12),g("verifiers",i.verifierAcknowledgments)("extra",i.extraAcknowledgments),p(3),g("options",i.ackOptions),p(2),x(((e=i.stackOptionsForm.get("advancementAckDropDown"))==null?null:e.value)==="custom"?17:-1)}}function Vm(n,t){if(n&1){let e=F();l(0,"div",3)(1,"div",9)(2,"div",10)(3,"div"),y(4,Dm,2,2,"ya-text-action",11),v(5,"spaceSystemName"),l(6,"h2"),m(7),s()(),q(8,$m,5,2,"div",null,L),s(),l(10,"p"),m(11,"\xA0"),s(),O(12,"app-command-form",12,1),y(14,Am,28,6,"form",13),s()(),l(15,"div",7)(16,"mat-toolbar")(17,"mat-toolbar-row")(18,"ya-button",8),m(19,"CANCEL"),s(),m(20," \xA0\xA0 "),l(21,"ya-button",14),P("click",function(){D(e);let a=h();return $(a.handleOK())}),m(22),s()()()()}if(n&2){let e,i=t,a=_e(13),o=h();p(4),x((e=w(5,8,i.qualifiedName))?4:-1,e),p(3),K(i.name),p(),Y(i.alias||Ut(10,Pm)),p(4),g("command",i)("templateProvider",o.templateProvider)("enableComment",!1),p(2),x(o.format==="ycs"?14:-1),p(7),g("disabled",!a.form.valid),p(),N(" ",o.okLabel," ")}}var ta=class{constructor(t){this.entry=t}getAssignment(t){for(let e in this.entry.args)if(e===t){let i=this.entry.args[e];return xe.toValue(i)}}getOption(t,e){for(let i in this.entry.extra||{})if(i===t){let a=this.entry.extra[i];switch(e){case"BOOLEAN":return this.getBooleanOption(a);case"NUMBER":return this.getNumberOption(a);case"STRING":return this.getStringOption(a);case"TIMESTAMP":return this.getStringOption(a)}}}getBooleanOption(t){if(t.type==="BOOLEAN")return t}getNumberOption(t){switch(t.type){case"SINT32":case"UINT32":case"SINT64":case"UINT64":return t}}getStringOption(t){if(t.type==="STRING")return t}getComment(){return this.entry.comment}},Yt=class n{constructor(t,e,i,a,o){this.dialogRef=t;this.yamcs=e;this.changeDetection=a;this.data=o;this.okLabel="OK";this.verifierAcknowledgments=[];this.extraAcknowledgments=[];this.ackOptions=[{id:"",label:"Inherit"},{id:"Acknowledge_Queued",label:"Queued",group:!0},{id:"Acknowledge_Released",label:"Released"},{id:"Acknowledge_Sent",label:"Sent"},{id:"CommandComplete",label:"Completed"}];this.commandFormValid$=new W(!1);this.selectedCommand$=new W(null);let r,c,d,f;if(o?.entry){let u=o.entry;this.templateProvider=new ta(u.model),this.selectedCommand$.next(u.command??null),this.verifierAcknowledgments=[];let S=[],C=u.command;for(;C;)S.unshift(C),C=C.baseCommand;for(let E of S)for(let A of E.verifier??[])this.verifierAcknowledgments.push({name:`Verifier_${A.stage}`});let b=!0;for(let E of this.verifierAcknowledgments)this.ackOptions.push({id:E.name,label:E.name,group:b}),b=!1;this.extraAcknowledgments=e.getProcessor()?.acknowledgments??[],b=!0;for(let E of this.extraAcknowledgments)this.ackOptions.push({id:E.name,label:E.name.replace("Acknowledge_",""),group:b}),b=!1;if(this.ackOptions.push({id:"custom",label:"Custom",group:!0}),u.advancement?.acknowledgment){let E=this.ackOptions.find(A=>A.id===u.advancement.acknowledgment);c=E?E.id:"custom"}d=c==="custom"?u.advancement?.acknowledgment:"",f=u.advancement?.wait,r=u.comment||""}o?.okLabel&&(this.okLabel=o?.okLabel),o?.format&&(this.format=o.format),this.stackOptionsForm=i.group({comment:[r||"",[]],advancementAckDropDown:[c||"",[]],advancementAckCustom:[d,[]],advancementWait:[f,[]]}),this.format!=="ycs"&&this.stackOptionsForm.disable(),this.selectCommandForm=i.group({command:["",pe.required]}),this.selectCommandForm.valueChanges.subscribe(()=>{let u=this.selectCommandForm.value.command;this.selectedCommand$.next(u||null)}),this.stackOptionsForm.valueChanges.subscribe(u=>{u.advancementAckDropDown!=="custom"&&this.stackOptionsForm.patchValue({advancementAckCustom:void 0},{emitEvent:!1})})}handleOK(){let t={},e=this.stackOptionsForm.get("advancementAckDropDown")?.value,i=this.stackOptionsForm.get("advancementAckCustom")?.value?.trim(),a=this.stackOptionsForm.get("advancementWait")?.value;(e&&e!=="custom"||e==="custom"&&i||a!=null)&&(t.advancement=Z(Z(Z({},e&&e!=="custom"&&{acknowledgment:e}),e==="custom"&&i&&{acknowledgment:i}),a!=null&&{wait:a}));let o={command:this.selectedCommand$.value,args:this.commandForm.getAssignments(),comment:this.stackOptionsForm.value.comment||null,extra:this.commandForm.getExtraOptions(),stackOptions:t};this.dialogRef.close(o)}returnToList(t){this.templateProvider=null,this.selectedCommand$.next(null),this.changeDetection.detectChanges(),this.selectCommandForm.reset(),this.stackOptionsForm.reset(),this.commandSelector.changeSystem(t==="/"?"":t)}static{this.\u0275fac=function(e){return new(e||n)(T(le),T(ie),T(he),T(Gt),T(De))}}static{this.\u0275cmp=V({type:n,selectors:[["ng-component"]],viewQuery:function(e,i){if(e&1&&(ce(wm,5),ce(Em,5)),e&2){let a;me(a=de())&&(i.commandSelector=a.first),me(a=de())&&(i.commandForm=a.first)}},standalone:!0,features:[Q],decls:4,vars:6,consts:[["commandSelector",""],["commandForm",""],["ackSelect",""],[1,"wrapper"],[1,"ya-form",3,"formGroup"],[1,"command-table-wrapper"],["formControlName","command"],[1,"footer"],["mat-dialog-close",""],[1,"command-detail"],[1,"names"],[3,"padding"],[3,"command","templateProvider","enableComment"],[1,"ya-form",3,"formGroup","ngClass"],["appearance","primary",3,"click","disabled"],[3,"click","padding"],["formControlName","comment"],[1,"label"],[3,"verifiers","extra"],[2,"display","flex","align-items","flex-start"],["formControlName","advancementAckDropDown","emptyOption","Inherit",3,"options"],["type","text","formControlName","advancementAckCustom",2,"width","200px","margin-left","-1px"],["dialogTitle","Wait time"],["type","number","formControlName","advancementWait","placeholder","Inherit","step","1000","min","0"]],template:function(e,i){if(e&1&&(y(0,Tm,12,1),v(1,"async"),y(2,Vm,23,11),v(3,"async")),e&2){let a;x(w(1,2,i.selectedCommand$)?-1:0),p(2),x((a=w(3,4,i.selectedCommand$))?2:-1,a)}},dependencies:[_t,wt,ir,Gn,R,Wt,ue,ee,fe,Jt,j,J,tn,te,ne,se,rn,Ma,z,Me,ft,En,$n],styles:[".mat-mdc-dialog-container{border-radius:0;position:relative}.wrapper[_ngcontent-%COMP%]{position:relative;height:calc(100% - 48px);overflow:auto;font:400 12px/20px Roboto,sans-serif}.command-table-wrapper[_ngcontent-%COMP%]{position:absolute;overflow:auto;inset:56px 0 1em}.command-detail[_ngcontent-%COMP%]{max-width:600px}.footer[_ngcontent-%COMP%]{position:absolute;bottom:0;height:64px;left:0;right:0;border-top:1px solid #d3d3d3}.disabled[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{opacity:.6}div.names[_ngcontent-%COMP%]{display:flex}div.names[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding-right:25px}div.names[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(:first-child){padding-left:25px;border-left:1px solid rgba(0,0,0,.1)}div.names[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}div.names[_ngcontent-%COMP%]     .text-action{line-height:0}"]})}};var Wn=class n{constructor(t,e){this.dialogRef=t;this.form=e.group({executionTime:["",[pe.required]],tags:[[],[]]})}schedule(){this.dialogRef.close(this.form.value)}static{this.\u0275fac=function(e){return new(e||n)(T(le),T(he))}}static{this.\u0275cmp=V({type:n,selectors:[["app-schedule-stack-dialog"]],standalone:!0,features:[Q],decls:26,vars:3,consts:[["mat-dialog-title",""],[1,"hint"],[1,"ya-form",3,"formGroup"],[1,"label"],["formControlName","executionTime",3,"showMillis"],[1,"half-break"],["dialogTitle","Timeline Tags"],["formControlName","tags"],["align","end"],[2,"flex","1 1 auto"],["mat-dialog-close",""],["appearance","primary",3,"click","disabled"]],template:function(e,i){e&1&&(l(0,"h2",0),m(1,"Run later"),s(),l(2,"mat-dialog-content")(3,"div",1)(4,"p"),m(5,"This stack will be submitted to the Yamcs Timeline, for execution at a later time."),s()(),l(6,"form",2)(7,"div",3),m(8," Execution time "),O(9,"br")(10,"ya-date-time-input",4),s(),O(11,"hr",5),l(12,"div",3),m(13," Timeline tags "),l(14,"span",1),m(15,"(optional)"),s(),l(16,"ya-help",6),m(17," Tags allow to categorise items per band. Bands only show items for which one of the tags is matching. "),s(),O(18,"br")(19,"ya-tag-select",7),s()()(),l(20,"mat-dialog-actions",8),O(21,"div",9),l(22,"ya-button",10),m(23,"CANCEL"),s(),l(24,"ya-button",11),P("click",function(){return i.schedule()}),m(25,"SCHEDULE"),s()()),e&2&&(p(6),g("formGroup",i.form),p(4),g("showMillis",!0),p(14),g("disabled",!i.form.valid))},dependencies:[R,ee,j,J,te,ne,se,ve,Ce,ge,z,xn,Me,Tn],encapsulation:2,changeDetection:0})}};var Et=class n{constructor(){this.icon=Ee.required();this.text=Ee.required()}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=V({type:n,selectors:[["app-entry-label"]],inputs:{icon:[1,"icon"],text:[1,"text"]},standalone:!0,features:[Q],decls:4,vars:2,consts:[[1,"icon12"]],template:function(e,i){e&1&&(l(0,"mat-icon",0),m(1),s(),l(2,"span"),m(3),s()),e&2&&(p(),K(i.icon()),p(2),K(i.text()))},dependencies:[Pe],styles:["[_nghost-%COMP%]{display:flex;align-items:center;background-color:inherit;font-size:12px;font-weight:400;font-family:Roboto Mono,monospace;line-height:12px;letter-spacing:.02em;color:#000000a7;padding:2px;margin-bottom:5px}span[_ngcontent-%COMP%]{margin-left:5px}"],changeDetection:0})}};function Qm(n,t){if(n&1&&(l(0,"td",9),m(1),s()),n&2){let e=t.$implicit;p(),N(" ",e.parameter," ")}}function Fm(n,t){if(n&1&&O(0,"app-alarm-level",11),n&2){let e=h().$implicit;g("level",e.pval.monitoringResult)}}function Rm(n,t){if(n&1&&(l(0,"td",10),y(1,Fm,1,1,"app-alarm-level",11),s()),n&2){let e,i=t.$implicit;p(),x((e=i.pval==null?null:i.pval.engValue)?1:-1,e)}}function Im(n,t){n&1&&(l(0,"span"),m(1,"\u2193"),s())}function Nm(n,t){n&1&&(l(0,"span"),m(1,"\u2191"),s())}function Bm(n,t){if(n&1&&(l(0,"ya-expirable",13),m(1),v(2,"value"),y(3,Im,2,0,"span")(4,Nm,2,0,"span"),s()),n&2){let e=h().$implicit;g("pval",e.pval),p(),N(" ",w(2,4,e.pval.engValue)," "),p(2),x(e.pval.rangeCondition==="LOW"?3:-1),p(),x(e.pval.rangeCondition==="HIGH"?4:-1)}}function Xm(n,t){n&1&&m(0," - ")}function Lm(n,t){if(n&1&&(l(0,"td",12),y(1,Bm,5,6,"ya-expirable",13)(2,Xm,1,0),s()),n&2){let e,i=t.$implicit;p(),x((e=i.pval==null?null:i.pval.engValue)?1:2,e)}}function qm(n,t){n&1&&O(0,"tr",14)}function Ym(n,t){if(n&1&&(l(0,"table",1),oe(1,2),y(2,Qm,2,1,"td",3),re(),oe(3,4),y(4,Rm,2,1,"td",5),re(),oe(5,6),y(6,Lm,3,1,"td",7),re(),y(7,qm,1,0,"tr",8),s()),n&2){let e=h();g("dataSource",e.dataSource),p(7),g("matRowDefColumns",e.displayedColumns)}}var Hn=class n{constructor(){this.entry=Ee.required();this.pvals=Ee.required();this.dataSource=new _n;this.displayedColumns=["parameter","level","value"];ha(()=>{let t=this.pvals(),e=[];for(let i of this.entry().parameters){let a={parameter:i.parameter,pval:t[i.parameter]};e.push(a)}this.dataSource.data=e})}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=V({type:n,selectors:[["app-stacked-check-entry"]],inputs:{entry:[1,"entry"],pvals:[1,"pvals"]},standalone:!0,features:[Q],decls:2,vars:1,consts:[["icon","speed","text","Check"],["mat-table","",1,"ya-data-table","no-frame",3,"dataSource"],["matColumnDef","parameter"],["mat-cell","","style","width: 400px",4,"matCellDef"],["matColumnDef","level"],["mat-cell","","style","width: 80px",4,"matCellDef"],["matColumnDef","value"],["mat-cell","",4,"matCellDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-cell","",2,"width","400px"],["mat-cell","",2,"width","80px"],[3,"level"],["mat-cell",""],[3,"pval"],["mat-row",""]],template:function(e,i){if(e&1&&(O(0,"app-entry-label",0),y(1,Ym,8,2,"table",1)),e&2){let a;p(),x((a=i.entry())?1:-1,a)}},dependencies:[Wo,Et,R,ct,dt,mt,On,pt,ut,To,gt],styles:["[_nghost-%COMP%]{display:block;position:relative}table[_ngcontent-%COMP%]{padding-left:18px;padding-right:18px;background-color:#fafafa}[_nghost-%COMP%]     tr.mat-mdc-row{background:#fafafa}[_nghost-%COMP%]     td:first-child{padding-left:0!important}"],changeDetection:0})}};function jm(n,t){if(n&1&&(l(0,"div",3),m(1),s(),l(2,"div",2),m(3),s()),n&2){let e=t.$implicit;p(),K(e.namespace),p(2),N(" ",e.name," ")}}function zm(n,t){if(n&1&&O(0,"app-markdown",4),n&2){let e=h();g("text",e.entry.command==null?null:e.entry.command.longDescription)}}function Um(n,t){if(n&1&&m(0),n&2){let e=h();N(" ",(e.entry.command==null?null:e.entry.command.shortDescription)||"-"," ")}}function Gm(n,t){if(n&1&&(O(0,"app-significance-level",7),m(1)),n&2){let e=t;g("level",e.consequenceLevel),p(),N(" ",e.reasonForWarning," ")}}function Wm(n,t){n&1&&m(0," - ")}function Hm(n,t){n&1&&(l(0,"span",8),m(1,"satisfied"),s())}function Zm(n,t){n&1&&(l(0,"span",9),m(1,"not satisfied"),s())}function Km(n,t){if(n&1&&(l(0,"tr")(1,"td"),m(2),s(),l(3,"td"),m(4),s(),l(5,"td"),y(6,Hm,2,0,"span",8),v(7,"async"),y(8,Zm,2,0,"span",9),v(9,"async"),O(10,"app-live-expression",10,0),s()()),n&2){let e=t.$implicit,i=_e(11);p(2),K(e.expression),p(2),K(e.timeout||"-"),p(2),x(w(7,7,i.result$)===!0?6:-1),p(2),x(w(9,9,i.result$)===!1?8:-1),p(2),pa("display","none"),g("expression",e.expression)}}function Jm(n,t){n&1&&(l(0,"table",6)(1,"tr")(2,"th"),m(3,"Constraint"),s(),l(4,"th"),m(5,"Timeout"),s(),l(6,"th"),m(7,"Live Evaluation"),s()(),q(8,Km,12,11,"tr",null,L),s()),n&2&&(p(8),Y(t))}function ed(n,t){n&1&&m(0," - ")}var Zn=class n{static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=V({type:n,selectors:[["app-stacked-command-detail"]],inputs:{entry:"entry"},standalone:!0,features:[Q],decls:29,vars:10,consts:[["expr",""],[1,"block-title",2,"padding-top","0"],[1,"block"],[1,"block-title"],[3,"text"],[2,"margin-top","1em","margin-bottom","1em"],["yaDataTable",""],[3,"level"],[1,"evaluation","valid"],[1,"evaluation","invalid"],[3,"expression"]],template:function(e,i){if(e&1&&(l(0,"div",1),m(1,"Command"),s(),l(2,"div",2),m(3),v(4,"shortName"),s(),l(5,"div",3),m(6,"System"),s(),l(7,"div",2),m(8),v(9,"spaceSystemName"),s(),q(10,jm,4,2,null,null,L),l(12,"div",3),m(13,"Description"),s(),l(14,"div",2),y(15,zm,1,1,"app-markdown",4)(16,Um,1,1),s(),O(17,"mat-divider",5),l(18,"div",3),m(19,"Significance"),s(),l(20,"div",2),y(21,Gm,2,2)(22,Wm,1,0),s(),O(23,"mat-divider",5),l(24,"div",1),m(25,"Constraints"),s(),l(26,"div",2),y(27,Jm,10,0,"table",6)(28,ed,1,0),s()),e&2){let a,o;p(3),N(" ",w(4,6,i.entry.command==null?null:i.entry.command.qualifiedName)||"-",`
`),p(5),N(" ",w(9,8,i.entry.command==null?null:i.entry.command.qualifiedName)||"-",`
`),p(2),Y(i.entry.command==null?null:i.entry.command.alias),p(5),x(i.entry.command!=null&&i.entry.command.longDescription?15:16),p(6),x((a=i.entry.command==null?null:i.entry.command.effectiveSignificance)?21:22,a),p(6),x((o=i.entry.command==null?null:i.entry.command.constraint)?27:-1,o),p(),x(i.entry.command!=null&&i.entry.command.constraint?-1:28)}},dependencies:[nr,St,R,ue,Fo,rt,qo,$n,Mn],styles:[".evaluation[_ngcontent-%COMP%]{font-family:Roboto Mono,monospace;background-color:#dc143c;color:#fff;padding-left:2px;padding-right:2px}.evaluation.valid[_ngcontent-%COMP%]{background-color:#adff2f;color:#000}"],changeDetection:0})}};var Kn=class n{transform(t){return t?t==="CommandComplete"?"Completed":t.replace("Acknowledge_",""):null}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275pipe=ca({name:"acknowledgmentName",type:n,pure:!0,standalone:!0})}};function td(n,t){if(n&1&&(l(0,"span"),m(1),v(2,"value"),s()),n&2){let e=t.$implicit;p(),mi("[",e.key,": ",w(2,2,e.value),"]")}}function nd(n,t){if(n&1&&(l(0,"tr")(1,"td",3),m(2),s(),l(3,"td",4),O(4,"ya-value",5),v(5,"tovalue"),s()()),n&2){let e=t.$implicit;p(2),N(" ",e.key," "),p(2),g("value",w(5,2,e.value))}}function id(n,t){if(n&1&&(l(0,"span"),m(1),v(2,"acknowledgmentName"),s()),n&2){let e=h(2);p(),mi(" Advance when ",w(2,2,e.advancement.acknowledgment)," ",e.advancement.wait!=null?"+ "+e.advancement.wait+" ms":null," ")}}function ad(n,t){if(n&1&&(l(0,"span"),m(1),s()),n&2){let e=h(2);p(),N("Advance after ",e.advancement.wait," ms")}}function od(n,t){if(n&1&&(l(0,"div",2)(1,"mat-icon"),m(2,"reply"),s(),y(3,id,3,4,"span")(4,ad,2,1,"span"),s()),n&2){let e=h();p(3),x(e.advancement.acknowledgment?3:e.advancement.wait!=null?4:-1)}}function rd(n,t){if(n&1&&(O(0,"app-entry-label",0),q(1,td,3,4,"span",null,L),v(3,"keyvalue"),l(4,"table",1),q(5,nd,6,4,"tr",null,L),v(7,"keyvalue"),s(),y(8,od,5,1,"div",2)),n&2){let e=t,i=h();g("text","Command: "+e.name),p(),Y(w(3,2,e.extra)),p(4),Y($t(7,4,e.args,i.insertionOrder)),p(3),x(e.advancement?8:-1)}}var Jn=class n{constructor(){this.entry=Ee.required();this.insertionOrder=(t,e)=>0}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=V({type:n,selectors:[["app-stacked-command-entry"]],inputs:{entry:[1,"entry"]},standalone:!0,features:[Q],decls:1,vars:1,consts:[["icon","rss_feed",3,"text"],[1,"args"],[1,"advance-on"],["width","1",1,"key"],[1,"value"],[3,"value"]],template:function(e,i){if(e&1&&y(0,rd,9,7),e&2){let a;x((a=i.entry())?0:-1,a)}},dependencies:[Kn,Et,R,Ca,Pe,Qo,Yo,gt],styles:["[_nghost-%COMP%]{display:block;position:relative}.advance-on[_ngcontent-%COMP%]{color:#000000a7;font-size:12px}.advance-on[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{vertical-align:middle}.advance-on[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{transform:rotate(180deg);font-size:12px;height:12px;width:12px}table.args[_ngcontent-%COMP%]{margin:0 0 0 18px;font-size:10px}table.args[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:0;border:0}table.args[_ngcontent-%COMP%]   td.key[_ngcontent-%COMP%]{min-width:120px;white-space:nowrap}table.args[_ngcontent-%COMP%]   td.value[_ngcontent-%COMP%]{color:gray;padding-left:10px}"],changeDetection:0})}};var ei=class{constructor(t){this.executing=!1;this.model=t}get comment(){return this.model.comment}clearOutputs(){this.executionNumber=void 0,this.err=void 0}hasOutputs(){return!!this.err}},ke=class n extends ei{constructor(e){super(e);this.type="command"}get name(){return this.model.name}get namespace(){return this.model.namespace}get args(){return this.model.args}get extra(){return this.model.extra}get advancement(){return this.model.advancement}clearOutputs(){super.clearOutputs(),this.id=void 0,this.record=void 0}hasOutputs(){return super.hasOutputs()||!!this.record}copy(){let e=new n({type:"command",name:this.name,namespace:this.namespace,args:Z({},this.args),comment:this.comment});return e.command=this.command,this.extra&&(e.model.extra=Z({},this.extra)),this.advancement&&(e.model.advancement=Z({},this.advancement)),e}},qe=class n extends ei{constructor(e){super(e);this.type="check"}get parameters(){return this.model.parameters}clearOutputs(){super.clearOutputs(),this.pvals=void 0}hasOutputs(){return super.hasOutputs()||!!this.pvals}copy(){return new n({type:"check",parameters:this.parameters.map(e=>Z({},e)),comment:this.comment})}};function ti(n,t){let i=new DOMParser().parseFromString(n,"text/xml");return ld(i.documentElement,t)}function ld(n,t){let e=[];for(let i=0;i<n.childNodes.length;i++){let a=n.childNodes[i];if(a.nodeType!==3&&a.nodeName==="command"){let o=sd(a,t);e.push(o)}}return e}function sd(n,t){let e={},i={};for(let o=0;o<n.childNodes.length;o++){let r=n.childNodes[o];if(r.nodeName==="commandArgument"){let c=Pt(r,"argumentName");e[c]=Pt(r,"argumentValue"),e[c]==="true"?e[c]=!0:e[c]==="false"&&(e[c]=!1)}else if(r.nodeName==="extraOptions")for(let c=0;c<r.childNodes.length;c++){let d=r.childNodes[c];if(d.nodeName==="extraOption"){let f=Pt(d,"id"),u=Pt(d,"value"),S=cd(f,u,t);S&&(i[f]=S)}}}let a={type:"command",name:Pt(n,"qualifiedName"),args:e,extra:i};return n.hasAttribute("comment")&&(a.comment=Pt(n,"comment")),a}function Pt(n,t){let e=n.attributes.getNamedItem(t);if(e===null)throw new Error(`No attribute named ${t}`);return e.textContent||""}function cd(n,t,e){for(let i of e)if(i.id===n)switch(i.type){case"BOOLEAN":return{type:"BOOLEAN",booleanValue:t==="true"};case"NUMBER":return{type:"SINT32",sint32Value:Number(t)};default:return{type:"STRING",stringValue:t}}return null}function Gl(n,t){let e=[],i=JSON.parse(n);if(i.steps)for(let o of i.steps)o.type==="check"?e.push(o):o.type==="command"?e.push(Ul(o,t)):console.warn(`Unexpected entry of type '${o.type}'`);else if(i.commands)for(let o of i.commands)e.push(Ul(o,t));let a={acknowledgment:i.advancement?.acknowledgment||"Acknowledge_Queued",wait:i.advancement?.wait!=null?i.advancement?.wait:0};return[e,a]}function Ul(n,t){return Z(Z(Z(Z({type:"command",name:n.name,namespace:n.namespace},n.comment&&{comment:n.comment}),n.arguments&&{args:md(n.arguments)}),n.extraOptions&&{extra:dd(n.extraOptions,t)}),n.advancement&&{advancement:n.advancement})}function md(n){let t={};for(let e of n)t[e.name]=e.value;return t}function dd(n,t){let e={};for(let i of n){let a=new String(i.value).toString(),o=pd(i.id,a,t);o&&(e[i.id]=o)}return e}function pd(n,t,e){for(let i of e)if(i.id===n)switch(i.type){case"BOOLEAN":return{type:"BOOLEAN",booleanValue:t==="true"};case"NUMBER":return{type:"SINT32",sint32Value:Number(t)};default:return{type:"STRING",stringValue:t}}return null}var ud=["entryParent"],fd=n=>({c:n}),hd=()=>[];function gd(n,t){if(n&1){let e=F();l(0,"ya-page-button",27),P("click",function(){D(e);let a=h();return $(a.openScheduleStackDialog())}),m(1," Schedule "),s()}if(n&2){let e=h();g("disabled",!e.loaded||e.format!=="ycs"||!e.entries$.value.length)}}function Cd(n,t){if(n&1){let e=F();O(0,"mat-divider",6),l(1,"ya-page-button",28),P("click",function(){D(e);let a=h();return $(a.convertToJSON())}),m(2," Convert to *.ycs file "),s()}if(n&2){let e=h();p(),g("disabled",!e.format||e.converting)}}function Od(n,t){n&1&&(l(0,"ya-detail-toolbar"),m(1,"Command Info"),s(),l(2,"div",29),O(3,"app-stacked-command-detail",30),l(4,"p"),m(5,"\xA0"),s()()),n&2&&(p(3),g("entry",t))}function Sd(n,t){n&1&&(l(0,"ya-detail-toolbar"),m(1,"Select a step"),s())}function _d(n,t){n&1&&O(0,"input",36)}function yd(n,t){n&1&&O(0,"ya-dots")}function kd(n,t){if(n&1&&(l(0,"form",31)(1,"div",32),m(2," Advance when "),O(3,"app-advance-ack-help",33)(4,"br"),l(5,"div",34),O(6,"ya-select",35,3),y(8,_d,1,0,"input",36),s()(),l(9,"div",32),m(10," Wait (ms) "),l(11,"ya-help",37)(12,"p"),m(13,"Wait time before advancing to the next command in the stack."),s(),l(14,"p"),m(15,"This triggers after successful acknowledgment."),s()(),O(16,"br")(17,"input",38),s(),O(18,"div",39),y(19,yd,1,0,"ya-dots"),v(20,"async"),s(),O(21,"mat-divider",40)),n&2){let e,i=h();g("formGroup",i.stackOptionsForm)("ngClass",i.stackOptionsForm.disabled&&"disabled"),p(3),g("extra",i.extraAcknowledgments),p(3),g("options",i.ackOptions),p(2),x(((e=i.stackOptionsForm.get("advancementAckDropDown"))==null?null:e.value)==="custom"?8:-1),p(11),x(w(20,6,i.running$)?19:-1)}}function vd(n,t){n&1&&(l(0,"ya-empty-message")(1,"mat-icon",41),m(2,"link_off"),s(),m(3," Unsupported stack format "),s())}function bd(n,t){n&1&&(l(0,"ya-empty-message"),m(1," Empty stack "),O(2,"br"),m(3," Click "),l(4,"mat-icon",42),m(5,"add_circle_outline"),s(),m(6," to start adding steps "),s())}function xd(n,t){n&1&&m(0," [*]: ")}function wd(n,t){if(n&1&&m(0),n&2){let e=h().$implicit;N(" [",e.executionNumber,"]: ")}}function Ed(n,t){n&1&&m(0," [ ]: ")}function Pd(n,t){if(n&1&&(O(0,"app-stacked-check-entry",47),v(1,"async")),n&2){let e=h().$implicit,i=h();g("entry",e)("pvals",w(1,2,i.pvals$))}}function Td(n,t){if(n&1&&O(0,"app-stacked-command-entry",30),n&2){let e=h().$implicit;g("entry",e)}}function Dd(n,t){if(n&1&&(l(0,"div",48)(1,"div",50)(2,"mat-icon",51),m(3,"info"),s(),l(4,"span",52),m(5,"Info"),s()(),O(6,"app-markdown",53),s()),n&2){let e=h().$implicit;p(6),g("text",e.comment)}}function $d(n,t){if(n&1&&m(0),n&2){let e=h(2).$implicit;N(" ",e.err," ")}}function Md(n,t){if(n&1&&(l(0,"div",56),O(1,"app-extra-acknowledgments-table",55),s()),n&2){let e=h(3).$implicit;p(),g("command",e.record)("inline",!0)}}function Ad(n,t){if(n&1&&(O(0,"app-yamcs-acknowledgments-table",55),y(1,Md,2,2,"div",56)),n&2){let e=h(2).$implicit;g("command",e.record)("inline",!0),p(),x(((e.record==null?null:e.record.extra)||Ut(3,hd)).length?1:-1)}}function Vd(n,t){if(n&1&&(l(0,"tr")(1,"td",57),m(2),s(),l(3,"td"),m(4),v(5,"value"),s()()),n&2){let e,i=t.$implicit;p(2),K(i.parameter),p(2),K((e=w(5,2,i.pval==null?null:i.pval.engValue))!==null&&e!==void 0?e:"-")}}function Qd(n,t){if(n&1&&(l(0,"table"),q(1,Vd,6,4,"tr",null,L),s()),n&2){let e=h(2).$implicit;p(),Y(e.pvals)}}function Fd(n,t){if(n&1){let e=F();l(0,"div",49)(1,"div",54),P("click",function(){D(e);let a=h().$implicit,o=h();return $(o.selectEntry(a))}),s(),l(2,"div",46),y(3,$d,1,1)(4,Ad,2,4)(5,Qd,3,0,"table"),s()()}if(n&2){let e=h().$implicit;p(2),Se("err",e.err),p(),x(e.err?3:e.type==="command"?4:e.type==="check"?5:-1)}}function Rd(n,t){if(n&1){let e=F();l(0,"div",43),v(1,"async"),P("click",function(){let a=D(e).$implicit,o=h();return $(o.selectEntry(a))})("dblclick",function(){let a=D(e).$implicit,o=h();return $(o.editEntry(a))}),l(2,"div",44)(3,"div",45),y(4,xd,1,0)(5,wd,1,1)(6,Ed,1,0),s(),l(7,"div",46),y(8,Pd,2,4,"app-stacked-check-entry",47)(9,Td,1,1,"app-stacked-command-entry",30)(10,Dd,7,1,"div",48),s()(),y(11,Fd,6,3,"div",49),s()}if(n&2){let e=t.$implicit,i=h();Se("selected",e===w(1,6,i.selectedEntry$)),p(4),x(e.executing?4:e.executionNumber===0||e.executionNumber?5:e.executionNumber!==0&&!e.executionNumber?6:-1),p(4),x(e.type==="check"?8:e.type==="command"?9:-1),p(2),x(e.comment?10:-1),p(),x(e.hasOutputs()?11:-1)}}var Id=["OK","DISABLED"],Nd=["NOK","CANCELLED"],Tt=class n{constructor(t,e,i,a,o,r,c,d,f,u){this.dialog=t;this.yamcs=e;this.route=i;this.router=a;this.title=o;this.authService=r;this.configService=c;this.messageService=d;this.sanitizer=f;this.dirty$=new W(!1);this.entries$=new W([]);this.hasOutputs$=this.entries$.pipe(jt(t=>{for(let e of t)if(e.hasOutputs())return!0;return!1}));this.running$=new W(!1);this.runningStack=!1;this.selectedEntry$=new W(null);this.clipboardEntry$=new W(null);this.commandHistoryRecords=new Map;this.executionCounter=0;this.loaded=!1;this.converting=!1;this.advancement={acknowledgment:"Acknowledge_Queued",wait:0};this.nextEntryScheduled=!1;this.ackOptions=[{id:"Acknowledge_Queued",label:"Queued"},{id:"Acknowledge_Released",label:"Released"},{id:"Acknowledge_Sent",label:"Sent"},{id:"CommandComplete",label:"Completed"}];this.idMapping={};this.pvals$=new W({});this.stackOptionsFormCallback=t=>{this.loaded&&(this.advancement={acknowledgment:t.advancementAckDropDown!=="custom"?t.advancementAckDropDown:t.advancementAckCustom,wait:t.advancementWait??0},t.advancementAckDropDown!=="custom"&&this.stackOptionsForm.patchValue({advancementAckCustom:void 0},{emitEvent:!1}),this.dirty$.next(!0))};this.bucket=c.getStackBucket(),this.storageClient=e.createStorageClient(),this.extraAcknowledgments=e.getProcessor()?.acknowledgments??[];let S=!0;for(let C of this.extraAcknowledgments)this.ackOptions.push({id:C.name,label:C.name.replace("Acknowledge_",""),group:S}),S=!1;this.ackOptions.push({id:"custom",label:"Custom",group:!0}),this.stackOptionsForm=u.group({advancementAckDropDown:["",[]],advancementAckCustom:["",[]],advancementWait:["",[]]}),this.parameterSubscription=e.yamcsClient.createParameterSubscription({instance:e.instance,processor:e.processor,action:"REPLACE",abortOnInvalid:!1,sendFromCache:!0,updateOnExpiration:!0,id:[]},C=>{if(C.mapping&&(this.idMapping=C.mapping),C.values){let b=Z({},this.pvals$.value);for(let E of C.values){let A=this.idMapping[E.numericId];A&&(b[A.name]=E)}this.pvals$.next(b)}}),this.initStackFile()}initStackFile(){let t=this.getObjectNameFromUrl();this.loadFile(t),this.format!=="ycs"?this.stackOptionsForm.disable():(this.stackOptionsForm.enable(),this.stackOptionsForm.valueChanges.subscribe(this.stackOptionsFormCallback)),this.commandSubscription=this.yamcs.yamcsClient.createCommandSubscription({instance:this.yamcs.instance,processor:this.yamcs.processor,ignorePastCommands:!0},e=>{let i=e.id,a=this.commandHistoryRecords.get(i);a?a=a.mergeEntry(e):a=new xo(e),this.commandHistoryRecords.set(i,a);for(let r of this.entries$.value)if(r instanceof ke&&r.id===i){r.record=a;break}let o=this.selectedEntry$.value;o&&o instanceof ke&&o instanceof ke&&this.checkAckContinueRunning(o,a)})}handleDrop(t){t.previousIndex!==t.currentIndex&&(fo(this.entries$.value,t.previousIndex,t.currentIndex),this.entries$.next([...this.entries$.value]),this.dirty$.next(!0))}getObjectNameFromUrl(){let t=this.route.snapshot.url,e="";for(let i of t)e&&(e+="/"),e+=i.path;return e}async loadFile(t){this.objectName=t;let e=this.objectName.lastIndexOf("/");if(e===-1)this.folderLink="/procedures/stacks/browse/",this.filename=this.objectName;else{let o=this.objectName.substring(0,e);this.folderLink="/procedures/stacks/browse/"+o,this.filename=this.objectName.substring(e+1)}this.title.setTitle(this.filename);let i=xe.getExtension(xe.getFilename(t))?.toLowerCase();if(i==="ycs"||i==="xml")this.format=i;else{this.loaded=!0;return}let a=await this.storageClient.getObject(this.bucket,t).catch(o=>{o.statusCode===404&&i==="xml"?this.router.navigate([t.replace(/\.xml$/i,".ycs")],{queryParamsHandling:"preserve",relativeTo:this.route.parent}).then(()=>this.initStackFile()):this.messageService.showError(`Failed to load stack file: ${t}`)});if(a?.ok){let o=await a.text(),r=[];switch(this.format){case"ycs":let u;[u,this.advancement]=Gl(o,this.configService.getCommandOptions());for(let E of u)E.type==="check"?r.push(new qe(E)):E.type==="command"&&r.push(new ke(E));let S=this.ackOptions.find(E=>E.id===this.advancement.acknowledgment),C=S?S.id:"custom";this.stackOptionsForm.setValue({advancementAckDropDown:C,advancementAckCustom:C==="custom"?this.advancement.acknowledgment:"",advancementWait:this.advancement.wait});break;case"xml":let b=ti(o,this.configService.getCommandOptions());for(let E of b)r.push(new ke(E));break}let c=r.filter(u=>u instanceof ke),d=[],f=this.yamcs.instance;for(let u of c){let S=u.namespace??null,C=u.name;d.push(this.yamcs.yamcsClient.getCommandForNamespace(f,S,C).then(b=>{u.command=b}))}for(let u of d)try{await u}catch{}for(let u of c)if(u.command)for(let S in u.args){let C=this.getArgument(S,u.command);if(C?.type.engType==="enumeration"){let b=!1;for(let E of C.type.enumValue||[])if(E.label===u.args[S]){b=!0;break}if(!b){for(let E of C.type.enumValue||[])if(String(E.value)===String(u.args[S])){u.args[S]=E.label,b=!0;break}}}}if(this.format==="xml"){for(let u of c)if(u.command)for(let S in u.args)this.isComplex(S,u.command)&&(u.args[S]=JSON.parse(u.args[S]))}this.entries$.next(r),this.selectedEntry$.next(r.length?r[0]:null),this.updateParameterSubscription(),this.loaded=!0}}updateParameterSubscription(){let t=new Set;for(let i of this.entries$.value)if(i.type==="check")for(let a of i.parameters)t.add(a.parameter);let e=[];t.forEach(i=>e.push({name:i})),this.parameterSubscription.sendMessage({action:"REPLACE",instance:this.yamcs.instance,processor:this.yamcs.processor,abortOnInvalid:!1,sendFromCache:!0,updateOnExpiration:!0,id:e})}isComplex(t,e){for(let i of e.argument||[])if(i.name===t)return i.type.engType==="aggregate"||i.type.engType.endsWith("[]");return e.baseCommand?this.isComplex(t,e.baseCommand):!1}getArgument(t,e){for(let i of e.argument||[])if(i.name===t)return i;return e.baseCommand?this.getArgument(t,e.baseCommand):null}selectEntry(t){this.selectedEntry$.next(t)}deleteSelectedCommands(){let t=this.selectedEntry$.value;if(t){let e=this.entries$.value.indexOf(t);e!==-1&&(this.entries$.value.splice(e,1),this.entries$.next([...this.entries$.value]),this.selectedEntry$.next(null),this.dirty$.next(!0))}}clearSelectedOutputs(){this.selectedEntry$.value?.clearOutputs()}clearOutputs(){for(let t of this.entries$.value)t.clearOutputs();this.executionCounter=0,this.entries$.next([...this.entries$.value]),this.entries$.value.length&&this.selectEntry(this.entries$.value[0])}hasPendingChanges(){return this.dirty$.value}async runSelection(){let t=this.selectedEntry$.value;t&&(this.running$.next(!0),this.runEntry(t))}async runEntry(t){let e=++this.executionCounter,{instance:i,processor:a}=this.yamcs;if(t instanceof ke){let o=t.namespace??null;return this.yamcs.yamcsClient.issueCommandForNamespace(i,a,o,t.name,{sequenceNumber:e,args:t.args,extra:t.extra}).then(r=>{t.executionNumber=e,t.executing=!0,t.id=r.id;let c=this.commandHistoryRecords.get(t.id);c&&(t.record=c,this.checkAckContinueRunning(t,c))}).catch(r=>{t.executionNumber=e,t.executing=!1,t.err=r.message||r,this.stopRun()}).finally(()=>{this.entries$.next([...this.entries$.value])})}else if(t instanceof qe){let o=[];for(let r of t.parameters){let c=this.pvals$.value;o.push({parameter:r.parameter,pval:c[r.parameter]||null})}t.pvals=o,t.executionNumber=e,this.entries$.next([...this.entries$.value]),this.continueRunning(t)}}runFromSelection(){let t=this.selectedEntry$.value;if(!t){this.stopRun();return}this.running$.next(!0),this.runningStack=!0,this.nextEntryScheduled=!1,this.runEntry(t)}checkAckContinueRunning(t,e){if(!this.running$.value||this.nextEntryScheduled)return;let i=t.advancement?.acknowledgment||this.advancement.acknowledgment,a=t.advancement?.wait??this.advancement.wait;if(t.id===e.id){let o=e.acksByName[i];o&&o.status&&(Id.includes(o.status)?this.continueRunning(t,a):Nd.includes(o.status)&&(t.executing=!1,this.stopRun()))}}continueRunning(t,e=0){this.nextEntryScheduled=this.runningStack,this.nextCommandDelayTimeout=window.setTimeout(()=>{t.executing=!1,this.running$.value&&(this.advanceSelection(t),this.runningStack?this.runFromSelection():this.stopRun())},Math.max(e,0))}stopRun(){this.running$.next(!1),this.runningStack=!1;for(let t of this.entries$.value)t.executing=!1;window.clearTimeout(this.nextCommandDelayTimeout),this.nextEntryScheduled=!1}advanceSelection(t){let e=this.entries$.value,i=e.indexOf(t);if(i<e.length-1){let a=e[i+1];this.selectEntry(a);let r=this.entryParent.nativeElement.getElementsByClassName("entry")[i+1];this.isVisible(r)||r.scrollIntoView()}else this.selectedEntry$.next(null)}isVisible(t){let e=t.getBoundingClientRect(),i=Math.max(document.documentElement.clientHeight,window.innerHeight);return!(e.bottom<0||e.top-i>=0)}addCheckEntry(){this.dialog.open(qt,{autoFocus:!1,width:"800px",data:{edit:!1}}).afterClosed().subscribe(t=>{if(t){let e=new qe(Z({type:"check"},t)),i=this.selectedEntry$.value;if(i){let a=this.entries$.value,o=a.indexOf(i);a.splice(o+1,0,e),this.entries$.next([...this.entries$.value])}else this.entries$.next([...this.entries$.value,e]);this.selectEntry(e),this.dirty$.next(!0),this.updateParameterSubscription()}})}addCommandEntry(){this.dialog.open(Yt,{width:"70%",height:"100%",autoFocus:!1,position:{right:"0"},panelClass:"dialog-full-size",data:{okLabel:"ADD TO STACK",format:this.format}}).afterClosed().subscribe(e=>{if(e){let i={type:"command",name:e.command.qualifiedName,args:e.args,comment:e.comment,extra:e.extra};e.stackOptions.advancement&&(i.advancement=e.stackOptions.advancement);let a=this.configService.getConfig();if(a.preferredNamespace){for(let c of e.command.alias||[])if(c.namespace===a.preferredNamespace){i.name=c.name,i.namespace=c.namespace;break}}let o=new ke(i);o.command=e.command;let r=this.selectedEntry$.value;if(r){let c=this.entries$.value,d=c.indexOf(r);c.splice(d+1,0,o),this.entries$.next([...this.entries$.value])}else this.entries$.next([...this.entries$.value,o]);this.selectEntry(o),this.dirty$.next(!0)}})}editSelectedEntry(){let t=this.selectedEntry$.value;this.editEntry(t)}editEntry(t){return this.selectEntry(t),t instanceof ke?this.dialog.open(Yt,{width:"70%",height:"100%",autoFocus:!1,position:{right:"0"},panelClass:"dialog-full-size",data:{okLabel:"UPDATE",entry:t,format:this.format}}).afterClosed().subscribe(e=>{if(e){let i=Z({type:"command",name:e.command.qualifiedName,args:e.args,comment:e.comment,extra:e.extra,command:e.command},e.stackOptions.advancement&&{advancement:e.stackOptions.advancement}),a=this.configService.getConfig();if(a.preferredNamespace){for(let d of e.command.alias||[])if(d.namespace===a.preferredNamespace){i.name=d.name,i.namespace=d.namespace;break}}let o=new ke(i),r=this.entries$.value,c=r.indexOf(t);r.splice(c,1,o),this.entries$.next([...this.entries$.value]),this.selectEntry(o),this.dirty$.next(!0)}}):t instanceof qe&&this.dialog.open(qt,{autoFocus:!1,width:"800px",data:{edit:!0,entry:t}}).afterClosed().subscribe(e=>{if(e){let i=new qe(Z({type:"check"},e)),a=this.entries$.value,o=a.indexOf(t);a.splice(o,1,i),this.entries$.next([...this.entries$.value]),this.selectEntry(i),this.dirty$.next(!0),this.updateParameterSubscription()}}),!1}cutSelectedEntry(){let t=this.selectedEntry$.value;this.advanceSelection(t),this.clipboardEntry$.next(t);let e=this.entries$.value,i=e.indexOf(t);e.splice(i,1),this.entries$.next([...this.entries$.value]),this.dirty$.next(!0)}copySelectedEntry(){let t=this.selectedEntry$.value;this.clipboardEntry$.next(t)}pasteEntry(){let t=this.clipboardEntry$.value;if(t){let e=t.copy(),i=this.selectedEntry$.value;if(i){let a=this.entries$.value,o=a.indexOf(i);a.splice(o+1,0,e),this.entries$.next([...this.entries$.value])}else this.entries$.next([...this.entries$.value,e]);this.selectEntry(e),this.dirty$.next(!0)}}showSchedule(){let t=this.yamcs.connectionInfo$.value?.instance?.capabilities||[];return t.indexOf("timeline")!==-1&&t.indexOf("activities")!==-1&&this.authService.getUser().hasSystemPrivilege("ControlTimeline")}openScheduleStackDialog(){this.dialog.open(Wn,{width:"600px"}).afterClosed().subscribe(t=>{if(t){let e={type:"ACTIVITY",duration:"0s",name:this.filename,start:t.executionTime,tags:t.tags,activityDefinition:{type:"COMMAND_STACK",args:{processor:this.yamcs.processor,bucket:this.bucket,stack:this.filename}}};this.yamcs.yamcsClient.createTimelineItem(this.yamcs.instance,e).then(()=>{this.messageService.showInfo("Stack scheduled")}).catch(i=>this.messageService.showError(i))}})}saveStack(){let t=this.entries$.value.map(o=>o.model),e;switch(this.format){case"ycs":e=new Xe(t,{advancement:this.advancement}).toJSON();break;case"xml":e=new Xe(t,{advancement:this.advancement}).toXML();break}let i=this.format==="xml"?"application/xml":"application/json",a=new Blob([e],{type:i});return this.storageClient.uploadObject(this.bucket,this.objectName,a).then(()=>{this.dirty$.next(!1)})}setExportURLs(){let t=this.entries$.value.map(o=>o.model),e=new Xe(t,{advancement:this.advancement}),i=new Blob([e.toJSON()],{type:"application/json"});this.jsonBlobUrl=this.sanitizer.bypassSecurityTrustResourceUrl(URL.createObjectURL(i));let a=new Blob([e.toXML()],{type:"application/xml"});this.xmlBlobUrl=this.sanitizer.bypassSecurityTrustResourceUrl(URL.createObjectURL(a))}async convertToJSON(){if(!this.converting&&confirm(`Are you sure you want to convert '${this.objectName}' to the new format?
This will delete the original XML file.`)){this.converting=!0,this.dirty$.value&&await this.saveStack();let t=this.entries$.value.map(e=>e.model);n.convertToJSON(this.messageService,this.storageClient,this.bucket,this.objectName,t,{advancement:this.advancement}).then(e=>{this.router.navigate([e+".ycs"],{queryParamsHandling:"preserve",relativeTo:this.route.parent}).then(()=>this.initStackFile())}).finally(()=>this.converting=!1)}}static async convertToJSON(t,e,i,a,o,r){let c=new Xe(o,r),d=new Blob([c.toJSON()],{type:"application/json"}),f=xe.getBasename(a);if(!f){t.showError("Failed to convert stack"),console.error("Failed to convert stack due to objectName");return}return await e.uploadObject(i,f+".ycs",d),await e.deleteObject(i,a),f}ngOnDestroy(){this.parameterSubscription?.cancel(),this.commandSubscription?.cancel(),this.stackOptionsForm.reset()}static{this.\u0275fac=function(e){return new(e||n)(T(Be),T(ie),T(Ht),T(it),T(nt),T(Le),T($e),T(ht),T(Sa),T(Ta))}}static{this.\u0275cmp=V({type:n,selectors:[["ng-component"]],viewQuery:function(e,i){if(e&1&&ce(ud,5),e&2){let a;me(a=de())&&(i.entryParent=a.first)}},standalone:!0,features:[Q],decls:81,vars:72,consts:[["addEntryMenu","matMenu"],["exportMenu","matMenu"],["entryParent",""],["ackSelect",""],["icon","arrow_back",3,"routerLink","queryParams"],["matTooltip","Save stack","icon","save",3,"click","disabled"],["vertical","",2,"height","100%"],["matTooltip","Add a step below","icon","add_circle_outline","dropdown","true",3,"disabled","matMenuTriggerFor"],[1,"ya-menu"],["mat-menu-item","",3,"click"],["matTooltip","Edit the selected step","icon","edit",3,"click","disabled"],["matTooltip","Cut the selected step","icon","content_cut",3,"click","disabled"],["matTooltip","Copy the selected step","icon","content_copy",3,"click","disabled"],["matTooltip","Paste entry from the clipboard","icon","content_paste",3,"click","disabled"],["matTooltip","Run the selected step","icon","play_arrow",3,"click","disabled"],["matTooltip","Stop current execution","icon","stop",3,"click","disabled"],["matTooltip","Clear all outputs","icon","refresh",3,"click","disabled"],["matTooltip","Run all from selected step","icon","playlist_play",3,"click","disabled"],["matTooltip","Run stack at a later time","icon","schedule",3,"disabled"],["matTooltip","Export stack","icon","open_in_new",3,"click","matMenuTriggerFor","disabled"],["mat-menu-item","",3,"href","download"],[2,"vertical-align","middle"],[2,"color","#cc0000"],[1,"panel-wrapper"],["cdkDropList","",1,"panel-content",3,"cdkDropListDropped"],["id","drag-boundary"],["cdkDrag","","cdkDragBoundary","#drag-boundary",1,"entry",3,"selected"],["matTooltip","Run stack at a later time","icon","schedule",3,"click","disabled"],["color","warn","matTooltip","Convert to the newer format","icon","auto_awesome",3,"click","disabled"],[2,"padding","0 16px"],[3,"entry"],[1,"ya-form","panel-content","stack-options",3,"formGroup","ngClass"],[1,"label"],[3,"extra"],[2,"display","flex","align-items","flex-start"],["icon","check_circle_outline","formControlName","advancementAckDropDown",3,"options"],["type","text","formControlName","advancementAckCustom",2,"width","200px","margin-left","-1px"],["dialogTitle","Wait time"],["type","number","formControlName","advancementWait","placeholder","0","step","1000","min","0",2,"width","120px"],[2,"flex","1 1 auto"],["horizontal",""],[2,"vertical-align","bottom","margin-right","10px"],["inline","",2,"vertical-align","bottom"],["cdkDrag","","cdkDragBoundary","#drag-boundary",1,"entry",3,"click","dblclick"],[1,"in"],["cdkDragHandle","",1,"seq"],[1,"body"],[3,"entry","pvals"],[1,"comment"],[1,"out"],[1,"title"],[1,"icon14"],[1,"text"],[3,"text"],[1,"seq",3,"click"],[3,"command","inline"],[1,"block"],[2,"padding-right","20px"]],template:function(e,i){if(e&1){let a=F();l(0,"app-instance-page")(1,"app-instance-toolbar"),O(2,"ya-page-icon-button",4),m(3),v(4,"basename"),l(5,"ya-page-button",5),v(6,"async"),P("click",function(){return D(a),$(i.saveStack())}),m(7," Save "),s(),O(8,"mat-divider",6),l(9,"ya-page-button",7),v(10,"async"),m(11," Add step "),s(),l(12,"mat-menu",8,0)(14,"a",9),P("click",function(){return D(a),$(i.addCommandEntry())}),l(15,"mat-icon"),m(16,"rss_feed"),s(),m(17," Command "),s(),l(18,"a",9),P("click",function(){return D(a),$(i.addCheckEntry())}),l(19,"mat-icon"),m(20,"speed"),s(),m(21," Check "),s()(),l(22,"ya-page-icon-button",10),v(23,"async"),v(24,"async"),P("click",function(){return D(a),$(i.editSelectedEntry())}),s(),l(25,"ya-page-icon-button",11),v(26,"async"),v(27,"async"),P("click",function(){return D(a),$(i.cutSelectedEntry())}),s(),l(28,"ya-page-icon-button",12),v(29,"async"),v(30,"async"),P("click",function(){return D(a),$(i.copySelectedEntry())}),s(),l(31,"ya-page-icon-button",13),v(32,"async"),v(33,"async"),P("click",function(){return D(a),$(i.pasteEntry())}),s(),O(34,"mat-divider",6),l(35,"ya-page-icon-button",14),v(36,"async"),v(37,"async"),P("click",function(){return D(a),$(i.runSelection())}),s(),l(38,"ya-page-icon-button",15),v(39,"async"),P("click",function(){return D(a),$(i.stopRun())}),s(),l(40,"ya-page-icon-button",16),v(41,"async"),v(42,"async"),P("click",function(){return D(a),$(i.clearOutputs())}),s(),l(43,"ya-page-icon-button",17),v(44,"async"),v(45,"async"),P("click",function(){return D(a),$(i.runFromSelection())}),s(),O(46,"mat-divider",6),y(47,gd,2,1,"ya-page-button",18),O(48,"mat-divider",6),l(49,"ya-page-button",19),P("click",function(){return D(a),$(i.setExportURLs())}),m(50," Export "),s(),y(51,Cd,3,1),l(52,"mat-menu",8,1)(54,"a",20),v(55,"basename"),l(56,"mat-icon"),m(57,"data_object"),s(),m(58," YCS FILE "),s(),l(59,"a",20),v(60,"basename"),l(61,"mat-icon"),m(62,"code"),s(),l(63,"span",21),m(64," XML FILE "),l(65,"span",22),m(66,"(legacy)"),s()()()()(),l(67,"ya-detail-pane"),y(68,Od,6,1),v(69,"async"),y(70,Sd,2,0,"ya-detail-toolbar"),s(),l(71,"div",23),y(72,kd,22,8)(73,vd,4,0,"ya-empty-message")(74,bd,7,0,"ya-empty-message"),l(75,"div",24,2),P("cdkDropListDropped",function(r){return D(a),$(i.handleDrop(r))}),l(77,"div",25),q(78,Rd,12,8,"div",26,L),v(80,"async"),s()()()()}if(e&2){let a,o=_e(13),r=_e(53);p(2),g("routerLink",i.folderLink)("queryParams",je(70,fd,i.yamcs.context)),p(),N(" ",w(4,26,i.filename)," \xA0\xA0\xA0 "),p(2),g("disabled",!i.format||!w(6,28,i.dirty$)),p(4),g("disabled",!i.format||w(10,30,i.running$))("matMenuTriggerFor",o),p(13),g("disabled",!i.format||w(23,32,i.running$)||!w(24,34,i.selectedEntry$)),p(3),g("disabled",!i.format||w(26,36,i.running$)||!w(27,38,i.selectedEntry$)),p(3),g("disabled",!i.format||w(29,40,i.running$)||!w(30,42,i.selectedEntry$)),p(3),g("disabled",!i.format||w(32,44,i.running$)||!w(33,46,i.clipboardEntry$)),p(4),g("disabled",!i.format||w(36,48,i.running$)||!w(37,50,i.selectedEntry$)),p(3),g("disabled",!i.format||!w(39,52,i.running$)),p(2),g("disabled",!i.format||w(41,54,i.running$)||!w(42,56,i.hasOutputs$)),p(3),g("disabled",!i.format||w(44,58,i.running$)||!w(45,60,i.selectedEntry$)),p(4),x(i.showSchedule()?47:-1),p(2),g("matMenuTriggerFor",r)("disabled",!i.format),p(2),x(i.format==="xml"?51:-1),p(3),g("href",i.jsonBlobUrl,Dt)("download",w(55,62,i.filename)+".ycs"),p(5),g("href",i.xmlBlobUrl,Dt)("download",w(60,64,i.filename)+".xml"),p(9),x((a=w(69,66,i.selectedEntry$))?68:70,a),p(4),x(i.format==="ycs"?72:-1),p(),x(i.loaded&&!i.format?73:-1),p(),x(i.loaded&&i.format&&!i.entries$.value.length?74:-1),p(4),Y(w(80,68,i.entries$))}},dependencies:[_t,er,Ct,Ot,St,Hn,Zn,Jn,R,Wt,ue,ee,fe,Jt,j,J,tn,te,ne,Kt,Co,go,ho,Pe,rt,an,ot,on,$a,wo,Eo,Po,wn,Me,Pn,Ao,ft,No,gt,tr],styles:[".panel-wrapper[_ngcontent-%COMP%]{position:relative;overflow:auto;height:100%}.ya-data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:top}div.entry[_ngcontent-%COMP%]{font-size:12px;line-height:17px;color:#000000a7}div.entry[_ngcontent-%COMP%]   div.in[_ngcontent-%COMP%], div.entry[_ngcontent-%COMP%]   div.out[_ngcontent-%COMP%]{display:flex;border-left:8px solid transparent;margin-bottom:10px}div.entry.selected[_ngcontent-%COMP%]   div.in[_ngcontent-%COMP%], div.entry.selected[_ngcontent-%COMP%]   div.out[_ngcontent-%COMP%]{border-color:var(--y-accent)}div.entry[_ngcontent-%COMP%]   .seq[_ngcontent-%COMP%]{width:64px;text-align:right;padding-top:5px;padding-right:10px;user-select:none;-webkit-user-select:none;-moz-user-select:none;-khtml-user-select:none;font-family:Roboto Mono,monospace;color:#bdbdbd}div.entry[_ngcontent-%COMP%]   div.in[_ngcontent-%COMP%]   .seq[_ngcontent-%COMP%]{cursor:move}div.entry.selected[_ngcontent-%COMP%]   .seq[_ngcontent-%COMP%]{color:var(--y-accent)}div.entry[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{flex-grow:1;padding:5px}div.entry[_ngcontent-%COMP%]   div.in[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{background-color:#fafafa;border:1px solid rgb(224,224,224);font-family:Roboto Mono,monospace}div.entry[_ngcontent-%COMP%]   div.out[_ngcontent-%COMP%]   .body.err[_ngcontent-%COMP%]{background-color:#fcc;color:#dc143c}div.entry[_ngcontent-%COMP%]   div.in[_ngcontent-%COMP%]   .body.note[_ngcontent-%COMP%]{background-color:#ffffe0}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.6}form.stack-options[_ngcontent-%COMP%]{line-height:0;display:flex;align-items:flex-start}.stack-options[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:inline-block;width:unset;margin-right:1em;margin-top:0}.disabled[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{opacity:.6}.comment[_ngcontent-%COMP%]{margin-top:1em;margin-left:5px;border-left:5px solid rgb(224,224,224);padding:1em}.comment[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;align-items:center;font-weight:500}.comment[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{margin-left:5px}"],changeDetection:0})}};var Bd=["filename"],ni=class n{constructor(t,e,i,a,o){this.dialogRef=t;this.data=o;this.bucket=a.getStackBucket(),this.storageClient=i.createStorageClient(),this.filenameForm=e.group({name:["",[pe.required]],format:["ycs",[pe.required]]})}save(){let t=this.filenameForm.get("format").value,e=this.filenameForm.get("name").value.trim()+"."+t,i=this.data.path;i.startsWith("/")&&(i=i.substring(1));let a=i?i+"/"+e:e,o=this.data.prefix+a,r=t==="xml"?new Xe([],{}).toXML():new Xe([],{}).toJSON(),c=t==="xml"?"application/xml":"application/json",d=new Blob([r],{type:c});this.storageClient.uploadObject(this.bucket,o,d).then(()=>{this.dialogRef.close(a)})}static{this.\u0275fac=function(e){return new(e||n)(T(le),T(he),T(ie),T($e),T(De))}}static{this.\u0275cmp=V({type:n,selectors:[["app-create-stack-dialog"]],viewQuery:function(e,i){if(e&1&&ce(Bd,5),e&2){let a;me(a=de())&&(i.filenameInput=a.first)}},standalone:!0,features:[Q],decls:21,vars:4,consts:[["filename",""],["mat-dialog-title",""],[1,"ya-form",3,"formGroup"],["type","text","formControlName","name"],["formControlName","format"],["value","ycs"],["value","xml"],["align","end"],["mat-dialog-close",""],["appearance","primary",3,"click","disabled"]],template:function(e,i){if(e&1){let a=F();l(0,"h2",1),m(1,"Create stack"),s(),l(2,"mat-dialog-content")(3,"form",2)(4,"label"),m(5," Name "),O(6,"input",3,0),s(),O(8,"br"),l(9,"label"),m(10," Format "),l(11,"select",4)(12,"option",5),m(13,"YCS"),s(),l(14,"option",6),m(15,"XML (deprecated)"),s()()()()(),l(16,"mat-dialog-actions",7)(17,"ya-button",8),m(18,"CANCEL"),s(),l(19,"ya-button",9),P("click",function(){return D(a),$(i.save())}),m(20,"SAVE"),s()()}if(e&2){let a;p(3),g("formGroup",i.filenameForm),p(),Se("invalid",(a=i.filenameForm.get("name"))==null?null:a.invalid),p(15),g("disabled",!i.filenameForm.valid)}},dependencies:[R,ee,xa,wa,fe,ba,j,J,te,ne,se,ve,Ce,ge,z],encapsulation:2})}};var ii=class n{constructor(t,e,i,a){this.dialogRef=t;this.data=a;this.storageClient=i.createStorageClient(),this.form=e.group({name:["",pe.required]})}save(){let{path:t,bucket:e}=this.data;t.startsWith("/")&&(t=t.substring(1));let i=this.form.value.name,a=t?`${t}/${i}/`:`${i}/`;this.storageClient.uploadObject(e,a,new Blob).then(()=>this.dialogRef.close(!0))}static{this.\u0275fac=function(e){return new(e||n)(T(le),T(he),T(ie),T(De))}}static{this.\u0275cmp=V({type:n,selectors:[["app-create-stack-folder-dialog"]],standalone:!0,features:[Q],decls:12,vars:2,consts:[["mat-dialog-title",""],[1,"ya-form",3,"formGroup"],["type","text","formControlName","name","pattern","\\w[\\w\\s\\.\\-\\(\\)\\[\\]]*"],["align","end"],["mat-dialog-close",""],["appearance","primary",3,"click","disabled"]],template:function(e,i){e&1&&(l(0,"h2",0),m(1,"Create folder"),s(),l(2,"mat-dialog-content")(3,"form",1)(4,"label"),m(5," Folder name "),O(6,"input",2),s()()(),l(7,"mat-dialog-actions",3)(8,"ya-button",4),m(9,"CANCEL"),s(),l(10,"ya-button",5),P("click",function(){return i.save()}),m(11,"CREATE"),s()()),e&2&&(p(3),g("formGroup",i.form),p(7),g("disabled",!i.form.valid))},dependencies:[R,ee,fe,j,J,Ea,te,ne,se,ve,Ce,ge,z],encapsulation:2,changeDetection:0})}};var ai=class n{constructor(t,e,i,a,o){this.dialogRef=t;this.data=o;this.storageClient=i.createStorageClient(),this.bucket=a.getStackBucket();let r=xe.getBasename(xe.getFilename(this.data.name));this.filenameForm=e.group({name:[r,[pe.required]]})}async rename(){let t,e=this.data.name.lastIndexOf("/");e!==-1&&(t=this.data.name.substring(0,e+1));let a=await(await this.storageClient.getObject(this.bucket,this.data.name)).blob(),o=xe.getExtension(xe.getFilename(this.data.name))?.toLowerCase(),r=(t||"")+this.filenameForm.get("name").value+(o?"."+o:"");r!==this.data.name&&(await this.storageClient.uploadObject(this.bucket,r,a),await this.storageClient.deleteObject(this.bucket,this.data.name)),this.dialogRef.close(r)}static{this.\u0275fac=function(e){return new(e||n)(T(le),T(he),T(ie),T($e),T(De))}}static{this.\u0275cmp=V({type:n,selectors:[["app-rename-stack-dialog"]],standalone:!0,features:[Q],decls:13,vars:4,consts:[["filename",""],["mat-dialog-title",""],[1,"ya-form",3,"formGroup"],["type","text","formControlName","name"],["align","end"],["mat-dialog-close",""],["appearance","primary",3,"click","disabled"]],template:function(e,i){if(e&1){let a=F();l(0,"h2",1),m(1,"Rename stack"),s(),l(2,"mat-dialog-content")(3,"form",2)(4,"label"),m(5," Name "),O(6,"input",3,0),s()()(),l(8,"mat-dialog-actions",4)(9,"ya-button",5),m(10,"CANCEL"),s(),l(11,"ya-button",6),P("click",function(){return D(a),$(i.rename())}),m(12," RENAME "),s()()}if(e&2){let a;p(3),g("formGroup",i.filenameForm),p(),Se("invalid",(a=i.filenameForm.get("name"))==null?null:a.invalid),p(7),g("disabled",!i.filenameForm.valid)}},dependencies:[R,ee,fe,j,J,te,ne,se,ve,Ce,ge,z],encapsulation:2})}};var Xd=["droparea"],Ld=["uploader"],ri=n=>({c:n});function qd(n,t){if(n&1){let e=F();l(0,"ya-page-button",10),P("click",function(){D(e);let a=h();return $(a.createStack())}),m(1," Create stack "),s()}}function Yd(n,t){if(n&1){let e=F();l(0,"ya-page-button",11),P("click",function(){D(e);let a=h();return $(a.openUploadDialog())}),m(1," Upload stack "),l(2,"input",12,1),P("change",function(){D(e);let a=h();return $(a.importStack())}),s()()}}function jd(n,t){if(n&1){let e=F();l(0,"ya-page-button",13),P("click",function(){D(e);let a=h();return $(a.createFolder())}),m(1," Create folder "),s()}}function zd(n,t){if(n&1){let e=F();l(0,"ya-page-button",14),P("click",function(){D(e);let a=h();return $(a.deleteSelectedStacks())}),m(1," Delete "),s()}if(n&2){let e=h();g("disabled",!e.selection.hasValue())}}function Ud(n,t){if(n&1&&O(0,"ya-breadcrumb",16),n&2){let e=t.$implicit,i=h(3);g("link",e.route)("queryParams",je(3,ri,i.yamcs.context))("label",e.name)}}function Gd(n,t){if(n&1&&(l(0,"ya-breadcrumb-trail"),O(1,"ya-breadcrumb",15),q(2,Ud,1,5,"ya-breadcrumb",16,L),s()),n&2){let e=h(),i=h();p(),g("queryParams",je(1,ri,i.yamcs.context)),p(),Y(e)}}function Wd(n,t){n&1&&y(0,Gd,4,3,"ya-breadcrumb-trail"),n&2&&x(t.length?0:-1)}function Hd(n,t){if(n&1){let e=F();l(0,"input",34),P("change",function(a){D(e);let o=h(3);return $(a?o.masterToggle():null)}),s()}if(n&2){let e=h(3);g("checked",e.selection.hasValue()&&e.isAllSelected())}}function Zd(n,t){if(n&1&&(l(0,"th",32),y(1,Hd,1,1,"input",33),s()),n&2){let e=h(2);p(),x(e.mayManageStacks()?1:-1)}}function Kd(n,t){if(n&1){let e=F();l(0,"input",36),P("click",function(a){return D(e),$(a.stopPropagation())})("change",function(a){D(e);let o=h().$implicit,r=h(2);return $(a?r.selection.toggle(o):null)}),s()}if(n&2){let e=h().$implicit,i=h(2);g("checked",i.selection.isSelected(e))}}function Jd(n,t){if(n&1&&(l(0,"td",35),y(1,Kd,1,1,"input",33),s()),n&2){let e=h(2);p(),x(e.mayManageStacks()?1:-1)}}function ep(n,t){n&1&&(l(0,"th",37),m(1,"Name"),s())}function tp(n,t){if(n&1){let e=F();l(0,"mat-icon",39),m(1," folder "),s(),l(2,"a",40),P("click",function(a){return D(e),$(a.stopPropagation())}),m(3),v(4,"filename"),s()}if(n&2){let e=h().$implicit,i=h(2);p(2),g("routerLink","/procedures/stacks/browse/"+e.name)("queryParams",je(5,ri,i.yamcs.context)),p(),N(" ",w(4,3,e.name)," ")}}function np(n,t){if(n&1){let e=F();l(0,"mat-icon",39),m(1," description "),s(),l(2,"a",41),v(3,"filename"),P("click",function(a){return D(e),$(a.stopPropagation())}),m(4),v(5,"filename"),s()}if(n&2){let e=h().$implicit,i=h(2);p(2),g("routerLink","/procedures/stacks/files/"+e.name)("queryParams",je(8,ri,i.yamcs.context))("title",w(3,4,e.name)),p(2),N(" ",w(5,6,e.name)," ")}}function ip(n,t){if(n&1&&(l(0,"td",38),y(1,tp,5,7)(2,np,6,10),s()),n&2){let e=t.$implicit;p(),x(e.folder?1:2)}}function ap(n,t){n&1&&(l(0,"th",37),m(1,"Visibility"),s())}function op(n,t){n&1&&(l(0,"td",38),m(1,"Private"),s())}function rp(n,t){n&1&&(l(0,"th",37),m(1,"Date modified"),s())}function lp(n,t){if(n&1&&(l(0,"td",38),m(1),v(2,"datetime"),s()),n&2){let e=t.$implicit;p(),N(" ",w(2,1,e.modified)||"-"," ")}}function sp(n,t){n&1&&O(0,"th",42)}function cp(n,t){n&1&&O(0,"mat-divider")}function mp(n,t){if(n&1){let e=F();l(0,"button",43),P("click",function(a){D(e);let o=h(2).$implicit,r=h(2);return $(r.convertToJSON(a,o.name))}),m(1," Convert to new format "),s()}}function dp(n,t){if(n&1){let e=F();l(0,"ya-more")(1,"button",43),P("click",function(){D(e);let a=h().$implicit,o=h(2);return $(o.renameFile(a))}),m(2,"Rename"),s(),l(3,"a",44),m(4,"Download"),s(),O(5,"mat-divider"),l(6,"button",43),P("click",function(){D(e);let a=h().$implicit,o=h(2);return $(o.deleteFile(a))}),m(7,"Delete"),s(),y(8,cp,1,0,"mat-divider"),v(9,"filename"),v(10,"extension"),v(11,"lowercase"),y(12,mp,2,0,"button",45),v(13,"filename"),v(14,"extension"),v(15,"lowercase"),s()}if(n&2){let e=h().$implicit;p(3),g("href",e.objectUrl,Dt),p(5),x(w(11,7,w(10,5,w(9,3,e.name)))==="xml"?8:-1),p(4),x(w(15,13,w(14,11,w(13,9,e.name)))==="xml"?12:-1)}}function pp(n,t){if(n&1&&(l(0,"td",38),y(1,dp,16,15,"ya-more"),s()),n&2){let e=t.$implicit,i=h(2);p(),x(!e.folder&&i.mayManageStacks()?1:-1)}}function up(n,t){n&1&&O(0,"th",37)}function fp(n,t){if(n&1){let e=F();l(0,"span",47),m(1," Warning: XML-formatted stacks are deprecated, "),l(2,"a",48),P("click",function(a){D(e);let o=h(2).$implicit,r=h(2);return $(r.convertToJSON(a,o.name))}),m(3," convert to the new format "),s()()}}function hp(n,t){n&1&&O(0,"span")}function gp(n,t){if(n&1&&(l(0,"span"),m(1),v(2,"filename"),v(3,"extension"),s()),n&2){let e=h(2).$implicit;p(),N("Unsupported format '",w(3,3,w(2,1,e.name)),"'")}}function Cp(n,t){if(n&1&&(l(0,"span"),y(1,fp,4,0,"span",47),v(2,"filename"),v(3,"extension"),v(4,"lowercase"),y(5,hp,1,0,"span")(6,gp,4,5,"span"),s()),n&2){let e,i=h().$implicit;p(),x((e=w(4,5,w(3,3,w(2,1,i.name))))==="xml"?1:e==="ycs"?5:6)}}function Op(n,t){if(n&1&&(l(0,"td",46),y(1,Cp,7,7,"span"),s()),n&2){let e=t.$implicit;p(),x(e.folder?-1:1)}}function Sp(n,t){n&1&&O(0,"tr",49)}function _p(n,t){if(n&1){let e=F();l(0,"tr",50),P("click",function(){let a=D(e).$implicit,o=h(2);return $(o.toggleOne(a))}),s()}if(n&2){let e=t.$implicit,i=h(2);Se("selected",i.selection.isSelected(e))}}function yp(n,t){if(n&1&&(l(0,"table",9),oe(1,17),y(2,Zd,2,1,"th",18)(3,Jd,2,1,"td",19),re(),oe(4,20),y(5,ep,2,0,"th",21)(6,ip,3,1,"td",22),re(),oe(7,23),y(8,ap,2,0,"th",21)(9,op,2,0,"td",22),re(),oe(10,24),y(11,rp,2,0,"th",21)(12,lp,3,3,"td",22),re(),oe(13,25),y(14,sp,1,0,"th",26)(15,pp,2,1,"td",27),re(),oe(16,28),y(17,up,1,0,"th",21)(18,Op,2,1,"td",29),re(),y(19,Sp,1,0,"tr",30)(20,_p,1,2,"tr",31),s()),n&2){let e=h();g("dataSource",e.dataSource),p(19),g("cdkHeaderRowDef",e.displayedColumns),p(),g("cdkRowDefColumns",e.displayedColumns)}}function kp(n,t){n&1&&(l(0,"ya-empty-message"),m(1,"Empty directory."),s())}function vp(n,t){if(n&1){let e=F();l(0,"p")(1,"ya-button",52),P("click",function(){D(e);let a=h(4);return $(a.createStack())}),m(2,"Create a stack"),s(),m(3," or "),l(4,"ya-button",53),P("click",function(){D(e);let a=h(4);return $(a.openUploadDialog())}),m(5,"Import a stack"),s()()}}function bp(n,t){if(n&1&&(l(0,"ya-empty-message",51)(1,"p"),m(2," Stacks are used to interactively execute a prepared set of steps. To start, either: "),s(),y(3,vp,6,0,"p"),s()),n&2){let e=h(3);p(3),x(e.mayManageStacks()?3:-1)}}function xp(n,t){if(n&1&&y(0,kp,2,0,"ya-empty-message")(1,bp,4,1,"ya-empty-message",51),n&2){let e=t,i=h(2);x(i.loaded&&e.length?0:-1),p(),x(i.loaded&&!e.length?1:-1)}}function wp(n,t){if(n&1&&(y(0,xp,2,2),v(1,"async")),n&2){let e,i=h();x((e=w(1,1,i.breadcrumb$))?0:-1,e)}}var oi=class n{constructor(t,e,i,a,o,r,c,d){this.dialog=t;this.yamcs=e;this.router=a;this.route=o;this.authService=r;this.messageService=c;this.configService=d;this.breadcrumb$=new W([]);this.dragActive$=new W(!1);this.displayedColumns=["select","name","modified","actions","formatWarning"];this.dataSource=new _n([]);this.selection=new nn(!0,[]);this.loaded=!1;this.converting=!1;i.setTitle("Command stacks"),this.storageClient=e.createStorageClient(),this.bucket=d.getStackBucket(),this.loadCurrentFolder(),this.routerSubscription=a.events.pipe(ia(f=>f instanceof _a)).subscribe(()=>{this.loadCurrentFolder()})}loadCurrentFolder(){let t={delimiter:"/"},e=this.route.snapshot.url;e.length&&(t.prefix=e.map(i=>i.path).join("/")+"/"),this.storageClient.listObjects(this.bucket,t).then(i=>{this.updateBrowsePath(),this.changedir(i),this.loaded=!0})}changedir(t){this.selection.clear();let e=[];for(let i of t.prefixes||[])e.push({folder:!0,name:i});for(let i of t.objects||[])i.name.endsWith("/")||e.push({folder:!1,name:i.name,modified:i.created,objectUrl:this.storageClient.getObjectURL(this.bucket,i.name)});this.dataSource.data=e}isAllSelected(){let t=this.selection.selected.length,e=this.dataSource.filteredData.length;return t===e&&e>0}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.filteredData.forEach(t=>this.selection.select(t))}toggleOne(t){(!this.selection.isSelected(t)||this.selection.selected.length>1)&&this.selection.clear(),this.selection.toggle(t)}createStack(){this.dialog.open(ni,{width:"400px",data:{path:this.getCurrentPath(),prefix:""}}).afterClosed().subscribe(e=>{e&&this.router.navigateByUrl(`/procedures/stacks/files/${e}?c=${this.yamcs.context}`)})}createFolder(){this.dialog.open(ii,{width:"400px",data:{bucket:this.bucket,path:this.getCurrentPath()}}).afterClosed().subscribe({next:()=>this.loadCurrentFolder()})}openUploadDialog(){this.uploaderEl.nativeElement.click()}importStack(){let t=this.getCurrentPath();t.startsWith("/")&&(t=t.substring(1));let e=this.uploaderEl.nativeElement.files,i=[];for(let a in e)if(!isNaN(parseInt(a,10))){let o=e[a],d=""+(t?t+"/"+o.name:o.name),f=this.storageClient.uploadObject(this.bucket,d,o);i.push(f)}Promise.all(i).then(()=>this.loadCurrentFolder()).catch(a=>this.messageService.showError(a))}convertToJSON(t,e){this.converting||(t.shiftKey||confirm(`Are you sure you want to convert '${e}' to the new format?
This wil delete the original XML file.
(Press shift if you do not want to show this dialog)`))&&(this.converting=!0,this.storageClient.getObject(this.bucket,e).then(async i=>{if(i.ok){let a=await i.text(),o=ti(a,this.configService.getCommandOptions());await Tt.convertToJSON(this.messageService,this.storageClient,this.bucket,e,o,{}),this.loadCurrentFolder()}else this.messageService.showError("Failed to load '"+e+"' for conversion")}).finally(()=>{this.converting=!1}))}getCurrentPath(){let t="";for(let e of this.route.snapshot.url)t+="/"+e.path;return t||"/"}deleteSelectedStacks(){let t=[],e=[];for(let i of this.selection.selected)i.folder?e.push(this.storageClient.listObjects(this.bucket,{prefix:i.name}).then(a=>{let o=a.objects||[];t.push(...o.map(r=>r.name))})):t.push(i.name);Promise.all(e).then(()=>{if(confirm(`You are about to delete ${t.length} files. Are you sure you want to continue?`)){let i=[];for(let a of t)i.push(this.storageClient.deleteObject(this.bucket,a));Promise.all(i).then(()=>{this.loadCurrentFolder()})}})}renameFile(t){this.dialog.open(ai,{data:{name:t.name},width:"400px"}).afterClosed().subscribe(i=>{i&&this.loadCurrentFolder()})}deleteFile(t){confirm(`Are you sure you want to delete ${t.name}?`)&&this.storageClient.deleteObject(this.bucket,t.name).then(()=>{this.loadCurrentFolder()})}dragEnter(t){return this.dragActive$.next(!0),t.preventDefault(),t.stopPropagation(),!1}dragOver(t){return t.preventDefault(),t.stopPropagation(),!1}dragLeave(t){return this.dragActive$.next(!1),t.preventDefault(),t.stopPropagation(),!1}drop(t){let e=t.dataTransfer||{};if(e){let i=this.getCurrentPath().substring(1);i!==""&&(i+="/"),Go(e).then(a=>{let o=[];for(let r of a){let c=i+r._fullPath,d=this.storageClient.uploadObject(this.bucket,c,r);o.push(d)}Promise.all(o).finally(()=>{this.loadCurrentFolder()})})}return this.dragActive$.next(!1),t.preventDefault(),t.stopPropagation(),!1}mayManageStacks(){let t=this.authService.getUser();return t.hasObjectPrivilege("ManageBucket",this.bucket)||t.hasSystemPrivilege("ManageAnyBucket")}updateBrowsePath(){let t=[],e="";for(let i of this.route.snapshot.url)e+="/"+i.path,t.push({name:i.path,route:"/procedures/stacks/browse"+e});return this.breadcrumb$.next(t),e||"/"}ngOnDestroy(){this.routerSubscription?.unsubscribe()}static{this.\u0275fac=function(e){return new(e||n)(T(Be),T(ie),T(nt),T(it),T(Ht),T(Le),T(ht),T($e))}}static{this.\u0275cmp=V({type:n,selectors:[["ng-component"]],viewQuery:function(e,i){if(e&1&&(ce(Xd,7),ce(Ld,5)),e&2){let a;me(a=de())&&(i.dropArea=a.first),me(a=de())&&(i.uploaderEl=a.first)}},standalone:!0,features:[Q],decls:17,vars:16,consts:[["droparea",""],["uploader",""],["icon","add_circle_outline"],["icon","file_upload"],["icon","create_new_folder"],["icon","delete",3,"disabled"],[1,"droparea",3,"dragenter"],[1,"droparea-overlay",3,"dragover","dragleave","drop"],[1,"panel-content"],["mat-table","",1,"ya-data-table","expand",3,"dataSource"],["icon","add_circle_outline",3,"click"],["icon","file_upload",3,"click"],["type","file","hidden","","accept",".xml,.XML,.ycs,.YCS","multiple","",3,"change"],["icon","create_new_folder",3,"click"],["icon","delete",3,"click","disabled"],["link","/procedures/stacks/browse","icon","account_tree",3,"queryParams"],[3,"link","queryParams","label"],["cdkColumnDef","select"],["mat-header-cell","","class","checkbox",4,"cdkHeaderCellDef"],["mat-cell","","class","checkbox",4,"cdkCellDef"],["cdkColumnDef","name"],["mat-header-cell","",4,"cdkHeaderCellDef"],["mat-cell","",4,"cdkCellDef"],["cdkColumnDef","visibility"],["cdkColumnDef","modified"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["cdkColumnDef","formatWarning"],["mat-cell","","style","text-align: right",4,"cdkCellDef"],["mat-header-row","",4,"cdkHeaderRowDef"],["mat-row","",3,"selected","click",4,"cdkRowDef","cdkRowDefColumns"],["mat-header-cell","",1,"checkbox"],["type","checkbox",3,"checked"],["type","checkbox",3,"change","checked"],["mat-cell","",1,"checkbox"],["type","checkbox",3,"click","change","checked"],["mat-header-cell",""],["mat-cell",""],[1,"icon12",2,"vertical-align","middle","margin-right","7px"],[3,"click","routerLink","queryParams"],[3,"click","routerLink","queryParams","title"],["mat-header-cell","",1,"expand"],["mat-menu-item","",3,"click"],["mat-menu-item","","download","",3,"href"],["mat-menu-item",""],["mat-cell","",2,"text-align","right"],["title","Certain features are not implemented for XML, the format will be phased out gradually",2,"color","#cc0000","cursor","help"],["title","Convert to YCS",2,"color","inherit","cursor","pointer",3,"click"],["mat-header-row",""],["mat-row","",3,"click"],["headerTitle","Stacks"],["appearance","primary",3,"click"],[3,"click"]],template:function(e,i){if(e&1){let a=F();l(0,"app-instance-page")(1,"app-instance-toolbar"),m(2," Stacks \xA0\xA0\xA0 "),y(3,qd,2,0,"ya-page-button",2)(4,Yd,4,0,"ya-page-button",3)(5,jd,2,0,"ya-page-button",4)(6,zd,2,1,"ya-page-button",5),s(),l(7,"div",6,0),v(9,"async"),P("dragenter",function(r){return D(a),$(i.dragEnter(r))}),l(10,"div",7),v(11,"async"),P("dragover",function(r){return D(a),$(i.dragOver(r))})("dragleave",function(r){return D(a),$(i.dragLeave(r))})("drop",function(r){return D(a),$(i.drop(r))}),s(),l(12,"div",8),y(13,Wd,1,1),v(14,"async"),y(15,yp,21,3,"table",9)(16,wp,2,3),s()()()}if(e&2){let a;p(3),x(i.mayManageStacks()?3:-1),p(),x(i.mayManageStacks()?4:-1),p(),x(i.mayManageStacks()?5:-1),p(),x(i.mayManageStacks()?6:-1),p(),Se("active",w(9,10,i.dragActive$)),p(3),Se("hide",!w(11,12,i.dragActive$)),p(3),x((a=w(14,14,i.breadcrumb$))?13:-1,a),p(2),x(i.dataSource&&i.dataSource.data.length?15:16)}},dependencies:[Ot,Ct,R,ue,ga,Kt,So,pn,un,fn,Oo,Pe,rt,ot,ct,gn,dt,mt,Cn,pt,Sn,ut,kn,yn,z,wn,Mo,Pn,Bo,Xo,Dn],styles:[".droparea[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;overflow:auto}.droparea-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;box-sizing:border-box;background:#1b61b91a;border:1px solid rgba(27,97,185,1);z-index:10}table[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}"],changeDetection:0})}};var li=class n{static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=V({type:n,selectors:[["app-stack-page"]],standalone:!0,features:[Q],decls:1,vars:0,template:function(e,i){e&1&&O(0,"router-outlet")},dependencies:[Zt],encapsulation:2,changeDetection:0})}};var si=class n{static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=V({type:n,selectors:[["app-stacks-page"]],standalone:!0,features:[Q],decls:1,vars:0,template:function(e,i){e&1&&O(0,"router-outlet")},dependencies:[Zt],encapsulation:2,changeDetection:0})}};var Ug=[{path:"",canActivate:[fi,ui],canActivateChild:[hi],runGuardsAndResolvers:"always",component:Uo,children:[{path:"stacks",pathMatch:"full",redirectTo:"stacks/browse"},{path:"stacks/browse",component:si,children:[{path:"**",component:oi}]},{path:"stacks/files",component:li,providers:[Vt],children:[{path:"**",component:Tt,canDeactivate:[sr]}]},{path:"script",pathMatch:"full",component:Qn},{path:"ext",canActivate:[fi,ui],canActivateChild:[hi],runGuardsAndResolvers:"always",children:[{matcher:zo,component:jo}]}]}];export{Ug as ROUTES};
