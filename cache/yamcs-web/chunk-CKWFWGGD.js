import{a as Wt}from"./chunk-CS6YXD3A.js";import{a as Yt}from"./chunk-5TTZVGVZ.js";import{$b as fe,$e as It,Ae as Tt,Ba as U,Bb as ce,Ca as l,Da as D,Db as se,E as k,Ea as T,Ed as I,Fb as W,Fd as V,Gb as me,Gd as Me,Ge as Et,Hd as R,He as Ot,Hf as At,Ia as x,Id as F,Ie as H,J as C,Ja as lt,Jd as A,K as b,Ka as ee,Kb as dt,Kd as G,Lb as pe,Oa as u,Ob as ut,Pa as v,Pb as de,Pe as Pt,Pf as _e,Qa as O,Sb as ue,Td as je,Ud as Te,V as xe,Ve as Lt,Vf as $t,Wd as Ee,Wf as he,X as c,Xb as ft,Xd as vt,Y as d,Zd as kt,aa as g,ag as Ge,bc as ge,be as xt,ca as m,cb as z,ce as St,da as Se,de as yt,e as N,ea as E,ec as De,ee as Oe,fe as wt,ga as y,gc as Be,ge as Pe,ha as te,hb as ct,he as Le,ia as ie,ib as st,ie as Ie,ja as ne,ka as o,ke as Ve,la as a,le as Re,lg as j,ma as f,mb as ae,mc as gt,na as B,ne as Fe,oa as M,oc as _t,oe as Dt,of as Ue,p as at,pb as mt,pf as Vt,q as rt,qa as w,qb as re,qe as Bt,qf as ze,ra as _,rb as le,re as Ae,rg as S,sa as p,sb as we,sc as ht,sf as Ye,sg as Nt,ta as ye,tb as Y,tc as Ct,te as $e,tf as We,tg as Ut,ua as oe,ub as pt,uc as bt,ue as Ne,uf as Rt,ug as zt,vf as Ft,wa as K,xa as J,ya as Z,ye as Mt,ze as jt}from"./chunk-SAZ6MTOG.js";var Qt=[[["app-storage-toolbar"]],[["ya-detail-pane"]],"*"],qt=["app-storage-toolbar","ya-detail-pane","*"],Q=class i{constructor(){this.noscroll=!1}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=k({type:i,selectors:[["app-storage-page"]],inputs:{noscroll:"noscroll"},standalone:!0,features:[x],ngContentSelectors:qt,decls:4,vars:2,consts:[[1,"page-content"]],template:function(e,n){e&1&&(ye(Qt),oe(0),o(1,"div",0),oe(2,1),oe(3,2),a()),e&2&&(c(),Se("overflow",n.noscroll?"hidden":"auto"))},dependencies:[S],styles:[".page-content[_ngcontent-%COMP%]{position:absolute;inset:49px 0 0;overflow:auto;font:400 12px/20px Roboto,sans-serif}"],changeDetection:0})}};var Xt=["*"],q=class i{static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=k({type:i,selectors:[["app-storage-toolbar"]],standalone:!0,features:[x],ngContentSelectors:Xt,decls:4,vars:0,consts:[[1,"top"],[2,"flex","1 1 auto"]],template:function(e,n){e&1&&(ye(),o(0,"mat-toolbar",0)(1,"mat-toolbar-row"),oe(2),f(3,"span",1),a()())},dependencies:[S,Ct,ht],styles:["mat-toolbar[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.1);background-color:var(--y-background-color);box-sizing:content-box}mat-toolbar-row[_ngcontent-%COMP%]{padding-left:24px}.hide[_ngcontent-%COMP%]{visibility:hidden}.toolbar-text[_ngcontent-%COMP%]{font-size:12px}"],changeDetection:0})}};var He=class i{constructor(t,e,n,r,s){this.dialogRef=t;this.data=r;this.messageService=s;this.storageClient=n.createStorageClient(),this.form=e.group({name:["",se.required]})}save(){this.storageClient.createBucket({name:this.form.value.name}).then(()=>this.dialogRef.close(!0)).catch(t=>{this.dialogRef.close(!1),this.messageService.showError(t)})}static{this.\u0275fac=function(e){return new(e||i)(d(I),d(fe),d(j),d(V),d(Ue))}}static{this.\u0275cmp=k({type:i,selectors:[["app-create-bucket-dialog"]],standalone:!0,features:[x],decls:12,vars:2,consts:[["mat-dialog-title",""],[1,"ya-form",3,"formGroup"],["type","text","formControlName","name"],["align","end"],["mat-dialog-close",""],["appearance","primary",3,"click","disabled"]],template:function(e,n){e&1&&(o(0,"h2",0),l(1,"Create bucket"),a(),o(2,"mat-dialog-content")(3,"form",1)(4,"label"),l(5," Bucket name "),f(6,"input",2),a()()(),o(7,"mat-dialog-actions",3)(8,"ya-button",4),l(9,"CANCEL"),a(),o(10,"ya-button",5),_("click",function(){return n.save()}),l(11,"SAVE"),a()()),e&2&&(c(3),m("formGroup",n.form),c(7),m("disabled",!n.form.valid))},dependencies:[S,pe,ce,W,me,de,ue,R,F,G,A,H],encapsulation:2})}};var ei=i=>[i];function ti(i,t){if(i&1){let e=w();o(0,"ya-page-button",26),_("click",function(){C(e);let r=p();return b(r.createBucket())}),l(1," Create bucket "),a()}}function ii(i,t){if(i&1){let e=w();o(0,"ya-page-button",27),_("click",function(){C(e);let r=p();return b(r.deleteSelectedBuckets())}),l(1," Delete "),a()}if(i&2){let e=p();m("disabled",!e.selection.hasValue())}}function ni(i,t){if(i&1){let e=w();o(0,"input",30),_("change",function(r){C(e);let s=p(2);return b(r?s.masterToggle():null)}),a()}if(i&2){let e=p(2);m("checked",e.selection.hasValue()&&e.isAllSelected())}}function oi(i,t){if(i&1&&(o(0,"th",28),g(1,ni,1,1,"input",29),a()),i&2){let e=p();c(),y(e.mayManageBuckets()?1:-1)}}function ai(i,t){if(i&1){let e=w();o(0,"input",32),_("click",function(r){return C(e),b(r.stopPropagation())})("change",function(r){C(e);let s=p().$implicit,h=p();return b(r?h.selection.toggle(s):null)}),a()}if(i&2){let e=p().$implicit,n=p();m("checked",n.selection.isSelected(e))}}function ri(i,t){if(i&1&&(o(0,"td",31),g(1,ai,1,1,"input",29),a()),i&2){let e=p();c(),y(e.mayManageBuckets()?1:-1)}}function li(i,t){i&1&&(o(0,"th",33),l(1,"Bucket"),a())}function ci(i,t){if(i&1){let e=w();o(0,"td",34)(1,"mat-icon",35),l(2," shopping_basket "),a(),o(3,"a",36),_("click",function(r){return C(e),b(r.stopPropagation())}),l(4),a()()}if(i&2){let e=t.$implicit;c(3),m("routerLink",ee(2,ei,e.name)),c(),D(e.name)}}function si(i,t){i&1&&(o(0,"th",33),l(1,"Created"),a())}function mi(i,t){if(i&1&&(o(0,"td",34),l(1),u(2,"datetime"),u(3,"nvl"),a()),i&2){let e=t.$implicit;c(),D(O(3,3,v(2,1,e.created),"-"))}}function pi(i,t){i&1&&(o(0,"th",37),l(1,"Used"),a())}function di(i,t){if(i&1&&(o(0,"td",38),l(1),u(2,"formatBytes"),u(3,"nvl"),a()),i&2){let e=t.$implicit;c(),T(" ",O(3,3,v(2,1,e.size),"-")," ")}}function ui(i,t){i&1&&(o(0,"th",37),l(1," Available "),a())}function fi(i,t){if(i&1&&(o(0,"td",38),l(1),u(2,"formatBytes"),u(3,"nvl"),a()),i&2){let e=t.$implicit,n=p();c(),T(" ",O(3,3,v(2,1,n.zeroOrMore(e.maxSize-e.size)),"-")," ")}}function gi(i,t){i&1&&(o(0,"th",39),l(1,"Capacity"),a())}function _i(i,t){if(i&1&&(o(0,"td",34),f(1,"ya-progress",40),a()),i&2){let e=t.$implicit;c(),m("value",e.size)("total",e.maxSize)}}function hi(i,t){i&1&&(o(0,"th",37),l(1,"Objects"),a())}function Ci(i,t){if(i&1&&(o(0,"td",38),l(1),u(2,"number"),u(3,"nvl"),a()),i&2){let e=t.$implicit;c(),T(" ",O(3,3,v(2,1,e.numObjects),"-")," ")}}function bi(i,t){i&1&&(o(0,"th",37),l(1," Avail. objects "),a())}function vi(i,t){if(i&1&&(o(0,"td",38),l(1),u(2,"number"),u(3,"nvl"),a()),i&2){let e=t.$implicit,n=p();c(),T(" ",O(3,3,v(2,1,n.zeroOrMore(e.maxObjects-e.numObjects)),"-")," ")}}function ki(i,t){i&1&&(o(0,"th",39),l(1,"%objects"),a())}function xi(i,t){if(i&1&&(o(0,"td",34),f(1,"ya-progress",40),a()),i&2){let e=t.$implicit;c(),m("value",e.numObjects)("total",e.maxObjects)}}function Si(i,t){i&1&&f(0,"th",41)}function yi(i,t){if(i&1){let e=w();o(0,"ya-more")(1,"button",42),_("click",function(){C(e);let r=p().$implicit,s=p();return b(s.deleteBucket(r))}),l(2,"Delete bucket"),a()()}}function wi(i,t){if(i&1&&(o(0,"td",34),g(1,yi,3,0,"ya-more"),a()),i&2){let e=p();c(),y(e.mayManageBuckets()?1:-1)}}function Di(i,t){i&1&&f(0,"tr",43)}function Bi(i,t){if(i&1){let e=w();o(0,"tr",44),_("click",function(){let r=C(e).$implicit,s=p();return b(s.toggleOne(r))}),a()}if(i&2){let e=t.$implicit,n=p();E("selected",n.selection.isSelected(e))}}var Qe=class i{constructor(t,e,n,r,s,h,X){this.yamcs=t;this.dialog=e;this.router=n;this.route=r;this.messageService=s;this.authService=h;this.filterControl=new dt;this.displayedColumns=["select","name","created","size","avail","capacity","numObjects","availObjects","pctObjects","actions"];this.dataSource=new Ne;this.selection=new De(!0,[]);X.setTitle("Buckets"),this.storageClient=this.yamcs.createStorageClient(),this.initializeOptions(),this.refreshView()}ngAfterViewInit(){this.dataSource.sort=this.sort}initializeOptions(){let t=this.route.snapshot.queryParamMap;t.has("filter")&&(this.filterControl.setValue(t.get("filter")),this.dataSource.filter=t.get("filter").toLowerCase()),this.filterControl.valueChanges.subscribe(()=>{this.updateURL();let e=this.filterControl.value||"";this.dataSource.filter=e.toLowerCase();for(let n of this.selection.selected)this.dataSource.filteredData.indexOf(n)===-1&&this.selection.deselect(n)})}isAllSelected(){let t=this.selection.selected.length,e=this.dataSource.filteredData.length;return t===e&&e>0}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.filteredData.forEach(t=>this.selection.select(t))}toggleOne(t){(!this.selection.isSelected(t)||this.selection.selected.length>1)&&this.selection.clear(),this.selection.toggle(t)}createBucket(){this.dialog.open(He,{width:"400px"}).afterClosed().subscribe(e=>{e&&this.refreshView()})}zeroOrMore(t){return Math.max(0,t)}mayManageBuckets(){return this.authService.getUser().hasSystemPrivilege("ManageAnyBucket")}deleteSelectedBuckets(){if(confirm("Are you sure you want to delete the selected buckets?")){let t=[];for(let e of this.selection.selected){let n=this.storageClient.deleteBucket(e.name);t.push(n)}Promise.all(t).then(()=>{this.selection.clear(),this.refreshView()})}}deleteBucket(t){confirm(`Are you sure you want to delete the bucket ${t.name}?`)&&this.storageClient.deleteBucket(t.name).then(()=>{this.selection.clear(),this.refreshView()}).catch(e=>this.messageService.showError(e))}selectNext(){let t=this.dataSource.filteredData,e=0;if(this.selection.hasValue()){let n=this.selection.selected[this.selection.selected.length-1];t.indexOf(n)!==-1&&(e=Math.min(t.indexOf(n)+1,t.length-1))}this.selection.clear(),this.selection.select(t[e])}selectPrevious(){let t=this.dataSource.filteredData,e=0;if(this.selection.hasValue()){let n=this.selection.selected[0];t.indexOf(n)!==-1&&(e=Math.max(t.indexOf(n)-1,0))}this.selection.clear(),this.selection.select(t[e])}applySelection(){if(this.selection.hasValue()&&this.selection.selected.length===1){let t=this.selection.selected[0];this.router.navigate(["/buckets",t.name])}}refreshView(){this.updateURL(),this.storageClient.getBuckets().then(t=>{this.dataSource.data=t}).catch(t=>this.messageService.showError(t))}updateURL(){let t=this.filterControl.value;this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:t||null},queryParamsHandling:"merge"})}static{this.\u0275fac=function(e){return new(e||i)(d(j),d(Me),d(we),d(re),d(Ue),d(Nt),d(ae))}}static{this.\u0275cmp=k({type:i,selectors:[["ng-component"]],viewQuery:function(e,n){if(e&1&&K(Oe,7),e&2){let r;J(r=Z())&&(n.sort=r.first)}},standalone:!0,features:[x],decls:41,vars:6,consts:[["icon","add_circle_outline"],["icon","delete",3,"disabled"],[1,"panel-content"],[1,"filter-bar"],["placeholder","Filter buckets",3,"onArrowDown","onArrowUp","onEnter","formControl"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["cdkColumnDef","select"],["mat-header-cell","","class","checkbox",4,"cdkHeaderCellDef"],["mat-cell","","class","checkbox",4,"cdkCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","created"],["matColumnDef","size"],["mat-header-cell","","mat-sort-header","","style","text-align: right",4,"matHeaderCellDef"],["mat-cell","","style","text-align: right",4,"matCellDef"],["matColumnDef","avail"],["matColumnDef","capacity"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","numObjects"],["matColumnDef","availObjects"],["matColumnDef","pctObjects"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"selected","click",4,"matRowDef","matRowDefColumns"],["icon","add_circle_outline",3,"click"],["icon","delete",3,"click","disabled"],["mat-header-cell","",1,"checkbox"],["type","checkbox",3,"checked"],["type","checkbox",3,"change","checked"],["mat-cell","",1,"checkbox"],["type","checkbox",3,"click","change","checked"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"icon12",2,"vertical-align","middle","margin-right","7px"],[3,"click","routerLink"],["mat-header-cell","","mat-sort-header","",2,"text-align","right"],["mat-cell","",2,"text-align","right"],["mat-header-cell",""],[3,"value","total"],["mat-header-cell","",1,"expand"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(e,n){e&1&&(o(0,"app-storage-page")(1,"app-storage-toolbar"),l(2," Storage \xA0\xA0\xA0 "),g(3,ti,2,0,"ya-page-button",0)(4,ii,2,1,"ya-page-button",1),a(),o(5,"div",2)(6,"div",3)(7,"ya-search-filter",4),_("onArrowDown",function(){return n.selectNext()})("onArrowUp",function(){return n.selectPrevious()})("onEnter",function(){return n.applySelection()}),a()(),o(8,"table",5),B(9,6),g(10,oi,2,1,"th",7)(11,ri,2,1,"td",8),M(),B(12,9),g(13,li,2,0,"th",10)(14,ci,5,4,"td",11),M(),B(15,12),g(16,si,2,0,"th",10)(17,mi,4,6,"td",11),M(),B(18,13),g(19,pi,2,0,"th",14)(20,di,4,6,"td",15),M(),B(21,16),g(22,ui,2,0,"th",14)(23,fi,4,6,"td",15),M(),B(24,17),g(25,gi,2,0,"th",18)(26,_i,2,2,"td",11),M(),B(27,19),g(28,hi,2,0,"th",14)(29,Ci,4,6,"td",15),M(),B(30,20),g(31,bi,2,0,"th",14)(32,vi,4,6,"td",15),M(),B(33,21),g(34,ki,2,0,"th",18)(35,xi,2,2,"td",11),M(),B(36,22),g(37,Si,1,0,"th",23)(38,wi,2,1,"td",11),M(),g(39,Di,1,0,"tr",24)(40,Bi,1,2,"tr",25),a()()()),e&2&&(c(3),y(n.mayManageBuckets()?3:-1),c(),y(n.mayManageBuckets()?4:-1),c(3),m("formControl",n.filterControl),c(),m("dataSource",n.dataSource),c(31),m("matHeaderRowDef",n.displayedColumns),c(),m("matRowDefColumns",n.displayedColumns))},dependencies:[S,st,W,ut,Y,je,Te,Ee,ge,Be,Oe,wt,Pe,Ie,Dt,Ve,Le,Bt,Re,Fe,Ae,$e,ze,Ye,Rt,Ft,_e,he,Ge,Q,q],encapsulation:2,changeDetection:0})}};var Mi=i=>["/storage/buckets",i,"objects"],ji=i=>["/storage/buckets",i,"properties"],be=class i{constructor(t){this.yamcs=t}static{this.\u0275fac=function(e){return new(e||i)(d(j))}}static{this.\u0275cmp=k({type:i,selectors:[["app-bucket-page-tabs"]],inputs:{bucket:"bucket"},standalone:!0,features:[x],decls:10,vars:10,consts:[["rla","routerLinkActive"],["rlb","routerLinkActive"],["tabPanel",""],["mat-tab-nav-bar","",1,"secondary",3,"mat-stretch-tabs","tabPanel"],["mat-tab-link","","routerLinkActive","",3,"routerLink","active"]],template:function(e,n){if(e&1&&(o(0,"nav",3)(1,"a",4,0),l(3," Objects "),a(),o(4,"a",4,1),l(6," Properties "),a()(),o(7,"mat-tab-nav-panel",null,2),f(9,"router-outlet"),a()),e&2){let r=U(2),s=U(5),h=U(8);m("mat-stretch-tabs",!1)("tabPanel",h),c(),m("routerLink",ee(6,Mi,n.bucket))("active",r.isActive),c(3),m("routerLink",ee(8,ji,n.bucket))("active",s.isActive)}},dependencies:[S,le,Y,pt,Mt,Tt,jt],styles:[".mat-mdc-tab-link[_ngcontent-%COMP%]{height:36px;min-width:0;font-size:13px}"],changeDetection:0})}};var Xe=class i{constructor(t,e,n,r){this.dialogRef=t;this.data=r;this.storageClient=n.createStorageClient(),this.form=e.group({name:["",se.required]})}save(){let{path:t,bucket:e}=this.data;t.startsWith("/")&&(t=t.substring(1));let n=this.form.value.name,r=t?`${t}/${n}/`:`${n}/`;this.storageClient.uploadObject(e,r,new Blob).then(()=>this.dialogRef.close(!0))}static{this.\u0275fac=function(e){return new(e||i)(d(I),d(fe),d(j),d(V))}}static{this.\u0275cmp=k({type:i,selectors:[["app-create-bucket-folder-dialog"]],standalone:!0,features:[x],decls:12,vars:2,consts:[["mat-dialog-title",""],[1,"ya-form",3,"formGroup"],["type","text","formControlName","name","pattern","\\w[\\w\\s\\.\\-\\(\\)\\[\\]]*"],["align","end"],["mat-dialog-close",""],["appearance","primary",3,"click","disabled"]],template:function(e,n){e&1&&(o(0,"h2",0),l(1,"Create folder"),a(),o(2,"mat-dialog-content")(3,"form",1)(4,"label"),l(5," Folder name "),f(6,"input",2),a()()(),o(7,"mat-dialog-actions",3)(8,"ya-button",4),l(9,"CANCEL"),a(),o(10,"ya-button",5),_("click",function(){return n.save()}),l(11,"CREATE"),a()()),e&2&&(c(3),m("formGroup",n.form),c(7),m("disabled",!n.form.valid))},dependencies:[S,pe,ce,W,me,ft,de,ue,R,F,G,A,H],encapsulation:2,changeDetection:0})}};var Ke=class i{constructor(t,e,n,r){this.dialogRef=t;this.data=r;this.storageClient=n.createStorageClient();let s=Pt.getFilename(this.data.name);this.filenameForm=e.group({name:[s,[se.required]]})}async rename(){let t,e=this.data.name.lastIndexOf("/");e!==-1&&(t=this.data.name.substring(0,e+1));let r=await(await this.storageClient.getObject(this.data.bucket,this.data.name)).blob(),s=(t||"")+this.filenameForm.get("name").value;await this.storageClient.uploadObject(this.data.bucket,s,r),await this.storageClient.deleteObject(this.data.bucket,this.data.name),this.dialogRef.close(s)}static{this.\u0275fac=function(e){return new(e||i)(d(I),d(fe),d(j),d(V))}}static{this.\u0275cmp=k({type:i,selectors:[["app-rename-object-dialog"]],standalone:!0,features:[x],decls:13,vars:4,consts:[["filename",""],["mat-dialog-title",""],[1,"ya-form",3,"formGroup"],["type","text","formControlName","name"],["align","end"],["mat-dialog-close",""],["appearance","primary",3,"click","disabled"]],template:function(e,n){if(e&1){let r=w();o(0,"h2",1),l(1,"Rename file"),a(),o(2,"mat-dialog-content")(3,"form",2)(4,"label"),l(5," Name "),f(6,"input",3,0),a()()(),o(8,"mat-dialog-actions",4)(9,"ya-button",5),l(10,"CANCEL"),a(),o(11,"ya-button",6),_("click",function(){return C(r),b(n.rename())}),l(12," RENAME "),a()()}if(e&2){let r;c(3),m("formGroup",n.filenameForm),c(),E("invalid",(r=n.filenameForm.get("name"))==null?null:r.invalid),c(7),m("disabled",!n.filenameForm.valid)}},dependencies:[S,pe,ce,W,me,de,ue,R,F,G,A,H],encapsulation:2})}};var Ti=["tableWrapper"];function Ei(i,t){i&1&&l(0," Finished ")}function Oi(i,t){if(i&1&&(o(0,"mat-icon",8),l(1,"error"),a(),l(2," Failed ")),i&2){let e=p().$implicit;m("matTooltip",e.err)}}function Pi(i,t){i&1&&f(0,"ya-dots")}function Li(i,t){if(i&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td",7),g(4,Ei,1,0)(5,Oi,3,1)(6,Pi,1,0,"ya-dots"),a()()),i&2){let e=t.$implicit;E("failed",e.err),c(2),D(e.filename),c(2),y(e.complete&&!e.err?4:-1),c(),y(e.complete&&e.err?5:-1),c(),y(e.complete?-1:6)}}var Je=class i{constructor(t,e){this.data=e;this.uploads$=e.uploads$.pipe(rt(500))}static{this.\u0275fac=function(e){return new(e||i)(d(I),d(V))}}static{this.\u0275cmp=k({type:i,selectors:[["app-upload-progress-dialog"]],viewQuery:function(e,n){if(e&1&&K(Ti,7),e&2){let r;J(r=Z())&&(n.tableWrapper=r.first)}},standalone:!0,features:[x],decls:13,vars:2,consts:[["tableWrapper",""],["mat-dialog-title",""],[2,"float","right"],["mat-icon-button","","mat-dialog-close",""],[1,"table-wrapper"],[2,"font-size","small","width","100%"],[3,"failed"],[2,"width","100px","text-align","center"],[1,"icon14",2,"vertical-align","middle",3,"matTooltip"]],template:function(e,n){e&1&&(o(0,"h3",1)(1,"div",2)(2,"button",3)(3,"mat-icon"),l(4,"close"),a()()(),l(5,` Uploads
`),a(),o(6,"mat-dialog-content")(7,"div",4,0)(9,"table",5),ie(10,Li,7,6,"tr",6,te),u(12,"async"),a()()()),e&2&&(c(10),ne(v(12,0,n.uploads$)))},dependencies:[S,z,gt,R,F,A,ge,_t,Lt],styles:["tr.failed[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:red}h3.mat-mdc-dialog-title[_ngcontent-%COMP%]{background-color:#24292e;color:#fff;margin:0;padding-left:5px;font-size:16px;line-height:40px}table[_ngcontent-%COMP%]{border-collapse:collapse}.table-wrapper[_ngcontent-%COMP%]{height:150px;overflow-y:scroll;overflow-x:hidden;padding:5px}"],changeDetection:0})}};function Ii(i,t){if(i&1&&(o(0,"tr")(1,"td"),l(2),a(),o(3,"td"),l(4),a()()),i&2){let e,n=t.$implicit;c(2),D(n.key),c(2),D((e=n.value)!==null&&e!==void 0?e:"-")}}var Ze=class i{constructor(t,e){this.dialogRef=t;this.data=e}static{this.\u0275fac=function(e){return new(e||i)(d(I),d(V))}}static{this.\u0275cmp=k({type:i,selectors:[["app-view-object-metadata-dialog"]],standalone:!0,features:[x],decls:15,vars:2,consts:[["mat-dialog-title",""],["yaDataTable","",1,"expand"],["width","1"],["align","end"],["mat-dialog-close",""]],template:function(e,n){e&1&&(o(0,"h2",0),l(1,"Object Metadata"),a(),o(2,"mat-dialog-content")(3,"table",1)(4,"tr")(5,"th",2),l(6,"Key"),a(),o(7,"th"),l(8,"Value"),a()(),ie(9,Ii,5,2,"tr",null,te),u(11,"keyvalue"),a()(),o(12,"mat-dialog-actions",3)(13,"ya-button",4),l(14,"CLOSE"),a()()),e&2&&(c(9),ne(v(11,0,n.data.metadata)))},dependencies:[S,ct,At,R,F,G,A,H],encapsulation:2})}};var Vi=["droparea"],Ri=["uploader"],Fi=()=>["/storage/buckets"],Ai=i=>["/storage/buckets",i,"objects"];function $i(i,t){if(i&1&&f(0,"img",13),i&2){let e=p();m("src",e.selection.selected[0].objectUrl,xe)}}function Ni(i,t){i&1&&(o(0,"div",14)(1,"mat-icon"),l(2,"arrow_back"),a(),o(3,"p"),l(4,"Select an image to make it appear here"),a()())}function Ui(i,t){if(i&1&&f(0,"ya-breadcrumb",20),i&2){let e=t.$implicit;m("link",e.route)("label",e.name)}}function zi(i,t){if(i&1&&(o(0,"div",17)(1,"ya-breadcrumb-trail"),f(2,"ya-breadcrumb",19)(3,"ya-breadcrumb",20),ie(4,Ui,1,2,"ya-breadcrumb",20,te),a()()),i&2){let e=p();c(2),m("link",lt(3,Fi)),c(),m("link",ee(4,Ai,e.name))("label",e.name),c(),ne(t)}}function Yi(i,t){if(i&1){let e=w();o(0,"th",34)(1,"input",35),_("change",function(r){C(e);let s=p(2);return b(r?s.masterToggle():null)}),a()()}if(i&2){let e=p(2);c(),m("checked",e.selection.hasValue()&&e.isAllSelected())}}function Wi(i,t){if(i&1){let e=w();o(0,"td",36)(1,"input",37),_("click",function(r){return C(e),b(r.stopPropagation())})("change",function(r){let s=C(e).$implicit,h=p(2);return b(r?h.selection.toggle(s):null)}),a()()}if(i&2){let e=t.$implicit,n=p(2);c(),m("checked",n.selection.isSelected(e))}}function Gi(i,t){i&1&&(o(0,"th",38),l(1,"Name"),a())}function Hi(i,t){if(i&1){let e=w();o(0,"mat-icon",40),l(1," folder "),a(),o(2,"a",41),_("click",function(r){return C(e),b(r.stopPropagation())}),l(3),u(4,"filename"),a()}if(i&2){let e=p().$implicit,n=p(2);c(2),m("routerLink","/storage/buckets/"+n.name+"/objects/"+e.name),c(),T(" ",v(4,2,e.name)," ")}}function Qi(i,t){if(i&1){let e=w();o(0,"mat-icon",40),l(1," description "),a(),o(2,"a",42),_("click",function(r){return C(e),b(r.stopPropagation())}),l(3),u(4,"filename"),a()}if(i&2){let e=p().$implicit;c(2),m("href",e.objectUrl,xe),c(),T(" ",v(4,2,e.name)," ")}}function qi(i,t){if(i&1&&(o(0,"td",39),g(1,Hi,5,4)(2,Qi,5,4),a()),i&2){let e=t.$implicit;c(),y(e.folder?1:2)}}function Xi(i,t){i&1&&(o(0,"th",38),l(1,"Date modified"),a())}function Ki(i,t){if(i&1&&(o(0,"td",39),l(1),u(2,"datetime"),a()),i&2){let e=t.$implicit;c(),T(" ",v(2,1,e.modified)||"-"," ")}}function Ji(i,t){i&1&&(o(0,"th",38),l(1,"Size"),a())}function Zi(i,t){if(i&1&&(o(0,"td",39),l(1),u(2,"formatBytes"),a()),i&2){let e=t.$implicit;c(),T(" ",v(2,1,e.size)||"-"," ")}}function en(i,t){i&1&&f(0,"th",43)}function tn(i,t){if(i&1){let e=w();o(0,"ya-more")(1,"button",44),_("click",function(){C(e);let r=p().$implicit,s=p(2);return b(s.renameFile(r))}),l(2,"Rename"),a(),o(3,"a",45),l(4,"Download"),a(),f(5,"mat-divider"),o(6,"button",46),_("click",function(){C(e);let r=p().$implicit,s=p(2);return b(s.openViewMetadataDialog(r))}),l(7," View metadata "),a(),f(8,"mat-divider"),o(9,"button",44),_("click",function(){C(e);let r=p().$implicit,s=p(2);return b(s.deleteFile(r))}),l(10,"Delete"),a()()}if(i&2){let e=p().$implicit;c(3),m("href",e.objectUrl,xe),c(3),m("disabled",!e.metadata)}}function nn(i,t){if(i&1&&(o(0,"td",39),g(1,tn,11,2,"ya-more"),a()),i&2){let e=t.$implicit;c(),y(e.folder?-1:1)}}function on(i,t){i&1&&f(0,"tr",47)}function an(i,t){if(i&1){let e=w();o(0,"tr",48),_("click",function(){let r=C(e).$implicit,s=p(2);return b(s.toggleOne(r))}),a()}if(i&2){let e=t.$implicit,n=p(2);E("selected",n.selection.isSelected(e))}}function rn(i,t){if(i&1&&(o(0,"table",18),B(1,21),g(2,Yi,2,1,"th",22)(3,Wi,2,1,"td",23),M(),B(4,24),g(5,Gi,2,0,"th",25)(6,qi,3,1,"td",26),M(),B(7,27),g(8,Xi,2,0,"th",25)(9,Ki,3,3,"td",26),M(),B(10,28),g(11,Ji,2,0,"th",25)(12,Zi,3,3,"td",26),M(),B(13,29),g(14,en,1,0,"th",30)(15,nn,2,1,"td",31),M(),g(16,on,1,0,"tr",32)(17,an,1,2,"tr",33),a()),i&2){let e=p();m("dataSource",e.dataSource),c(16),m("cdkHeaderRowDef",e.displayedColumns),c(),m("cdkRowDefColumns",e.displayedColumns)}}function ln(i,t){i&1&&(o(0,"ya-empty-message"),l(1,"Empty directory."),a())}var et=class i{constructor(t,e,n,r,s){this.dialog=t;this.route=n;this.breadcrumb$=new N([]);this.dragActive$=new N(!1);this.showPreview$=new N(!1);this.previewWidth$=new N(600);this.displayedColumns=["select","name","size","modified","actions"];this.dataSource=new Ne([]);this.selection=new De(!0,[]);this.uploads$=new N([]);this.progressDialogOpen=!1;this.name=n.snapshot.parent.parent.paramMap.get("name"),s.setTitle(this.name),this.storageClient=r.createStorageClient(),this.loadCurrentFolder(),this.routerSubscription=e.events.pipe(at(h=>h instanceof mt)).subscribe(()=>{this.loadCurrentFolder()})}loadCurrentFolder(){let t={delimiter:"/"},e=this.route.snapshot.url;e.length&&(t.prefix=e.map(n=>n.path).join("/")+"/"),this.storageClient.listObjects(this.name,t).then(n=>{this.updateBrowsePath(),this.changedir(n)})}changedir(t){this.selection.clear();let e=[];for(let n of t.prefixes||[])e.push({folder:!0,name:n});for(let n of t.objects||[])n.name.endsWith("/")||e.push({folder:!1,name:n.name,modified:n.created,size:n.size,objectUrl:this.storageClient.getObjectURL(this.name,n.name),metadata:n.metadata});this.dataSource.data=e}isAllSelected(){let t=this.selection.selected.length,e=this.dataSource.filteredData.length;return t===e&&e>0}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.filteredData.forEach(t=>this.selection.select(t))}toggleOne(t){(!this.selection.isSelected(t)||this.selection.selected.length>1)&&this.selection.clear(),this.selection.toggle(t)}createFolder(){this.dialog.open(Xe,{width:"400px",data:{bucket:this.name,path:this.getCurrentPath()}}).afterClosed().subscribe({next:()=>this.loadCurrentFolder()})}uploadObjects(){let t=this.getCurrentPath();t.startsWith("/")&&(t=t.substring(1));let e=this.uploaderEl.nativeElement.files,n=[];for(let r in e)if(!isNaN(parseInt(r,10))){let s=e[r],h=t?t+"/"+s.name:s.name,X=this.name,ke=this.storageClient.uploadObject(X,h,s);n.push({filename:s.name,promise:ke})}n.length&&this.showUploadProgress().then(()=>{for(let r of n)this.trackUpload(r);this.settlePromises(n.map(r=>r.promise)).then(()=>{this.loadCurrentFolder()})})}settlePromises(t){return Promise.all(t.map(e=>e.then(n=>({state:"fullfilled",value:n}),n=>({state:"rejected",value:n}))))}trackUpload(t){t.promise.then(()=>{t.complete=!0,this.uploads$.next([...this.uploads$.value])}).catch(e=>{e.response.json().then(n=>{t.complete=!0,t.err=n.msg,this.uploads$.next([...this.uploads$.value])}).catch(()=>{t.complete=!0,t.err=e.statusText,this.uploads$.next([...this.uploads$.value])})}),this.uploads$.next([...this.uploads$.value,t])}getCurrentPath(){let t="";for(let e of this.route.snapshot.url)t+="/"+e.path;return t||"/"}togglePreview(){this.showPreview$.next(!this.showPreview$.value)}deleteSelectedObjects(){let t=[],e=[];for(let n of this.selection.selected)n.folder?e.push(this.storageClient.listObjects(this.name,{prefix:n.name}).then(r=>{let s=r.objects||[];t.push(...s.map(h=>h.name))})):t.push(n.name);Promise.all(e).then(()=>{if(confirm(`You are about to delete ${t.length} files. Are you sure you want to continue?`)){let n=[];for(let r of t)n.push(this.storageClient.deleteObject(this.name,r));Promise.all(n).then(()=>{this.loadCurrentFolder()})}})}renameFile(t){this.dialog.open(Ke,{data:{bucket:this.name,name:t.name},width:"400px"}).afterClosed().subscribe(n=>{n&&this.loadCurrentFolder()})}deleteFile(t){confirm(`Are you sure you want to delete ${t.name}?`)&&this.storageClient.deleteObject(this.name,t.name).then(()=>{this.loadCurrentFolder()})}openViewMetadataDialog(t){this.dialog.open(Ze,{width:"600px",data:{metadata:t.metadata||{}}})}dragEnter(t){return this.dragActive$.next(!0),t.preventDefault(),t.stopPropagation(),!1}dragOver(t){return t.preventDefault(),t.stopPropagation(),!1}dragLeave(t){return this.dragActive$.next(!1),t.preventDefault(),t.stopPropagation(),!1}drop(t){let e=t.dataTransfer||{};if(e){let n=this.getCurrentPath().substring(1);n!==""&&(n+="/"),Wt(e).then(r=>{if(r.length){let s=[];this.showUploadProgress().then(()=>{for(let h of r){let X=n+h._fullPath,ke=this.storageClient.uploadObject(this.name,X,h);this.trackUpload({filename:h._fullPath,promise:ke}),s.push(ke)}this.settlePromises(s).then(()=>{this.loadCurrentFolder()})})}})}return this.dragActive$.next(!1),t.preventDefault(),t.stopPropagation(),!1}updateBrowsePath(){let t=[],e="";for(let n of this.route.snapshot.url)e+="/"+n.path,t.push({name:n.path,route:`/storage/buckets/${this.name}/objects`+e});return this.breadcrumb$.next(t),e||"/"}isImage(t){if(t.folder)return!1;let e=t.name.toLocaleLowerCase();return e.endsWith(".png")||e.endsWith(".gif")||e.endsWith(".jpg")||e.endsWith("jpeg")||e.endsWith("bmp")||e.endsWith("svg")||e.endsWith("ico")}async showUploadProgress(){if(!this.progressDialogOpen)return this.dialogRef=this.dialog.open(Je,{position:{bottom:"10px",right:"10px"},width:"500px",data:{uploads$:this.uploads$},hasBackdrop:!1,autoFocus:!1,panelClass:["progress-dialog","elevation-z1"]}),this.dialogRef.afterOpened().subscribe(()=>this.progressDialogOpen=!0),this.dialogRef.afterClosed().subscribe(()=>{this.uploads$.next([]),this.progressDialogOpen=!1}),new Promise((t,e)=>{this.dialogRef.afterOpened().subscribe(()=>{t(!0)},n=>{e(n)})})}resizeMouseDown(t){let e=t.clientX,n=this.previewWidth$.value,r=h=>{if(e!==null){let X=n-(h.clientX-e);this.previewWidth$.next(Math.max(400,X))}},s=h=>{e=null,document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",s)};document.addEventListener("mousemove",r),document.addEventListener("mouseup",s)}ngOnDestroy(){this.routerSubscription?.unsubscribe(),this.dialogRef?.close()}static{this.\u0275fac=function(e){return new(e||i)(d(Me),d(we),d(re),d(j),d(ae))}}static{this.\u0275cmp=k({type:i,selectors:[["ng-component"]],viewQuery:function(e,n){if(e&1&&(K(Vi,7),K(Ri,5)),e&2){let r;J(r=Z())&&(n.dropArea=r.first),J(r=Z())&&(n.uploaderEl=r.first)}},standalone:!0,features:[x],decls:34,vars:28,consts:[["uploader",""],["droparea",""],["routerLink","/storage/buckets","icon","arrow_back"],["icon","file_upload",3,"click"],["type","file","hidden","","multiple","",3,"change"],["icon","create_new_folder",3,"click"],["icon","delete",3,"click","disabled"],[3,"click","icon"],[1,"droparea",3,"dragenter"],[1,"droparea-overlay",3,"dragover","dragleave","drop"],[3,"autosize"],["mode","side","position","end",2,"text-align","center",3,"opened","disableClose"],[1,"resize-handle",3,"mousedown"],[3,"src"],[2,"margin-top","4em","color","#fff"],[1,"panel-content"],[3,"bucket"],[2,"margin-top","16px"],["mat-table","",1,"ya-data-table","expand",3,"dataSource"],["label","Buckets",3,"link"],[3,"link","label"],["cdkColumnDef","select"],["mat-header-cell","","class","checkbox",4,"cdkHeaderCellDef"],["mat-cell","","class","checkbox",4,"cdkCellDef"],["cdkColumnDef","name"],["mat-header-cell","",4,"cdkHeaderCellDef"],["mat-cell","",4,"cdkCellDef"],["cdkColumnDef","modified"],["cdkColumnDef","size"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"cdkHeaderRowDef"],["mat-row","",3,"selected","click",4,"cdkRowDef","cdkRowDefColumns"],["mat-header-cell","",1,"checkbox"],["type","checkbox",3,"change","checked"],["mat-cell","",1,"checkbox"],["type","checkbox",3,"click","change","checked"],["mat-header-cell",""],["mat-cell",""],[1,"icon12",2,"vertical-align","middle","margin-right","7px"],[3,"click","routerLink"],["download","",3,"click","href"],["mat-header-cell","",1,"expand"],["mat-menu-item","",3,"click"],["mat-menu-item","","download","",3,"href"],["mat-menu-item","",3,"click","disabled"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(e,n){if(e&1){let r=w();o(0,"app-storage-page")(1,"app-storage-toolbar"),f(2,"ya-page-icon-button",2),l(3),o(4,"ya-page-button",3),_("click",function(){C(r);let h=U(7);return b(h.click())}),l(5," Upload files "),o(6,"input",4,0),_("change",function(){return C(r),b(n.uploadObjects())}),a()(),o(8,"ya-page-button",5),_("click",function(){return C(r),b(n.createFolder())}),l(9,"Create folder"),a(),o(10,"ya-page-button",6),_("click",function(){return C(r),b(n.deleteSelectedObjects())}),l(11," Delete "),a(),o(12,"ya-page-button",7),u(13,"async"),_("click",function(){return C(r),b(n.togglePreview())}),l(14," Preview panel "),a()(),o(15,"div",8,1),u(17,"async"),_("dragenter",function(h){return C(r),b(n.dragEnter(h))}),o(18,"div",9),u(19,"async"),_("dragover",function(h){return C(r),b(n.dragOver(h))})("dragleave",function(h){return C(r),b(n.dragLeave(h))})("drop",function(h){return C(r),b(n.drop(h))}),a(),o(20,"mat-sidenav-container",10)(21,"mat-sidenav",11),u(22,"async"),u(23,"async"),o(24,"div",12),_("mousedown",function(h){return C(r),b(n.resizeMouseDown(h))}),a(),g(25,$i,1,1,"img",13)(26,Ni,5,0,"div",14),a(),o(27,"mat-sidenav-content")(28,"div",15),f(29,"app-bucket-page-tabs",16),g(30,zi,6,6,"div",17),u(31,"async"),g(32,rn,18,3,"table",18)(33,ln,2,0,"ya-empty-message"),a()()()()()}if(e&2){let r;c(3),T(" ",n.name," \xA0\xA0\xA0 "),c(7),m("disabled",!n.selection.hasValue()),c(2),m("icon",v(13,16,n.showPreview$)?"image_not_supported":"image"),c(3),E("active",v(17,18,n.dragActive$)),c(3),E("hide",!v(19,20,n.dragActive$)),c(2),m("autosize",!0),c(),Se("width",v(22,22,n.previewWidth$)+"px"),m("opened",v(23,24,n.showPreview$))("disableClose",!1),c(4),y(n.selection.selected.length===1&&n.isImage(n.selection.selected[0])?25:26),c(4),m("bucket",n.name),c(),y((r=v(31,26,n.breadcrumb$))?30:-1,r),c(2),y(n.dataSource&&n.dataSource.data.length?32:33)}},dependencies:[be,S,z,Y,kt,je,Te,Ee,vt,ge,bt,Be,St,yt,xt,Pe,Ie,Ve,Le,Re,Fe,Ae,$e,Ot,Et,It,ze,Ye,We,_e,$t,he,Q,q],styles:["mat-toolbar[_ngcontent-%COMP%]{border-bottom:1px solid #d3d3d3;background-color:#fff;box-sizing:content-box;color:#000000a7}mat-toolbar-row[_ngcontent-%COMP%]{padding-left:24px}.droparea[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;overflow:auto;user-select:none;-webkit-user-select:none;-moz-user-select:none;-khtml-user-select:none}.droparea-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;box-sizing:border-box;background:#1b61b91a;border:1px solid rgba(27,97,185,1);z-index:10;user-select:none;-webkit-user-select:none;-moz-user-select:none;-khtml-user-select:none}  .progress-dialog .mat-mdc-dialog-container{box-shadow:none;padding:0;overflow:hidden}  .progress-dialog .mat-mdc-dialog-content{overflow:hidden}.mat-sidenav-container[_ngcontent-%COMP%]{height:100%;width:100%;background-color:inherit}.mat-sidenav-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]{background-color:#000}.mat-sidenav[_ngcontent-%COMP%]   .mat-drawer-inner-container[_ngcontent-%COMP%]{overflow:hidden!important}.resize-handle[_ngcontent-%COMP%]{position:absolute;background-color:#000;top:0;left:0;width:20px;bottom:0;cursor:ew-resize;user-select:none;-webkit-user-select:none;-moz-user-select:none;-khtml-user-select:none}.mat-sidenav-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:2em;max-width:calc(100% - 5em);max-height:calc(100% - 5em)}"],changeDetection:0})}};var tt=class i{static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=k({type:i,selectors:[["app-bucket-placeholder"]],standalone:!0,features:[x],decls:1,vars:0,template:function(e,n){e&1&&f(0,"router-outlet")},dependencies:[le],encapsulation:2,changeDetection:0})}};function cn(i,t){if(i&1&&(o(0,"dt"),l(1,"Directory"),a(),o(2,"dd"),l(3),a()),i&2){let e=p();c(3),D(e.directory)}}function sn(i,t){if(i&1&&(o(0,"div",3)(1,"dl",4)(2,"dt"),l(3,"Created"),a(),o(4,"dd"),l(5),u(6,"datetime"),u(7,"nvl"),a(),o(8,"dt"),l(9,"Storage engine"),a(),o(10,"dd"),l(11),a(),g(12,cn,4,1),a(),o(13,"h3"),l(14,"Bucket size"),a(),o(15,"dl",4)(16,"dt"),l(17,"Limit"),a(),o(18,"dd"),l(19),u(20,"formatBytes"),u(21,"nvl"),a(),o(22,"dt"),l(23,"Used"),a(),o(24,"dd"),l(25),u(26,"formatBytes"),u(27,"nvl"),a(),o(28,"dt"),l(29,"Available"),a(),o(30,"dd"),l(31),u(32,"formatBytes"),a()(),o(33,"h3"),l(34,"Object count"),a(),o(35,"dl",4)(36,"dt"),l(37,"Limit"),a(),o(38,"dd"),l(39),u(40,"nvl"),a(),o(41,"dt"),l(42,"Used"),a(),o(43,"dd"),l(44),u(45,"nvl"),a(),o(46,"dt"),l(47,"Available"),a(),o(48,"dd"),l(49),a()()()),i&2){let e=t,n=p();c(5),D(O(7,11,v(6,9,e.created),"-")),c(6),D(e.directory?"File System":"RocksDB"),c(),y(e.directory?12:-1),c(7),D(O(21,16,v(20,14,e.maxSize),"-")),c(6),D(O(27,21,v(26,19,e.size),"-")),c(6),D(v(32,24,n.zeroOrMore(e.maxSize-e.size))),c(8),D(O(40,26,e.maxObjects,"-")),c(5),D(O(45,29,e.numObjects,"-")),c(5),D(n.zeroOrMore(e.maxObjects-e.numObjects))}}var it=class i{constructor(t,e,n){this.bucket$=new N(null);this.name=t.snapshot.parent.paramMap.get("name"),n.setTitle(this.name+": Properties"),this.storageClient=e.createStorageClient(),this.storageClient.getBucket(this.name).then(r=>{this.bucket$.next(r)})}bucketSizePercentage(t,e=!1){var n=100*t.size/t.maxSize;return e?Math.min(100,n):n}objectCountPercentage(t,e=!1){var n=100*t.numObjects/t.maxObjects;return e?Math.min(100,n):n}zeroOrMore(t){return Math.max(0,t)}static{this.\u0275fac=function(e){return new(e||i)(d(re),d(j),d(ae))}}static{this.\u0275cmp=k({type:i,selectors:[["ng-component"]],standalone:!0,features:[x],decls:8,vars:5,consts:[["routerLink","/storage/buckets","icon","arrow_back"],[1,"panel-content"],[3,"bucket"],[1,"small",2,"margin-top","16px"],[1,"dl-horizontal"]],template:function(e,n){if(e&1&&(o(0,"app-storage-page")(1,"app-storage-toolbar"),f(2,"ya-page-icon-button",0),l(3),a(),o(4,"div",1),f(5,"app-bucket-page-tabs",2),g(6,sn,50,32,"div",3),u(7,"async"),a()()),e&2){let r;c(3),T(" ",n.name," "),c(2),m("bucket",n.name),c(),y((r=v(7,3,n.bucket$))?6:-1,r)}},dependencies:[be,S,z,Y,We,_e,he,Ge,Q,q],styles:[".progress[_ngcontent-%COMP%]{display:inline-block;width:100px;position:relative;text-align:center;margin-right:5px;background-color:#eee;border:1px solid rgba(0,0,0,.1)}.fill[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;width:30%;background-color:#009e87;background:linear-gradient(to bottom,#009e87,#bce3dd 50%,#009e87)}.label[_ngcontent-%COMP%]{position:absolute;inset:0;margin:0 auto}"],changeDetection:0})}};var nt=class i{static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=k({type:i,selectors:[["ng-component"]],standalone:!0,features:[x],decls:5,vars:4,consts:[["messageBar",""],[1,"storage-page-content"]],template:function(e,n){if(e&1&&(f(0,"ya-message-bar",null,0),o(2,"div",1),u(3,"async"),f(4,"router-outlet"),a()),e&2){let r=U(1);c(2),E("message-bar-visible",v(3,2,r.show$))}},dependencies:[S,z,le,Vt],styles:[".storage-page-content[_ngcontent-%COMP%]{position:absolute;inset:48px 0 0;background-color:var(--y-background-color)}.storage-page-content.message-bar-visible[_ngcontent-%COMP%]{top:112px}mat-toolbar[_ngcontent-%COMP%]{background-color:#fcfcfc;border-bottom:1px solid #d3d3d3;box-sizing:content-box;color:#000000a7}"],changeDetection:0})}};var pa=[{path:"",canActivate:[Ut,Yt],canActivateChild:[zt],runGuardsAndResolvers:"always",component:nt,children:[{path:"",pathMatch:"full",redirectTo:"buckets"},{path:"buckets",children:[{path:"",pathMatch:"full",component:Qe,data:{hasSidebar:!1}},{path:":name",children:[{path:"",pathMatch:"full",redirectTo:"objects"},{path:"objects",component:tt,children:[{path:"**",component:et,data:{hasSidebar:!1}}]},{path:"properties",component:it,data:{hasSidebar:!1}}]}]}]}];export{pa as ROUTES};
