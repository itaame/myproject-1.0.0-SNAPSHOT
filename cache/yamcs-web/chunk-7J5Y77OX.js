import{a as v,b as w}from"./chunk-SAZ6MTOG.js";var Ne=e=>e,qe=class{constructor(e,t=Ne){this.easing=t,this._value=e}_value;time0;src;dst;duration=200;setTransition(e,t){e===void 0?this._value=t:(this.time0=e,this.src=this.value,this.dst=t)}step(e){if(this.dst!==void 0&&this.dst!==this.value){let t=Math.min((e-this.time0)/this.duration,1);return t=this.easing(t),this._value=this.src+(this.dst-this.src)*t,e-this.time0>this.duration&&this.completeTransition(),!0}return!1}get value(){return this._value}set value(e){this.abortTransition(),this._value=e}abortTransition(){this.time0=void 0,this.src=void 0,this.dst=void 0}completeTransition(){this.dst!==void 0&&(this._value=this.dst,this.abortTransition())}},re=class{_data;mutationListeners=[];timeline;constructor(e){this.timeline=e,e.add(this)}get data(){return this._data}set data(e){this._data=e,this.reportMutation()}addMutationListener(e){this.mutationListeners.indexOf(e)===-1&&this.mutationListeners.push(e)}removeMutationListener(e){let t=this.mutationListeners.indexOf(e);t!==-1&&this.mutationListeners.splice(t,1)}reportMutation(){this.mutationListeners.forEach(e=>e()),this.timeline.requestRepaint()}createAnimatableProperty(e){return this.timeline.createAnimatableProperty(e)}beforeDraw(e){}drawUnderlay(e){}drawContent(e){}drawOverlay(e){}disconnectedCallback(){}},H=class extends re{_label;_frozen=!1;_background="transparent";_headerBackground="transparent";_borderWidth;_borderColor;_marginBottom=0;_marginTop=0;offscreen;coords={x:0,y:0,width:0,height:0};headerClickListeners=[];addHeaderClickListener(e){this.headerClickListeners.push(e),this.reportMutation()}removeHeaderClickListener(e){this.headerClickListeners=this.headerClickListeners.filter(t=>t!==e),this.reportMutation()}get label(){return this._label}set label(e){this._label=e,this.reportMutation()}get background(){return this._background}set background(e){this._background=e,this.reportMutation()}get headerBackground(){return this._headerBackground}set headerBackground(e){this._headerBackground=e,this.reportMutation()}get borderWidth(){return this._borderWidth}set borderWidth(e){this._borderWidth=e,this.reportMutation()}get borderColor(){return this._borderColor}set borderColor(e){this._borderColor=e,this.reportMutation()}get marginTop(){return this._marginTop}set marginTop(e){this._marginTop=e,this.reportMutation()}get marginBottom(){return this._marginBottom}set marginBottom(e){this._marginBottom=e,this.reportMutation()}get frozen(){return this._frozen}set frozen(e){this._frozen=e,this.reportMutation()}beforeDraw(e){let t=this.calculateContentHeight(e);this.offscreen=e.createChild(this.timeline.mainWidth,t),this.drawBandContent(this.offscreen)}drawContent(e){this.offscreen&&e.copy(this.offscreen,this.x,this.y+this.marginTop)}get contentHeight(){return this.offscreen?.canvas.height||0}get height(){return this.coords.height}get width(){return this.coords.width}get x(){return this.coords.x}get y(){return this.coords.y}},on=class extends H{_contentHeight=30;_text;_textAlignment="middle";_textColor="#333333";_textSize=16;_fontFamily="Verdana, Geneva, sans-serif";calculateContentHeight(e){return this._contentHeight}drawBandContent(e){if(!this.text)return;let t={color:this.textColor,font:`${this.textSize}px ${this.fontFamily}`,text:this.text};this.textAlignment==="left"?e.fillText(w(v({},t),{x:0,y:this.contentHeight/2,align:"left",baseline:"middle"})):this.textAlignment==="middle"?e.fillText(w(v({},t),{x:this.timeline.mainWidth/2,y:this.contentHeight/2,align:"center",baseline:"middle"})):e.fillText(w(v({},t),{x:this.timeline.mainWidth,y:this.contentHeight/2,align:"right",baseline:"middle"}))}get contentHeight(){return this._contentHeight}set contentHeight(e){this._contentHeight=e,this.reportMutation()}get text(){return this._text}set text(e){this._text=e,this.reportMutation()}get textAlignment(){return this._textAlignment}set textAlignment(e){this._textAlignment=e,this.reportMutation()}get textColor(){return this._textColor}set textColor(e){this._textColor=e,this.reportMutation()}get textSize(){return this._textSize}set textSize(e){this._textSize=e,this.reportMutation()}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily=e,this.reportMutation()}},m=class _e{segments=[];constructor(t,i){this.segments.push({x:t,y:i,line:!1})}static fromPoints(t){let i=new _e(t[0].x,t[0].y);for(let n=1;n<t.length;n++)i.lineTo(t[n].x,t[n].y);return i}getBoundingBox(){let t={x:this.segments[0].x,y:this.segments[0].y},i={x:this.segments[0].x,y:this.segments[0].y};for(let n=0;n<this.segments.length;n++){let r=this.segments[n];r.x<t.x&&(t.x=r.x),r.x>i.x&&(i.x=r.x),r.y<t.y&&(t.y=r.y),r.y>i.y&&(i.y=r.y)}return{x:t.x,y:t.y,width:i.x-t.x,height:i.y-t.y}}lineTo(t,i){return this.segments.push({x:t,y:i,line:!0}),this}moveTo(t,i){return this.segments.push({x:t,y:i,line:!1}),this}closePath(){let t=this.segments[0];return this.segments.push({x:t.x,y:t.y,line:!0}),this}translate(t,i){for(let n of this.segments)n.x+=t,n.y+=i;return this}},Le=class extends re{_width=200;_background="white";_clippedWidth=this.createAnimatableProperty(this._width);_opened=!0;get width(){return this._width}set width(e){this._opened=!0,this._width=e,this._clippedWidth.value=Math.max(0,e),this.reportMutation()}get background(){return this._background}set background(e){this._background=e,this.reportMutation()}get clippedWidth(){return this._clippedWidth.value}toggle(){this.opened?this.close():this.open()}open(){this.opened||(this._opened=!0,this._clippedWidth.setTransition(this.timeline.frameTime,this._width),this.reportMutation())}close(){this.opened&&(this._opened=!1,this._clippedWidth.setTransition(this.timeline.frameTime,0),this.reportMutation())}get opened(){return this._opened}},Ae=class extends Le{_dividerColor="#e3e3e3";_foregroundColor="#333333";_fontFamily="Verdana, Geneva, sans-serif";_textSize=10;_overlayColor="transparent";_hoverOverlayColor="rgba(170, 170, 170, 0.3)";hoveredIndex;drawContent(e){if(this.clippedWidth){let t=e.createChild(this.clippedWidth,e.canvas.height);this.drawOffscreen(t),e.copy(t,0,0)}}drawOffscreen(e){e.fillRect({x:0,y:0,width:this.clippedWidth,height:e.height,fill:this.timeline.background});let t=this.timeline.getBands().filter(n=>n.frozen).concat(this.timeline.getBands().filter(n=>!n.frozen));for(let n=0;n<t.length;n++){let r=t[n];this.drawBand(e,r,n)}e.fillRect({x:0,y:0,width:this.clippedWidth,height:e.height,fill:this.overlayColor});for(let n of t)if(n.label){let r=n.height-n.marginTop-n.marginBottom;e.fillText({x:5,y:n.y+n.marginTop+r/2,align:"left",baseline:"middle",color:this.foregroundColor,font:`${this.textSize}px ${this.fontFamily}`,text:n.label})}let i=this.clippedWidth-.5;e.strokePath({color:this.dividerColor,path:new m(i,0).lineTo(i,e.height)})}drawBand(e,t,i){if(e.fillRect({x:0,y:t.y,width:this.width,height:t.height,fill:t.background}),e.fillRect({x:0,y:t.y,width:this.width,height:t.height,fill:t.headerBackground}),this.hoveredIndex===i&&e.fillRect({x:0,y:t.y,width:this.width,height:t.height,fill:this.hoverOverlayColor}),t.headerClickListeners.length){let r={id:`band-${i}-header`,cursor:"pointer",mouseEnter:()=>{this.hoveredIndex=i,this.reportMutation()},mouseLeave:()=>{this.hoveredIndex=void 0,this.reportMutation()},click:()=>{t.headerClickListeners.forEach(o=>o({band:t}))}};e.addHitRegion(r).addRect(0,t.y,this.width,t.height)}let n=t.borderWidth??this.timeline.bandBorderWidth;if(n){let r=t.y+t.height+n/2;e.strokePath({color:t.borderColor||this.timeline.bandBorderColor,lineWidth:n,path:new m(0,r).lineTo(this.clippedWidth,r)})}}get foregroundColor(){return this._foregroundColor}set foregroundColor(e){this._foregroundColor=e,this.reportMutation()}get dividerColor(){return this._dividerColor}set dividerColor(e){this._dividerColor=e,this.reportMutation()}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily=e,this.reportMutation()}get textSize(){return this._textSize}set textSize(e){this._textSize=e,this.reportMutation()}get overlayColor(){return this._overlayColor}set overlayColor(e){this._overlayColor=e,this.reportMutation()}get hoverOverlayColor(){return this._hoverOverlayColor}set hoverOverlayColor(e){this._hoverOverlayColor=e,this.reportMutation()}},Ue=class{constructor(e,t){this.timeline=t,this.id=e}id;cursor="col-resize";grabStartCursor;mouseDown(){this.grabStartCursor=this.timeline.cursor}grab(e){this.timeline.sidebar&&(this.timeline.cursor="col-resize",this.timeline.sidebar.width=e.x)}grabEnd(){this.timeline.cursor=this.grabStartCursor||this.timeline.cursor}},te=e=>{document.removeEventListener("click",te,!0),e.preventDefault(),e.stopPropagation()};function j(e){return(e.buttons&1)===1||e.buttons===void 0&&e.which==1}var $=5;function se(e,t,i,n){return Math.sqrt((i-e)*(i-e)+(n-t)*(n-t))}var je=class{constructor(e,t){this.canvas=e,this.hitCanvas=t,e.addEventListener("click",i=>this.onCanvasClick(i),!1),e.addEventListener("dblclick",i=>this.onCanvasDoubleClick(i),!1),e.addEventListener("contextmenu",i=>this.onCanvasContextMenu(i),!1),e.addEventListener("keydown",i=>this.onCanvasKeyDown(i),!1),e.addEventListener("keyup",i=>this.onCanvasKeyUp(i),!1),e.addEventListener("mousedown",i=>this.onCanvasMouseDown(i),!1),e.addEventListener("mouseup",i=>this.onCanvasMouseUp(i),!1),e.addEventListener("mouseleave",i=>this.onCanvasMouseLeave(i),!1),e.addEventListener("mousemove",i=>this.onCanvasMouseMove(i),!1),e.addEventListener("touchstart",i=>this.onCanvasTouchStart(i),!1),e.addEventListener("touchmove",i=>this.onCanvasTouchMove(i),!1),e.addEventListener("wheel",i=>this.onCanvasWheel(i),!1)}grabbing=!1;grabTarget;grabPoint;grabbingPoint;documentMouseMoveListener=e=>this.onDocumentMouseMove(e);documentMouseUpListener=e=>this.onDocumentMouseUp(e);documentTouchMoveListener=e=>this.onDocumentTouchMove(e);documentTouchEndListener=e=>this.onDocumentTouchEnd(e);prevActiveRegions=[];onCanvasClick(e){let t=this.toMouseHitEvent(e),i=this.hitCanvas.getActiveRegion(t.x,t.y,"click");i&&(i.click(t),e.preventDefault(),e.stopPropagation())}onCanvasDoubleClick(e){let t=this.toMouseHitEvent(e),i=this.hitCanvas.getActiveRegion(t.x,t.y,"doubleClick");i&&(i.doubleClick(t),e.preventDefault(),e.stopPropagation())}onCanvasKeyDown(e){let t=this.toKeyboardHitEvent(e);for(let i of this.hitCanvas.getRegionsForProperty("keyDown"))i.keyDown(t)}onCanvasKeyUp(e){let t=this.toKeyboardHitEvent(e);for(let i of this.hitCanvas.getRegionsForProperty("keyUp"))i.keyUp(t)}onCanvasContextMenu(e){let t=this.toMouseHitEvent(e),i=this.hitCanvas.getActiveRegion(t.x,t.y,"contextMenu");i&&(i.contextMenu(t),e.preventDefault(),e.stopPropagation())}onCanvasMouseDown(e){document.removeEventListener("click",te,!0);let t=this.toMouseHitEvent(e);if(j(e)){let{x:i,y:n}=t,r=this.hitCanvas.getActiveRegion(i,n,"mouseDown");r&&r.mouseDown(t);let o=this.hitCanvas.getActiveRegion(i,n,"grab");o&&(this.grabPoint=this.grabbingPoint={x:i,y:n},this.grabTarget=o),e.stopPropagation()}}onCanvasMouseUp(e){let t=this.toMouseHitEvent(e),i=this.hitCanvas.getActiveRegion(t.x,t.y,"mouseUp");i&&(i.mouseUp(t),e.preventDefault(),e.stopPropagation())}onCanvasMouseLeave(e){let t=this.toMouseHitEvent(e);for(let i of this.prevActiveRegions)i.mouseLeave&&i.mouseLeave(t);this.prevActiveRegions=[],e.preventDefault(),e.stopPropagation()}wasActive(e){for(let t of this.prevActiveRegions)if(t.id===e.id)return!0;return!1}onCanvasMouseMove(e){let t=this.toMouseHitEvent(e),{x:i,y:n}=t,r=this.hitCanvas.getActiveRegions(i,n),o=r.map(l=>l.id);for(let l of this.prevActiveRegions)o.indexOf(l.id)===-1&&l.mouseLeave&&l.mouseLeave(t);let s=this.hitCanvas.getActiveRegions(i,n,"mouseEnter");for(let l=s.length-1;l>=0;l--){let h=s[l];this.wasActive(h)||h.mouseEnter(t)}for(let l of this.hitCanvas.getActiveRegions(i,n,"mouseMove"))l.mouseMove(t);this.prevActiveRegions=r;let a=this.hitCanvas.getActiveRegion(i,n,"cursor")?.cursor||"auto";if(a!==this.canvas.style.cursor&&(this.canvas.style.cursor=a),this.grabPoint&&!this.grabbing&&j(e)){let l=se(this.grabPoint.x,this.grabPoint.y,i,n);Math.abs(l)>$&&(document.addEventListener("click",te,!0),document.addEventListener("mouseup",this.documentMouseUpListener),document.addEventListener("mousemove",this.documentMouseMoveListener),this.grabbing=!0,$>0&&this.grabPoint&&(this.grabPoint=this.grabbingPoint={x:i,y:n}))}this.grabbing&&this.grabTarget&&j(e)&&(e.preventDefault(),e.stopPropagation(),this.grabTarget.grab(this.toGrabHitEvent(e)),this.grabbingPoint={x:i,y:n})}onCanvasTouchStart(e){let t=this.toTouchHitEvent(e),{x:i,y:n}=t.touches[0];if(t.touches.length===1){let r=this.hitCanvas.getActiveRegion(i,n,"grab");r&&(this.grabPoint=this.grabbingPoint={x:i,y:n},this.grabTarget=r)}e.stopPropagation()}onCanvasTouchMove(e){let t=this.toTouchHitEvent(e),{x:i,y:n}=t.touches[0];if(this.grabPoint&&!this.grabbing&&e.touches.length===1){let r=se(this.grabPoint.x,this.grabPoint.y,i,n);Math.abs(r)>$&&(document.addEventListener("touchend",this.documentTouchEndListener),document.addEventListener("touchmove",this.documentTouchMoveListener),this.grabbing=!0,$>0&&this.grabPoint&&(this.grabPoint=this.grabbingPoint={x:i,y:n}))}if(this.grabbing&&this.grabTarget&&e.touches.length===1){e.preventDefault(),e.stopPropagation();let r={clientX:t.touches[0].clientX,clientY:t.touches[0].clientY,x:t.touches[0].x,y:t.touches[0].y,deltaX:i-this.grabPoint.x,deltaY:n-this.grabPoint.y,movementX:i-this.grabbingPoint.x,movementY:n-this.grabbingPoint.y,altKey:t.altKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,shiftKey:t.shiftKey};this.grabTarget.grab(r),this.grabbingPoint={x:i,y:n}}}onCanvasWheel(e){let t=this.toMouseHitEvent(e),{x:i,y:n}=t,r=this.hitCanvas.getActiveRegion(i,n,"wheel");r&&(r.wheel(w(v({},t),{deltaX:e.deltaX,deltaY:e.deltaY})),e.preventDefault(),e.stopPropagation())}onDocumentMouseUp(e){if(this.grabbing){document.removeEventListener("mouseup",this.documentMouseUpListener),document.removeEventListener("mousemove",this.documentMouseMoveListener);let t=this.grabTarget;this.grabbing=!1,this.grabPoint=void 0,this.grabTarget=void 0,t?.grabEnd&&t.grabEnd()}}onDocumentMouseMove(e){this.onCanvasMouseMove(e)}onDocumentTouchEnd(e){if(this.grabbing){document.removeEventListener("touchend",this.documentTouchEndListener),document.removeEventListener("touchmove",this.documentTouchMoveListener);let t=this.grabTarget;this.grabbing=!1,this.grabPoint=void 0,this.grabTarget=void 0,t?.grabEnd&&t.grabEnd()}}onDocumentTouchMove(e){this.onCanvasTouchMove(e)}toMouseHitEvent(e){let t=this.canvas.getBoundingClientRect();return{clientX:e.clientX,clientY:e.clientY,x:e.clientX-t.left,y:e.clientY-t.top,altKey:e.altKey,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey,button:e.button}}toTouchHitEvent(e){let t=this.canvas.getBoundingClientRect(),i=[];for(let n of e.touches)i.push({clientX:n.clientX,clientY:n.clientY,x:n.clientX-t.left,y:n.clientY-t.top});return{touches:i,altKey:e.altKey,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey}}toGrabHitEvent(e){let t=this.toMouseHitEvent(e);return w(v({},t),{deltaX:t.x-this.grabPoint.x,deltaY:t.y-this.grabPoint.y,movementX:t.x-this.grabbingPoint.x,movementY:t.y-this.grabbingPoint.y})}toKeyboardHitEvent(e){return{code:e.code,key:e.key,altKey:e.altKey,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey}}},ae="rgb(255,255,255)",Ke=!!navigator.brave,Ze=class ke{constructor(t,i,n){this.parent=t;let r=document.createElement("canvas");r.width=i||r.width,r.height=n||r.height,this.ctx=r.getContext("2d",{willReadFrequently:!0});let o=t;for(;o;)this.root=o,o=o.parent}ctx;regionsById=new Map;regionsByColor=new Map;root;clear(){this.regionsById.clear(),this.regionsByColor.clear(),this.ctx.fillStyle=ae,this.ctx.fillRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)}beginHitRegion(t){(this.root||this).regionsById.set(t.id,t);let i=(this.root||this).generateUniqueColor(t);return this.ctx.beginPath(),this.ctx.fillStyle=i,i}getActiveRegion(t,i,n){let r=this.ctx.getImageData(t,i,1,1).data,o=`rgb(${r[0]},${r[1]},${r[2]})`,s=this.regionsByColor.get(o)||void 0;return s&&n?this.findAncestorForProperty(s,n):s}getActiveRegions(t,i,n){let r=this.getActiveRegion(t,i,n),o=[];if(r)for(o.push(r);r?.parentId;)r=this.regionsById.get(r?.parentId),r&&(n===void 0||r[n]!==void 0)&&o.push(r);return o}findAncestorForProperty(t,i){if(t[i]!==void 0)return t;let n=t;for(;n?.parentId;)if(n=this.regionsById.get(n.parentId),n&&n[i]!==void 0)return n}getRegionsForProperty(t){let i=[];for(let n of this.regionsById.values())n[t]!==void 0&&i.push(n);return i}drawRegions(t,i,n){t.drawImage(this.ctx.canvas,i,n)}createChild(t,i){return new ke(this,t,i)}transferTo(t,i,n,r,o){t.drawImage(this.ctx.canvas,i,n,r,o)}generateUniqueColor(t){for(;;){let i=Math.round(Math.random()*255),n=Math.round(Math.random()*255),r=Math.round(Math.random()*255),o=`rgb(${i},${n},${r})`;if(!this.regionsByColor.has(o)&&o!==ae)return Ke?(this.regionsByColor.set(`rgb(${i-1},${n-1},${r-1})`,t),this.regionsByColor.set(`rgb(${i-1},${n-1},${r})`,t),this.regionsByColor.set(`rgb(${i-1},${n-1},${r+1})`,t),this.regionsByColor.set(`rgb(${i-1},${n},${r-1})`,t),this.regionsByColor.set(`rgb(${i-1},${n},${r})`,t),this.regionsByColor.set(`rgb(${i-1},${n},${r+1})`,t),this.regionsByColor.set(`rgb(${i-1},${n+1},${r-1})`,t),this.regionsByColor.set(`rgb(${i-1},${n+1},${r})`,t),this.regionsByColor.set(`rgb(${i-1},${n+1},${r+1})`,t),this.regionsByColor.set(`rgb(${i},${n-1},${r-1})`,t),this.regionsByColor.set(`rgb(${i},${n-1},${r})`,t),this.regionsByColor.set(`rgb(${i},${n-1},${r+1})`,t),this.regionsByColor.set(`rgb(${i},${n},${r-1})`,t),this.regionsByColor.set(`rgb(${i},${n},${r})`,t),this.regionsByColor.set(`rgb(${i},${n},${r+1})`,t),this.regionsByColor.set(`rgb(${i},${n+1},${r-1})`,t),this.regionsByColor.set(`rgb(${i},${n+1},${r})`,t),this.regionsByColor.set(`rgb(${i},${n+1},${r+1})`,t),this.regionsByColor.set(`rgb(${i+1},${n-1},${r-1})`,t),this.regionsByColor.set(`rgb(${i+1},${n-1},${r})`,t),this.regionsByColor.set(`rgb(${i+1},${n-1},${r+1})`,t),this.regionsByColor.set(`rgb(${i+1},${n},${r-1})`,t),this.regionsByColor.set(`rgb(${i+1},${n},${r})`,t),this.regionsByColor.set(`rgb(${i+1},${n},${r+1})`,t),this.regionsByColor.set(`rgb(${i+1},${n+1},${r-1})`,t),this.regionsByColor.set(`rgb(${i+1},${n+1},${r})`,t),this.regionsByColor.set(`rgb(${i+1},${n+1},${r+1})`,t)):this.regionsByColor.set(o,t),o}}},Ge=class{constructor(e){this.ctx=e}addRect(e,t,i,n){return this.ctx.fillRect(e,t,i,n),this}addEllipse(e,t,i,n,r,o,s,a){this.ctx.beginPath(),this.ctx.ellipse(e,t,i,n,r,o,s,a),this.ctx.fill()}addPath(e){this.ctx.beginPath();for(let t of e.segments)t.line?this.ctx.lineTo(t.x,t.y):this.ctx.moveTo(t.x,t.y);this.ctx.fill()}};function De(e,t,i){return i===void 0&&(i=t),{x:e.x+i,y:e.y+t,width:e.width-(i+i),height:e.height-(t+t)}}var le=class Se{constructor(t,i){this.canvas=t,this.ctx=t.getContext("2d"),this.hitCanvas=i||new Ze,this.hitCtx=this.hitCanvas.ctx}ctx;hitCanvas;hitCtx;dppx=window.devicePixelRatio;createChild(t,i){let n=this.hitCanvas.createChild(t,i),r=document.createElement("canvas"),o=new Se(r,n);return o.resize(t,i),o}copy(t,i,n){this.ctx.drawImage(t.canvas,i,n,t.width,t.height),t.hitCanvas.transferTo(this.hitCtx,i,n,t.width,t.height)}clearHitCanvas(){this.hitCanvas.clear()}fillCanvas(t){this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.width,this.height)}get width(){return parseInt(this.canvas.style.width)||this.canvas.width}get height(){return parseInt(this.canvas.style.height)||this.canvas.height}resize(t,i){let{devicePixelRatio:n}=window,r=Math.floor(t),o=Math.floor(i),s=Math.floor(t*n),a=Math.floor(i*n),{canvas:l,ctx:h,hitCtx:d}=this;(l.width!==s||l.height!==a||n!==this.dppx)&&(this.dppx=n,l.width=Math.floor(t*n),l.height=Math.floor(i*n),h.setTransform(n,0,0,n,0,0),l.style.width=`${r}px`,l.style.height=`${o}px`,d.canvas.width=r,d.canvas.height=o)}fillRect(t){this.ctx.fillStyle=t.fill,t.rx||t.ry?(K(this.ctx,t.x,t.y,t.width,t.height,t.rx||0,t.ry||0),this.ctx.fill()):this.ctx.fillRect(t.x,t.y,t.width,t.height)}fillEllipse(t){this.ctx.fillStyle=t.fill,this.ctx.beginPath();let i=t.startAngle??0,n=t.endAngle??2*Math.PI;this.ctx.ellipse(t.cx,t.cy,t.rx,t.ry,0,i,n,t.anticlockwise),this.ctx.fill()}fillText(t){this.ctx.textBaseline=t.baseline,this.ctx.textAlign=t.align,this.ctx.font=t.font,this.ctx.fillStyle=t.color,this.ctx.fillText(t.text,t.x,t.y)}measureText(t,i){return this.ctx.font=i,{width:this.ctx.measureText(t).width}}strokeRect(t){if(t.dash&&this.ctx.setLineDash(t.dash),this.ctx.lineWidth=t.lineWidth??1,this.ctx.strokeStyle=t.color,this.ctx.lineJoin=t.lineJoin||"miter",t.crispen&&t.lineWidth){let i=De(t,t.lineWidth/2,t.lineWidth/2);t.rx||t.ry?(K(this.ctx,i.x,i.y,i.width,i.height,t.rx||0,t.ry||0),this.ctx.stroke()):this.ctx.strokeRect(i.x,i.y,i.width,i.height)}else t.rx||t.ry?(K(this.ctx,t.x,t.y,t.width,t.height,t.rx||0,t.ry||0),this.ctx.stroke()):this.ctx.strokeRect(t.x,t.y,t.width,t.height);t.dash&&this.ctx.setLineDash([])}strokeEllipse(t){t.dash&&this.ctx.setLineDash(t.dash),this.ctx.lineWidth=t.lineWidth??1,this.ctx.beginPath();let i=t.startAngle??0,n=t.endAngle??2*Math.PI;this.ctx.ellipse(t.cx,t.cy,t.rx,t.ry,0,i,n,t.anticlockwise),this.ctx.strokeStyle=t.color,this.ctx.stroke(),t.dash&&this.ctx.setLineDash([])}strokePath(t){t.dash&&this.ctx.setLineDash(t.dash),this.ctx.beginPath();for(let i of t.path.segments)i.line?this.ctx.lineTo(i.x,i.y):this.ctx.moveTo(i.x,i.y);this.ctx.lineWidth=t.lineWidth??1,this.ctx.lineCap=t.lineCap||"butt",this.ctx.lineJoin=t.lineJoin||"miter",this.ctx.strokeStyle=t.color,this.ctx.stroke(),t.dash&&this.ctx.setLineDash([])}fillPath(t){this.ctx.beginPath();for(let i of t.path.segments)i.line?this.ctx.lineTo(i.x,i.y):this.ctx.moveTo(i.x,i.y);this.ctx.fillStyle=t.fill,this.ctx.fill()}addHitRegion(t){return this.hitCanvas.beginHitRegion(t),new Ge(this.hitCanvas.ctx)}};function K(e,t,i,n,r,o,s){e.beginPath(),!o&&!s?e.rect(t,i,n,r):(n<2*o&&(o=n/2),r<2*s&&(s=r/2),e.moveTo(t+o,i),e.lineTo(t+n-o,i),e.quadraticCurveTo(t+n,i,t+n,i+s),e.lineTo(t+n,i+r-s),e.quadraticCurveTo(t+n,i+r,t+n-o,i+r),e.lineTo(t+o,i+r),e.quadraticCurveTo(t,i+r,t,i+r-s),e.lineTo(t,i+s),e.quadraticCurveTo(t,i,t+o,i))}var Ve=class{constructor(e,t){this.timeline=t,this.id=e}id;grabStartPoint;grabStartCursor;doubleClickListeners=[];mouseMoveListeners=[];mouseLeaveListeners=[];addDoubleClickListener(e){this.doubleClickListeners.push(e)}removeDoubleClickListener(e){this.doubleClickListeners=this.doubleClickListeners.filter(t=>t!==e)}addMouseMoveListener(e){this.mouseMoveListeners.push(e)}removeMouseMoveListener(e){this.mouseMoveListeners=this.mouseMoveListeners.filter(t=>t!==e)}addMouseLeaveListener(e){this.mouseLeaveListeners.push(e)}removeMouseLeaveListener(e){this.mouseLeaveListeners=this.mouseLeaveListeners.filter(t=>t!==e)}doubleClick(e){let t={clientX:e.clientX,clientY:e.clientY,time:this.timeline.timeForCanvasPosition(e.x)};this.doubleClickListeners.forEach(i=>i(t))}click(){this.timeline.clearSelection()}mouseDown(e){this.grabStartPoint={x:e.x,y:e.y},this.grabStartCursor=this.timeline.cursor}grab(e){switch(this.timeline.tool){case"hand":this.timeline.cursor="grabbing",this.timeline.panBy(-e.movementX,!1);break;case"range-select":this.timeline.cursor="col-resize";let t=this.timeline.timeForCanvasPosition(this.grabStartPoint.x),i=this.timeline.timeForCanvasPosition(e.x);this.timeline.setSelection(t,i);break}}grabEnd(){this.timeline.cursor=this.grabStartCursor||this.timeline.cursor}wheel(e){e.deltaX>0?this.timeline.panBy(50):e.deltaX<0&&this.timeline.panBy(-50);let t=this.timeline.timeForCanvasPosition(e.x);e.deltaY>0?this.timeline.zoom(2,!0,t):e.deltaY<0&&this.timeline.zoom(.5,!0,t)}mouseMove(e){let t={clientX:e.clientX,clientY:e.clientY,time:this.timeline.timeForCanvasPosition(e.x)};this.mouseMoveListeners.forEach(i=>i(t))}mouseLeave(e){let t={clientX:e.clientX,clientY:e.clientY};this.mouseLeaveListeners.forEach(i=>i(t))}keyDown(e){if(!(e.ctrlKey||e.metaKey||e.altKey)){switch(e.key){case"+":case"=":this.timeline.zoomIn();return;case"-":this.timeline.zoomOut();return;case"ArrowLeft":this.timeline.panBy(50);return;case"ArrowRight":this.timeline.panBy(-50);return}switch(e.code){case"Plus":this.timeline.zoomIn();return;case"Minus":this.timeline.zoomOut();return}}}},Pe="viewport",Qe="divider",sn=class{constructor(e){this.targetElement=e,this.rootPanel=document.createElement("div"),this.rootPanel.className="timeline-root",this.rootPanel.style.overflow="hidden",this.rootPanel.style.position="relative",this.rootPanel.style.fontSize="0",e.appendChild(this.rootPanel),this.scrollPanel=document.createElement("div"),this.scrollPanel.className="timeline-scroll",this.scrollPanel.style.height="100%",this.scrollPanel.style.overflow="hidden",this.scrollPanel.style.position="relative",this.scrollPanel.style.fontSize="0",this.rootPanel.appendChild(this.scrollPanel);let t=document.createElement("canvas");t.tabIndex=0,t.style.outline="none",this.scrollPanel.appendChild(t),this.g=new le(t),this._start=this.createAnimatableProperty(0),this._stop=this.createAnimatableProperty(100),this.scrollPanel.addEventListener("scroll",()=>{this.requestRepaint()}),new je(t,this.g.hitCanvas),this.mediaQueryListEventListener=()=>{this.repaintRequested=!0,this.mediaQueryList=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),this.mediaQueryList.addEventListener("change",this.mediaQueryListEventListener,{once:!0})},this.mediaQueryListEventListener();let i=document.createElement("canvas");i.className="timeline-frozen",i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.pointerEvents="none",this.rootPanel.appendChild(i),this.frozenGraphics=new le(i),this.sidebar=new Ae(this),this.animationFrameRequest=window.requestAnimationFrame(n=>this.step(n))}_sidebar;_drawables=[];rootPanel;scrollPanel;g;_start;_stop;_min;_max;_minRange;_maxRange;_tool="hand";selection;frameTime;repaintRequested=!1;frozenGraphics;viewportChangeListeners=[];viewportSelectionListeners=[];animated=!0;animatableProperties=[];_background="#ffffff";_foregroundColor="grey";_bandBorderColor="#e8e8e8";_bandBorderWidth=1;_fontFamily="Verdana, Geneva, sans-serif";_textSize=10;_unselectedBackground="rgba(170, 170, 170, 0.3)";_selectedBackground="transparent";_selectedLineDash=[4,3];_selectedLineColor="transparent";mediaQueryList;mediaQueryListEventListener;animationFrameRequest;viewportRegion=new Ve(Pe,this);dividerRegion=new Ue(Qe,this);disconnect(){this.mediaQueryList?.removeEventListener("change",this.mediaQueryListEventListener),this.animationFrameRequest&&window.cancelAnimationFrame(this.animationFrameRequest);for(let e of this._drawables)e.disconnectedCallback();this.sidebar?.disconnectedCallback()}createAnimatableProperty(e){let t=new qe(e);return this.animatableProperties.push(t),t}step(e){this.animationFrameRequest=window.requestAnimationFrame(t=>this.step(t)),this.frameTime=e;for(let t of this.animatableProperties)this.animated?t.step(e)&&(this.repaintRequested=!0):t.completeTransition();if(this.repaintRequested)try{this.g.clearHitCanvas(),this.drawScreen()}finally{this.repaintRequested=!1}}setViewRange(e,t,i=!0){let{min:n,max:r,minRange:o,maxRange:s}=this,a=t-e;if(o!==void 0&&a<o){let l=o-a;a-=l,e-=Math.floor(l/2),t+=Math.ceil(l/2)}if(s!==void 0&&a>s){let l=a-s;a+=l,e+=Math.floor(l/2),t-=Math.ceil(l/2)}n!==void 0&&(e=Math.max(n,e),r!==void 0&&(a=Math.min(r-n,a)),t=e+a),r!==void 0&&(t=Math.min(r,t),n!==void 0&&(a=Math.min(r-n,a)),e=t-a),this.animated&&i?(this._start.setTransition(this.frameTime,e),this._stop.setTransition(this.frameTime,t)):(this._start.value=e,this._stop.value=t),this.viewportChangeListeners.forEach(l=>l({start:e,stop:t})),this.requestRepaint()}getSelection(){return this.selection}setSelection(e,t){t>e?this.selection={start:e,stop:t}:t===e?this.selection=void 0:this.selection={start:t,stop:e},this.viewportSelectionListeners.forEach(i=>i({selection:this.selection})),this.requestRepaint()}clearSelection(){this.selection=void 0,this.viewportSelectionListeners.forEach(e=>e({selection:this.selection})),this.requestRepaint()}get start(){return this._start.value}get stop(){return this._stop.value}get min(){return this._min}set min(e){this._min=e??void 0,this.setViewRange(this.start,this.stop,!1)}get max(){return this._max}set max(e){this._max=e??void 0,this.setViewRange(this.start,this.stop,!1)}get minRange(){return this._minRange}set minRange(e){this._minRange=e??void 0,this.setViewRange(this.start,this.stop,!1)}get maxRange(){return this._maxRange}set maxRange(e){this._maxRange=e??void 0,this.setViewRange(this.start,this.stop,!1)}get width(){return this.scrollPanel.clientWidth}get sidebar(){return this._sidebar}set sidebar(e){this._sidebar!==e&&(this._sidebar?.disconnectedCallback(),this._sidebar=e)}get cursor(){return this.g.canvas.style.cursor}set cursor(e){e!==this.cursor&&(this.g.canvas.style.cursor=e)}toDataURL(e="image/png",t){return this.g.ctx.canvas.toDataURL(e,t)}requestRepaint(){this.repaintRequested=!0}get mainWidth(){let e=this.sidebar?.clippedWidth||0;return this.width-e}add(e){return e instanceof Le?this.sidebar=e:this._drawables.indexOf(e)===-1&&(this._drawables.push(e),this.requestRepaint()),e}addViewportChangeListener(e){this.viewportChangeListeners.push(e)}removeViewportChangeListener(e){this.viewportChangeListeners=this.viewportChangeListeners.filter(t=>t!==e)}addViewportDoubleClickListener(e){this.viewportRegion.addDoubleClickListener(e)}removeViewportDoubleClickListener(e){this.viewportRegion.removeDoubleClickListener(e)}addViewportMouseMoveListener(e){this.viewportRegion.addMouseMoveListener(e)}removeViewportMouseMoveListener(e){this.viewportRegion.removeMouseMoveListener(e)}addViewportMouseLeaveListener(e){this.viewportRegion.addMouseLeaveListener(e)}removeViewportMouseLeaveListener(e){this.viewportRegion.removeMouseLeaveListener(e)}addViewportSelectionListener(e){this.viewportSelectionListeners.push(e)}removeViewportSelectionListener(e){this.viewportSelectionListeners=this.viewportSelectionListeners.filter(t=>t!==e)}panBy(e,t=!0){let i=this.stop-this.start,n=this.mainWidth,r=e/n*i,o=this.start+r,s=this.stop+r;this.setViewRange(o,s,t)}panTo(e,t=!0){let i=(this.stop-this.start)/2,n=e-i,r=e+i;this.setViewRange(n,r,t)}get center(){return this.start+(this.stop-this.start)/2}set center(e){this.panTo(e,!1)}getChildren(){return[...this._drawables]}getBands(){return this._drawables.filter(e=>e instanceof H)}removeChild(e){if(e===this.sidebar)return e.disconnectedCallback(),this.sidebar=void 0,this.requestRepaint(),!0;{let t=this._drawables.indexOf(e);return t!==-1?(e.disconnectedCallback(),this._drawables.splice(t,1),this.requestRepaint(),!0):!1}}positionTime(e){return this.distanceBetween(this.start,e)}timeForCanvasPosition(e){let t=this.sidebar?.clippedWidth||0,i=e-t,n=this.stop-this.start,r=this.mainWidth,o=i/r*n;return this.start+o}distanceBetween(e,t){let i=t-e,n=this.stop-this.start;return this.mainWidth*(i/n)}get tool(){return this._tool}set tool(e){this._tool=e,this.requestRepaint()}zoomIn(){this.zoom(.5)}zoomOut(){this.zoom(2)}zoom(e,t=!0,i){if(e<=0)throw new Error("Zoom factor should be a positive number");i===void 0&&(i=this.center);let n=(i-this.start)/(this.stop-this.start),r=(this.stop-this.start)*e,o=i-n*r,s=i+(1-n)*r;this.setViewRange(o,s,t)}get background(){return this._background}set background(e){this._background=e,this.requestRepaint()}get foregroundColor(){return this._foregroundColor}set foregroundColor(e){this._foregroundColor=e,this.requestRepaint()}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily=e,this.requestRepaint()}get textSize(){return this._textSize}set textSize(e){this._textSize=e,this.requestRepaint()}get bandBorderColor(){return this._bandBorderColor}set bandBorderColor(e){this._bandBorderColor=e,this.requestRepaint()}get bandBorderWidth(){return this._bandBorderWidth}set bandBorderWidth(e){this._bandBorderWidth=e,this.requestRepaint()}drawScreen(){let{g:e}=this;for(let a of this._drawables)a.beforeDraw(e);let t=this.getBands().filter(a=>a.frozen).concat(this.getBands().filter(a=>!a.frozen)),i=0;for(let a of t)a.coords.x=0,a.coords.y=i,a.coords.width=this.mainWidth,a.coords.height=a.marginTop+a.contentHeight+a.marginBottom,i+=a.height+(a.borderWidth??this.bandBorderWidth);this.rootPanel.style.height=this.targetElement.clientHeight+"px",i>this.scrollPanel.clientHeight?this.scrollPanel.style.overflowY="scroll":this.scrollPanel.style.overflowY="hidden";let n=this.scrollPanel.clientWidth,r=Math.max(i,this.scrollPanel.clientHeight);e.resize(n,r),e.fillCanvas(this.background),this.sidebar?.drawContent(e);let o=this.sidebar?.clippedWidth||0;this.tool&&e.addHitRegion(this.viewportRegion).addRect(o,0,this.mainWidth,r);let s=e.createChild(this.mainWidth,r);this.drawOffscreen(s),e.copy(s,o,0),this.drawFrozenTop(),this.sidebar&&e.addHitRegion(this.dividerRegion).addRect(o-5,0,10,r)}drawOffscreen(e){for(let t of this._drawables)t instanceof H&&e.fillRect({x:t.x,y:t.y,width:e.width,height:t.height,fill:t.background});for(let t of this._drawables)if(t.drawUnderlay(e),t instanceof H){let i=t,n=i.borderWidth??this.bandBorderWidth;if(n){let r=t.y+t.height+n/2;e.strokePath({color:i.borderColor||this.bandBorderColor,lineWidth:n,path:new m(0,r).lineTo(e.width,r)})}}for(let t of this._drawables)t.drawContent(e);for(let t of this._drawables)t.drawOverlay(e);this.drawSelection(e)}drawSelection(e){if(!this.selection)return;let t=Math.round(this.positionTime(this.selection.start)),i=Math.round(this.positionTime(this.selection.stop));e.fillRect({x:0,y:0,width:t,height:e.height,fill:this._unselectedBackground}),e.fillRect({x:i,y:0,width:e.width-i,height:e.height,fill:this._unselectedBackground}),e.fillRect({x:t,y:0,width:e.width,height:e.height,fill:this._selectedBackground}),e.strokePath({color:this._selectedLineColor,dash:this._selectedLineDash,path:new m(t+.5,0).lineTo(t+.5,e.height).moveTo(i-.5,0).lineTo(i-.5,e.height)})}drawFrozenTop(){let e=this.frozenGraphics.ctx,t=this.g.width,i=0;for(let n of this.getBands())n.frozen&&(i+=n.height+(n.borderWidth??this.bandBorderWidth));this.frozenGraphics.resize(t,i),i&&e.drawImage(this.g.canvas,0,0,this.frozenGraphics.canvas.width,this.frozenGraphics.canvas.height,0,0,t,i)}},Je=(e,t,i)=>{let n=t.width/2,r=t.height/2,o=new m(t.x+n,t.y).lineTo(t.x+t.width,t.y+r).lineTo(t.x+n,t.y+t.height).lineTo(t.x,t.y+r).closePath();e.fillPath({path:o,fill:i.fill}),i.borderWidth&&(t=De(t,i.borderWidth/2),n=t.width/2,r=t.height/2,o=new m(t.x+n,t.y).lineTo(t.x+t.width,t.y+r).lineTo(t.x+n,t.y+t.height).lineTo(t.x,t.y+r).closePath(),e.strokePath({path:o,color:i.borderColor,dash:i.borderDash,lineWidth:i.borderWidth,lineCap:"round",lineJoin:"round"}))},et=(e,t,i)=>{e.fillEllipse({cx:t.x+t.width/2,cy:t.y+t.height/2,rx:4,ry:4,fill:i.fill}),i.borderWidth&&e.strokeEllipse({cx:t.x+t.width/2,cy:t.y+t.height/2,rx:4-i.borderWidth/2,ry:4-i.borderWidth/2,color:i.borderColor,dash:i.borderDash,lineWidth:i.borderWidth})},tt=(e,t,i)=>{e.fillEllipse({cx:t.x+t.width/2,cy:t.y+t.height/2,rx:t.width/2,ry:t.height/2,fill:i.fill}),i.borderWidth&&e.strokeEllipse({cx:t.x+t.width/2,cy:t.y+t.height/2,rx:t.width/2-i.borderWidth/2,ry:t.height/2-i.borderWidth/2,color:i.borderColor,dash:i.borderDash,lineWidth:i.borderWidth})},it=(e,t,i)=>{let n=new m(t.x+t.width/2,t.y).lineTo(t.x+t.width,t.y+t.height).lineTo(t.x,t.y+t.height).closePath();e.fillPath({fill:i.fill,path:n}),i.borderWidth&&e.strokePath({path:n,color:i.borderColor,dash:i.borderDash,lineWidth:i.borderWidth})},nt=(e,t,i)=>{let n=new m(t.x,t.y).lineTo(t.x+t.width,t.y).lineTo(t.x+t.width/2,t.y+t.height).closePath();e.fillPath({fill:i.fill,path:n}),i.borderWidth&&e.strokePath({path:n,color:i.borderColor,dash:i.borderDash,lineWidth:i.borderWidth})},rt=1,an=class extends H{_itemBackground="#77b1e1";_itemBorderColor="#000000";_itemBorderDash=[];_itemBorderWidth=0;_itemCornerRadius=0;_itemCursor="pointer";_itemFontFamily="Verdana, Geneva, sans-serif";_itemHeight=30;_itemHoverBackground="rgba(255, 255, 255, 0.2)";_itemMarginLeft=5;_itemTextColor="#333333";_itemTextOverflow="show";_itemTextSize=10;_items=[];_lineSpacing=0;_spaceBetween=0;_multiline=!0;_milestoneShape="diamond";itemsById=new Map;annotatedItems=[];lines=[];itemClickListeners=[];itemMouseEnterListeners=[];itemMouseMoveListeners=[];itemMouseLeaveListeners=[];addItemClickListener(e){this.itemClickListeners.push(e)}removeItemClickListener(e){this.itemClickListeners=this.itemClickListeners.filter(t=>t!==e)}addItemMouseEnterListener(e){this.itemMouseEnterListeners.push(e)}removeItemMouseEnterListener(e){this.itemMouseEnterListeners=this.itemMouseEnterListeners.filter(t=>t!==e)}addItemMouseMoveListener(e){this.itemMouseMoveListeners.push(e)}removeItemMouseMoveListener(e){this.itemMouseMoveListeners=this.itemMouseMoveListeners.filter(t=>t!==e)}addItemMouseLeaveListener(e){this.itemMouseLeaveListeners.push(e)}removeItemMouseLeaveListener(e){this.itemMouseLeaveListeners=this.itemMouseLeaveListeners.filter(t=>t!==e)}processData(){this.annotatedItems.length=0;for(let e of this.items||[]){let t=this.itemsById.get(e);t===void 0&&(t="item_band_"+rt++);let i=w(v({},e),{hovered:!1,region:{id:t,parentId:Pe,cursor:this.itemCursor,click:()=>{this.itemClickListeners.forEach(n=>n({item:e}))},mouseEnter:n=>{i.hovered=!0,this.reportMutation(),this.itemMouseEnterListeners.forEach(r=>r({clientX:n.clientX,clientY:n.clientY,item:e}))},mouseMove:n=>{this.itemMouseMoveListeners.forEach(r=>r({clientX:n.clientX,clientY:n.clientY,item:e}))},mouseLeave:n=>{i.hovered=!1,this.reportMutation(),this.itemMouseLeaveListeners.forEach(r=>r({clientX:n.clientX,clientY:n.clientY,item:e}))}}});this.annotatedItems.push(i)}this.itemsById.clear();for(let e of this.annotatedItems)this.itemsById.set(e,e.region.id)}calculateContentHeight(e){this.measureItems(e);let t=this.annotatedItems.filter(n=>!!n.drawInfo);this.lines=this.multiline?this.wrapItems(t):[t];let i;return this.lines.length?(i=this.itemHeight*this.lines.length,i+=this.lineSpacing*(this.lines.length-1),i):this.itemHeight}drawBandContent(e){for(let t=0;t<this.lines.length;t++){let i=this.lines[t],n=t*(this.lineSpacing+this.itemHeight);for(let r of i)r.drawInfo.milestone?this.drawMilestone(e,r,n):this.drawItem(e,r,n)}}drawMilestone(e,t,i){let{startX:n,renderStartX:r,renderStopX:o,label:s,font:a,marginLeft:l}=t.drawInfo,h={x:n,y:i,width:this.itemHeight,height:this.itemHeight},d={fill:t.background??this.itemBackground,borderWidth:t.borderWidth??this.itemBorderWidth,borderColor:t.borderColor??this.itemBorderColor,borderDash:t.borderDash??this.itemBorderDash};if(this.drawMilestoneShape(e,h,d),t.hovered){let u=t.hoverBackground??this.itemHoverBackground,g=w(v({},d),{fill:u});this.drawMilestoneShape(e,h,g)}e.addHitRegion(t.region).addRect(r,i,o-r,this.itemHeight),s&&e.fillText({x:n+h.width+l,y:i+h.height/2,text:s,font:a,baseline:"middle",align:"left",color:t.textColor??this.itemTextColor})}drawMilestoneShape(e,t,i){switch(this.milestoneShape){case"circle":tt(e,t,i);break;case"diamond":Je(e,t,i);break;case"dot":et(e,t,i);break;case"reverse_triangle":nt(e,t,i);break;case"triangle":it(e,t,i);break}}drawItem(e,t,i){let{startX:n,stopX:r,label:o,renderStartX:s,renderStopX:a,marginLeft:l,offscreenStart:h,labelFitsBox:d,font:u}=t.drawInfo,g={x:Math.round(n),y:i,width:Math.round(r-Math.round(n)),height:this.itemHeight},b=t.cornerRadius??this.itemCornerRadius;e.fillRect(w(v({},g),{rx:b,ry:b,fill:t.background??this.itemBackground})),t.hovered&&e.fillRect(w(v({},g),{rx:b,ry:b,fill:t.hoverBackground??this.itemHoverBackground})),e.addHitRegion(t.region).addRect(s,i,a-s,this.itemHeight);let C=t.borderWidth??this.itemBorderWidth;if(C&&e.strokeRect(w(v({},g),{rx:b,ry:b,color:t.borderColor??this.itemBorderColor,lineWidth:C,dash:t.borderDash??this.itemBorderDash,crispen:!0})),o){let T=g.x+l,_=g.y+g.height/2;if(h&&(T=this.timeline.positionTime(this.timeline.start)),d||this.itemTextOverflow==="show")e.fillText({x:T,y:_,text:o,font:u,baseline:"middle",align:"left",color:t.textColor??this.itemTextColor});else if(this.itemTextOverflow==="clip"){let P=document.createElement("canvas");P.width=g.width,P.height=g.height;let z=P.getContext("2d");z.fillStyle=t.textColor??this.itemTextColor,z.font=u,z.textBaseline="middle",z.textAlign="left",z.fillText(o,l,g.height/2),e.ctx.drawImage(P,g.x,g.y)}}}measureItems(e){for(let t of this.annotatedItems){let i=!t.stop,n=t.start,r=t.stop||t.start;if(n>this.timeline.stop||r<this.timeline.start){t.drawInfo=void 0;continue}let o=t.label||"",s=t.textSize??this.itemTextSize,a=t.fontFamily??this.itemFontFamily,l=`${s}px ${a}`,h=t.marginLeft??this.itemMarginLeft,d=n<this.timeline.start&&r>this.timeline.start,u,g=this.timeline.positionTime(n),b=this.timeline.positionTime(r),C,T;if(i){let _=this.itemHeight/2;if(g-=_,b+=_,C=g,T=b,u=!1,o&&this.itemTextOverflow==="show"){let P=e.measureText(o,l);T+=h+P.width}else o=""}else{d&&(o="\u25C0"+o);let _=e.measureText(o,l);d?(C=this.timeline.positionTime(this.timeline.start),T=Math.max(C+_.width,b),u=!1):(C=g,T=b,u=T-C-h>=_.width,u||(this.itemTextOverflow==="show"?T=C+h+_.width:this.itemTextOverflow==="hide"&&(o="")))}t.drawInfo={font:l,marginLeft:h,offscreenStart:d,startX:g,stopX:b,renderStartX:C,renderStopX:T,label:o,labelFitsBox:u,milestone:i}}}wrapItems(e){let t=[];for(let i of e){let{renderStartX:n,renderStopX:r}=i.drawInfo,o=!1;for(let s of t){let a=0,l=s.length-1;for(;a<=l;){let h=Math.floor((a+l)/2),d=s[h].drawInfo.renderStartX,u=s[h].drawInfo.renderStopX;if(r+this.spaceBetween<=d)l=h-1;else if(n>=u+this.spaceBetween)a=h+1;else break}if(a>l){s.splice(a,0,i),o=!0;break}}o||t.push([i])}return t}get items(){return this._items}set items(e){this._items=e,this.processData(),this.reportMutation()}get itemHeight(){return this._itemHeight}set itemHeight(e){this._itemHeight=e,this.reportMutation()}get itemBackground(){return this._itemBackground}set itemBackground(e){this._itemBackground=e,this.reportMutation()}get itemTextColor(){return this._itemTextColor}set itemTextColor(e){this._itemTextColor=e,this.reportMutation()}get itemTextSize(){return this._itemTextSize}set itemTextSize(e){this._itemTextSize=e,this.reportMutation()}get itemFontFamily(){return this._itemFontFamily}set itemFontFamily(e){this._itemFontFamily=e,this.reportMutation()}get itemBorderWidth(){return this._itemBorderWidth}set itemBorderWidth(e){this._itemBorderWidth=e,this.reportMutation()}get itemBorderColor(){return this._itemBorderColor}set itemBorderColor(e){this._itemBorderColor=e,this.reportMutation()}get itemBorderDash(){return this._itemBorderDash}set itemBorderDash(e){this._itemBorderDash=e,this.reportMutation()}get itemMarginLeft(){return this._itemMarginLeft}set itemMarginLeft(e){this._itemMarginLeft=e,this.reportMutation()}get itemCornerRadius(){return this._itemCornerRadius}set itemCornerRadius(e){this._itemCornerRadius=e,this.reportMutation()}get multiline(){return this._multiline}set multiline(e){this._multiline=e,this.reportMutation()}get spaceBetween(){return this._spaceBetween}set spaceBetween(e){this._spaceBetween=e,this.reportMutation()}get lineSpacing(){return this._lineSpacing}set lineSpacing(e){this._lineSpacing=e,this.reportMutation()}get itemTextOverflow(){return this._itemTextOverflow}set itemTextOverflow(e){this._itemTextOverflow=e,this.reportMutation()}get itemCursor(){return this._itemCursor}set itemCursor(e){this._itemCursor=e,this.reportMutation()}get itemHoverBackground(){return this._itemHoverBackground}set itemHoverBackground(e){this._itemHoverBackground=e,this.reportMutation()}get milestoneShape(){return this._milestoneShape}set milestoneShape(e){this._milestoneShape=e,this.reportMutation()}};var ot=class extends re{_knobColor="red";_knobRadius=3;_lineColor="red";_lineWidth=1;_lineDash=[];_time;drawOverlay(e){if(this.time===void 0)return;let t=Math.round(this.timeline.positionTime(this.time)),i={x:t,y:0},n={x:t,y:e.height};e.strokePath({color:this.lineColor,lineWidth:this.lineWidth,dash:this.lineDash,path:new m(i.x+.5,i.y).lineTo(n.x+.5,n.y)}),this.drawKnob(e,i,n)}drawKnob(e,t,i){e.ctx.beginPath(),e.ctx.arc(t.x+.5,t.y,this.knobRadius,0,2*Math.PI),e.ctx.fillStyle=this.knobColor,e.ctx.fill()}get time(){return this._time}set time(e){this._time=e,this.reportMutation()}get knobColor(){return this._knobColor}set knobColor(e){this._knobColor=e,this.reportMutation()}get knobRadius(){return this._knobRadius}set knobRadius(e){this._knobRadius=e,this.reportMutation()}get lineColor(){return this._lineColor}set lineColor(e){this._lineColor=e,this.reportMutation()}get lineWidth(){return this._lineWidth}set lineWidth(e){this._lineWidth=e,this.reportMutation()}get lineDash(){return this._lineDash}set lineDash(e){this._lineDash=e,this.reportMutation()}},ln=class extends ot{mouseMoveListener=e=>{e.time!==this.time&&(this.time=e.time,this.reportMutation())};mouseLeaveListener=()=>{this.time=void 0,this.reportMutation()};constructor(e){super(e),this.lineColor="#cccccc",this.knobColor="#cccccc",this.lineDash=[4,3],e.addViewportMouseMoveListener(this.mouseMoveListener),e.addViewportMouseLeaveListener(this.mouseLeaveListener)}disconnectedCallback(){this.timeline.removeViewportMouseMoveListener(this.mouseMoveListener),this.timeline.removeViewportMouseLeaveListener(this.mouseLeaveListener)}};function f(e){let t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function M(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function N(e,t){let i=f(e);return isNaN(t)?M(e,NaN):(t&&i.setDate(i.getDate()+t),i)}function X(e,t){let i=f(e);if(isNaN(t))return M(e,NaN);if(!t)return i;let n=i.getDate(),r=M(e,i.getTime());r.setMonth(i.getMonth()+t+1,0);let o=r.getDate();return n>=o?r:(i.setFullYear(r.getFullYear(),r.getMonth(),n),i)}function Be(e,t){let i=+f(e);return M(e,i+t)}var st=Math.pow(10,8)*24*60*60*1e3,hn=-st,We=6048e5,at=864e5,lt=6e4,ht=36e5,dt=3600,He=dt*24,dn=He*7,ut=He*365.2425,ct=ut/12,un=ct*3;function q(e,t){return Be(e,t*ht)}var mt={};function A(){return mt}function R(e,t){let i=A(),n=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,r=f(e),o=r.getDay(),s=(o<n?7:0)+o-n;return r.setDate(r.getDate()-s),r.setHours(0,0,0,0),r}function Y(e){return R(e,{weekStartsOn:1})}function Re(e){let t=f(e),i=t.getFullYear(),n=M(e,0);n.setFullYear(i+1,0,4),n.setHours(0,0,0,0);let r=Y(n),o=M(e,0);o.setFullYear(i,0,4),o.setHours(0,0,0,0);let s=Y(o);return t.getTime()>=r.getTime()?i+1:t.getTime()>=s.getTime()?i:i-1}function ie(e){let t=f(e);return t.setHours(0,0,0,0),t}function he(e){let t=f(e),i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return i.setUTCFullYear(t.getFullYear()),+e-+i}function gt(e,t){let i=ie(e),n=ie(t),r=+i-he(i),o=+n-he(n);return Math.round((r-o)/at)}function ft(e){let t=Re(e),i=M(e,0);return i.setFullYear(t,0,4),i.setHours(0,0,0,0),Y(i)}function de(e,t){return Be(e,t*lt)}function pt(e,t){let i=t*7;return N(e,i)}function ze(e,t){return X(e,t*12)}function vt(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function wt(e){if(!vt(e)&&typeof e!="number")return!1;let t=f(e);return!isNaN(Number(t))}function xt(e){let t=f(e);return t.setDate(1),t.setHours(0,0,0,0),t}function Ee(e){let t=f(e),i=M(e,0);return i.setFullYear(t.getFullYear(),0,1),i.setHours(0,0,0,0),i}var bt={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},yt=(e,t,i)=>{let n,r=bt[e];return typeof r=="string"?n=r:t===1?n=r.one:n=r.other.replace("{{count}}",t.toString()),i?.addSuffix?i.comparison&&i.comparison>0?"in "+n:n+" ago":n};function Z(e){return(t={})=>{let i=t.width?String(t.width):e.defaultWidth;return e.formats[i]||e.formats[e.defaultWidth]}}var Mt={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ct={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Tt={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},_t={date:Z({formats:Mt,defaultWidth:"full"}),time:Z({formats:Ct,defaultWidth:"full"}),dateTime:Z({formats:Tt,defaultWidth:"full"})},Lt={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},kt=(e,t,i,n)=>Lt[e];function E(e){return(t,i)=>{let n=i?.context?String(i.context):"standalone",r;if(n==="formatting"&&e.formattingValues){let s=e.defaultFormattingWidth||e.defaultWidth,a=i?.width?String(i.width):s;r=e.formattingValues[a]||e.formattingValues[s]}else{let s=e.defaultWidth,a=i?.width?String(i.width):e.defaultWidth;r=e.values[a]||e.values[s]}let o=e.argumentCallback?e.argumentCallback(t):t;return r[o]}}var Dt={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},St={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Pt={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Bt={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Wt={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Ht={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Rt=(e,t)=>{let i=Number(e),n=i%100;if(n>20||n<10)switch(n%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},zt={ordinalNumber:Rt,era:E({values:Dt,defaultWidth:"wide"}),quarter:E({values:St,defaultWidth:"wide",argumentCallback:e=>e-1}),month:E({values:Pt,defaultWidth:"wide"}),day:E({values:Bt,defaultWidth:"wide"}),dayPeriod:E({values:Wt,defaultWidth:"wide",formattingValues:Ht,defaultFormattingWidth:"wide"})};function F(e){return(t,i={})=>{let n=i.width,r=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],o=t.match(r);if(!o)return null;let s=o[0],a=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(a)?Ft(a,u=>u.test(s)):Et(a,u=>u.test(s)),h;h=e.valueCallback?e.valueCallback(l):l,h=i.valueCallback?i.valueCallback(h):h;let d=t.slice(s.length);return{value:h,rest:d}}}function Et(e,t){for(let i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t(e[i]))return i}function Ft(e,t){for(let i=0;i<e.length;i++)if(t(e[i]))return i}function $t(e){return(t,i={})=>{let n=t.match(e.matchPattern);if(!n)return null;let r=n[0],o=t.match(e.parsePattern);if(!o)return null;let s=e.valueCallback?e.valueCallback(o[0]):o[0];s=i.valueCallback?i.valueCallback(s):s;let a=t.slice(r.length);return{value:s,rest:a}}}var Xt=/^(\d+)(th|st|nd|rd)?/i,Yt=/\d+/i,It={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Ot={any:[/^b/i,/^(a|c)/i]},Nt={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},qt={any:[/1/i,/2/i,/3/i,/4/i]},At={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Ut={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},jt={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Kt={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Zt={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Gt={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Vt={ordinalNumber:$t({matchPattern:Xt,parsePattern:Yt,valueCallback:e=>parseInt(e,10)}),era:F({matchPatterns:It,defaultMatchWidth:"wide",parsePatterns:Ot,defaultParseWidth:"any"}),quarter:F({matchPatterns:Nt,defaultMatchWidth:"wide",parsePatterns:qt,defaultParseWidth:"any",valueCallback:e=>e+1}),month:F({matchPatterns:At,defaultMatchWidth:"wide",parsePatterns:Ut,defaultParseWidth:"any"}),day:F({matchPatterns:jt,defaultMatchWidth:"wide",parsePatterns:Kt,defaultParseWidth:"any"}),dayPeriod:F({matchPatterns:Zt,defaultMatchWidth:"any",parsePatterns:Gt,defaultParseWidth:"any"})},x={code:"en-US",formatDistance:yt,formatLong:_t,formatRelative:kt,localize:zt,match:Vt,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Qt(e){let t=f(e);return gt(t,Ee(t))+1}function Jt(e){let t=f(e),i=+Y(t)-+ft(t);return Math.round(i/We)+1}function Fe(e,t){let i=f(e),n=i.getFullYear(),r=A(),o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,s=M(e,0);s.setFullYear(n+1,0,o),s.setHours(0,0,0,0);let a=R(s,t),l=M(e,0);l.setFullYear(n,0,o),l.setHours(0,0,0,0);let h=R(l,t);return i.getTime()>=a.getTime()?n+1:i.getTime()>=h.getTime()?n:n-1}function ei(e,t){let i=A(),n=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,r=Fe(e,t),o=M(e,0);return o.setFullYear(r,0,n),o.setHours(0,0,0,0),R(o,t)}function ti(e,t){let i=f(e),n=+R(i,t)-+ei(i,t);return Math.round(n/We)+1}function c(e,t){let i=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return i+n}var L={y(e,t){let i=e.getFullYear(),n=i>0?i:1-i;return c(t==="yy"?n%100:n,t.length)},M(e,t){let i=e.getMonth();return t==="M"?String(i+1):c(i+1,2)},d(e,t){return c(e.getDate(),t.length)},a(e,t){let i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return i.toUpperCase();case"aaa":return i;case"aaaaa":return i[0];case"aaaa":default:return i==="am"?"a.m.":"p.m."}},h(e,t){return c(e.getHours()%12||12,t.length)},H(e,t){return c(e.getHours(),t.length)},m(e,t){return c(e.getMinutes(),t.length)},s(e,t){return c(e.getSeconds(),t.length)},S(e,t){let i=t.length,n=e.getMilliseconds(),r=Math.trunc(n*Math.pow(10,i-3));return c(r,t.length)}},B={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ue={G:function(e,t,i){let n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return i.era(n,{width:"abbreviated"});case"GGGGG":return i.era(n,{width:"narrow"});case"GGGG":default:return i.era(n,{width:"wide"})}},y:function(e,t,i){if(t==="yo"){let n=e.getFullYear(),r=n>0?n:1-n;return i.ordinalNumber(r,{unit:"year"})}return L.y(e,t)},Y:function(e,t,i,n){let r=Fe(e,n),o=r>0?r:1-r;if(t==="YY"){let s=o%100;return c(s,2)}return t==="Yo"?i.ordinalNumber(o,{unit:"year"}):c(o,t.length)},R:function(e,t){let i=Re(e);return c(i,t.length)},u:function(e,t){let i=e.getFullYear();return c(i,t.length)},Q:function(e,t,i){let n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return c(n,2);case"Qo":return i.ordinalNumber(n,{unit:"quarter"});case"QQQ":return i.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,i){let n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return c(n,2);case"qo":return i.ordinalNumber(n,{unit:"quarter"});case"qqq":return i.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return i.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,i){let n=e.getMonth();switch(t){case"M":case"MM":return L.M(e,t);case"Mo":return i.ordinalNumber(n+1,{unit:"month"});case"MMM":return i.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return i.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,i){let n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return c(n+1,2);case"Lo":return i.ordinalNumber(n+1,{unit:"month"});case"LLL":return i.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return i.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,i,n){let r=ti(e,n);return t==="wo"?i.ordinalNumber(r,{unit:"week"}):c(r,t.length)},I:function(e,t,i){let n=Jt(e);return t==="Io"?i.ordinalNumber(n,{unit:"week"}):c(n,t.length)},d:function(e,t,i){return t==="do"?i.ordinalNumber(e.getDate(),{unit:"date"}):L.d(e,t)},D:function(e,t,i){let n=Qt(e);return t==="Do"?i.ordinalNumber(n,{unit:"dayOfYear"}):c(n,t.length)},E:function(e,t,i){let n=e.getDay();switch(t){case"E":case"EE":case"EEE":return i.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return i.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(n,{width:"short",context:"formatting"});case"EEEE":default:return i.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,i,n){let r=e.getDay(),o=(r-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return c(o,2);case"eo":return i.ordinalNumber(o,{unit:"day"});case"eee":return i.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return i.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(r,{width:"short",context:"formatting"});case"eeee":default:return i.day(r,{width:"wide",context:"formatting"})}},c:function(e,t,i,n){let r=e.getDay(),o=(r-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return c(o,t.length);case"co":return i.ordinalNumber(o,{unit:"day"});case"ccc":return i.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return i.day(r,{width:"narrow",context:"standalone"});case"cccccc":return i.day(r,{width:"short",context:"standalone"});case"cccc":default:return i.day(r,{width:"wide",context:"standalone"})}},i:function(e,t,i){let n=e.getDay(),r=n===0?7:n;switch(t){case"i":return String(r);case"ii":return c(r,t.length);case"io":return i.ordinalNumber(r,{unit:"day"});case"iii":return i.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return i.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return i.day(n,{width:"short",context:"formatting"});case"iiii":default:return i.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,i){let n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,i){let n=e.getHours(),r;switch(n===12?r=B.noon:n===0?r=B.midnight:r=n/12>=1?"pm":"am",t){case"b":case"bb":return i.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return i.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return i.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,i){let n=e.getHours(),r;switch(n>=17?r=B.evening:n>=12?r=B.afternoon:n>=4?r=B.morning:r=B.night,t){case"B":case"BB":case"BBB":return i.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return i.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,i){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),i.ordinalNumber(n,{unit:"hour"})}return L.h(e,t)},H:function(e,t,i){return t==="Ho"?i.ordinalNumber(e.getHours(),{unit:"hour"}):L.H(e,t)},K:function(e,t,i){let n=e.getHours()%12;return t==="Ko"?i.ordinalNumber(n,{unit:"hour"}):c(n,t.length)},k:function(e,t,i){let n=e.getHours();return n===0&&(n=24),t==="ko"?i.ordinalNumber(n,{unit:"hour"}):c(n,t.length)},m:function(e,t,i){return t==="mo"?i.ordinalNumber(e.getMinutes(),{unit:"minute"}):L.m(e,t)},s:function(e,t,i){return t==="so"?i.ordinalNumber(e.getSeconds(),{unit:"second"}):L.s(e,t)},S:function(e,t){return L.S(e,t)},X:function(e,t,i){let n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return me(n);case"XXXX":case"XX":return D(n);case"XXXXX":case"XXX":default:return D(n,":")}},x:function(e,t,i){let n=e.getTimezoneOffset();switch(t){case"x":return me(n);case"xxxx":case"xx":return D(n);case"xxxxx":case"xxx":default:return D(n,":")}},O:function(e,t,i){let n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+ce(n,":");case"OOOO":default:return"GMT"+D(n,":")}},z:function(e,t,i){let n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+ce(n,":");case"zzzz":default:return"GMT"+D(n,":")}},t:function(e,t,i){let n=Math.trunc(e.getTime()/1e3);return c(n,t.length)},T:function(e,t,i){let n=e.getTime();return c(n,t.length)}};function ce(e,t=""){let i=e>0?"-":"+",n=Math.abs(e),r=Math.trunc(n/60),o=n%60;return o===0?i+String(r):i+String(r)+t+c(o,2)}function me(e,t){return e%60===0?(e>0?"-":"+")+c(Math.abs(e)/60,2):D(e,t)}function D(e,t=""){let i=e>0?"-":"+",n=Math.abs(e),r=c(Math.trunc(n/60),2),o=c(n%60,2);return i+r+t+o}var ge=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},$e=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},ii=(e,t)=>{let i=e.match(/(P+)(p+)?/)||[],n=i[1],r=i[2];if(!r)return ge(e,t);let o;switch(n){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",ge(n,t)).replace("{{time}}",$e(r,t))},ni={p:$e,P:ii},ri=/^D+$/,oi=/^Y+$/,si=["D","DD","YY","YYYY"];function ai(e){return ri.test(e)}function li(e){return oi.test(e)}function hi(e,t,i){let n=di(e,t,i);if(console.warn(n),si.includes(e))throw new RangeError(n)}function di(e,t,i){let n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${i}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}var ui=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ci=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,mi=/^'([^]*?)'?$/,gi=/''/g,fi=/[a-zA-Z]/;function pi(e,t,i){let n=A(),r=i?.locale??n.locale??x,o=i?.firstWeekContainsDate??i?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,s=i?.weekStartsOn??i?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,a=f(e);if(!wt(a))throw new RangeError("Invalid time value");let l=t.match(ci).map(d=>{let u=d[0];if(u==="p"||u==="P"){let g=ni[u];return g(d,r.formatLong)}return d}).join("").match(ui).map(d=>{if(d==="''")return{isToken:!1,value:"'"};let u=d[0];if(u==="'")return{isToken:!1,value:vi(d)};if(ue[u])return{isToken:!0,value:d};if(u.match(fi))throw new RangeError("Format string contains an unescaped latin alphabet character `"+u+"`");return{isToken:!1,value:d}});r.localize.preprocessor&&(l=r.localize.preprocessor(a,l));let h={firstWeekContainsDate:o,weekStartsOn:s,locale:r};return l.map(d=>{if(!d.isToken)return d.value;let u=d.value;(!i?.useAdditionalWeekYearTokens&&li(u)||!i?.useAdditionalDayOfYearTokens&&ai(u))&&hi(u,t,String(e));let g=ue[u[0]];return g(a,u,r.localize,h)}).join("")}function vi(e){let t=e.match(mi);return t?t[1].replace(gi,"'"):e}function wi(e){let t=f(e);return t.setMinutes(0,0,0),t}function xi(e,t){let i=f(e);return i.setHours(t),i}function bi(e){let t=f(e),i=t.getFullYear(),n=Math.floor(i/10)*10;return t.setFullYear(n,0,1),t.setHours(0,0,0,0),t}function fe(e,t,i){let n=Ci(e,i.timeZone,i.locale);return"formatToParts"in n?yi(n,t):Mi(n,t)}function yi(e,t){let i=e.formatToParts(t);for(let n=i.length-1;n>=0;--n)if(i[n].type==="timeZoneName")return i[n].value}function Mi(e,t){let i=e.format(t).replace(/\u200E/g,""),n=/ [\w-+ ]+$/.exec(i);return n?n[0].substr(1):""}function Ci(e,t,i){return new Intl.DateTimeFormat(i?[i.code,"en-US"]:void 0,{timeZone:t,timeZoneName:e})}function Ti(e,t){let i=Di(t);return"formatToParts"in i?Li(i,e):ki(i,e)}var _i={year:0,month:1,day:2,hour:3,minute:4,second:5};function Li(e,t){try{let i=e.formatToParts(t),n=[];for(let r=0;r<i.length;r++){let o=_i[i[r].type];o!==void 0&&(n[o]=parseInt(i[r].value,10))}return n}catch(i){if(i instanceof RangeError)return[NaN];throw i}}function ki(e,t){let i=e.format(t),n=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(i);return[parseInt(n[3],10),parseInt(n[1],10),parseInt(n[2],10),parseInt(n[4],10),parseInt(n[5],10),parseInt(n[6],10)]}var G={};function Di(e){if(!G[e]){let t=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),i=t==="06/25/2014, 00:00:00"||t==="\u200E06\u200E/\u200E25\u200E/\u200E2014\u200E \u200E00\u200E:\u200E00\u200E:\u200E00";G[e]=i?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return G[e]}function oe(e,t,i,n,r,o,s){let a=new Date(0);return a.setUTCFullYear(e,t,i),a.setUTCHours(n,r,o,s),a}var pe=36e5,Si=6e4,V={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function U(e,t,i){if(!e)return 0;let n=V.timezoneZ.exec(e);if(n)return 0;let r,o;if(n=V.timezoneHH.exec(e),n)return r=parseInt(n[1],10),ve(r)?-(r*pe):NaN;if(n=V.timezoneHHMM.exec(e),n){r=parseInt(n[2],10);let s=parseInt(n[3],10);return ve(r,s)?(o=Math.abs(r)*pe+s*Si,n[1]==="+"?-o:o):NaN}if(Wi(e)){t=new Date(t||Date.now());let s=i?t:Pi(t),a=ne(s,e);return-(i?a:Bi(t,a,e))}return NaN}function Pi(e){return oe(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function ne(e,t){let i=Ti(e,t),n=oe(i[0],i[1]-1,i[2],i[3]%24,i[4],i[5],0).getTime(),r=e.getTime(),o=r%1e3;return r-=o>=0?o:1e3+o,n-r}function Bi(e,t,i){let n=e.getTime()-t,r=ne(new Date(n),i);if(t===r)return t;n-=r-t;let o=ne(new Date(n),i);return r===o?r:Math.max(r,o)}function ve(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}var we={};function Wi(e){if(we[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),we[e]=!0,!0}catch{return!1}}var Hi=60*1e3,Ri={X:function(e,t,i){let n=Q(i.timeZone,e);if(n===0)return"Z";switch(t){case"X":return xe(n);case"XXXX":case"XX":return W(n);case"XXXXX":case"XXX":default:return W(n,":")}},x:function(e,t,i){let n=Q(i.timeZone,e);switch(t){case"x":return xe(n);case"xxxx":case"xx":return W(n);case"xxxxx":case"xxx":default:return W(n,":")}},O:function(e,t,i){let n=Q(i.timeZone,e);switch(t){case"O":case"OO":case"OOO":return"GMT"+zi(n,":");case"OOOO":default:return"GMT"+W(n,":")}},z:function(e,t,i){switch(t){case"z":case"zz":case"zzz":return fe("short",e,i);case"zzzz":default:return fe("long",e,i)}}};function Q(e,t){let i=e?U(e,t,!0)/Hi:t?.getTimezoneOffset()??0;if(Number.isNaN(i))throw new RangeError("Invalid time zone specified: "+e);return i}function I(e,t){let i=e<0?"-":"",n=Math.abs(e).toString();for(;n.length<t;)n="0"+n;return i+n}function W(e,t=""){let i=e>0?"-":"+",n=Math.abs(e),r=I(Math.floor(n/60),2),o=I(Math.floor(n%60),2);return i+r+t+o}function xe(e,t){return e%60===0?(e>0?"-":"+")+I(Math.abs(e)/60,2):W(e,t)}function zi(e,t=""){let i=e>0?"-":"+",n=Math.abs(e),r=Math.floor(n/60),o=n%60;return o===0?i+String(r):i+String(r)+t+I(o,2)}function be(e){let t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+e-+t}var Xe=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,J=36e5,ye=6e4,Ei=2,p={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:Xe};function O(e,t={}){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);let i=t.additionalDigits==null?Ei:Number(t.additionalDigits);if(i!==2&&i!==1&&i!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(Object.prototype.toString.call(e)!=="[object String]")return new Date(NaN);let n=Fi(e),{year:r,restDateString:o}=$i(n.date,i),s=Xi(o,r);if(s===null||isNaN(s.getTime()))return new Date(NaN);if(s){let a=s.getTime(),l=0,h;if(n.time&&(l=Yi(n.time),l===null||isNaN(l)))return new Date(NaN);if(n.timeZone||t.timeZone){if(h=U(n.timeZone||t.timeZone,new Date(a+l)),isNaN(h))return new Date(NaN)}else h=be(new Date(a+l)),h=be(new Date(a+l+h));return new Date(a+l+h)}else return new Date(NaN)}function Fi(e){let t={},i=p.dateTimePattern.exec(e),n;if(i?(t.date=i[1],n=i[3]):(i=p.datePattern.exec(e),i?(t.date=i[1],n=i[2]):(t.date=null,n=e)),n){let r=p.timeZone.exec(n);r?(t.time=n.replace(r[1],""),t.timeZone=r[1].trim()):t.time=n}return t}function $i(e,t){if(e){let i=p.YYY[t],n=p.YYYYY[t],r=p.YYYY.exec(e)||n.exec(e);if(r){let o=r[1];return{year:parseInt(o,10),restDateString:e.slice(o.length)}}if(r=p.YY.exec(e)||i.exec(e),r){let o=r[1];return{year:parseInt(o,10)*100,restDateString:e.slice(o.length)}}}return{year:null}}function Xi(e,t){if(t===null)return null;let i,n,r;if(!e||!e.length)return i=new Date(0),i.setUTCFullYear(t),i;let o=p.MM.exec(e);if(o)return i=new Date(0),n=parseInt(o[1],10)-1,Ce(t,n)?(i.setUTCFullYear(t,n),i):new Date(NaN);if(o=p.DDD.exec(e),o){i=new Date(0);let s=parseInt(o[1],10);return Ni(t,s)?(i.setUTCFullYear(t,0,s),i):new Date(NaN)}if(o=p.MMDD.exec(e),o){i=new Date(0),n=parseInt(o[1],10)-1;let s=parseInt(o[2],10);return Ce(t,n,s)?(i.setUTCFullYear(t,n,s),i):new Date(NaN)}if(o=p.Www.exec(e),o)return r=parseInt(o[1],10)-1,Te(r)?Me(t,r):new Date(NaN);if(o=p.WwwD.exec(e),o){r=parseInt(o[1],10)-1;let s=parseInt(o[2],10)-1;return Te(r,s)?Me(t,r,s):new Date(NaN)}return null}function Yi(e){let t,i,n=p.HH.exec(e);if(n)return t=parseFloat(n[1].replace(",",".")),ee(t)?t%24*J:NaN;if(n=p.HHMM.exec(e),n)return t=parseInt(n[1],10),i=parseFloat(n[2].replace(",",".")),ee(t,i)?t%24*J+i*ye:NaN;if(n=p.HHMMSS.exec(e),n){t=parseInt(n[1],10),i=parseInt(n[2],10);let r=parseFloat(n[3].replace(",","."));return ee(t,i,r)?t%24*J+i*ye+r*1e3:NaN}return null}function Me(e,t,i){t=t||0,i=i||0;let n=new Date(0);n.setUTCFullYear(e,0,4);let r=n.getUTCDay()||7,o=t*7+i+1-r;return n.setUTCDate(n.getUTCDate()+o),n}var Ii=[31,28,31,30,31,30,31,31,30,31,30,31],Oi=[31,29,31,30,31,30,31,31,30,31,30,31];function Ye(e){return e%400===0||e%4===0&&e%100!==0}function Ce(e,t,i){if(t<0||t>11)return!1;if(i!=null){if(i<1)return!1;let n=Ye(e);if(n&&i>Oi[t]||!n&&i>Ii[t])return!1}return!0}function Ni(e,t){if(t<1)return!1;let i=Ye(e);return!(i&&t>366||!i&&t>365)}function Te(e,t){return!(e<0||e>52||t!=null&&(t<0||t>6))}function ee(e,t,i){return!(e<0||e>=25||t!=null&&(t<0||t>=60)||i!=null&&(i<0||i>=60))}var qi=/([xXOz]+)|''|'(''|[^'])+('|$)/g;function Ai(e,t,i={}){t=String(t);let n=t.match(qi);if(n){let r=O(i.originalDate||e,i);t=n.reduce(function(o,s){if(s[0]==="'")return o;let a=o.indexOf(s),l=o[a-1]==="'",h=o.replace(s,"'"+Ri[s[0]](r,s,i)+"'");return l?h.substring(0,a-1)+h.substring(a+1):h},t)}return pi(e,t,i)}function k(e,t,i){e=O(e,i);let n=U(t,e,!0),r=new Date(e.getTime()-n),o=new Date(0);return o.setFullYear(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()),o.setHours(r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.getUTCMilliseconds()),o}function y(e,t,i,n){return n=w(v({},n),{timeZone:t,originalDate:e}),Ai(k(e,t,{timeZone:n.timeZone}),i,n)}function S(e,t,i){if(typeof e=="string"&&!e.match(Xe))return O(e,w(v({},i),{timeZone:t}));e=O(e,i);let n=oe(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()).getTime(),r=U(t,new Date(n));return new Date(n+r)}function Ui(e,t){return e=k(e,t),e=wi(e),S(e,t)}function ji(e,t){return e=k(e,t),e=ie(e),S(e,t)}function Ie(e,t){return e=k(e,t),e=R(e,{weekStartsOn:1}),S(e,t)}function Ki(e,t){return e=k(e,t),e=xt(e),S(e,t)}function Oe(e,t){return e=k(e,t),e=Ee(e),S(e,t)}function Zi(e,t){return e=k(e,t),e=bi(e),S(e,t)}function Gi(e,t,i){return e=k(e,i),e=xi(e,t),S(e,i)}var cn=class extends H{_contentHeight=30;_textColor="grey";_fullHeight=!1;_timezone;_scale="auto";hourScale=new Vi;quarterDayScale=new Qi;weekDayScale=new Ji;weekScale=new en;monthScale=new tn;yearScale=new nn;decadeScale=new rn;orderedScales=[this.decadeScale,this.yearScale,this.monthScale,this.weekScale,this.weekDayScale,this.quarterDayScale,this.hourScale];scaleRenderer;calculateContentHeight(e){return this.contentHeight}drawBandContent(e){this.scaleRenderer=this.determineScale(),this.scaleRenderer.drawBandContent(e,this)}drawUnderlay(e){this.scaleRenderer.drawUnderlay(e,this)}get contentHeight(){return this._contentHeight}set contentHeight(e){this._contentHeight=e,this.reportMutation()}get fullHeight(){return this._fullHeight}set fullHeight(e){this._fullHeight=e,this.reportMutation()}get textColor(){return this._textColor}set textColor(e){this._textColor=e,this.reportMutation()}get timezone(){return this._timezone}set timezone(e){this._timezone=e,this.reportMutation()}get scale(){return this._scale}set scale(e){this._scale=e,this.reportMutation()}determineScale(){switch(this._scale){case"hour":return this.hourScale;case"quarterDay":return this.quarterDayScale;case"weekDay":return this.weekDayScale;case"week":return this.weekScale;case"month":return this.monthScale;case"year":return this.yearScale;case"decade":return this.decadeScale}let e=this.orderedScales[0];for(let t=1;t<this.orderedScales.length;t++){let i=this.orderedScales[t];if(i.measureUnitWidth(this)>=i.getPreferredUnitWidth())e=i;else break}return e}},Vi=class{majorX=[];majorLabels=[];midX=[];minorX=[];getPreferredUnitWidth(){return 38}measureUnitWidth(e){let t=e.timeline.start,i=t+36e5;return e.timeline.positionTime(i)-e.timeline.positionTime(t)}drawBandContent(e,t){let i=new Date(t.timeline.start),n=t.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone;i=Ui(i,n);let r=t.timeline.distanceBetween(i.getTime(),de(i,30).getTime()),o=t.timeline.distanceBetween(i.getTime(),de(i,15).getTime());for(this.majorX.length=0,this.majorLabels.length=0,this.midX.length=0,this.minorX.length=0;i.getTime()<=t.timeline.stop;){let h=t.timeline.positionTime(i.getTime());this.majorX.push(h),this.minorX.push(h+o),this.midX.push(h+r),this.minorX.push(h+r+o);let d=y(i,n,"HH",{locale:x});d==="00"&&(d=y(i,n,"MMM dd",{locale:x})),this.majorLabels.push(d),i=q(i,1)}let s=e.height,a=new m(0,0);for(let h of this.majorX)a.moveTo(Math.round(h)+.5,0),a.lineTo(Math.round(h)+.5,s);for(let h of this.midX)a.moveTo(Math.round(h)+.5,s*.6),a.lineTo(Math.round(h)+.5,s);for(let h of this.minorX)a.moveTo(Math.round(h)+.5,s*.8),a.lineTo(Math.round(h)+.5,s);e.strokePath({color:t.timeline.bandBorderColor,path:a});let l=`${t.timeline.textSize}px ${t.timeline.fontFamily}`;for(let h=0;h<this.majorLabels.length;h++){let d=this.majorLabels[h],u=this.majorX[h];d.length>2?(e.fillText({x:u+2,y:s*.75,text:"00",font:l,color:t.textColor,baseline:"middle",align:"left"}),e.fillText({x:u+2,y:s/4,text:d,font:l,color:t.textColor,baseline:"middle",align:"left"})):e.fillText({x:u+2,y:s/2,text:d,font:l,color:t.textColor,baseline:"middle",align:"left"})}}drawUnderlay(e,t){if(t.fullHeight){let i=new m(0,0);for(let n of this.majorX)i.moveTo(Math.round(n)+.5,t.y+t.height),i.lineTo(Math.round(n)+.5,e.height);e.strokePath({color:t.timeline.bandBorderColor,path:i})}}},Qi=class{majorX=[];getPreferredUnitWidth(){return 30}measureUnitWidth(e){let t=e.timeline.start,i=t+6*36e5;return e.timeline.positionTime(i)-e.timeline.positionTime(t)}drawBandContent(e,t){let i=new Date(t.timeline.start),n=t.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone;i=ji(i,n),this.majorX.length=0;let r=e.height,o=`${t.timeline.textSize}px ${t.timeline.fontFamily}`;for(;i.getTime()<=t.timeline.stop;){let s=t.timeline.positionTime(i.getTime());this.majorX.push(s),e.strokePath({color:t.timeline.bandBorderColor,path:new m(0,0).moveTo(Math.round(s)+.5,0).lineTo(Math.round(s)+.5,r)}),e.fillText({x:s+2,y:r/4,text:y(i,n,"EEE dd/MM",{locale:x}),font:o,color:t.textColor,baseline:"middle",align:"left"});for(let a of[0,6,12,18]){let l=Gi(i,a,n);if(a!==0){let d=t.timeline.positionTime(l.getTime());e.strokePath({color:t.timeline.bandBorderColor,path:new m(0,0).moveTo(Math.round(d)+.5,r/2).lineTo(Math.round(d)+.5,r)})}let h=t.timeline.positionTime(q(l,3).getTime());e.fillText({x:h,y:r*.75,text:y(l,n,"HH",{locale:x}),font:o,color:t.textColor,baseline:"middle",align:"center"})}i=N(i,1)}}drawUnderlay(e,t){if(t.fullHeight){let i=new m(0,0);for(let n of this.majorX)i.moveTo(Math.round(n)+.5,t.y+t.height),i.lineTo(Math.round(n)+.5,e.height);e.strokePath({color:t.timeline.bandBorderColor,path:i})}}},Ji=class{majorX=[];getPreferredUnitWidth(){return 20}measureUnitWidth(e){let t=e.timeline.start,i=t+24*36e5;return e.timeline.positionTime(i)-e.timeline.positionTime(t)}drawBandContent(e,t){let i=new Date(t.timeline.start),n=t.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone;i=Ie(i,n),this.majorX.length=0;let r=e.height,o=`${t.timeline.textSize}px ${t.timeline.fontFamily}`;for(;i.getTime()<=t.timeline.stop;){let s=t.timeline.positionTime(i.getTime());this.majorX.push(s),e.strokePath({color:t.timeline.bandBorderColor,path:new m(0,0).moveTo(Math.round(s)+.5,0).lineTo(Math.round(s)+.5,r)}),e.fillText({x:s+2,y:r/4,text:y(i,n,"dd MMM, yy",{locale:x}),font:o,color:t.textColor,baseline:"middle",align:"left"});for(let a=0;a<7;a++){if(i=N(i,1),a!==6){let h=t.timeline.positionTime(i.getTime());e.strokePath({color:t.timeline.bandBorderColor,path:new m(0,0).moveTo(Math.round(h)+.5,r/2).lineTo(Math.round(h)+.5,r)})}let l=t.timeline.positionTime(q(i,12).getTime());e.fillText({x:l,y:r*.75,text:y(i,n,"EEEEE",{locale:x}),font:o,color:t.textColor,baseline:"middle",align:"center"})}}}drawUnderlay(e,t){if(t.fullHeight){let i=new m(0,0);for(let n of this.majorX)i.moveTo(Math.round(n)+.5,t.y+t.height),i.lineTo(Math.round(n)+.5,e.height);e.strokePath({color:t.timeline.bandBorderColor,path:i})}}},en=class{majorX=[];getPreferredUnitWidth(){return 50}measureUnitWidth(e){let t=e.timeline.start,i=t+7*24*36e5;return e.timeline.positionTime(i)-e.timeline.positionTime(t)}drawBandContent(e,t){let i=new Date(t.timeline.start),n=t.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone;i=Ki(i,n),this.majorX.length=0;let r=e.height,o=`${t.timeline.textSize}px ${t.timeline.fontFamily}`,s=i;for(;i.getTime()<=t.timeline.stop;){let a=t.timeline.positionTime(i.getTime());this.majorX.push(a),e.strokePath({color:t.timeline.bandBorderColor,path:new m(0,0).moveTo(Math.round(a)+.5,0).lineTo(Math.round(a)+.5,r/2)}),e.fillText({x:a+2,y:r/4,text:y(i,n,"LLLL",{locale:x}),font:o,color:t.textColor,baseline:"middle",align:"left"}),i=X(i,1)}for(i=Ie(s,n);i.getTime()<=t.timeline.stop;){let a=t.timeline.positionTime(i.getTime());e.strokePath({color:t.timeline.bandBorderColor,path:new m(0,0).moveTo(Math.round(a)+.5,r/2).lineTo(Math.round(a)+.5,r)});let l=N(q(i,12),3),h=t.timeline.positionTime(l.getTime());e.fillText({x:h,y:r*.75,text:y(i,n,"dd/MM",{locale:x}),font:o,color:t.textColor,baseline:"middle",align:"center"}),i=pt(i,1)}}drawUnderlay(e,t){if(t.fullHeight){let i=new m(0,0);for(let n of this.majorX)i.moveTo(Math.round(n)+.5,t.y+t.height),i.lineTo(Math.round(n)+.5,e.height);e.strokePath({color:t.timeline.bandBorderColor,path:i})}}},tn=class{majorX=[];getPreferredUnitWidth(){return 32}measureUnitWidth(e){let t=e.timeline.start,i=t+30*24*36e5;return e.timeline.positionTime(i)-e.timeline.positionTime(t)}drawBandContent(e,t){let i=new Date(t.timeline.start),n=t.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone;i=Oe(i,n),this.majorX.length=0;let r=e.height,o=`${t.timeline.textSize}px ${t.timeline.fontFamily}`;for(;i.getTime()<=t.timeline.stop;){let s=t.timeline.positionTime(i.getTime());this.majorX.push(s),e.strokePath({color:t.timeline.bandBorderColor,path:new m(0,0).moveTo(Math.round(s)+.5,0).lineTo(Math.round(s)+.5,r)}),e.fillText({x:s+2,y:r/4,text:y(i,n,"yyyy",{locale:x}),font:o,color:t.textColor,baseline:"middle",align:"left"});for(let a=0;a<12;a++){i=X(i,1);let l=t.timeline.positionTime(i.getTime());e.strokePath({color:t.timeline.bandBorderColor,path:new m(0,0).moveTo(Math.round(l)+.5,r/2).lineTo(Math.round(l)+.5,r)});let h=X(i,1).getTime(),d=t.timeline.positionTime((i.getTime()+h)/2);e.fillText({x:d,y:r*.75,text:y(i,n,"LLL",{locale:x}),font:o,color:t.textColor,baseline:"middle",align:"center"})}}}drawUnderlay(e,t){if(t.fullHeight){let i=new m(0,0);for(let n of this.majorX)i.moveTo(Math.round(n)+.5,t.y+t.height),i.lineTo(Math.round(n)+.5,e.height);e.strokePath({color:t.timeline.bandBorderColor,path:i})}}},nn=class{getPreferredUnitWidth(){return 49}measureUnitWidth(e){let t=e.timeline.start,i=t+365*24*36e5;return e.timeline.positionTime(i)-e.timeline.positionTime(t)}drawBandContent(e,t){let i=new Date(t.timeline.start),n=t.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone;i=Oe(i,n);let r=e.height,o=`${t.timeline.textSize}px ${t.timeline.fontFamily}`;for(;i.getTime()<=t.timeline.stop;){let s=t.timeline.positionTime(i.getTime());e.strokePath({color:t.timeline.bandBorderColor,path:new m(0,0).moveTo(Math.round(s)+.5,0).lineTo(Math.round(s)+.5,r)}),e.fillText({x:s+2,y:r/2,text:y(i,n,"yyyy",{locale:x}),font:o,color:t.textColor,baseline:"middle",align:"left"}),i=ze(i,1)}}drawUnderlay(e,t){}},rn=class{getPreferredUnitWidth(){return 49}measureUnitWidth(e){let t=e.timeline.start,i=t+10*365*24*36e5;return e.timeline.positionTime(i)-e.timeline.positionTime(t)}drawBandContent(e,t){let i=new Date(t.timeline.start),n=t.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone;i=Zi(i,n);let r=e.height,o=`${t.timeline.textSize}px ${t.timeline.fontFamily}`;for(;i.getTime()<=t.timeline.stop;){let s=t.timeline.positionTime(i.getTime());e.strokePath({color:t.timeline.bandBorderColor,path:new m(0,0).moveTo(Math.round(s)+.5,0).lineTo(Math.round(s)+.5,r)}),e.fillText({x:s+2,y:r/2,text:y(i,n,"yyyy",{locale:x})+"s",font:o,color:t.textColor,baseline:"middle",align:"left"}),i=ze(i,10)}}drawUnderlay(e,t){}};export{re as a,on as b,m as c,je as d,le as e,sn as f,an as g,ot as h,ln as i,cn as j};
