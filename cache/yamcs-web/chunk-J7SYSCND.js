import{a as Zt}from"./chunk-LXWDITUE.js";import{a as Jn}from"./chunk-5TTZVGVZ.js";import{a as Xn}from"./chunk-SM6BVRIH.js";import"./chunk-H5AEFDX2.js";import"./chunk-7J5Y77OX.js";import{$a as bt,$b as Oe,$e as xe,A as $e,Ae as Un,B as nt,Ba as De,Bb as He,Ca as o,Da as _,Db as lt,E as x,Ea as g,Ed as Ot,Ef as _t,Fa as at,Fb as me,Fd as Ye,G as Lt,Ga as nn,Gb as Ie,Gd as Be,Hb as bn,Hd as Ge,Hf as ge,I as $t,Ia as y,Ib as gn,Id as qe,Ie as Ce,J as I,Ja as Je,Jb as kt,Jd as ze,Jf as qn,K as R,Ka as Se,Kb as q,Kd as We,La as rt,Lb as Re,Ld as wn,Le as Bn,Ma as fn,Md as En,Nd as Mn,Nf as zn,O as Rt,Oa as f,Ob as Ae,Of as Wn,Pa as S,Pb as ke,Pe as Xe,Pf as Ct,Q as At,Qa as Ne,Qe as jn,Ra as _n,Sb as Pe,Se as Vn,Sf as Qn,Td as In,Te as xt,U as ct,Ud as Rn,Ue as yt,V as Ft,Wd as Yt,Wf as Qt,X as l,Xd as An,Y as d,Zd as kn,Ze as Wt,_a as pt,aa as s,ae as Le,ba as Nt,bb as Cn,bc as ue,be as Pn,ca as p,cb as B,ce as Ln,d as pn,da as un,db as hn,dc as xn,de as $n,df as ut,e as O,ea as Me,ec as jt,ee as H,fe as _e,ff as Hn,ga as h,gb as Sn,gc as ot,ge as z,ha as F,he as J,ia as N,ib as gt,ic as yn,ie as ne,j as ye,ja as U,jc as Tn,ka as a,ke as W,la as n,lc as Dn,le as X,lg as D,ma as c,mb as A,na as v,ne as Q,oa as b,oc as fe,oe as ae,of as be,og as Tt,p as Pt,pa as tn,pb as Bt,pf as On,q as dn,qa as j,qb as k,qe as ee,qf as ft,ra as w,rb as dt,re as te,rg as T,sa as u,sb as G,sc as Vt,sf as Qe,sg as je,ta as Ut,tb as K,tc as Ht,te as Z,tf as we,tg as Zn,ua as vt,ub as vn,uc as Ue,ue as Y,ug as Kn,ve as Gt,vf as Ee,wa as oe,we as qt,xa as re,xe as zt,xf as Yn,y as it,ya as le,ye as Fn,yf as Gn,ze as Nn}from"./chunk-SAZ6MTOG.js";var ea=(e,i)=>nt(an).canActivate(e,i);var an=class e{constructor(i,t){this.authService=i;this.router=t}canActivate(i,t){return this.authService.getUser().hasSystemPrivilege("web.AccessAdminArea")?!0:(this.router.navigate(["/403"],{queryParams:{page:t.url}}),!1)}canActivateChild(i,t){return this.canActivate(i,t)}static{this.\u0275fac=function(t){return new(t||e)($e(je),$e(G))}}static{this.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"})}};var Ve=(e,i)=>nt(on).canActivate(e,i);var on=class e{constructor(i,t){this.authService=i;this.router=t}canActivate(i,t){return this.authService.getUser().hasSystemPrivilege("ControlAccess")?!0:(this.router.navigate(["/403"],{queryParams:{page:t.url}}),!1)}canActivateChild(i,t){return this.canActivate(i,t)}static{this.\u0275fac=function(t){return new(t||e)($e(je),$e(G))}}static{this.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"})}};var ln=(e,i)=>nt(rn).canActivate(e,i);var rn=class e{constructor(i,t){this.authService=i;this.router=t}canActivate(i,t){return this.authService.getUser().hasSystemPrivilege("ControlArchiving")?!0:(this.router.navigate(["/403"],{queryParams:{page:t.url}}),!1)}canActivateChild(i,t){return this.canActivate(i,t)}static{this.\u0275fac=function(t){return new(t||e)($e(je),$e(G))}}static{this.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"})}};var ta=(e,i)=>nt(mn).canActivate(e,i);var mn=class e{constructor(i,t){this.authService=i;this.router=t}canActivate(i,t){return this.authService.getUser().hasSystemPrivilege("ControlServices")?!0:(this.router.navigate(["/403"],{queryParams:{page:t.url}}),!1)}canActivateChild(i,t){return this.canActivate(i,t)}static{this.\u0275fac=function(t){return new(t||e)($e(je),$e(G))}}static{this.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"})}};var mt=(e,i)=>nt(sn).canActivate(e,i);var sn=class e{constructor(i,t){this.authService=i;this.router=t}canActivate(i,t){return this.authService.getUser().hasSystemPrivilege("ReadSystemInfo")?!0:(this.router.navigate(["/403"],{queryParams:{page:t.url}}),!1)}canActivateChild(i,t){return this.canActivate(i,t)}static{this.\u0275fac=function(t){return new(t||e)($e(je),$e(G))}}static{this.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"})}};var ma=[[["app-admin-toolbar"]],[["ya-detail-pane"]],"*"],sa=["app-admin-toolbar","ya-detail-pane","*"],P=class e{constructor(){this.noscroll=!1}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=x({type:e,selectors:[["app-admin-page"]],inputs:{noscroll:"noscroll"},standalone:!0,features:[y],ngContentSelectors:sa,decls:4,vars:2,consts:[[1,"page-content"]],template:function(t,r){t&1&&(Ut(ma),vt(0),a(1,"div",0),vt(2,1),vt(3,2),n()),t&2&&(l(),un("overflow",r.noscroll?"hidden":"auto"))},dependencies:[T],styles:[".page-content[_ngcontent-%COMP%]{position:absolute;inset:49px 0 0;overflow:auto;font:400 12px/20px Roboto,sans-serif}"],changeDetection:0})}};var pa=["*"],L=class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=x({type:e,selectors:[["app-admin-toolbar"]],standalone:!0,features:[y],ngContentSelectors:pa,decls:4,vars:0,consts:[[1,"top"],[2,"flex","1 1 auto"]],template:function(t,r){t&1&&(Ut(),a(0,"mat-toolbar",0)(1,"mat-toolbar-row"),vt(2),c(3,"span",1),n()())},dependencies:[T,Ht,Vt],styles:["mat-toolbar[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.1);background-color:var(--y-background-color);box-sizing:content-box}mat-toolbar-row[_ngcontent-%COMP%]{padding-left:24px}.hide[_ngcontent-%COMP%]{visibility:hidden}.toolbar-text[_ngcontent-%COMP%]{font-size:12px}"],changeDetection:0})}};var da=()=>["detail"];function ua(e,i){if(e&1){let t=j();c(0,"ya-date-time-input",5)(1,"ya-date-time-input",6),a(2,"ya-button",7),w("click",function(){I(t);let m=u();return R(m.applyCustomDates())}),o(3,"Apply"),n()}if(e&2){let t=u();l(2),p("disabled",t.filterForm.invalid)}}function fa(e,i){if(e&1){let t=j();a(0,"ya-button",8),w("click",function(){I(t);let m=u();return R(m.jumpToNow())}),o(1,"Jump to now"),n()}}function _a(e,i){if(e&1&&(a(0,"td",22),o(1),n()),e&2){let t=i.$implicit;l(),g(" ",t.item.time.substring(11,16)," ")}}function Ca(e,i){if(e&1&&(a(0,"td",23),o(1),n()),e&2){let t=i.$implicit;l(),g(" ",t.item.user||"-"," ")}}function ha(e,i){if(e&1&&(a(0,"td",24),c(1,"span",25),f(2,"actionLogFormat"),n()),e&2){let t=i.$implicit;l(),p("innerHTML",S(2,1,t.item.summary)||"-",ct)}}function Sa(e,i){e&1&&(a(0,"mat-icon"),o(1,"expand_less"),n())}function va(e,i){e&1&&(a(0,"mat-icon"),o(1,"expand_more"),n())}function ba(e,i){if(e&1&&(a(0,"td",26),s(1,Sa,2,0,"mat-icon")(2,va,2,0,"mat-icon"),n()),e&2){let t=i.$implicit;l(),h(t.expanded?1:2)}}function ga(e,i){if(e&1&&(a(0,"dt",29),o(1),n(),a(2,"dd"),o(3),n()),e&2){let t=i.$implicit;l(),_(t.key),l(2),_(t.value||"")}}function xa(e,i){if(e&1&&(a(0,"td",27)(1,"dl",28)(2,"dt"),o(3,"Service"),n(),a(4,"dd"),o(5),n(),a(6,"dt"),o(7,"Method"),n(),a(8,"dd"),o(9),n(),N(10,ga,4,2,null,null,F),n()()),e&2){let t=i.$implicit,r=u(2);Nt("colspan",r.displayedColumns.length),l(5),_(t.item.service),l(4),_(t.item.method),l(),U(t.requestOptions)}}function ya(e,i){if(e&1){let t=j();a(0,"tr",30),w("click",function(){let m=I(t).$implicit;return R(m.expanded=!m.expanded)}),n()}if(e&2){let t=i.$implicit;Me("expanded",t.expanded)}}function Ta(e,i){if(e&1){let t=j();a(0,"tr",31),w("click",function(){let m=I(t).$implicit;return R(m.expanded=!m.expanded)}),n()}if(e&2){let t=i.$implicit;Me("expanded",t.expanded)}}function Da(e,i){if(e&1&&(a(0,"h4"),o(1),n(),a(2,"table",9),v(3,10),s(4,_a,2,1,"td",11),b(),v(5,12),s(6,Ca,2,1,"td",13),b(),v(7,14),s(8,ha,3,3,"td",15),b(),v(9,16),s(10,ba,3,1,"td",17),b(),v(11,18),s(12,xa,12,3,"td",19),b(),s(13,ya,1,2,"tr",20)(14,Ta,1,2,"tr",21),n()),e&2){let t=i.$implicit,r=i.$index,m=u();Me("first",r===0),l(),_(t.grouper),l(),p("dataSource",t.dataSource),l(11),p("matRowDefColumns",m.displayedColumns),l(),p("matRowDefColumns",Je(6,da))}}function wa(e,i){e&1&&(a(0,"ya-empty-message"),o(1,"No actions for the current filter criteria."),n())}var Kt="NO_LIMIT",Jt=class e{constructor(i,t,r,m,C){this.yamcs=i;this.router=t;this.route=r;this.messageService=m;this.filter=At();this.interval=At();this.customStart=At();this.customStop=At();this.filterForm=new bn({filter:new kt(null),interval:new kt(Kt),customStart:new kt(null),customStop:new kt(null)});this.displayedColumns=["time","user","summary","actions"];this.intervalOptions=[{id:"PT1H",label:"Last hour"},{id:"PT6H",label:"Last 6 hours"},{id:"P1D",label:"Last 24 hours"},{id:"NO_LIMIT",label:"No limit"},{id:"CUSTOM",label:"Custom",group:!0}];this.rowGroups$=new O([]);C.setTitle("Admin Area")}ngOnInit(){this.initializeOptions(),this.loadData(),this.filterForm.get("filter").valueChanges.pipe(dn(400)).forEach(i=>{this.loadData()}),this.filterForm.get("interval").valueChanges.forEach(i=>{if(i==="CUSTOM"){let t=new Date,r=this.validStart||t,m=this.validStop||t;this.filterForm.get("customStart").setValue(Xe.toISOString(r)),this.filterForm.get("customStop").setValue(Xe.toISOString(m))}else i==="NO_LIMIT"?(this.validStart=null,this.validStop=null,this.appliedInterval=i,this.loadData()):i&&(this.validStop=new Date,this.validStart=Xe.subtractDuration(this.validStop,i),this.appliedInterval=i,this.loadData())})}initializeOptions(){if(this.filter()){let i=this.filter();this.filterForm.get("filter").setValue(i)}if(this.interval())if(this.appliedInterval=this.interval(),this.filterForm.get("interval").setValue(this.appliedInterval),this.appliedInterval==="CUSTOM"){let i=this.customStart();this.filterForm.get("customStart").setValue(i),this.validStart=Xe.toDate(i);let t=this.customStop();this.filterForm.get("customStop").setValue(t),this.validStop=Xe.toDate(t)}else this.appliedInterval==="NO_LIMIT"?(this.validStart=null,this.validStop=null):(this.validStop=new Date,this.validStart=Xe.subtractDuration(this.validStop,this.appliedInterval));else this.appliedInterval=Kt,this.validStop=null,this.validStart=null}jumpToNow(){let i=this.filterForm.value.interval;i==="NO_LIMIT"?this.filterForm.get("interval").setValue(Kt):i==="CUSTOM"?this.filterForm.get("interval").setValue(Kt):i&&(this.validStop=new Date,this.validStart=Xe.subtractDuration(this.validStop,i),this.loadData())}applyCustomDates(){let{controls:i}=this.filterForm;this.validStart=Xe.toDate(i.customStart.value),this.validStop=Xe.toDate(i.customStop.value),this.appliedInterval="CUSTOM",this.loadData()}loadData(){this.updateURL();let i={};this.validStart&&(i.start=this.validStart.toISOString()),this.validStop&&(i.stop=this.validStop.toISOString()),this.filterForm.controls.filter.value&&(i.q=this.filterForm.controls.filter.value);let t=new Date().toISOString().substring(0,10),r=Xe.subtractDuration(new Date,"P1D").toISOString().substring(0,10);this.yamcs.yamcsClient.getAuditRecords("_global",i).then(m=>{let C=this.groupByDay(m.records||[]).map(E=>{let ve=new Y;ve.data=E.map(he=>{let de=[{key:"Request",value:""}];return he.request&&this.flatten(he.request,de,"    "),{item:he,expanded:!1,requestOptions:de}});let pe=E[0].time.substring(0,10);return pe===t?pe="Today":pe===r&&(pe="Yesterday"),{grouper:pe,dataSource:ve}});this.rowGroups$.next(C)}).catch(m=>this.messageService.showError(m))}loadMoreData(){}updateURL(){let{controls:i}=this.filterForm;this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:i.filter.value||null,interval:this.appliedInterval,customStart:this.appliedInterval==="CUSTOM"?i.customStart.value:null,customStop:this.appliedInterval==="CUSTOM"?i.customStop.value:null},queryParamsHandling:"merge"})}groupByDay(i){let t=[],r,m=[];for(let C of i){let E=C.time.substring(0,10);E!==r&&(r=E,m.length&&(t.push(m),m=[])),m.push(C)}return m.length&&t.push(m),t}flatten(i,t,r=""){for(let m in i){let C=i[m];if(Array.isArray(C)){t.push({key:r+m,value:""});for(let E=0;E<C.length;E++)t.push({key:r+"    "+m+" "+(E+1),value:C[E]})}else typeof C=="object"?(t.push({key:r+m,value:""}),this.flatten(C,t,r+"    ")):t.push({key:r+m,value:""+C})}}static{this.\u0275fac=function(t){return new(t||e)(d(D),d(G),d(k),d(be),d(A))}}static{this.\u0275cmp=x({type:e,selectors:[["ng-component"]],inputs:{filter:[1,"filter"],interval:[1,"interval"],customStart:[1,"customStart"],customStop:[1,"customStop"]},standalone:!0,features:[y],decls:15,vars:8,consts:[[1,"panel-content"],[3,"formGroup"],[1,"filter-bar"],["formControlName","filter","placeholder","Filter by text search"],["icon","access_time","formControlName","interval",3,"options"],["formControlName","customStart"],["formControlName","customStop"],[3,"click","disabled"],[3,"click"],["mat-table","","multiTemplateDataRows","",1,"ya-data-table",2,"border-top","1px solid rgba(0, 0, 0, 0.1)",3,"dataSource"],["matColumnDef","time"],["mat-cell","","style","width: 100px",4,"matCellDef"],["matColumnDef","user"],["mat-cell","","style","width: 200px",4,"matCellDef"],["matColumnDef","summary"],["mat-cell","","style","width: 400px",4,"matCellDef"],["matColumnDef","actions"],["mat-cell","","style","text-align: right",4,"matCellDef"],["matColumnDef","detail"],["mat-cell","",4,"matCellDef"],["mat-row","","class","item-row",3,"expanded","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","item-detail",3,"expanded","click",4,"matRowDef","matRowDefColumns"],["mat-cell","",2,"width","100px"],["mat-cell","",2,"width","200px"],["mat-cell","",2,"width","400px"],[3,"innerHTML"],["mat-cell","",2,"text-align","right"],["mat-cell",""],[1,"dl-horizontal"],[2,"white-space","pre"],["mat-row","",1,"item-row",3,"click"],["mat-row","",1,"item-detail",3,"click"]],template:function(t,r){t&1&&(a(0,"app-admin-page")(1,"app-admin-toolbar"),o(2,"Action log"),n(),a(3,"div",0)(4,"form",1)(5,"div",2),c(6,"ya-search-filter",3)(7,"ya-select",4),s(8,ua,4,1)(9,fa,2,0,"ya-button"),n()(),N(10,Da,15,7,null,null,F),f(12,"async"),s(13,wa,2,0,"ya-empty-message"),f(14,"async"),n()()),t&2&&(l(4),p("formGroup",r.filterForm),l(3),p("options",r.intervalOptions),l(),h(r.filterForm.value.interval==="CUSTOM"?8:9),l(2),U(S(12,4,r.rowGroups$)),l(3),h(S(14,6,r.rowGroups$).length?-1:13))},dependencies:[P,L,T,B,Re,me,Ie,ke,Pe,ue,z,W,J,ee,Q,Z,Ce,Vn,xe,Ee,Wt,qn],styles:["h4[_ngcontent-%COMP%]{margin-top:2em;margin-bottom:.5em;font-size:12px}h4.first[_ngcontent-%COMP%]{margin-top:0}tr.item-row.expanded[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:none}tr.item-detail[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-left:40px!important}.mat-mdc-row[_ngcontent-%COMP%]{cursor:pointer}tr.item-detail[_ngcontent-%COMP%]:not(.expanded){display:none}.dl-horizontal[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]{border-right:1px solid #e5e5e5}.dl-horizontal[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%], .dl-horizontal[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]{line-height:20px}.dl-horizontal[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]{min-height:20px}.ya-data-table[_ngcontent-%COMP%]   tr.mat-mdc-row[_ngcontent-%COMP%]:hover{background:inherit}"],changeDetection:0})}};function Ea(e,i){e&1&&(a(0,"th",11),o(1,"Name"),n())}function Ma(e,i){if(e&1&&(a(0,"td",12)(1,"a",13),o(2),n()()),e&2){let t=i.$implicit;l(),p("routerLink",t.name),l(),g(" ",t.name," ")}}function Ia(e,i){e&1&&(a(0,"th",11),o(1,"Tablespace"),n())}function Ra(e,i){if(e&1&&(a(0,"td",12),o(1),n()),e&2){let t=i.$implicit;l(),g(" ",t.tablespace," ")}}function Aa(e,i){e&1&&(a(0,"th",11),o(1,"Path"),n())}function ka(e,i){if(e&1&&(a(0,"td",12),o(1),n()),e&2){let t=i.$implicit;l(),g(" ",t.path," ")}}function Pa(e,i){e&1&&c(0,"th",14)}function La(e,i){e&1&&c(0,"td",12)}function $a(e,i){e&1&&c(0,"tr",15)}function Fa(e,i){e&1&&c(0,"tr",16)}var Xt=class e{constructor(i,t,r){this.yamcs=i;this.displayedColumns=["name","tablespace","path","actions"];this.dataSource=new Y;t.setTitle("Databases"),i.yamcsClient.getDatabases().then(m=>{this.dataSource.data=m}).catch(m=>r.showError(m))}ngAfterViewInit(){this.dataSource.sort=this.sort}static{this.\u0275fac=function(t){return new(t||e)(d(D),d(A),d(be))}}static{this.\u0275cmp=x({type:e,selectors:[["ng-component"]],viewQuery:function(t,r){if(t&1&&oe(H,7),t&2){let m;re(m=le())&&(r.sort=m.first)}},standalone:!0,features:[y],decls:19,vars:3,consts:[[1,"panel-content"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","tablespace"],["matColumnDef","path"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(t,r){t&1&&(a(0,"app-admin-page")(1,"app-admin-toolbar"),o(2,"Databases"),n(),a(3,"div",0)(4,"table",1),v(5,2),s(6,Ea,2,0,"th",3)(7,Ma,3,2,"td",4),b(),v(8,5),s(9,Ia,2,0,"th",3)(10,Ra,2,1,"td",4),b(),v(11,6),s(12,Aa,2,0,"th",3)(13,ka,2,1,"td",4),b(),v(14,7),s(15,Pa,1,0,"th",8)(16,La,1,0,"td",4),b(),s(17,$a,1,0,"tr",9)(18,Fa,1,0,"tr",10),n()()()),t&2&&(l(4),p("dataSource",r.dataSource),l(13),p("matHeaderRowDef",r.displayedColumns),l(),p("matRowDefColumns",r.displayedColumns))},dependencies:[P,L,T,K,H,_e,z,ne,ae,W,J,ee,X,Q,te,Z],encapsulation:2,changeDetection:0})}};var Na=e=>["/admin/databases",e],na=e=>["/admin/databases",e,"tables"],aa=e=>["/admin/databases",e,"streams"],Ua=e=>["/admin/databases",e,"shell"],Ba=(e,i)=>["/admin/databases",e,"tables",i,"info"],ja=(e,i)=>["/admin/databases",e,"tables",i,"data"],Va=(e,i)=>["/admin/databases",e,"tables",i,"script"],Ha=(e,i)=>["/admin/databases",e,"streams",i,"columns"],Oa=(e,i)=>["/admin/databases",e,"streams",i,"data"],Ya=(e,i)=>["/admin/databases",e,"streams",i,"script"];function Ga(e,i){if(e&1&&(a(0,"a",12),o(1," Tables "),n()),e&2){let t=u(2);p("routerLink",Se(1,na,t.name))}}function qa(e,i){if(e&1&&(a(0,"a",12),o(1," Streams "),n()),e&2){let t=u(2);p("routerLink",Se(1,aa,t.name))}}function za(e,i){if(e&1&&(a(0,"mat-icon",11),o(1,"navigate_next"),n(),s(2,Ga,2,3,"a",12)(3,qa,2,3,"a",12),a(4,"mat-icon",11),o(5,"navigate_next"),n(),o(6)),e&2){let t=i;l(2),h(t.type==="table"?2:-1),l(),h(t.type==="stream"?3:-1),l(3),g(" ",t.name," ")}}function Wa(e,i){if(e&1&&(a(0,"a",15,1),o(2," Tables "),n(),a(3,"a",15,2),o(5," Streams "),n(),a(6,"a",15,3),o(8," DB Shell "),n()),e&2){let t=De(1),r=De(4),m=De(7),C=u();p("routerLink",Se(6,na,C.name))("active",t.isActive),l(3),p("routerLink",Se(8,aa,C.name))("active",r.isActive),l(3),p("routerLink",Se(10,Ua,C.name))("active",m.isActive)}}function Qa(e,i){if(e&1&&(a(0,"a",15,4),o(2," Info "),n(),a(3,"a",15,5),o(5," Data "),n(),a(6,"a",15,6),o(8," Script "),n()),e&2){let t=De(1),r=De(4),m=De(7),C=u(),E=u();p("routerLink",rt(6,Ba,E.name,C.name))("active",t.isActive),l(3),p("routerLink",rt(9,ja,E.name,C.name))("active",r.isActive),l(3),p("routerLink",rt(12,Va,E.name,C.name))("active",m.isActive)}}function Za(e,i){if(e&1&&(a(0,"a",15,7),o(2," Columns "),n(),a(3,"a",15,8),o(5," Data "),n(),a(6,"a",15,9),o(8," Script "),n()),e&2){let t=De(1),r=De(4),m=De(7),C=u(),E=u();p("routerLink",rt(6,Ha,E.name,C.name))("active",t.isActive),l(3),p("routerLink",rt(9,Oa,E.name,C.name))("active",r.isActive),l(3),p("routerLink",rt(12,Ya,E.name,C.name))("active",m.isActive)}}function Ka(e,i){if(e&1&&s(0,Qa,9,15)(1,Za,9,15),e&2){let t=i;h(t.type==="table"?0:-1),l(),h(t.type==="stream"?1:-1)}}function Ja(e,i){if(e&1&&(a(0,"app-admin-page")(1,"app-admin-toolbar"),c(2,"ya-page-icon-button",10),a(3,"mat-icon",11),o(4,"navigate_next"),n(),a(5,"a",12),o(6),n(),s(7,za,7,3),f(8,"async"),n(),a(9,"nav",13),s(10,Wa,9,12),f(11,"async"),s(12,Ka,2,2),f(13,"async"),n(),a(14,"div",14)(15,"mat-tab-nav-panel",null,0),c(17,"router-outlet"),n()()()),e&2){let t,r,m=i,C=De(16),E=u();l(5),p("routerLink",Se(13,Na,m.name)),l(),g(" ",m.name," "),l(),h((t=S(8,7,E.object$))?7:-1,t),l(2),p("mat-stretch-tabs",!1)("tabPanel",C),l(),h(S(11,9,E.object$)?-1:10),l(2),h((r=S(13,11,E.object$))?12:-1,r)}}var ei=class e{constructor(i,t,r,m,C){this.yamcs=r;this.object$=new O(null);this.user=C.getUser(),this.routerSubscription=i.events.pipe(Pt(ve=>ve instanceof Bt)).subscribe(ve=>{let pe=t.snapshot.firstChild,he=pe.paramMap.get("table");if(he){this.object$.next({type:"table",name:he});return}if(he=pe.paramMap.get("stream"),he){this.object$.next({type:"stream",name:he});return}this.object$.next(null)});let E=t.snapshot.paramMap.get("database");m.setTitle(E),this.database$=r.yamcsClient.getDatabase(E)}ngOnDestroy(){this.routerSubscription?.unsubscribe()}static{this.\u0275fac=function(t){return new(t||e)(d(G),d(k),d(D),d(A),d(je))}}static{this.\u0275cmp=x({type:e,selectors:[["ng-component"]],standalone:!0,features:[y],decls:2,vars:3,consts:[["tabPanel",""],["rla","routerLinkActive"],["rlb","routerLinkActive"],["rlc","routerLinkActive"],["rla1","routerLinkActive"],["rla2","routerLinkActive"],["rla3","routerLinkActive"],["rlb1","routerLinkActive"],["rlb2","routerLinkActive"],["rlb3","routerLinkActive"],["routerLink","/admin/databases","icon","account_tree"],[1,"icon14","sep"],[1,"ya-link","ya-header-link",3,"routerLink"],["mat-tab-nav-bar","",1,"secondary",3,"mat-stretch-tabs","tabPanel"],[1,"outlet-wrapper"],["mat-tab-link","","routerLinkActive","",3,"routerLink","active"]],template:function(t,r){if(t&1&&(s(0,Ja,18,15,"app-admin-page"),f(1,"async")),t&2){let m;h((m=S(1,1,r.database$))?0:-1,m)}},dependencies:[P,L,T,B,dt,K,vn,ue,Fn,Un,Nn,we],styles:[".outlet-wrapper[_ngcontent-%COMP%]{overflow:auto;position:absolute;inset:37px 0 0}.sep[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}"],changeDetection:0})}};var ti=class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=x({type:e,selectors:[["ng-component"]],standalone:!0,features:[y],decls:18,vars:0,consts:[["headerTitle","Notice"],[2,"background-color","black","color","white","padding","12px"],["href","https://github.com/yamcs/yamcs-cli",1,"ya-link"]],template:function(t,r){t&1&&(a(0,"ya-empty-message",0)(1,"p"),o(2,"The DB shell functionality has been removed from the Yamcs Web UI."),n(),a(3,"p"),o(4," Use "),a(5,"strong"),o(6,"yamcs-cli"),n(),o(7," instead: "),n(),a(8,"p",1)(9,"code"),o(10," pip install --upgrade yamcs-cli "),c(11,"br"),o(12," yamcs login http://localhost:8090 "),c(13,"br"),o(14," yamcs dbshell "),n()(),a(15,"p")(16,"a",2),o(17," https://docs.yamcs.org/yamcs-cli/ "),n()()())},dependencies:[T,xe],encapsulation:2,changeDetection:0})}};function Xa(e,i){if(e&1&&(a(0,"tr")(1,"td"),o(2),n(),a(3,"td"),o(4),n(),c(5,"td"),n()),e&2){let t=i.$implicit;l(2),_(t.name),l(2),_(t.type)}}function eo(e,i){if(e&1&&(a(0,"tr")(1,"td",3),o(2),n()()),e&2){let t=i.$implicit;l(2),_(t)}}function to(e,i){if(e&1&&(a(0,"div",0)(1,"h3"),o(2,"Columns"),n(),a(3,"table",1)(4,"tr")(5,"th",2),o(6,"Column"),n(),a(7,"th"),o(8,"Type"),n(),c(9,"th",3),n(),N(10,Xa,6,2,"tr",null,F),n(),a(12,"p"),o(13,"\xA0"),n(),a(14,"h3"),o(15,"Subscribers"),n(),a(16,"table",1),N(17,eo,3,1,"tr",null,F),n()()),e&2){let t=i;l(10),U(t.columns),l(7),U(t.subscribers)}}var ii=class e{constructor(i,t){let r=i.snapshot.parent,m=r.parent.paramMap.get("database"),C=r.paramMap.get("stream");this.stream$=t.yamcsClient.getStream(m,C)}static{this.\u0275fac=function(t){return new(t||e)(d(k),d(D))}}static{this.\u0275cmp=x({type:e,selectors:[["ng-component"]],standalone:!0,features:[y],decls:2,vars:3,consts:[[1,"panel-content"],["yaDataTable","",1,"expand"],["width","200"],[1,"expand"]],template:function(t,r){if(t&1&&(s(0,to,19,0,"div",0),f(1,"async")),t&2){let m;h((m=S(1,1,r.stream$))?0:-1,m)}},dependencies:[T,B,ge],encapsulation:2,changeDetection:0})}};var ht=class e{transform(i,t){if(!i||i.length===0)return null;for(let r of i)if(r.name===t)return r.value;return null}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275pipe=Lt({name:"columnValue",type:e,pure:!0,standalone:!0})}};function io(e,i){if(e&1&&(o(0),f(1,"value")),e&2){let t=u().$index,r=u();g(" ",S(1,1,r.streamData.column[t].value)||"-"," ")}}function no(e,i){if(e&1&&c(0,"app-hex",2),e&2){let t=u().$index,r=u();p("base64String",r.streamData.column[t].value.binaryValue)}}function ao(e,i){if(e&1&&(a(0,"div",0),o(1),n(),a(2,"div",1),s(3,io,2,3)(4,no,1,1,"app-hex",2),n()),e&2){let t=i.$implicit;l(),_(t.name),l(2),h(t.value.type!=="BINARY"?3:-1),l(),h(t.value.type==="BINARY"?4:-1)}}var ni=class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=x({type:e,selectors:[["app-stream-data"]],inputs:{streamData:"streamData"},standalone:!0,features:[y],decls:2,vars:0,consts:[[1,"block-title"],[1,"block"],[3,"base64String"]],template:function(t,r){t&1&&N(0,ao,5,3,null,null,F),t&2&&U(r.streamData.column)},dependencies:[Zt,T,_t],encapsulation:2,changeDetection:0})}};var ai=class{constructor(){this.dirty=!1;this.bufferSize=500;this.pointer=0;this.buffer=Array(this.bufferSize).fill(void 0)}add(i){this.buffer[this.pointer]=i,this.prevPointer=this.pointer,this.pointer=(this.pointer+1)%this.buffer.length,this.dirty=!0}reset(){this.buffer.fill(void 0),this.pointer=0,this.prevPointer=void 0,this.dirty=!0}snapshot(){if(this.prevPointer===void 0)return[];{let i=this.buffer.slice(0,this.prevPointer+1);return this.buffer.slice(this.prevPointer+1).concat(i).filter(r=>r!==void 0)}}};var oi=class extends xn{constructor(t,r,m,C){super();this.yamcs=t;this.database=m;this.stream=C;this.streamData$=new O([]);this.loading$=new O(!1);this.streaming$=new O(!1);this.columns$=new O([]);this.streamBuffer=new ai;this.syncSubscription=r.sync(()=>{this.streamBuffer.dirty&&!this.loading$.getValue()&&(this.streamData$.next(this.streamBuffer.snapshot().reverse()),this.streamBuffer.dirty=!1)})}connect(){return this.streamData$}startStreaming(){this.streaming$.next(!0),this.streamSubscription=this.yamcs.yamcsClient.createStreamSubscription({instance:this.database,stream:this.stream},t=>{if(!this.loading$.getValue()){this.streamBuffer.add(t);let r=this.columns$.value;for(let m of t.column)r.indexOf(m.name)===-1&&r.push(m.name);this.columns$.next([...r])}})}stopStreaming(){this.streamSubscription&&this.streamSubscription.cancel(),this.streaming$.next(!1)}disconnect(){this.streamSubscription&&this.streamSubscription.cancel(),this.syncSubscription&&this.syncSubscription.unsubscribe(),this.streamData$.complete(),this.loading$.complete(),this.streaming$.complete()}};var oo=e=>({selected:e});function ro(e,i){e&1&&(a(0,"ya-detail-toolbar"),o(1," Tuple "),n(),a(2,"div",10),c(3,"app-stream-data",11),n()),e&2&&(l(3),p("streamData",i))}function lo(e,i){e&1&&(a(0,"ya-detail-toolbar"),o(1," Select a tuple "),n())}function mo(e,i){if(e&1&&(a(0,"th",13),o(1),n()),e&2){let t=u().$implicit;l(),_(t)}}function so(e,i){if(e&1&&(a(0,"td",14),o(1),f(2,"columnValue"),f(3,"value"),n()),e&2){let t=i.$implicit,r=u().$implicit;l(),g(" ",S(3,4,Ne(2,1,t.column,r))||"-"," ")}}function co(e,i){if(e&1&&(v(0,4),s(1,mo,2,1,"th",12)(2,so,4,6,"td",7),b()),e&2){let t=i.$implicit;p("cdkColumnDef",t)}}function po(e,i){e&1&&c(0,"th",15)}function uo(e,i){e&1&&c(0,"td",14)}function fo(e,i){e&1&&c(0,"tr",16)}function _o(e,i){if(e&1){let t=j();a(0,"tr",17),f(1,"async"),w("click",function(){let m=I(t).$implicit,C=u();return R(C.selectStreamData(m))}),n()}if(e&2){let t=i.$implicit,r=u();p("ngClass",Se(3,oo,t===S(1,1,r.selectedStreamData$)))}}var ri=class e{constructor(i,t,r){this.displayedColumns=["actions"];this.selectedStreamData$=new O(null);let m=i.snapshot.parent,C=m.parent.paramMap.get("database"),E=m.paramMap.get("stream");this.dataSource=new oi(t,r,C,E),this.availableColumns$=this.dataSource.columns$}ngAfterViewInit(){this.columnDefinitionsSubscription=this.columnDefinitions.changes.subscribe(()=>{this.columnDefinitions.forEach(i=>{this.displayedColumns.indexOf(i.name)===-1&&this.displayedColumns.splice(this.displayedColumns.length-1,0,i.name)})}),this.dataSource.startStreaming()}selectStreamData(i){this.selectedStreamData$.next(i)}ngOnDestroy(){this.columnDefinitionsSubscription?.unsubscribe(),this.dataSource?.stopStreaming()}static{this.\u0275fac=function(t){return new(t||e)(d(k),d(D),d(Tt))}}static{this.\u0275cmp=x({type:e,selectors:[["ng-component"]],viewQuery:function(t,r){if(t&1&&oe(Yt,5),t&2){let m;re(m=le())&&(r.columnDefinitions=m)}},standalone:!0,features:[y],decls:16,vars:8,consts:[["table",""],[1,"data-table-wrapper"],[1,"panel-content"],["mat-table","",1,"ya-data-table","expand",3,"dataSource"],[3,"cdkColumnDef"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"cdkHeaderCellDef"],["mat-cell","",4,"cdkCellDef"],["mat-header-row","",4,"cdkHeaderRowDef"],["mat-row","",3,"ngClass","click",4,"cdkRowDef","cdkRowDefColumns"],[2,"padding","0 16px"],[3,"streamData"],["mat-header-cell","",4,"cdkHeaderCellDef"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row","",3,"click","ngClass"]],template:function(t,r){if(t&1&&(a(0,"ya-detail-pane"),s(1,ro,4,1),f(2,"async"),s(3,lo,2,0,"ya-detail-toolbar"),n(),a(4,"div",1)(5,"div",2)(6,"table",3,0),N(8,co,3,1,"ng-container",4,F),f(10,"async"),v(11,5),s(12,po,1,0,"th",6)(13,uo,1,0,"td",7),b(),s(14,fo,1,0,"tr",8)(15,_o,2,5,"tr",9),n()()()),t&2){let m;l(),h((m=S(2,4,r.selectedStreamData$))?1:3,m),l(5),p("dataSource",r.dataSource),l(2),U(S(10,6,r.availableColumns$)),l(6),p("cdkHeaderRowDef",r.displayedColumns),l(),p("cdkRowDefColumns",r.displayedColumns)}},dependencies:[ht,T,bt,B,kn,In,Rn,Yt,An,z,W,X,Q,te,Z,xt,yt,_t,ni],styles:[".data-table-wrapper[_ngcontent-%COMP%]{position:relative;overflow:auto;height:100%}.detail[_ngcontent-%COMP%]{background-color:#fcfcfc;float:right;height:100%;width:450px;overflow:auto;border-left:1px solid #d3d3d3;box-sizing:border-box}.data-table-wrapper[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table-wrapper[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{white-space:nowrap}.data-table-wrapper[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{cursor:pointer}"],changeDetection:0})}};function Co(e,i){e&1&&(a(0,"th",11),o(1,"Name"),n())}function ho(e,i){if(e&1&&(a(0,"td",12)(1,"a",13),o(2),n()()),e&2){let t=i.$implicit;l(),p("routerLink",t.name),l(),g(" ",t.name," ")}}function So(e,i){e&1&&(a(0,"th",11),o(1,"Data count"),n())}function vo(e,i){if(e&1&&(a(0,"td",14),o(1),f(2,"number"),n()),e&2){let t=i.$implicit;l(),g(" ",S(2,1,t.dataCount)," ")}}function bo(e,i){e&1&&c(0,"th",15)}function go(e,i){e&1&&c(0,"td",12)}function xo(e,i){e&1&&c(0,"tr",16)}function yo(e,i){e&1&&c(0,"tr",17)}var li=class e{constructor(i,t){this.yamcs=t;this.displayedColumns=["name","dataCount","actions"];this.dataSource=new Y;this.itemsByName={};let r=i.snapshot.parent;this.database=r.paramMap.get("database")}ngAfterViewInit(){this.dataSource.sort=this.sort,this.streamStatisticsSubscription=this.yamcs.yamcsClient.createStreamStatisticsSubscription({instance:this.database},i=>{this.processStreamEvent(i)})}processStreamEvent(i){switch(i.type){case"CREATED":case"UPDATED":this.itemsByName[i.name]={name:i.name,dataCount:i.dataCount},this.updateDataSource();break;case"DELETED":delete this.itemsByName[i.name],this.updateDataSource();break;default:console.error("Unexpected stream update of type "+i.type);break}}updateDataSource(){let i=Object.values(this.itemsByName);i.sort((t,r)=>t.name.localeCompare(r.name)),this.dataSource.data=i}ngOnDestroy(){this.streamStatisticsSubscription?.cancel()}static{this.\u0275fac=function(t){return new(t||e)(d(k),d(D))}}static{this.\u0275cmp=x({type:e,selectors:[["ng-component"]],viewQuery:function(t,r){if(t&1&&oe(H,7),t&2){let m;re(m=le())&&(r.sort=m.first)}},standalone:!0,features:[y],decls:13,vars:3,consts:[[1,"panel-content"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","dataCount"],["mat-cell","","style","text-align: right",4,"matCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink"],["mat-cell","",2,"text-align","right"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(t,r){t&1&&(a(0,"div",0)(1,"table",1),v(2,2),s(3,Co,2,0,"th",3)(4,ho,3,2,"td",4),b(),v(5,5),s(6,So,2,0,"th",3)(7,vo,3,3,"td",6),b(),v(8,7),s(9,bo,1,0,"th",8)(10,go,1,0,"td",4),b(),s(11,xo,1,0,"tr",9)(12,yo,1,0,"tr",10),n()()),t&2&&(l(),p("dataSource",r.dataSource),l(10),p("matHeaderRowDef",r.displayedColumns),l(),p("matRowDefColumns",r.displayedColumns))},dependencies:[T,gt,K,H,_e,z,ne,ae,W,J,ee,X,Q,te,Z],encapsulation:2,changeDetection:0})}};var oa="&nbsp;&nbsp;&nbsp;&nbsp;",mi=/[()]|(, ")/;function si(e){if(!e)return e;let i=[],t="",r=e.search(mi);for(;r!==-1;)e[r]==="("?(i.push(e.substring(0,r+1)),t+=oa,i.push("<br>",t),e=e.substring(r+1),r=e.search(mi)):e[r]===")"?(i.push(e.substring(0,r)),t=t.replace(oa,""),i.push("<br>",t),i.push(")"),e=e.substring(r+1),r=e.search(mi)):(i.push(e.substring(0,r+1)),i.push("<br>",t),i.push('"'),e=e.substring(r+3),r=e.search(mi));let m=i.join("")+e;return m=m.replace(/(engine|histogram|partition|primary|table_format)/g,"<br>$1"),To(m)}function To(e){return e.replace(/(BINARY|ENUM|HRES_TIMESTAMP|INT|LONG|PARAMETER_VALUE|PROTOBUF|STRING|TIMESTAMP)/g,'<span class="dtype">$1</span>').replace(/([(),]+)/g,'<span class="paren">$1</span>').replace(/(auto_increment|create|compressed|histogram|engine|primary key|table(_format)?|stream)/g,'<span class="kw">$1</span>').replace(/(partition by time(_and_value)?|partition by value)/g,'<span class="kw">$1</span>')}function Do(e,i){if(e&1&&(a(0,"div",0),c(1,"code",1),n()),e&2){let t=u();l(),p("innerHTML",t.formatSQL(i.script),ct)}}var ci=class e{constructor(i,t){let r=i.snapshot.parent,m=r.parent.paramMap.get("database"),C=r.paramMap.get("stream");this.stream$=t.yamcsClient.getStream(m,C)}formatSQL(i){return si(i)}static{this.\u0275fac=function(t){return new(t||e)(d(k),d(D))}}static{this.\u0275cmp=x({type:e,selectors:[["app-stream-script-tab"]],standalone:!0,features:[y],decls:2,vars:3,consts:[[1,"panel-content","sql"],[3,"innerHTML"]],template:function(t,r){if(t&1&&(s(0,Do,2,1,"div",0),f(1,"async")),t&2){let m;h((m=S(1,1,r.stream$))?0:-1,m)}},dependencies:[T,B],styles:["code[_ngcontent-%COMP%]{display:inline-block;font-size:12px;line-height:14px}",".dtype{color:red}  .paren{color:#1b61b9}  .kw{color:#1b61b9}"],changeDetection:0})}};function wo(e,i){e&1&&c(0,"router-outlet")}var pi=class e{constructor(i,t,r){this.yamcs=t;let m=i.snapshot,C=m.parent.paramMap.get("database"),E=m.paramMap.get("stream");r.setTitle(E),this.stream$=t.yamcsClient.getStream(C,E)}static{this.\u0275fac=function(t){return new(t||e)(d(k),d(D),d(A))}}static{this.\u0275cmp=x({type:e,selectors:[["app-stream-page"]],standalone:!0,features:[y],decls:2,vars:3,template:function(t,r){if(t&1&&(s(0,wo,1,0,"router-outlet"),f(1,"async")),t&2){let m;h((m=S(1,1,r.stream$))?0:-1,m)}},dependencies:[T,B,dt],encapsulation:2,changeDetection:0})}};function Eo(e,i){if(e&1&&(a(0,"div",0)(1,"mat-icon",1),o(2,"vpn_key"),n(),o(3),n(),a(4,"div",2),o(5),f(6,"columnValue"),f(7,"value"),n()),e&2){let t=i.$implicit,r=u();l(3),g(" ",t.name," "),l(2),g(" ",S(7,5,Ne(6,2,r.record.column,t.name))||"-"," ")}}function Mo(e,i){if(e&1&&(o(0),f(1,"columnValue"),f(2,"value")),e&2){let t=u().$implicit,r=u();g(" ",S(2,4,Ne(1,1,r.record.column,t.name))||"-"," ")}}function Io(e,i){e&1&&c(0,"app-hex",3),e&2&&p("base64String",i.binaryValue)}function Ro(e,i){e&1&&o(0," - ")}function Ao(e,i){if(e&1&&(s(0,Io,1,1,"app-hex",3),f(1,"columnValue"),s(2,Ro,1,0)),e&2){let t,r=u().$implicit,m=u();h((t=Ne(1,1,m.record.column,r.name))?0:2,t)}}function ko(e,i){if(e&1&&(a(0,"div",0),o(1),n(),a(2,"div",2),s(3,Mo,3,6)(4,Ao,3,4),n()),e&2){let t=i.$implicit;l(),_(t.name),l(2),h(t.type!=="BINARY"&&(t.type==="PROTOBUF(com.google.protobuf.Struct)"||!t.type.startsWith("PROTOBUF"))?3:-1),l(),h(t.type==="BINARY"||t.type!=="PROTOBUF(com.google.protobuf.Struct)"&&t.type.startsWith("PROTOBUF")?4:-1)}}var di=class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=x({type:e,selectors:[["app-record"]],inputs:{table:"table",record:"record"},standalone:!0,features:[y],decls:6,vars:0,consts:[[1,"block-title"],["matTooltip","Key Column",1,"icon12",2,"color","gold"],[1,"block"],[3,"base64String"]],template:function(t,r){t&1&&(N(0,Eo,8,7,null,null,F),N(2,ko,5,3,null,null,F),a(4,"p"),o(5,"\xA0"),n()),t&2&&(U(r.table.keyColumn),l(2),U(r.table.valueColumn))},dependencies:[ht,Zt,T,ue,fe,_t],encapsulation:2,changeDetection:0})}};var Po=e=>({selected:e});function Lo(e,i){if(e&1&&(a(0,"ya-detail-toolbar"),o(1," Record "),n(),a(2,"div",2),c(3,"app-record",3),n()),e&2){let t=u();l(3),p("table",t)("record",i)}}function $o(e,i){e&1&&(a(0,"ya-detail-toolbar"),o(1," Select a record "),n())}function Fo(e,i){if(e&1&&(a(0,"th"),o(1),n()),e&2){let t=i.$implicit;l(),_(t.name)}}function No(e,i){if(e&1&&(a(0,"th"),o(1),n()),e&2){let t=i.$implicit;l(),_(t.name)}}function Uo(e,i){if(e&1&&(a(0,"td"),o(1),f(2,"columnValue"),f(3,"value"),n()),e&2){let t=i.$implicit,r=u().$implicit;l(),g(" ",S(3,4,Ne(2,1,r.column,t.name))||"-"," ")}}function Bo(e,i){if(e&1&&(a(0,"td"),o(1),f(2,"columnValue"),f(3,"value"),n()),e&2){let t=i.$implicit,r=u().$implicit;Me("mono",t.type==="BINARY"),l(),g(" ",S(3,6,Ne(2,3,r.column,t.name))||"-"," ")}}function jo(e,i){if(e&1){let t=j();a(0,"tr",6),f(1,"async"),w("click",function(){let m=I(t).$implicit,C=u(4);return R(C.selectRecord(m))}),N(2,Uo,4,6,"td",null,F),N(4,Bo,4,8,"td",7,F),n()}if(e&2){let t=i.$implicit,r=u(3),m=u();p("ngClass",Se(3,Po,t===S(1,1,m.selectedRecord$))),l(2),U(r.keyColumn),l(2),U(r.valueColumn)}}function Vo(e,i){if(e&1&&(a(0,"table",4)(1,"tr"),N(2,Fo,2,1,"th",null,F),N(4,No,2,1,"th",null,F),n(),N(6,jo,6,5,"tr",5,F),n()),e&2){let t=u(),r=u();l(2),U(r.keyColumn),l(2),U(r.valueColumn),l(2),U(t)}}function Ho(e,i){e&1&&(a(0,"ya-empty-message"),o(1," Empty table. "),n())}function Oo(e,i){e&1&&s(0,Vo,8,0,"table",4)(1,Ho,2,0,"ya-empty-message"),e&2&&h(i.length?0:1)}function Yo(e,i){e&1&&(a(0,"ya-empty-message"),o(1," Empty table. "),n())}function Go(e,i){if(e&1&&(a(0,"ya-detail-pane"),s(1,Lo,4,2),f(2,"async"),s(3,$o,2,0,"ya-detail-toolbar"),n(),a(4,"div",0)(5,"div",1),s(6,Oo,2,1),f(7,"async"),s(8,Yo,2,0,"ya-empty-message"),n()()),e&2){let t,r,m=u();l(),h((t=S(2,2,m.selectedRecord$))?1:3,t),l(5),h((r=S(7,4,m.records$))?6:8,r)}}var ui=class e{constructor(i,t){this.selectedRecord$=new O(null);let r=i.snapshot.parent,m=r.parent.paramMap.get("database"),C=r.paramMap.get("table");this.table$=t.yamcsClient.getTable(m,C),this.records$=t.yamcsClient.getTableData(m,C)}selectRecord(i){this.selectedRecord$.next(i)}static{this.\u0275fac=function(t){return new(t||e)(d(k),d(D))}}static{this.\u0275cmp=x({type:e,selectors:[["ng-component"]],standalone:!0,features:[y],decls:2,vars:3,consts:[[1,"data-table-wrapper"],[1,"panel-content"],[2,"padding","0 16px"],[3,"table","record"],["yaDataTable",""],[3,"ngClass"],[3,"click","ngClass"],[3,"mono"]],template:function(t,r){if(t&1&&(s(0,Go,9,6),f(1,"async")),t&2){let m;h((m=S(1,1,r.table$))?0:-1,m)}},dependencies:[ht,di,T,bt,B,ge,xt,yt,xe,_t],styles:[".data-table-wrapper[_ngcontent-%COMP%]{position:relative;overflow:auto;height:100%}.detail[_ngcontent-%COMP%]{background-color:#fcfcfc;float:right;height:100%;width:450px;overflow:auto;border-left:1px solid #d3d3d3;box-sizing:border-box}.data-table-wrapper[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table-wrapper[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{white-space:nowrap}.data-table-wrapper[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background:#fafafa;cursor:pointer}"],changeDetection:0})}};function qo(e,i){if(e&1&&(a(0,"tr")(1,"td"),o(2),n(),a(3,"td"),o(4),n()()),e&2){let t=i.$implicit;l(2),_(t.value),l(2),_(t.label)}}var fi=class e{constructor(i){this.data=i}static{this.\u0275fac=function(t){return new(t||e)(d(Ye))}}static{this.\u0275cmp=x({type:e,selectors:[["app-show-enum-dialog"]],standalone:!0,features:[y],decls:14,vars:0,consts:[["mat-dialog-title",""],["yaDataTable","",2,"width","100%"],["align","end"],["mat-dialog-close",""]],template:function(t,r){t&1&&(a(0,"h2",0),o(1,"Enum States"),n(),a(2,"mat-dialog-content")(3,"table",1)(4,"tr")(5,"th"),o(6,"Value"),n(),a(7,"th"),o(8,"Label"),n()(),N(9,qo,5,2,"tr",null,F),n()(),a(11,"mat-dialog-actions",2)(12,"ya-button",3),o(13,"Close"),n()()),t&2&&(l(9),U(r.data.column.enumValue))},dependencies:[T,ge,Ge,qe,We,ze,Ce],encapsulation:2})}};function zo(e,i){if(e&1){let t=j();a(0,"span",6),w("click",function(){I(t);let m=u().$implicit,C=u(2);return R(C.showEnum(m))}),o(1),n()}if(e&2){let t=u().$implicit;l(),_(t.type)}}function Wo(e,i){if(e&1&&o(0),e&2){let t=u().$implicit;g(" ",t.type," ")}}function Qo(e,i){if(e&1&&(a(0,"tr")(1,"td"),o(2),n(),a(3,"td"),s(4,zo,2,1,"span",5)(5,Wo,1,1),n(),a(6,"td"),o(7),n(),c(8,"td"),n()),e&2){let t=i.$implicit;l(2),_(t.name),l(2),h(t.type==="ENUM"?4:-1),l(),h(t.type!=="ENUM"?5:-1),l(2),g(" ",t.autoIncrement?"auto_increment":"-"," ")}}function Zo(e,i){if(e&1){let t=j();a(0,"span",6),w("click",function(){I(t);let m=u().$implicit,C=u(2);return R(C.showEnum(m))}),o(1),n()}if(e&2){let t=u().$implicit;l(),_(t.type)}}function Ko(e,i){if(e&1&&o(0),e&2){let t=u().$implicit;g(" ",t.type," ")}}function Jo(e,i){if(e&1&&(a(0,"tr")(1,"td"),o(2),n(),a(3,"td"),s(4,Zo,2,1,"span",5)(5,Ko,1,1),n(),a(6,"td"),o(7),n(),c(8,"td"),n()),e&2){let t=i.$implicit;l(2),_(t.name),l(2),h(t.type==="ENUM"?4:-1),l(),h(t.type!=="ENUM"?5:-1),l(2),g(" ",t.autoIncrement?"auto_increment":"-"," ")}}function Xo(e,i){e&1&&(a(0,"span"),o(1,", "),n())}function er(e,i){if(e&1&&(o(0),s(1,Xo,2,0,"span")),e&2){let t=i.$implicit,r=i.$index,m=i.$count;g(" ",t," "),l(),h(r!==m-1?1:-1)}}function tr(e,i){if(e&1&&N(0,er,2,2,null,null,F),e&2){let t=u();U(t.histogramColumn)}}function ir(e,i){e&1&&o(0," - ")}function nr(e,i){if(e&1&&(a(0,"dt"),o(1,"Time partition column"),n(),a(2,"dd"),o(3),n()),e&2){let t=u();l(3),at(" ",t.partitioningInfo==null?null:t.partitioningInfo.timeColumn,"('",t.partitioningInfo==null?null:t.partitioningInfo.timePartitionSchema,"') ")}}function ar(e,i){if(e&1&&(a(0,"dt"),o(1,"Value partition column"),n(),a(2,"dd"),o(3),n()),e&2){let t=u();l(3),g(" ",t.partitioningInfo==null?null:t.partitioningInfo.valueColumn," ")}}function or(e,i){if(e&1&&(a(0,"div",0)(1,"h3"),o(2,"Key"),n(),a(3,"table",1)(4,"tr")(5,"th"),o(6,"Column"),n(),a(7,"th"),o(8,"Type"),n(),a(9,"th"),o(10,"Extra"),n(),c(11,"th",2),n(),N(12,Qo,9,4,"tr",null,F),n(),a(14,"p"),o(15,"\xA0"),n(),a(16,"h3"),o(17,"Value"),n(),a(18,"table",3)(19,"tr")(20,"th"),o(21,"Column"),n(),a(22,"th"),o(23,"Type"),n(),a(24,"th"),o(25,"Extra"),n(),c(26,"th",2),n(),N(27,Jo,9,4,"tr",null,F),n(),a(29,"p"),o(30,"\xA0"),n(),a(31,"h3"),o(32,"Options"),n(),a(33,"dl",4)(34,"dt"),o(35,"Format version"),n(),a(36,"dd"),o(37),n(),a(38,"dt"),o(39,"Storage engine"),n(),a(40,"dd"),o(41),n(),a(42,"dt"),o(43,"Tablespace"),n(),a(44,"dd"),o(45),n(),a(46,"dt"),o(47,"Compressed"),n(),a(48,"dd"),o(49),n(),a(50,"dt"),o(51,"Histogram"),n(),a(52,"dd"),s(53,tr,2,0)(54,ir,1,0),n(),a(55,"dt"),o(56,"Partition by"),n(),a(57,"dd"),o(58),f(59,"lowercase"),n(),s(60,nr,4,2)(61,ar,4,1),n()()),e&2){let t=i;l(12),U(t.keyColumn),l(15),U(t.valueColumn),l(10),_(t.formatVersion),l(4),_(t.storageEngine),l(4),_(t.tablespace||"-"),l(4),_(t.compressed?"yes":"no"),l(4),h(t.histogramColumn?53:-1),l(),h(t.histogramColumn?-1:54),l(4),_(S(59,9,t.partitioningInfo==null?null:t.partitioningInfo.type)||"-"),l(2),h(t.partitioningInfo!=null&&t.partitioningInfo.timeColumn?60:-1),l(),h(t.partitioningInfo!=null&&t.partitioningInfo.valueColumn?61:-1)}}var _i=class e{constructor(i,t,r){this.dialog=r;let m=i.snapshot.parent,C=m.parent.paramMap.get("database"),E=m.paramMap.get("table");this.table$=t.yamcsClient.getTable(C,E)}showEnum(i){this.dialog.open(fi,{width:"400px",data:{column:i}})}static{this.\u0275fac=function(t){return new(t||e)(d(k),d(D),d(Be))}}static{this.\u0275cmp=x({type:e,selectors:[["ng-component"]],standalone:!0,features:[y],decls:2,vars:3,consts:[[1,"panel-content"],["yaDataTable","",1,"expand"],[1,"expand"],["yaDataTable",""],[1,"dl-horizontal"],["matTooltip","Show enum states",1,"enum"],["matTooltip","Show enum states",1,"enum",3,"click"]],template:function(t,r){if(t&1&&(s(0,or,62,11,"div",0),f(1,"async")),t&2){let m;h((m=S(1,1,r.table$))?0:-1,m)}},dependencies:[T,B,hn,ge,fe],styles:[".enum[_ngcontent-%COMP%]{border-bottom:1px dotted #888;cursor:pointer}"],changeDetection:0})}};function rr(e,i){e&1&&(a(0,"th",9),o(1,"Name"),n())}function lr(e,i){if(e&1&&(a(0,"td",10)(1,"a",11),o(2),n()()),e&2){let t=i.$implicit;l(),p("routerLink",t.name),l(),g(" ",t.name," ")}}function mr(e,i){e&1&&c(0,"th",12)}function sr(e,i){e&1&&c(0,"td",10)}function cr(e,i){e&1&&c(0,"tr",13)}function pr(e,i){e&1&&c(0,"tr",14)}var Ci=class e{constructor(i,t){this.yamcs=t;this.displayedColumns=["name","actions"];this.dataSource=new Y;let m=i.snapshot.parent.paramMap.get("database");t.yamcsClient.getTables(m).then(C=>{this.dataSource.data=C})}ngAfterViewInit(){this.dataSource.sort=this.sort}static{this.\u0275fac=function(t){return new(t||e)(d(k),d(D))}}static{this.\u0275cmp=x({type:e,selectors:[["ng-component"]],viewQuery:function(t,r){if(t&1&&oe(H,7),t&2){let m;re(m=le())&&(r.sort=m.first)}},standalone:!0,features:[y],decls:10,vars:3,consts:[[1,"panel-content"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(t,r){t&1&&(a(0,"div",0)(1,"table",1),v(2,2),s(3,rr,2,0,"th",3)(4,lr,3,2,"td",4),b(),v(5,5),s(6,mr,1,0,"th",6)(7,sr,1,0,"td",4),b(),s(8,cr,1,0,"tr",7)(9,pr,1,0,"tr",8),n()()),t&2&&(l(),p("dataSource",r.dataSource),l(7),p("matHeaderRowDef",r.displayedColumns),l(),p("matRowDefColumns",r.displayedColumns))},dependencies:[T,K,H,_e,z,ne,ae,W,J,ee,X,Q,te,Z],encapsulation:2,changeDetection:0})}};function dr(e,i){if(e&1&&(a(0,"div",0),c(1,"code",1),n()),e&2){let t=u();l(),p("innerHTML",t.formatSQL(i.script),ct)}}var hi=class e{constructor(i,t){let r=i.snapshot.parent,m=r.parent.paramMap.get("database"),C=r.paramMap.get("table");this.table$=t.yamcsClient.getTable(m,C)}formatSQL(i){return si(i)}static{this.\u0275fac=function(t){return new(t||e)(d(k),d(D))}}static{this.\u0275cmp=x({type:e,selectors:[["app-table-script-tab"]],standalone:!0,features:[y],decls:2,vars:3,consts:[[1,"panel-content","sql"],[3,"innerHTML"]],template:function(t,r){if(t&1&&(s(0,dr,2,1,"div",0),f(1,"async")),t&2){let m;h((m=S(1,1,r.table$))?0:-1,m)}},dependencies:[T,B],styles:["code[_ngcontent-%COMP%]{display:inline-block;font-size:12px;line-height:14px}",".dtype{color:red}  .paren{color:#1b61b9}  .kw{color:#1b61b9}"],changeDetection:0})}};function ur(e,i){e&1&&c(0,"router-outlet")}var Si=class e{constructor(i,t,r){this.yamcs=t;let m=i.snapshot.parent.paramMap.get("database"),C=i.snapshot.paramMap.get("table");r.setTitle(C),this.table$=t.yamcsClient.getTable(m,C)}static{this.\u0275fac=function(t){return new(t||e)(d(k),d(D),d(A))}}static{this.\u0275cmp=x({type:e,selectors:[["app-table-page"]],standalone:!0,features:[y],decls:2,vars:3,template:function(t,r){if(t&1&&(s(0,ur,1,0,"router-outlet"),f(1,"async")),t&2){let m;h((m=S(1,1,r.table$))?0:-1,m)}},dependencies:[T,B,dt],encapsulation:2,changeDetection:0})}};var wt=class e{transform(i){if(!i)return i;let t=i.match(/Chrome\/([a-zA-Z0-9\.]+)/),r=i.match(/Chromium\/([a-zA-Z0-9\.]+)/),m=i.match(/Edg\/([a-zA-Z0-9\.]+)/),C=i.match(/Firefox\/([a-zA-Z0-9\.]+)/),E=i.match(/OPR\/([a-zA-Z0-9\.]+)/),ve=i.match(/Safari\/([a-zA-Z0-9\.]+)/),pe=i.match(/Seamonkey\/([a-zA-Z0-9\.]+)/),he,de;if(ve&&!t&&!r&&!m){he="Safari",de=ve[1];let st=i.match(/Version\/([a-zA-Z0-9\.]+)/);st&&(de=st[1])}else t&&!r&&!m?(he="Chrome",de=t[1]):r?(he="Chromium",de=r[1]):C&&!pe?(he="Firefox",de=C[1]):pe?(he="Seamonkey",de=pe[1]):E?(he="Opera",de=E[1]):m&&(he="Edge",de=m[1]);return he?`${he} ${de}`:i}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275pipe=Lt({name:"userAgent",type:e,pure:!0,standalone:!0})}};function fr(e,i){if(e&1&&(a(0,"dl",1)(1,"dt"),o(2,"Cumulative read"),n(),a(3,"dd"),o(4),f(5,"formatBytes"),n(),a(6,"dt"),o(7,"Cumulative written"),n(),a(8,"dd"),o(9),f(10,"formatBytes"),n(),a(11,"dt"),o(12,"Rx"),n(),a(13,"dd"),o(14),f(15,"dataRate"),n(),a(16,"dt"),o(17,"Tx"),n(),a(18,"dd"),o(19),f(20,"dataRate"),n()()),e&2){let t=i;l(4),_(S(5,4,t.readBytes)),l(5),_(S(10,6,t.writtenBytes)),l(5),_(S(15,8,t.readThroughput*8)),l(5),_(S(20,10,t.writeThroughput*8))}}function _r(e,i){e&1&&(a(0,"th",20),o(1,"Id"),n())}function Cr(e,i){if(e&1&&(a(0,"td",21),o(1),n()),e&2){let t=i.$implicit;l(),_(t.id)}}function hr(e,i){e&1&&(a(0,"th",22),o(1,"User agent"),n())}function Sr(e,i){if(e&1&&(a(0,"td",21),o(1),f(2,"userAgent"),n()),e&2){let t=i.$implicit;l(),g(" ",S(2,1,t.httpRequest==null?null:t.httpRequest.userAgent)||"-"," ")}}function vr(e,i){e&1&&(a(0,"th",20),o(1,"Protocol"),n())}function br(e,i){if(e&1&&(a(0,"td",21),o(1),n()),e&2){let t=i.$implicit;l(),_((t.httpRequest==null?null:t.httpRequest.protocol)||"-")}}function gr(e,i){e&1&&(a(0,"th",20),o(1,"Remote address"),n())}function xr(e,i){if(e&1&&(a(0,"td",21),o(1),n()),e&2){let t=i.$implicit;l(),_(t.remoteAddress||"-")}}function yr(e,i){e&1&&(a(0,"th",20),o(1,"Read"),n())}function Tr(e,i){if(e&1&&(a(0,"td",21),o(1),f(2,"formatBytes"),n()),e&2){let t=i.$implicit;l(),_(S(2,1,t.readBytes)||"-")}}function Dr(e,i){e&1&&(a(0,"th",20),o(1,"Written"),n())}function wr(e,i){if(e&1&&(a(0,"td",21),o(1),f(2,"formatBytes"),n()),e&2){let t=i.$implicit;l(),_(S(2,1,t.writtenBytes)||"-")}}function Er(e,i){e&1&&(a(0,"th",20),o(1,"Rx"),n())}function Mr(e,i){if(e&1&&(a(0,"td",21),o(1),f(2,"dataRate"),n()),e&2){let t=i.$implicit;l(),_(S(2,1,t.readThroughput*8))}}function Ir(e,i){e&1&&(a(0,"th",20),o(1,"Tx"),n())}function Rr(e,i){if(e&1&&(a(0,"td",21),o(1),f(2,"dataRate"),n()),e&2){let t=i.$implicit;l(),_(S(2,1,t.writeThroughput*8))}}function Ar(e,i){e&1&&(a(0,"th",20),o(1,"Request"),n())}function kr(e,i){if(e&1&&(a(0,"td",21),o(1),n()),e&2){let t=i.$implicit;l(),at(" ",t.httpRequest==null?null:t.httpRequest.method," ",t.httpRequest==null?null:t.httpRequest.uri," ")}}function Pr(e,i){e&1&&(a(0,"th",20),o(1,"Authorization"),n())}function Lr(e,i){if(e&1&&(a(0,"td",21),o(1),n()),e&2){let t=i.$implicit;l(),g(" ",t.username||"-"," ")}}function $r(e,i){e&1&&c(0,"tr",23)}function Fr(e,i){e&1&&c(0,"tr",24)}var vi=class e{constructor(i,t){this.displayedColumns=["id","protocol","remoteAddress","readBytes","writtenBytes","readThroughput","writeThroughput","request","authorization","userAgent"];this.tableTrackerFn=(i,t)=>t.id;this.traffic$=new O(null);this.dataSource=new Y;t.setTitle("HTTP traffic"),this.httpTrafficSubscription=i.yamcsClient.createHttpTrafficSubscription(r=>{this.traffic$.next(r),this.dataSource.data=r.connections})}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}ngOnDestroy(){this.httpTrafficSubscription?.cancel()}static{this.\u0275fac=function(t){return new(t||e)(d(D),d(A))}}static{this.\u0275cmp=x({type:e,selectors:[["ng-component"]],viewQuery:function(t,r){if(t&1&&(oe(H,5),oe(Le,5)),t&2){let m;re(m=le())&&(r.sort=m.first),re(m=le())&&(r.paginator=m.first)}},standalone:!0,features:[y],decls:44,vars:10,consts:[[1,"panel-content"],[1,"dl-horizontal","no-lead"],[1,"section-divider"],["mat-table","","matSort","","matSortActive","id","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource","trackBy"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","userAgent"],["mat-header-cell","","mat-sort-header","","class","expand",4,"matHeaderCellDef"],["matColumnDef","protocol"],["matColumnDef","remoteAddress"],["matColumnDef","readBytes"],["matColumnDef","writtenBytes"],["matColumnDef","readThroughput"],["matColumnDef","writeThroughput"],["matColumnDef","request"],["matColumnDef","authorization"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSize","hidePageSize","showFirstLastButtons"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(t,r){if(t&1&&(a(0,"app-admin-page")(1,"app-admin-toolbar"),o(2," HTTP traffic "),n(),a(3,"div",0),s(4,fr,21,12,"dl",1),f(5,"async"),a(6,"div",2),c(7,"mat-divider"),n(),a(8,"h4"),o(9,"Current connections"),n(),a(10,"table",3),v(11,4),s(12,_r,2,0,"th",5)(13,Cr,2,1,"td",6),b(),v(14,7),s(15,hr,2,0,"th",8)(16,Sr,3,3,"td",6),b(),v(17,9),s(18,vr,2,0,"th",5)(19,br,2,1,"td",6),b(),v(20,10),s(21,gr,2,0,"th",5)(22,xr,2,1,"td",6),b(),v(23,11),s(24,yr,2,0,"th",5)(25,Tr,3,3,"td",6),b(),v(26,12),s(27,Dr,2,0,"th",5)(28,wr,3,3,"td",6),b(),v(29,13),s(30,Er,2,0,"th",5)(31,Mr,3,3,"td",6),b(),v(32,14),s(33,Ir,2,0,"th",5)(34,Rr,3,3,"td",6),b(),v(35,15),s(36,Ar,2,0,"th",5)(37,kr,2,2,"td",6),b(),v(38,16),s(39,Pr,2,0,"th",5)(40,Lr,2,1,"td",6),b(),s(41,$r,1,0,"tr",17)(42,Fr,1,0,"tr",18),n(),c(43,"mat-paginator",19),n()()),t&2){let m;l(4),h((m=S(5,8,r.traffic$))?4:-1,m),l(6),p("dataSource",r.dataSource)("trackBy",r.tableTrackerFn),l(31),p("matHeaderRowDef",r.displayedColumns),l(),p("matRowDefColumns",r.displayedColumns),l(),p("pageSize",100)("hidePageSize",!0)("showFirstLastButtons",!0)}},dependencies:[P,L,T,B,Ue,Le,H,_e,z,ne,ae,W,J,ee,X,Q,te,Z,Wn,Qt,wt],encapsulation:2,changeDetection:0})}};function Nr(e,i){e&1&&c(0,"th",18)}function Ur(e,i){if(e&1){let t=j();a(0,"td",19)(1,"input",20),w("click",function(m){return I(t),R(m.stopPropagation())})("change",function(m){let C=I(t).$implicit,E=u(2);return R(m?E.selection.toggle(C):null)}),n()()}if(e&2){let t=i.$implicit,r=u(2);l(),p("checked",r.selection.isSelected(t))}}function Br(e,i){e&1&&(a(0,"th",21),o(1,"Type"),n())}function jr(e,i){e&1&&(a(0,"mat-icon",23),o(1,"person"),n())}function Vr(e,i){if(e&1&&(a(0,"td",22),s(1,jr,2,0,"mat-icon",23),n()),e&2){let t=i.$implicit;l(),h(t.user?1:-1)}}function Hr(e,i){e&1&&(a(0,"th",24),o(1,"Member"),n())}function Or(e,i){if(e&1&&(a(0,"td",22),o(1),n()),e&2){let t=i.$implicit;l(),g(" ",t.label," ")}}function Yr(e,i){e&1&&c(0,"tr",25)}function Gr(e,i){if(e&1){let t=j();a(0,"tr",26),w("click",function(){let m=I(t).$implicit,C=u(2);return R(C.toggleOne(m))}),n()}if(e&2){let t=i.$implicit,r=u(2);Me("selected",r.selection.isSelected(t))}}function qr(e,i){if(e&1&&(a(0,"table",3),v(1,8),s(2,Nr,1,0,"th",9)(3,Ur,2,1,"td",10),b(),v(4,11),s(5,Br,2,0,"th",12)(6,Vr,2,1,"td",13),b(),v(7,14),s(8,Hr,2,0,"th",15)(9,Or,2,1,"td",13),b(),s(10,Yr,1,0,"tr",16)(11,Gr,1,2,"tr",17),n()),e&2){let t=u();p("dataSource",t.dataSource),l(10),p("matHeaderRowDef",t.displayedColumns),l(),p("matRowDefColumns",t.displayedColumns)}}function zr(e,i){e&1&&(a(0,"ya-empty-message"),o(1,"No rows to display"),n())}var Mt=class e{constructor(i,t,r){this.dialogRef=i;this.data=r;this.displayedColumns=["select","type","name"];this.filterControl=new q;this.dataSource=new Y;this.selection=new jt(!0,[]);let C=r.items.filter(E=>E.user).map(E=>E.user.name);t.yamcsClient.getUsers().then(E=>{let ve=(E||[]).filter(pe=>C.indexOf(pe.name)===-1).map(pe=>({label:pe.displayName||pe.name,user:pe}));this.dataSource.data=ve})}ngAfterViewInit(){this.filterControl.valueChanges.subscribe(()=>{let i=this.filterControl.value||"";this.dataSource.filter=i.toLowerCase()}),this.dataSource.filterPredicate=(i,t)=>i.label.toLowerCase().indexOf(t)>=0,this.dataSource.paginator=this.paginator}toggleOne(i){(!this.selection.isSelected(i)||this.selection.selected.length>1)&&this.selection.clear(),this.selection.toggle(i)}save(){this.dialogRef.close(this.selection.selected)}static{this.\u0275fac=function(t){return new(t||e)(d(Ot),d(D),d(Ye))}}static{this.\u0275cmp=x({type:e,selectors:[["app-add-members-dialog"]],viewQuery:function(t,r){if(t&1&&oe(Le,7),t&2){let m;re(m=le())&&(r.paginator=m.first)}},standalone:!0,features:[y],decls:13,vars:7,consts:[["mat-dialog-title",""],[1,"filter-bar"],["placeholder","Filter users",3,"formControl"],["mat-table","",1,"ya-data-table",2,"width","100%",3,"dataSource"],[3,"pageSize","hidePageSize","showFirstLastButtons"],["align","end"],["mat-dialog-close",""],["appearance","primary",3,"click","disabled"],["matColumnDef","select"],["mat-header-cell","","class","checkbox",4,"matHeaderCellDef"],["mat-cell","","class","checkbox",4,"matCellDef"],["matColumnDef","type"],["mat-header-cell","","width","1",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"selected","click",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"checkbox"],["mat-cell","",1,"checkbox"],["type","checkbox",3,"click","change","checked"],["mat-header-cell","","width","1"],["mat-cell",""],["matTooltip","User",2,"vertical-align","middle"],["mat-header-cell",""],["mat-header-row",""],["mat-row","",3,"click"]],template:function(t,r){t&1&&(a(0,"h2",0),o(1,"Add members"),n(),a(2,"mat-dialog-content")(3,"div",1),c(4,"ya-search-filter",2),n(),s(5,qr,12,3,"table",3)(6,zr,2,0,"ya-empty-message"),c(7,"mat-paginator",4),n(),a(8,"mat-dialog-actions",5)(9,"ya-button",6),o(10,"CANCEL"),n(),a(11,"ya-button",7),w("click",function(){return r.save()}),o(12,"ADD"),n()()),t&2&&(l(4),p("formControl",r.filterControl),l(),h(r.dataSource?5:-1),l(),h(r.dataSource.data.length?-1:6),l(),p("pageSize",10)("hidePageSize",!0)("showFirstLastButtons",!1),l(4),p("disabled",r.selection.isEmpty()))},dependencies:[T,me,Ae,Ge,qe,We,ze,ue,Le,z,ne,ae,W,J,ee,X,Q,te,Z,fe,Ce,xe,Ee],styles:[".selected[_ngcontent-%COMP%]{background-color:#f0f4fd!important}.mat-mdc-row[_ngcontent-%COMP%]{cursor:pointer}"],changeDetection:0})}};function Wr(e,i){e&1&&(a(0,"tr")(1,"td",11),o(2,"No rows to display"),n()())}function Qr(e,i){if(e&1){let t=j();a(0,"tr")(1,"td")(2,"mat-icon",12),o(3,"person"),n()(),a(4,"td"),o(5),n(),a(6,"td",13)(7,"ya-text-action",14),w("click",function(){let m=I(t).$implicit,C=u(2);return R(C.deleteItem(m))}),o(8,"DELETE"),n()()()}if(e&2){let t=i.$implicit;l(5),_(t.label)}}function Zr(e,i){if(e&1&&(a(0,"table",6)(1,"tr")(2,"th",10),o(3,"Type"),n(),a(4,"th"),o(5,"Member"),n(),c(6,"th"),n(),s(7,Wr,3,0,"tr"),N(8,Qr,9,1,"tr",null,F),n()),e&2){let t=i;l(7),h(t.length?-1:7),l(),U(t)}}var bi=class e{constructor(i,t,r,m,C,E,ve,pe){this.router=r;this.route=m;this.yamcs=C;this.dialog=E;this.messageService=ve;this.location=pe;this.memberItems$=new O([]);t.setTitle("Create a Group"),this.form=i.group({name:new q("",[lt.required]),description:new q})}showAddMembersDialog(){this.dialog.open(Mt,{data:{items:this.memberItems$.value},width:"600px"}).afterClosed().subscribe(t=>{t&&this.updateMemberItems([...this.memberItems$.value,...t])})}updateMemberItems(i){i.sort((t,r)=>t.label<r.label?-1:t.label>r.label?1:0),this.memberItems$.next(i)}deleteItem(i){this.updateMemberItems(this.memberItems$.value.filter(t=>t!==i))}onConfirm(){let i={name:this.form.value.name,description:this.form.value.description,users:this.memberItems$.value.filter(t=>t.user).map(t=>t.user.name)};this.yamcs.yamcsClient.createGroup(i).then(()=>this.router.navigate([".."],{relativeTo:this.route})).catch(t=>this.messageService.showError(t))}static{this.\u0275fac=function(t){return new(t||e)(d(Oe),d(A),d(G),d(k),d(D),d(Be),d(be),d(pt))}}static{this.\u0275cmp=x({type:e,selectors:[["ng-component"]],standalone:!0,features:[y],decls:29,vars:5,consts:[["routerLink","..","icon","arrow_back"],[1,"form-content","ya-form"],["novalidate","",3,"formGroup"],["formControlName","name","type","text"],["formControlName","description","rows","5"],["icon","add_circle_outline",3,"click"],["yaDataTable","",2,"width","100%"],[1,"action-bar"],[3,"click"],["appearance","primary",3,"click","disabled"],["width","1"],["colspan","3"],["matTooltip","User",2,"vertical-align","middle"],[2,"text-align","right"],["icon","delete",3,"click"]],template:function(t,r){if(t&1&&(a(0,"app-admin-page")(1,"app-admin-toolbar"),c(2,"ya-page-icon-button",0),o(3," Create group "),n(),a(4,"div",1)(5,"form",2)(6,"label"),o(7," Group name "),c(8,"br")(9,"input",3),n(),c(10,"br"),a(11,"label"),o(12," Description "),c(13,"textarea",4),n()(),a(14,"p"),o(15,"\xA0"),n(),a(16,"ya-button",5),w("click",function(){return r.showAddMembersDialog()}),o(17,"Add members"),n(),a(18,"p"),o(19,"\xA0"),n(),s(20,Zr,10,1,"table",6),f(21,"async"),a(22,"p"),o(23,"\xA0"),n(),a(24,"div",7)(25,"ya-button",8),w("click",function(){return r.location.back()}),o(26,"Cancel"),n(),a(27,"ya-button",9),w("click",function(){return r.onConfirm()}),o(28," CREATE "),n()()()()),t&2){let m;l(5),p("formGroup",r.form),l(15),h((m=S(21,3,r.memberItems$))?20:-1,m),l(7),p("disabled",!r.form.valid)}},dependencies:[P,L,T,B,Re,He,me,Ie,ke,Pe,K,ge,ue,fe,Ce,we,ut],encapsulation:2,changeDetection:0})}};var gi=class e{constructor(i){this.data=i}static{this.\u0275fac=function(t){return new(t||e)(d(Ye))}}static{this.\u0275cmp=x({type:e,selectors:[["app-application-credentials-dialog"]],standalone:!0,features:[y],decls:22,vars:3,consts:[["mat-dialog-title",""],[1,"dl-horizontal"],["align","end"],["appearance","primary","mat-dialog-close",""]],template:function(t,r){t&1&&(a(0,"h2",0),o(1,"Service account created"),n(),a(2,"mat-dialog-content")(3,"p"),o(4),n(),a(5,"dl",1)(6,"dt"),o(7,"Application ID"),n(),a(8,"dd")(9,"pre"),o(10),n()(),a(11,"dt"),o(12,"Application Secret"),n(),a(13,"dd")(14,"pre"),o(15),n()()(),a(16,"strong"),o(17,"Important:"),n(),o(18,` Take note of these application credentials. It is not possible to display them after closing this dialog.
`),n(),a(19,"mat-dialog-actions",2)(20,"ya-button",3),o(21,"CLOSE"),n()()),t&2&&(l(4),g(" The service account '",r.data.name,"' was created successfully. You can use this account to connect an application to Yamcs. "),l(6),_(r.data.applicationId),l(5),_(r.data.applicationSecret))},dependencies:[T,Ge,qe,We,ze,Ce],encapsulation:2,changeDetection:0})}};var xi=class e{constructor(i,t,r,m,C,E,ve,pe){this.router=r;this.route=m;this.yamcs=C;this.messageService=E;this.location=ve;this.dialog=pe;t.setTitle("Create service account"),this.form=i.group({name:new q("",[lt.required])})}onConfirm(){let i={name:this.form.value.name};this.yamcs.yamcsClient.createServiceAccount(i).then(t=>this.onServerConfirm(t)).catch(t=>this.messageService.showError(t))}onServerConfirm(i){this.dialog.open(gi,{disableClose:!0,closeOnNavigation:!1,data:i,width:"550px"}).afterClosed().subscribe(()=>{this.router.navigate([".."],{relativeTo:this.route})})}static{this.\u0275fac=function(t){return new(t||e)(d(Oe),d(A),d(G),d(k),d(D),d(be),d(pt),d(Be))}}static{this.\u0275cmp=x({type:e,selectors:[["ng-component"]],standalone:!0,features:[y],decls:27,vars:4,consts:[["routerLink","..","icon","arrow_back"],[1,"form-content","ya-form"],["novalidate","",3,"formGroup"],[1,"hint"],["formControlName","name","type","text"],[2,"margin-top","32px"],["type","checkbox",3,"disabled","checked"],[1,"action-bar"],[3,"click"],["appearance","primary",3,"click","disabled"]],template:function(t,r){t&1&&(a(0,"app-admin-page")(1,"app-admin-toolbar"),c(2,"ya-page-icon-button",0),o(3," Create service account "),n(),a(4,"div",1)(5,"form",2)(6,"label"),o(7," Service account name "),a(8,"span",3),o(9,"(required)"),n(),c(10,"br")(11,"input",4),n(),a(12,"h2",5),o(13,"Scopes"),n(),a(14,"label"),c(15,"input",6),o(16," Impersonation "),c(17,"br"),a(18,"span",3),o(19," Grants permission to access the API on behalf of any user in the system. "),n()()(),a(20,"p"),o(21,"\xA0"),n(),a(22,"div",7)(23,"ya-button",8),w("click",function(){return r.location.back()}),o(24,"Cancel"),n(),a(25,"ya-button",9),w("click",function(){return r.onConfirm()}),o(26," CREATE "),n()()()()),t&2&&(l(5),p("formGroup",r.form),l(10),p("disabled",!0)("checked",!0),l(10),p("disabled",!r.form.valid))},dependencies:[P,L,T,Re,He,me,Ie,ke,Pe,K,Ce,we],encapsulation:2,changeDetection:0})}};var yi=class e{constructor(i,t,r,m,C){this.router=r;this.yamcs=m;this.messageService=C;t.setTitle("Create a User"),this.form=i.group({name:new q("",[lt.required]),displayName:new q,email:new q,password:new q,passwordConfirmation:new q})}onConfirm(){let i=this.form.value,t={name:i.name};if(i.displayName&&(t.displayName=i.displayName),i.email&&(t.email=i.email),i.password){if(i.password!==i.passwordConfirmation){alert("Password confirmation does not match password");return}t.password=i.password}this.yamcs.yamcsClient.createUser(t).then(()=>this.router.navigateByUrl(`/admin/iam/users/${i.name}`)).catch(r=>this.messageService.showError(r))}static{this.\u0275fac=function(t){return new(t||e)(d(Oe),d(A),d(G),d(D),d(be))}}static{this.\u0275cmp=x({type:e,selectors:[["ng-component"]],standalone:!0,features:[y],decls:51,vars:2,consts:[["routerLink","..","icon","arrow_back"],[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],[1,"hint"],["formControlName","name","type","text"],["formControlName","displayName","type","text"],["formControlName","email","type","text"],[1,"section-divider"],["formControlName","password","type","password"],["formControlName","passwordConfirmation","type","password"],[1,"action-bar"],["routerLink",".."],["appearance","primary",3,"click","disabled"]],template:function(t,r){t&1&&(a(0,"app-admin-page")(1,"app-admin-toolbar"),c(2,"ya-page-icon-button",0),o(3," Create user "),n(),a(4,"div",1)(5,"form",2)(6,"label"),o(7," Username "),a(8,"span",3),o(9,"(required)"),n(),c(10,"br")(11,"input",4),n(),c(12,"br"),a(13,"label"),o(14," Display name "),a(15,"span",3),o(16,"(optional)"),n(),c(17,"br")(18,"input",5),n(),c(19,"br"),a(20,"label"),o(21," Email "),a(22,"span",3),o(23,"(optional)"),n(),c(24,"br")(25,"input",6),n(),a(26,"p"),o(27,"\xA0"),n(),a(28,"div",7),c(29,"mat-divider"),n(),c(30,"br"),a(31,"label"),o(32," Password "),a(33,"span",3),o(34,"(optional)"),n(),c(35,"br"),a(36,"span",3),o(37," User without a password may still be able to login if an external identity provider is configured. "),n(),c(38,"input",8),n(),c(39,"br"),a(40,"label"),o(41," Password confirmation "),c(42,"br")(43,"input",9),n()(),a(44,"p"),o(45,"\xA0"),n(),a(46,"div",10)(47,"ya-button",11),o(48,"Cancel"),n(),a(49,"ya-button",12),w("click",function(){return r.onConfirm()}),o(50," CREATE "),n()()()()),t&2&&(l(5),p("formGroup",r.form),l(44),p("disabled",!r.form.valid))},dependencies:[P,L,T,Re,He,me,Ie,ke,Pe,K,Ue,Ce,we],encapsulation:2,changeDetection:0})}};function Kr(e,i){e&1&&(a(0,"tr")(1,"td",10),o(2,"No rows to display"),n()())}function Jr(e,i){if(e&1){let t=j();a(0,"tr")(1,"td")(2,"mat-icon",11),o(3,"person"),n()(),a(4,"td"),o(5),n(),a(6,"td",12)(7,"ya-text-action",13),w("click",function(){let m=I(t).$implicit,C=u(3);return R(C.deleteItem(m))}),o(8,"DELETE"),n()()()}if(e&2){let t=i.$implicit;l(5),_(t.label)}}function Xr(e,i){if(e&1&&(a(0,"table",5)(1,"tr")(2,"th",9),o(3,"Type"),n(),a(4,"th"),o(5,"Member"),n(),c(6,"th"),n(),s(7,Kr,3,0,"tr"),N(8,Jr,9,1,"tr",null,F),n()),e&2){let t=i;l(7),h(t.length?-1:7),l(),U(t)}}function el(e,i){if(e&1){let t=j();a(0,"app-admin-page")(1,"app-admin-toolbar"),o(2),n(),a(3,"div",0)(4,"form",1)(5,"label"),o(6," Name "),c(7,"br")(8,"input",2),n(),c(9,"br"),a(10,"label"),o(11," Description "),c(12,"textarea",3),n()(),a(13,"p"),o(14,"\xA0"),n(),a(15,"ya-button",4),w("click",function(){I(t);let m=u();return R(m.showAddMembersDialog())}),o(16,"Add members"),n(),a(17,"p"),o(18,"\xA0"),n(),s(19,Xr,10,1,"table",5),f(20,"async"),a(21,"p"),o(22,"\xA0"),n(),a(23,"div",6)(24,"ya-button",7),w("click",function(){I(t);let m=u();return R(m.location.back())}),o(25,"Cancel"),n(),a(26,"ya-button",8),f(27,"async"),w("click",function(){I(t);let m=u();return R(m.onConfirm())}),o(28," SAVE CHANGES "),n()()()()}if(e&2){let t,r=u();l(2),g("Edit Group: ",i.name,""),l(2),p("formGroup",r.form),l(15),h((t=S(20,4,r.memberItems$))?19:-1,t),l(7),p("disabled",!S(27,6,r.dirty$)||!r.form.valid)}}var Ti=class e{constructor(i,t,r,m,C,E,ve,pe){this.router=r;this.yamcs=C;this.messageService=E;this.dialog=ve;this.location=pe;this.memberItems$=new O([]);this.dirty$=new O(!1);t.setTitle("Edit Group");let he=m.snapshot.paramMap.get("name");this.group$=C.yamcsClient.getGroup(he),this.group$.then(de=>{this.group=de,this.form=i.group({name:new q(de.name),description:new q(de.description)}),this.formSubscription=this.form.valueChanges.subscribe(()=>{this.dirty$.next(!0)});let st=[];if(de.users)for(let St of de.users)st.push({label:St.displayName||St.name,user:St});this.updateMemberItems(st,!1)})}showAddMembersDialog(){this.dialog.open(Mt,{data:{items:this.memberItems$.value},width:"600px"}).afterClosed().subscribe(t=>{t&&this.updateMemberItems([...this.memberItems$.value,...t])})}updateMemberItems(i,t=!0){i.sort((r,m)=>r.label<m.label?-1:r.label>m.label?1:0),this.memberItems$.next(i),this.dirty$.next(t)}deleteItem(i){this.updateMemberItems(this.memberItems$.value.filter(t=>t!==i))}onConfirm(){let i=this.form.value,t={newName:i.name,description:i.description,memberInfo:{users:this.memberItems$.value.filter(m=>m.user).map(m=>m.user.name)}},r=i.name;this.yamcs.yamcsClient.editGroup(this.group.name,t).then(()=>this.router.navigateByUrl(`/admin/iam/groups/${r}`)).catch(m=>this.messageService.showError(m))}ngOnDestroy(){this.formSubscription?.unsubscribe()}static{this.\u0275fac=function(t){return new(t||e)(d(Oe),d(A),d(G),d(k),d(D),d(be),d(Be),d(pt))}}static{this.\u0275cmp=x({type:e,selectors:[["ng-component"]],standalone:!0,features:[y],decls:2,vars:3,consts:[[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],["formControlName","name","type","text"],["formControlName","description","rows","5"],["icon","add_circle_outline",3,"click"],["yaDataTable","",2,"width","100%"],[1,"action-bar"],[3,"click"],["appearance","primary",3,"click","disabled"],["width","1"],["colspan","3"],["matTooltip","User",2,"vertical-align","middle"],[2,"text-align","right"],["icon","delete",3,"click"]],template:function(t,r){if(t&1&&(s(0,el,29,8,"app-admin-page"),f(1,"async")),t&2){let m;h((m=S(1,1,r.group$))?0:-1,m)}},dependencies:[P,L,T,B,Re,He,me,Ie,ke,Pe,ge,ue,fe,Ce,ut],encapsulation:2,changeDetection:0})}};function tl(e,i){e&1&&c(0,"th",16)}function il(e,i){if(e&1){let t=j();a(0,"td",17)(1,"input",18),w("click",function(m){return I(t),R(m.stopPropagation())})("change",function(m){let C=I(t).$implicit,E=u(2);return R(m?E.selection.toggle(C):null)}),n()()}if(e&2){let t=i.$implicit,r=u(2);l(),p("checked",r.selection.isSelected(t))}}function nl(e,i){e&1&&(a(0,"th",19),o(1,"Role"),n())}function al(e,i){if(e&1&&(a(0,"td",20),o(1),n()),e&2){let t=i.$implicit;l(),g(" ",t.label," ")}}function ol(e,i){e&1&&c(0,"tr",21)}function rl(e,i){if(e&1){let t=j();a(0,"tr",22),w("click",function(){let m=I(t).$implicit,C=u(2);return R(C.toggleOne(m))}),n()}if(e&2){let t=i.$implicit,r=u(2);Me("selected",r.selection.isSelected(t))}}function ll(e,i){if(e&1&&(a(0,"table",3),v(1,8),s(2,tl,1,0,"th",9)(3,il,2,1,"td",10),b(),v(4,11),s(5,nl,2,0,"th",12)(6,al,2,1,"td",13),b(),s(7,ol,1,0,"tr",14)(8,rl,1,2,"tr",15),n()),e&2){let t=u();p("dataSource",t.dataSource),l(7),p("matHeaderRowDef",t.displayedColumns),l(),p("matRowDefColumns",t.displayedColumns)}}function ml(e,i){e&1&&(a(0,"ya-empty-message"),o(1,"No rows to display"),n())}var Di=class e{constructor(i,t,r){this.dialogRef=i;this.data=r;this.displayedColumns=["select","name"];this.filterControl=new q;this.dataSource=new Y;this.selection=new jt(!0,[]);let C=r.items.filter(E=>E.role).map(E=>E.role.name);t.yamcsClient.getRoles().then(E=>{let ve=(E||[]).filter(pe=>C.indexOf(pe.name)===-1).map(pe=>({label:pe.name,role:pe}));this.dataSource.data=ve})}ngAfterViewInit(){this.filterControl.valueChanges.subscribe(()=>{let i=this.filterControl.value||"";this.dataSource.filter=i.toLowerCase()}),this.dataSource.filterPredicate=(i,t)=>i.label.toLowerCase().indexOf(t)>=0,this.dataSource.paginator=this.paginator}toggleOne(i){(!this.selection.isSelected(i)||this.selection.selected.length>1)&&this.selection.clear(),this.selection.toggle(i)}save(){this.dialogRef.close(this.selection.selected)}static{this.\u0275fac=function(t){return new(t||e)(d(Ot),d(D),d(Ye))}}static{this.\u0275cmp=x({type:e,selectors:[["app-add-roles-dialog"]],viewQuery:function(t,r){if(t&1&&oe(Le,7),t&2){let m;re(m=le())&&(r.paginator=m.first)}},standalone:!0,features:[y],decls:13,vars:7,consts:[["mat-dialog-title",""],[1,"filter-bar"],["placeholder","Filter roles",3,"formControl"],["mat-table","",1,"ya-data-table",2,"width","100%",3,"dataSource"],[3,"pageSize","hidePageSize","showFirstLastButtons"],["align","end"],["mat-dialog-close",""],["appearance","primary",3,"click","disabled"],["matColumnDef","select"],["mat-header-cell","","class","checkbox",4,"matHeaderCellDef"],["mat-cell","","class","checkbox",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"selected","click",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"checkbox"],["mat-cell","",1,"checkbox"],["type","checkbox",3,"click","change","checked"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",3,"click"]],template:function(t,r){t&1&&(a(0,"h2",0),o(1,"Add roles"),n(),a(2,"mat-dialog-content")(3,"div",1),c(4,"ya-search-filter",2),n(),s(5,ll,9,3,"table",3)(6,ml,2,0,"ya-empty-message"),c(7,"mat-paginator",4),n(),a(8,"mat-dialog-actions",5)(9,"ya-button",6),o(10,"CANCEL"),n(),a(11,"ya-button",7),w("click",function(){return r.save()}),o(12,"ADD"),n()()),t&2&&(l(4),p("formControl",r.filterControl),l(),h(r.dataSource?5:-1),l(),h(r.dataSource.data.length?-1:6),l(),p("pageSize",10)("hidePageSize",!0)("showFirstLastButtons",!1),l(4),p("disabled",r.selection.isEmpty()))},dependencies:[T,me,Ae,Ge,qe,We,ze,Le,z,ne,ae,W,J,ee,X,Q,te,Z,Ce,xe,Ee],styles:[".selected[_ngcontent-%COMP%]{background-color:#f0f4fd!important}.mat-mdc-row[_ngcontent-%COMP%]{cursor:pointer}"],changeDetection:0})}};function sl(e,i){e&1&&(a(0,"span",5),o(1," This user has an external identity. Changes to this field may get overwritten on next login. "),n())}function cl(e,i){e&1&&(a(0,"span",5),o(1," This user has an external identity. Changes to this field may get overwritten on next login. "),n())}function pl(e,i){e&1&&(a(0,"tr")(1,"td",14),o(2,"No rows to display"),n()())}function dl(e,i){if(e&1){let t=j();a(0,"tr")(1,"td"),o(2),n(),a(3,"td",15)(4,"ya-text-action",16),w("click",function(){let m=I(t).$implicit,C=u(3);return R(C.deleteItem(m))}),o(5,"DELETE"),n()()()}if(e&2){let t=i.$implicit;l(2),_(t.label)}}function ul(e,i){if(e&1&&(a(0,"table",10)(1,"tr")(2,"th"),o(3,"Role"),n(),c(4,"th"),n(),s(5,pl,3,0,"tr"),N(6,dl,6,1,"tr",null,F),n()),e&2){let t=i;l(5),h(t.length?-1:5),l(),U(t)}}function fl(e,i){if(e&1){let t=j();a(0,"app-admin-page")(1,"app-admin-toolbar"),o(2),n(),a(3,"div",0)(4,"form",1)(5,"div",2),o(6," Username "),c(7,"br")(8,"input",3),n(),c(9,"br"),a(10,"div",2),o(11," Display name "),c(12,"br")(13,"input",4),s(14,sl,2,0,"span",5),n(),c(15,"br"),a(16,"div",2),o(17," Email "),c(18,"br")(19,"input",6),s(20,cl,2,0,"span",5),n(),c(21,"br"),a(22,"div",2),o(23," Active "),c(24,"br")(25,"mat-slide-toggle",7)(26,"br"),a(27,"span",5),o(28,' Inactive users are considered "blocked". They are not or no longer able to login. '),n()(),c(29,"br"),a(30,"div",2),o(31," Superuser "),c(32,"br")(33,"mat-slide-toggle",8)(34,"br"),a(35,"span",5),o(36," Superusers bypass any permission checks. This attribute is intended for system administrators only. "),n()(),a(37,"p"),o(38,"\xA0"),n(),a(39,"ya-button",9),w("click",function(){I(t);let m=u();return R(m.showAddRolesDialog())}),o(40,"Add roles"),n(),a(41,"p"),o(42,"\xA0"),n(),s(43,ul,8,1,"table",10),f(44,"async"),n(),a(45,"p"),o(46,"\xA0"),n(),a(47,"div",11)(48,"ya-button",12),w("click",function(){I(t);let m=u();return R(m.location.back())}),o(49,"Cancel"),n(),a(50,"ya-button",13),f(51,"async"),w("click",function(){I(t);let m=u();return R(m.onConfirm())}),o(52," SAVE CHANGES "),n()()()()}if(e&2){let t,r=i,m=u();l(2),g("Edit User: ",r.displayName||r.name,""),l(2),p("formGroup",m.form),l(4),p("value",r.name),l(6),h(r.identities&&r.identities.length>0?14:-1),l(6),h(r.identities&&r.identities.length>0?20:-1),l(23),h((t=S(44,7,m.roleItems$))?43:-1,t),l(7),p("disabled",!S(51,9,m.dirty$)||!m.form.valid)}}var wi=class e{constructor(i,t,r,m,C,E,ve,pe){this.router=r;this.route=m;this.yamcs=C;this.messageService=E;this.dialog=ve;this.location=pe;this.roleItems$=new O([]);this.dirty$=new O(!1);t.setTitle("Edit User");let he=m.snapshot.paramMap.get("username");this.user$=C.yamcsClient.getUser(he),this.user$.then(de=>{this.user=de,this.form=i.group({displayName:new q(de.displayName),email:new q(de.email),active:new q(de.active),superuser:new q(de.superuser)}),this.formSubscription=this.form.valueChanges.subscribe(()=>{this.dirty$.next(!0)});let st=[];if(de.roles)for(let St of de.roles)st.push({label:St.name,role:St});this.updateRoleItems(st,!1)})}showAddRolesDialog(){this.dialog.open(Di,{data:{items:this.roleItems$.value},width:"600px"}).afterClosed().subscribe(t=>{t&&this.updateRoleItems([...this.roleItems$.value,...t])})}updateRoleItems(i,t=!0){i.sort((r,m)=>r.label<m.label?-1:r.label>m.label?1:0),this.roleItems$.next(i),this.dirty$.next(t)}deleteItem(i){this.updateRoleItems(this.roleItems$.value.filter(t=>t!==i))}onConfirm(){let i=this.form.value,t={roleAssignment:{roles:this.roleItems$.value.filter(r=>r.role).map(r=>r.role.name)}};i.displayName!==this.user.displayName&&(t.displayName=i.displayName),i.email!==this.user.email&&(t.email=i.email),i.active!==this.user.active&&(t.active=i.active),i.superuser!==this.user.superuser&&(t.superuser=i.superuser),this.yamcs.yamcsClient.editUser(this.user.name,t).then(()=>this.router.navigate([".."],{relativeTo:this.route})).catch(r=>this.messageService.showError(r))}ngOnDestroy(){this.formSubscription?.unsubscribe()}static{this.\u0275fac=function(t){return new(t||e)(d(Oe),d(A),d(G),d(k),d(D),d(be),d(Be),d(pt))}}static{this.\u0275cmp=x({type:e,selectors:[["ng-component"]],standalone:!0,features:[y],decls:2,vars:3,consts:[[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],[1,"label"],["disabled","","type","text",3,"value"],["formControlName","displayName","type","text"],[1,"hint"],["formControlName","email","type","text"],["formControlName","active"],["formControlName","superuser"],["icon","add_circle_outline",3,"click"],["yaDataTable","",2,"width","100%"],[1,"action-bar"],[3,"click"],["appearance","primary",3,"click","disabled"],["colspan","2"],[2,"text-align","right"],["icon","delete",3,"click"]],template:function(t,r){if(t&1&&(s(0,fl,53,11,"app-admin-page"),f(1,"async")),t&2){let m;h((m=S(1,1,r.user$))?0:-1,m)}},dependencies:[P,L,T,B,Re,He,me,Ie,ke,Pe,ge,Mn,Ce,ut],encapsulation:2,changeDetection:0})}};var _l=e=>[e,"edit"];function Cl(e,i){e&1&&(a(0,"th",13),o(1,"Group"),n())}function hl(e,i){if(e&1&&(a(0,"td",14)(1,"a",15),o(2),n()()),e&2){let t=i.$implicit;l(),p("routerLink",t.name),l(),_(t.name)}}function Sl(e,i){e&1&&(a(0,"th",13),o(1,"Members"),n())}function vl(e,i){if(e&1&&(a(0,"mat-icon",16),o(1,"person"),n(),o(2),c(3,"br")),e&2){let t=i.$implicit;l(2),g(" ",t.displayName||t.name," ")}}function bl(e,i){if(e&1&&(a(0,"td",14),N(1,vl,4,1,null,null,F),n()),e&2){let t=i.$implicit;l(),U(t.users)}}function gl(e,i){e&1&&c(0,"th",17)}function xl(e,i){if(e&1){let t=j();a(0,"td",14)(1,"ya-more")(2,"a",18),o(3,"Edit group"),n(),a(4,"button",19),w("click",function(){let m=I(t).$implicit,C=u();return R(C.deleteGroup(m.name))}),o(5,"Delete group"),n()()()}if(e&2){let t=i.$implicit;l(2),p("routerLink",Se(1,_l,t.name))}}function yl(e,i){e&1&&c(0,"tr",20)}function Tl(e,i){e&1&&c(0,"tr",21)}function Dl(e,i){e&1&&(a(0,"ya-empty-message"),o(1,"No rows to display"),n())}var Ei=class e{constructor(i,t,r,m,C){this.yamcs=i;this.route=r;this.router=m;this.messageService=C;this.filterControl=new q;this.displayedColumns=["name","members","actions"];this.dataSource=new Y;t.setTitle("Groups"),this.dataSource.filterPredicate=(E,ve)=>E.name.toLowerCase().indexOf(ve)>=0}ngAfterViewInit(){let i=this.route.snapshot.queryParamMap;i.has("filter")&&(this.filterControl.setValue(i.get("filter")),this.dataSource.filter=i.get("filter").toLowerCase()),this.filterControl.valueChanges.subscribe(()=>{this.updateURL();let t=this.filterControl.value||"";this.dataSource.filter=t.toLowerCase()}),this.refresh(),this.dataSource.sort=this.sort}refresh(){this.yamcs.yamcsClient.getGroups().then(i=>{this.dataSource.data=i})}updateURL(){let i=this.filterControl.value;this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:i||null},queryParamsHandling:"merge"})}deleteGroup(i){confirm(`Are you sure you want to delete group ${i}`)&&this.yamcs.yamcsClient.deleteGroup(i).then(()=>this.refresh()).catch(t=>this.messageService.showError(t))}static{this.\u0275fac=function(t){return new(t||e)(d(D),d(A),d(k),d(G),d(be))}}static{this.\u0275cmp=x({type:e,selectors:[["ng-component"]],viewQuery:function(t,r){if(t&1&&oe(H,7),t&2){let m;re(m=le())&&(r.sort=m.first)}},standalone:!0,features:[y],decls:21,vars:5,consts:[["routerLink","create","icon","add_circle_outline"],[1,"panel-content"],[1,"filter-bar"],["placeholder","Filter groups",3,"formControl"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","members"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink"],[1,"icon16",2,"vertical-align","middle"],["mat-header-cell","",1,"expand"],["mat-menu-item","",3,"routerLink"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,r){t&1&&(a(0,"app-admin-page")(1,"app-admin-toolbar"),o(2," Groups \xA0\xA0\xA0 "),a(3,"ya-page-button",0),o(4,"Create group"),n()(),a(5,"div",1)(6,"div",2),c(7,"ya-search-filter",3),n(),a(8,"table",4),v(9,5),s(10,Cl,2,0,"th",6)(11,hl,3,2,"td",7),b(),v(12,8),s(13,Sl,2,0,"th",6)(14,bl,3,0,"td",7),b(),v(15,9),s(16,gl,1,0,"th",10)(17,xl,6,3,"td",7),b(),s(18,yl,1,0,"tr",11)(19,Tl,1,0,"tr",12),n(),s(20,Dl,2,0,"ya-empty-message"),n()()),t&2&&(l(7),p("formControl",r.filterControl),l(),p("dataSource",r.dataSource),l(10),p("matHeaderRowDef",r.displayedColumns),l(),p("matRowDefColumns",r.displayedColumns),l(),h(r.dataSource.data.length?-1:20))},dependencies:[P,L,T,me,Ae,K,ue,ot,H,_e,z,ne,ae,W,J,ee,X,Q,te,Z,xe,ft,Qe,Ee],encapsulation:2,changeDetection:0})}};var wl=e=>["/admin/iam/users",e];function El(e,i){if(e&1&&(a(0,"div",2),c(1,"mat-divider"),n(),a(2,"h4"),o(3,"Description"),n(),a(4,"div",3),o(5),n()),e&2){let t=u();l(5),_(t.description||"-")}}function Ml(e,i){if(e&1&&(a(0,"div")(1,"mat-icon",4),o(2," person "),n(),a(3,"a",5),o(4),n()()),e&2){let t=i.$implicit;l(3),p("routerLink",Se(2,wl,t.name)),l(),_(t.displayName||t.name)}}function Il(e,i){if(e&1&&(a(0,"app-admin-page")(1,"app-admin-toolbar"),o(2),a(3,"ya-page-button",0),o(4,"Edit group"),n()(),a(5,"div",1),s(6,El,6,1),c(7,"br"),a(8,"div",2),c(9,"mat-divider"),n(),a(10,"h4"),o(11),n(),N(12,Ml,5,4,"div",null,F),n()()),e&2){let t=i;l(2),g(" ",t.name," \xA0\xA0\xA0 "),l(4),h(t.description?6:-1),l(5),g("",(t.users==null?null:t.users.length)||0," members"),l(),U(t.users)}}var Ii=class e{constructor(i,t,r){this.yamcs=t;this.title=r;this.group$=new O(null);i.paramMap.subscribe(m=>{let C=m.get("name");this.changeGroup(C)})}changeGroup(i){this.yamcs.yamcsClient.getGroup(i).then(t=>{this.group$.next(t),this.title.setTitle(t.name)})}static{this.\u0275fac=function(t){return new(t||e)(d(k),d(D),d(A))}}static{this.\u0275cmp=x({type:e,selectors:[["ng-component"]],standalone:!0,features:[y],decls:2,vars:3,consts:[["routerLink","edit","icon","edit"],[1,"panel-content","ya-link"],[1,"section-divider"],[2,"white-space","pre-wrap"],["matTooltip","User",1,"icon16",2,"vertical-align","middle"],[3,"routerLink"]],template:function(t,r){if(t&1&&(s(0,Il,14,3,"app-admin-page"),f(1,"async")),t&2){let m;h((m=S(1,1,r.group$))?0:-1,m)}},dependencies:[P,L,T,B,K,ue,Ue,fe,Qe],encapsulation:2,changeDetection:0})}};function Rl(e,i){e&1&&(a(0,"th",13),o(1,"Role"),n())}function Al(e,i){if(e&1&&(a(0,"td",14)(1,"a",15),o(2),n()()),e&2){let t=i.$implicit;l(),p("routerLink",t.name),l(),_(t.name)}}function kl(e,i){e&1&&(a(0,"th",16),o(1,"Default"),n())}function Pl(e,i){if(e&1&&(a(0,"td",14),o(1),n()),e&2){let t=i.$implicit;l(),g(" ",t.default?"Yes":"No"," ")}}function Ll(e,i){e&1&&c(0,"th",17)}function $l(e,i){e&1&&c(0,"td",14)}function Fl(e,i){e&1&&c(0,"tr",18)}function Nl(e,i){e&1&&c(0,"tr",19)}function Ul(e,i){e&1&&(a(0,"ya-empty-message"),o(1,"No rows to display"),n())}var Ri=class e{constructor(i,t,r,m){this.yamcs=i;this.route=r;this.router=m;this.filterControl=new q;this.displayedColumns=["name","default","actions"];this.dataSource=new Y;t.setTitle("Roles"),this.dataSource.filterPredicate=(C,E)=>C.name.toLowerCase().indexOf(E)>=0}ngAfterViewInit(){let i=this.route.snapshot.queryParamMap;i.has("filter")&&(this.filterControl.setValue(i.get("filter")),this.dataSource.filter=i.get("filter").toLowerCase()),this.filterControl.valueChanges.subscribe(()=>{this.updateURL();let t=this.filterControl.value||"";this.dataSource.filter=t.toLowerCase()}),this.refresh(),this.dataSource.sort=this.sort}refresh(){this.yamcs.yamcsClient.getRoles().then(i=>{this.dataSource.data=i})}updateURL(){let i=this.filterControl.value;this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:i||null},queryParamsHandling:"merge"})}static{this.\u0275fac=function(t){return new(t||e)(d(D),d(A),d(k),d(G))}}static{this.\u0275cmp=x({type:e,selectors:[["ng-component"]],viewQuery:function(t,r){if(t&1&&oe(H,7),t&2){let m;re(m=le())&&(r.sort=m.first)}},standalone:!0,features:[y],decls:19,vars:5,consts:[[1,"panel-content"],[1,"filter-bar"],["placeholder","Filter roles",3,"formControl"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","default"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink"],["mat-header-cell",""],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(t,r){t&1&&(a(0,"app-admin-page")(1,"app-admin-toolbar"),o(2,"Roles"),n(),a(3,"div",0)(4,"div",1),c(5,"ya-search-filter",2),n(),a(6,"table",3),v(7,4),s(8,Rl,2,0,"th",5)(9,Al,3,2,"td",6),b(),v(10,7),s(11,kl,2,0,"th",8)(12,Pl,2,1,"td",6),b(),v(13,9),s(14,Ll,1,0,"th",10)(15,$l,1,0,"td",6),b(),s(16,Fl,1,0,"tr",11)(17,Nl,1,0,"tr",12),n(),s(18,Ul,2,0,"ya-empty-message"),n()()),t&2&&(l(5),p("formControl",r.filterControl),l(),p("dataSource",r.dataSource),l(10),p("matHeaderRowDef",r.displayedColumns),l(),p("matRowDefColumns",r.displayedColumns),l(),h(r.dataSource.data.length?-1:18))},dependencies:[P,L,T,me,Ae,K,H,_e,z,ne,ae,W,J,ee,X,Q,te,Z,xe,Ee],encapsulation:2,changeDetection:0})}};function Bl(e,i){if(e&1&&(a(0,"div"),o(1),n()),e&2){let t=i.$implicit;l(),g(" ",t," ")}}function jl(e,i){if(e&1&&(a(0,"dt"),o(1),n(),a(2,"dd"),o(3),n()),e&2){let t=i.$implicit;l(),_(t.type),l(2),_(t.objects)}}function Vl(e,i){if(e&1&&(a(0,"app-admin-page")(1,"app-admin-toolbar"),o(2),n(),a(3,"div",0)(4,"h4"),o(5,"Description"),n(),a(6,"div",1),o(7),n(),c(8,"br"),a(9,"div",2),c(10,"mat-divider"),n(),a(11,"h4"),o(12),n(),N(13,Bl,2,1,"div",null,F),c(15,"br"),a(16,"div",2),c(17,"mat-divider"),n(),a(18,"h4"),o(19),n(),a(20,"dl"),N(21,jl,4,2,null,null,F),n()()()),e&2){let t=i;l(2),g(" ",t.name," "),l(5),_(t.description||"-"),l(5),g("",(t.systemPrivileges==null?null:t.systemPrivileges.length)||0," assigned system privileges"),l(),U(t.systemPrivileges),l(6),g("",(t.objectPrivileges==null?null:t.objectPrivileges.length)||0," assigned object privileges"),l(2),U(t.objectPrivileges)}}var Ai=class e{constructor(i,t,r){this.yamcs=t;this.title=r;this.role$=new O(null);i.paramMap.subscribe(m=>{let C=m.get("name");this.changeRole(C)})}changeRole(i){this.yamcs.yamcsClient.getRole(i).then(t=>{this.role$.next(t),this.title.setTitle(t.name)})}static{this.\u0275fac=function(t){return new(t||e)(d(k),d(D),d(A))}}static{this.\u0275cmp=x({type:e,selectors:[["ng-component"]],standalone:!0,features:[y],decls:2,vars:3,consts:[[1,"panel-content","ya-link"],[2,"white-space","pre-wrap"],[1,"section-divider"]],template:function(t,r){if(t&1&&(s(0,Vl,23,4,"app-admin-page"),f(1,"async")),t&2){let m;h((m=S(1,1,r.role$))?0:-1,m)}},dependencies:[P,L,T,B,Ue],encapsulation:2,changeDetection:0})}};function Hl(e,i){e&1&&(a(0,"th",12),o(1,"Service account"),n())}function Ol(e,i){if(e&1&&(a(0,"td",13),o(1),n()),e&2){let t=i.$implicit;l(),g(" ",t.name," ")}}function Yl(e,i){e&1&&c(0,"th",14)}function Gl(e,i){if(e&1){let t=j();a(0,"td",13)(1,"ya-more")(2,"button",15),w("click",function(){let m=I(t).$implicit,C=u();return R(C.deleteServiceAccount(m.name))}),o(3," Delete service account "),n()()()}}function ql(e,i){e&1&&c(0,"tr",16)}function zl(e,i){e&1&&c(0,"tr",17)}function Wl(e,i){e&1&&(a(0,"ya-empty-message"),o(1,"No rows to display"),n())}var ki=class e{constructor(i,t,r,m,C){this.yamcs=i;this.route=r;this.router=m;this.messageService=C;this.filterControl=new q;this.displayedColumns=["name","actions"];this.dataSource=new Y;t.setTitle("Service accounts"),this.dataSource.filterPredicate=(E,ve)=>E.name.toLowerCase().indexOf(ve)>=0}ngAfterViewInit(){let i=this.route.snapshot.queryParamMap;i.has("filter")&&(this.filterControl.setValue(i.get("filter")),this.dataSource.filter=i.get("filter").toLowerCase()),this.filterControl.valueChanges.subscribe(()=>{this.updateURL();let t=this.filterControl.value||"";this.dataSource.filter=t.toLowerCase()}),this.refresh(),this.dataSource.sort=this.sort}refresh(){this.yamcs.yamcsClient.getServiceAccounts().then(i=>{this.dataSource.data=i.serviceAccounts||[]})}updateURL(){let i=this.filterControl.value;this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:i||null},queryParamsHandling:"merge"})}deleteServiceAccount(i){confirm(`Are you sure you want to delete service account ${i}`)&&this.yamcs.yamcsClient.deleteServiceAccount(i).then(()=>this.refresh()).catch(t=>this.messageService.showError(t))}static{this.\u0275fac=function(t){return new(t||e)(d(D),d(A),d(k),d(G),d(be))}}static{this.\u0275cmp=x({type:e,selectors:[["ng-component"]],viewQuery:function(t,r){if(t&1&&oe(H,7),t&2){let m;re(m=le())&&(r.sort=m.first)}},standalone:!0,features:[y],decls:18,vars:5,consts:[["routerLink","create","icon","add_circle_outline"],[1,"panel-content"],[1,"filter-bar"],["placeholder","Filter service accounts",3,"formControl"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","",1,"expand"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,r){t&1&&(a(0,"app-admin-page")(1,"app-admin-toolbar"),o(2," Service accounts \xA0\xA0\xA0 "),a(3,"ya-page-button",0),o(4," Create service account "),n()(),a(5,"div",1)(6,"div",2),c(7,"ya-search-filter",3),n(),a(8,"table",4),v(9,5),s(10,Hl,2,0,"th",6)(11,Ol,2,1,"td",7),b(),v(12,8),s(13,Yl,1,0,"th",9)(14,Gl,4,0,"td",7),b(),s(15,ql,1,0,"tr",10)(16,zl,1,0,"tr",11),n(),s(17,Wl,2,0,"ya-empty-message"),n()()),t&2&&(l(7),p("formControl",r.filterControl),l(),p("dataSource",r.dataSource),l(7),p("matHeaderRowDef",r.displayedColumns),l(),p("matRowDefColumns",r.displayedColumns),l(),h(r.dataSource.data.length?-1:17))},dependencies:[P,L,T,me,Ae,K,ot,H,_e,z,ne,ae,W,J,ee,X,Q,te,Z,xe,ft,Qe,Ee],encapsulation:2,changeDetection:0})}};var Ql=e=>[e,"edit"];function Zl(e,i){e&1&&(a(0,"th",13),o(1,"Username"),n())}function Kl(e,i){if(e&1&&(a(0,"td",14)(1,"a",15),o(2),n()()),e&2){let t=i.$implicit;l(),p("routerLink",t.name),l(),g(" ",t.name," ")}}function Jl(e,i){e&1&&(a(0,"th",13),o(1,"Display name"),n())}function Xl(e,i){if(e&1&&(a(0,"td",14),o(1),n()),e&2){let t=i.$implicit;l(),g(" ",t.displayName||"-"," ")}}function em(e,i){e&1&&(a(0,"th",16),o(1,"Groups"),n())}function tm(e,i){e&1&&o(0," , ")}function im(e,i){if(e&1&&(s(0,tm,1,0),o(1)),e&2){let t=i.$implicit,r=i.$index;h(r!==0?0:-1),l(),g(" ",t.name," ")}}function nm(e,i){e&1&&o(0," - ")}function am(e,i){if(e&1&&(a(0,"td",14),N(1,im,2,2,null,null,F),s(3,nm,1,0),n()),e&2){let t=i.$implicit;l(),U(t.groups),l(2),h(t.groups?-1:3)}}function om(e,i){e&1&&(a(0,"th",13),o(1,"Registered"),n())}function rm(e,i){if(e&1&&(a(0,"td",14),o(1),f(2,"datetime"),n()),e&2){let t=i.$implicit;l(),_(S(2,1,t.creationTime)||"never")}}function lm(e,i){e&1&&(a(0,"th",13),o(1,"Last Login"),n())}function mm(e,i){if(e&1&&(a(0,"td",14),o(1),f(2,"datetime"),n()),e&2){let t=i.$implicit;l(),_(S(2,1,t.lastLoginTime)||"never")}}function sm(e,i){e&1&&c(0,"th",17)}function cm(e,i){if(e&1){let t=j();a(0,"td",14)(1,"ya-more")(2,"a",18),o(3," Edit user "),n(),a(4,"button",19),w("click",function(){let m=I(t).$implicit,C=u(2);return R(C.deleteUser.next(m.name))}),o(5,"Delete user"),n()()()}if(e&2){let t=i.$implicit;l(2),p("routerLink",Se(1,Ql,t.name))}}function pm(e,i){e&1&&c(0,"tr",20)}function dm(e,i){e&1&&c(0,"tr",21)}function um(e,i){if(e&1&&(a(0,"table",0),v(1,1),s(2,Zl,2,0,"th",2)(3,Kl,3,2,"td",3),b(),v(4,4),s(5,Jl,2,0,"th",2)(6,Xl,2,1,"td",3),b(),v(7,5),s(8,em,2,0,"th",6)(9,am,4,1,"td",3),b(),v(10,7),s(11,om,2,0,"th",2)(12,rm,3,3,"td",3),b(),v(13,8),s(14,lm,2,0,"th",2)(15,mm,3,3,"td",3),b(),v(16,9),s(17,sm,1,0,"th",10)(18,cm,6,3,"td",3),b(),s(19,pm,1,0,"tr",11)(20,dm,1,0,"tr",12),n()),e&2){let t=u();p("dataSource",t.dataSource),l(19),p("matHeaderRowDef",t.displayedColumns),l(),p("matRowDefColumns",t.displayedColumns)}}function fm(e,i){e&1&&(a(0,"ya-empty-message"),o(1," No rows to display "),n())}var Pi=class e{constructor(){this.displayedColumns=["name","displayName","groups","actions"];this.deleteUser=new Rt;this.dataSource=new Y}ngAfterViewInit(){this.dataSource.filterPredicate=(i,t)=>i.name.toLowerCase().indexOf(t)>=0,this.dataSource.sort=this.sort}ngOnChanges(){this.dataSource.data=this.users||[],this.dataSource.filter=this.filter}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=x({type:e,selectors:[["app-users-table"]],viewQuery:function(t,r){if(t&1&&oe(H,5),t&2){let m;re(m=le())&&(r.sort=m.first)}},inputs:{users:"users",filter:"filter"},outputs:{deleteUser:"deleteUser"},standalone:!0,features:[$t,y],decls:2,vars:2,consts:[["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","displayName"],["matColumnDef","groups"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","registered"],["matColumnDef","lastLogin"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink"],["mat-header-cell",""],["mat-header-cell","",1,"expand"],["mat-menu-item","",3,"routerLink"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,r){t&1&&s(0,um,21,3,"table",0)(1,fm,2,0,"ya-empty-message"),t&2&&(h(r.dataSource?0:-1),l(),h(r.dataSource.data.length?-1:1))},dependencies:[T,K,ot,H,_e,z,ne,ae,W,J,ee,X,Q,te,Z,xe,ft,Ct],encapsulation:2,changeDetection:0})}};function _m(e,i){if(e&1&&(o(0),f(1,"async")),e&2){let t=u();g("ACTIVE (",S(1,1,t.activeUserCount$),")")}}function Cm(e,i){if(e&1&&(o(0),f(1,"async")),e&2){let t=u();g("SUPERUSERS (",S(1,1,t.superUserCount$),")")}}function hm(e,i){if(e&1&&(o(0),f(1,"async")),e&2){let t=u();g("INTERNAL (",S(1,1,t.internalUserCount$),")")}}function Sm(e,i){if(e&1&&(o(0),f(1,"async")),e&2){let t=u();g("BLOCKED (",S(1,1,t.blockedUserCount$),")")}}var Li=class e{constructor(i,t,r,m,C){this.yamcs=i;this.route=r;this.router=m;this.messageService=C;this.filterControl=new q;this.filterValue$=new O(null);this.users$=new O([]);t.setTitle("Users")}ngAfterViewInit(){let i=this.route.snapshot.queryParamMap;i.has("filter")&&(this.filterControl.setValue(i.get("filter")),this.filterValue$.next(i.get("filter").toLowerCase())),this.filterControl.valueChanges.subscribe(()=>{this.updateURL();let t=this.filterControl.value||"";this.filterValue$.next(t.toLowerCase())}),this.activeUsers$=this.users$.pipe(ye(t=>t.filter(r=>r.active))),this.activeUserCount$=this.activeUsers$.pipe(ye(t=>t.length)),this.superUsers$=this.users$.pipe(ye(t=>t.filter(r=>r.superuser))),this.superUserCount$=this.superUsers$.pipe(ye(t=>t.length)),this.internalUsers$=this.users$.pipe(ye(t=>t.filter(r=>!r.identities))),this.internalUserCount$=this.internalUsers$.pipe(ye(t=>t.length)),this.blockedUsers$=this.users$.pipe(ye(t=>t.filter(r=>!r.active))),this.blockedUserCount$=this.blockedUsers$.pipe(ye(t=>t.length)),this.refresh()}refresh(){this.yamcs.yamcsClient.getUsers().then(i=>{this.users$.next(i)})}updateURL(){let i=this.filterControl.value;this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:i||null},queryParamsHandling:"merge"})}deleteUser(i){confirm(`Are you sure you want to delete the user account '${i}'`)&&this.yamcs.yamcsClient.deleteUser(i).then(()=>this.refresh()).catch(t=>this.messageService.showError(t))}static{this.\u0275fac=function(t){return new(t||e)(d(D),d(A),d(k),d(G),d(be))}}static{this.\u0275cmp=x({type:e,selectors:[["ng-component"]],standalone:!0,features:[y],decls:33,vars:26,consts:[["routerLink","create","icon","add_circle_outline"],[1,"panel-content"],[1,"filter-bar"],["placeholder","Filter users",3,"formControl"],["animationDuration","0ms",1,"secondary",3,"mat-stretch-tabs"],["mat-tab-label",""],[3,"deleteUser","users","filter"]],template:function(t,r){t&1&&(a(0,"app-admin-page")(1,"app-admin-toolbar"),o(2," Users \xA0\xA0\xA0 "),a(3,"ya-page-button",0),o(4,"Create user"),n()(),a(5,"div",1)(6,"div",2),c(7,"ya-search-filter",3),n(),a(8,"mat-tab-group",4)(9,"mat-tab"),s(10,_m,2,3,"ng-template",5),c(11,"br"),a(12,"app-users-table",6),f(13,"async"),f(14,"async"),w("deleteUser",function(C){return r.deleteUser(C)}),n()(),a(15,"mat-tab"),s(16,Cm,2,3,"ng-template",5),c(17,"br"),a(18,"app-users-table",6),f(19,"async"),f(20,"async"),w("deleteUser",function(C){return r.deleteUser(C)}),n()(),a(21,"mat-tab"),s(22,hm,2,3,"ng-template",5),c(23,"br"),a(24,"app-users-table",6),f(25,"async"),f(26,"async"),w("deleteUser",function(C){return r.deleteUser(C)}),n()(),a(27,"mat-tab"),s(28,Sm,2,3,"ng-template",5),c(29,"br"),a(30,"app-users-table",6),f(31,"async"),f(32,"async"),w("deleteUser",function(C){return r.deleteUser(C)}),n()()()()()),t&2&&(l(7),p("formControl",r.filterControl),l(),p("mat-stretch-tabs",!1),l(4),p("users",S(13,10,r.activeUsers$))("filter",S(14,12,r.filterValue$)),l(6),p("users",S(19,14,r.superUsers$))("filter",S(20,16,r.filterValue$)),l(6),p("users",S(25,18,r.internalUsers$))("filter",S(26,20,r.filterValue$)),l(6),p("users",S(31,22,r.blockedUsers$))("filter",S(32,24,r.filterValue$)))},dependencies:[P,L,T,B,me,Ae,K,Gt,qt,zt,Qe,Ee,Pi],encapsulation:2,changeDetection:0})}};function vm(e,i){e&1&&(a(0,"p"),o(1,"Confirmation does not match password"),n())}var bm=e=>{let i=e.get("password").value,t=e.get("passwordConfirmation").value;return i&&t&&i!==t?{passwordMismatch:!0}:null},$i=class e{constructor(i,t,r){this.data=i;this.yamcs=t;this.user=i.user,this.form=r.group({password:new q(null,lt.required),passwordConfirmation:new q(null,lt.required)},{validator:bm})}changePassword(){let i=this.form.value;this.yamcs.yamcsClient.editUser(this.user.name,{password:i.password})}static{this.\u0275fac=function(t){return new(t||e)(d(Ye),d(D),d(Oe))}}static{this.\u0275cmp=x({type:e,selectors:[["app-change-user-password-dialog"]],standalone:!0,features:[y],decls:19,vars:4,consts:[["mat-dialog-title",""],[1,"ya-form",3,"formGroup"],["type","password","formControlName","password"],["type","password","formControlName","passwordConfirmation"],["align","end"],["mat-dialog-close",""],["appearance","primary","mat-dialog-close","",3,"click","disabled"]],template:function(t,r){t&1&&(a(0,"h2",0),o(1),n(),a(2,"mat-dialog-content")(3,"form",1)(4,"label"),o(5," Password "),c(6,"br")(7,"input",2),n(),c(8,"br"),a(9,"label"),o(10," Password confirmation "),c(11,"br")(12,"input",3),n()(),s(13,vm,2,0,"p"),n(),a(14,"mat-dialog-actions",4)(15,"ya-button",5),o(16,"CANCEL"),n(),a(17,"ya-button",6),w("click",function(){return r.changePassword()}),o(18," OK "),n()()),t&2&&(l(),g("Change password of ",r.user.name,""),l(2),p("formGroup",r.form),l(10),h(r.form.errors!=null&&r.form.errors.passwordMismatch?13:-1),l(4),p("disabled",!r.form.valid))},dependencies:[T,Re,He,me,Ie,ke,Pe,Ge,qe,We,ze,Ce],encapsulation:2,changeDetection:0})}};var gm=e=>[e];function xm(e,i){if(e&1&&(a(0,"a",5),o(1),n()),e&2){let t=u();p("routerLink",Se(2,gm,"../"+t.createdBy.name)),l(),_(t.createdBy.name||"-")}}function ym(e,i){e&1&&o(0," - ")}function Tm(e,i){if(e&1&&(o(0),c(1,"br")),e&2){let t=i.$implicit;g(" ",t.name," ")}}function Dm(e,i){if(e&1){let t=j();a(0,"tr")(1,"td"),o(2),n(),a(3,"td"),o(4),n(),a(5,"td")(6,"ya-text-action",8),w("click",function(){let m=I(t).$implicit,C=u(3);return R(C.deleteIdentity(m))}),o(7," DELETE "),n()()()}if(e&2){let t=i.$implicit;l(2),_(t.identity),l(2),_(t.provider)}}function wm(e,i){if(e&1&&(a(0,"div",6),c(1,"mat-divider"),n(),a(2,"h4"),o(3,"External Identities"),n(),a(4,"table",7)(5,"tr")(6,"th"),o(7,"Identity"),n(),a(8,"th"),o(9,"Provider"),n(),c(10,"th"),n(),N(11,Dm,8,2,"tr",null,F),n()),e&2){let t=u();l(11),U(t.identities)}}function Em(e,i){if(e&1){let t=j();a(0,"app-admin-page")(1,"app-admin-toolbar"),c(2,"ya-page-icon-button",0),o(3),a(4,"ya-page-button",1),o(5,"Edit user"),n(),a(6,"ya-page-button",2),w("click",function(){I(t);let m=u();return R(m.showChangeUserPasswordDialog())}),o(7," Change password "),n()(),a(8,"div",3)(9,"dl",4)(10,"dt"),o(11,"Username"),n(),a(12,"dd"),o(13),n(),a(14,"dt"),o(15,"Display name"),n(),a(16,"dd"),o(17),n(),a(18,"dt"),o(19,"Email"),n(),a(20,"dd"),o(21),n(),a(22,"dt"),o(23,"Joined"),n(),a(24,"dd"),o(25),f(26,"datetime"),n(),a(27,"dt"),o(28,"Confirmed at"),n(),a(29,"dd"),o(30),f(31,"datetime"),n(),a(32,"dt"),o(33,"Last login"),n(),a(34,"dd"),o(35),f(36,"datetime"),n(),a(37,"dt"),o(38,"Active"),n(),a(39,"dd"),o(40),n(),a(41,"dt"),o(42,"Superuser"),n(),a(43,"dd"),o(44),n(),a(45,"dt"),o(46,"Created by"),n(),a(47,"dd"),s(48,xm,2,4,"a",5)(49,ym,1,0),n()(),a(50,"div",6),c(51,"mat-divider"),n(),a(52,"h4"),o(53),n(),N(54,Tm,2,1,"br",null,F),s(56,wm,13,0),n()()}if(e&2){let t=i;l(3),g(" ",t.displayName||t.name," \xA0\xA0\xA0 "),l(3),p("disabled",t.identities==null?null:t.identities.length),l(7),_(t.name),l(4),_(t.displayName||"-"),l(4),_(t.email||"-"),l(4),_(S(26,13,t.creationTime)),l(5),_(S(31,15,t.confirmationTime)||"never"),l(5),_(S(36,17,t.lastLoginTime)||"never"),l(5),_(t.active),l(4),_(t.superuser),l(4),h(t.createdBy?48:49),l(5),g("",(t.roles==null?null:t.roles.length)||"0"," assigned roles"),l(),U(t.roles),l(2),h(t.identities?56:-1)}}var Fi=class e{constructor(i,t,r,m,C){this.yamcs=t;this.title=r;this.dialog=m;this.messageService=C;this.user$=new O(null);i.paramMap.subscribe(E=>{let ve=E.get("username");this.changeUser(ve)})}changeUser(i){this.yamcs.yamcsClient.getUser(i).then(t=>{this.user$.next(t),this.title.setTitle(t.name)})}deleteIdentity(i){if(confirm(`Are you sure you want to delete the ${i.provider} identity?`)){let t=this.user$.value.name;this.yamcs.yamcsClient.deleteIdentity(t,i.provider).then(()=>this.changeUser(t)).catch(r=>this.messageService.showError(r))}}showChangeUserPasswordDialog(){this.dialog.open($i,{data:{user:this.user$.value},width:"400px"})}static{this.\u0275fac=function(t){return new(t||e)(d(k),d(D),d(A),d(Be),d(be))}}static{this.\u0275cmp=x({type:e,selectors:[["ng-component"]],standalone:!0,features:[y],decls:2,vars:3,consts:[["routerLink","..","icon","arrow_back"],["routerLink","edit","icon","edit"],["icon","account_box",3,"click","disabled"],[1,"panel-content","ya-link"],[1,"dl-horizontal"],[3,"routerLink"],[1,"section-divider"],["yaDataTable",""],["icon","delete",3,"click"]],template:function(t,r){if(t&1&&(s(0,Em,57,19,"app-admin-page"),f(1,"async")),t&2){let m;h((m=S(1,1,r.user$))?0:-1,m)}},dependencies:[P,L,T,B,K,ge,Ue,Qe,we,ut,Ct],encapsulation:2,changeDetection:0})}};function Mm(e,i){e&1&&(a(0,"th",12),o(1,"Valid period (at 0h UTC)"),n())}function Im(e,i){if(e&1&&(a(0,"td",13),o(1),f(2,"date"),f(3,"date"),n()),e&2){let t=i.$implicit;l(),at(" ",Ne(2,2,t.start,"y-MM-dd")," \u2013 ",Ne(3,5,t.stop,"y-MM-dd")," ")}}function Rm(e,i){e&1&&(a(0,"th",12),o(1,"Leap seconds"),n())}function Am(e,i){if(e&1&&(a(0,"td",13),o(1),n()),e&2){let t=i.$implicit;l(),_(t.leapSeconds)}}function km(e,i){e&1&&(a(0,"th",12),o(1,"TAI - UTC"),n())}function Pm(e,i){if(e&1&&(a(0,"td",13),o(1),n()),e&2){let t=i.$implicit;l(),g("",t.taiDifference," s")}}function Lm(e,i){e&1&&(a(0,"th",12),o(1,"UTC - TAI"),n())}function $m(e,i){if(e&1&&(a(0,"td",13),o(1),n()),e&2){let t=i.$implicit;l(),g("",-t.taiDifference," s")}}function Fm(e,i){e&1&&c(0,"th",14)}function Nm(e,i){e&1&&c(0,"td",13)}function Um(e,i){e&1&&c(0,"tr",15)}function Bm(e,i){e&1&&c(0,"tr",16)}var Ni=class e{constructor(i,t){this.displayedColumns=["period","leap-seconds","tai-utc","actions"];this.dataSource=new Y;t.setTitle("Leap seconds"),i.yamcsClient.getLeapSeconds().then(r=>{this.dataSource.data=r.ranges})}static{this.\u0275fac=function(t){return new(t||e)(d(D),d(A))}}static{this.\u0275cmp=x({type:e,selectors:[["ng-component"]],standalone:!0,features:[y],decls:22,vars:3,consts:[[1,"panel-content"],["mat-table","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","period"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","leap-seconds"],["matColumnDef","tai-utc"],["matColumnDef","utc-tai"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(t,r){t&1&&(a(0,"app-admin-page")(1,"app-admin-toolbar"),o(2," Leap seconds "),n(),a(3,"div",0)(4,"table",1),v(5,2),s(6,Mm,2,0,"th",3)(7,Im,4,8,"td",4),b(),v(8,5),s(9,Rm,2,0,"th",3)(10,Am,2,1,"td",4),b(),v(11,6),s(12,km,2,0,"th",3)(13,Pm,2,1,"td",4),b(),v(14,7),s(15,Lm,2,0,"th",3)(16,$m,2,1,"td",4),b(),v(17,8),s(18,Fm,1,0,"th",9)(19,Nm,1,0,"td",4),b(),s(20,Um,1,0,"tr",10)(21,Bm,1,0,"tr",11),n()()()),t&2&&(l(4),p("dataSource",r.dataSource),l(16),p("matHeaderRowDef",r.displayedColumns),l(),p("matRowDefColumns",r.displayedColumns))},dependencies:[P,L,T,Sn,z,ne,ae,W,J,ee,X,Q,te,Z],encapsulation:2,changeDetection:0})}};function jm(e,i){e&1&&(a(0,"th",7),o(1,"Name"),n())}function Vm(e,i){if(e&1&&(a(0,"td",8),o(1),n()),e&2){let t=i.$implicit;l(),_(t)}}function Hm(e,i){e&1&&c(0,"tr",9)}function Om(e,i){e&1&&c(0,"tr",10)}var Ui=class e{constructor(i,t){this.displayedColumns=["name"];this.dataSource=new Y;t.setTitle("Processor types"),i.yamcsClient.getProcessorTypes().then(r=>{this.dataSource.data=r.types||[]})}static{this.\u0275fac=function(t){return new(t||e)(d(D),d(A))}}static{this.\u0275cmp=x({type:e,selectors:[["ng-component"]],standalone:!0,features:[y],decls:10,vars:3,consts:[[1,"panel-content"],["mat-table","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(t,r){t&1&&(a(0,"app-admin-page")(1,"app-admin-toolbar"),o(2," Processor types "),n(),a(3,"div",0)(4,"table",1),v(5,2),s(6,jm,2,0,"th",3)(7,Vm,2,1,"td",4),b(),s(8,Hm,1,0,"tr",5)(9,Om,1,0,"tr",6),n()()()),t&2&&(l(4),p("dataSource",r.dataSource),l(4),p("matHeaderRowDef",r.displayedColumns),l(),p("matRowDefColumns",r.displayedColumns))},dependencies:[P,L,T,z,ne,ae,W,J,ee,X,Q,te,Z],encapsulation:2,changeDetection:0})}};function Ym(e,i){e&1&&(a(0,"mat-icon",0),o(1," check_circle "),n())}function Gm(e,i){e&1&&(a(0,"mat-icon",1),o(1," lens "),n())}var Bi=class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=x({type:e,selectors:[["app-replication-state"]],inputs:{connected:"connected"},standalone:!0,features:[y],decls:2,vars:2,consts:[[1,"success"],[1,"down"]],template:function(t,r){t&1&&s(0,Ym,2,0,"mat-icon",0)(1,Gm,2,0,"mat-icon",1),t&2&&(h(r.connected===!0?0:-1),l(),h(r.connected===!1?1:-1))},dependencies:[T,ue],encapsulation:2,changeDetection:0})}};function qm(e,i){if(e&1&&(a(0,"tr")(1,"td"),o(2),n()()),e&2){let t=i.$implicit;l(2),_(t)}}var ji=class e{constructor(i){this.data=i}static{this.\u0275fac=function(t){return new(t||e)(d(Ye))}}static{this.\u0275cmp=x({type:e,selectors:[["app-show-streams-dialog"]],standalone:!0,features:[y],decls:9,vars:0,consts:[["mat-dialog-title",""],["yaDataTable","",2,"width","100%"],["align","end"],["mat-dialog-close",""]],template:function(t,r){t&1&&(a(0,"h2",0),o(1,"Replicated Streams"),n(),a(2,"mat-dialog-content")(3,"table",1),N(4,qm,3,1,"tr",null,F),n()(),a(6,"mat-dialog-actions",2)(7,"ya-button",3),o(8,"Close"),n()()),t&2&&(l(4),U(r.data.streams))},dependencies:[T,ge,Ge,qe,We,ze,Ce],encapsulation:2})}};var la=()=>[];function zm(e,i){e&1&&c(0,"th",26)}function Wm(e,i){if(e&1&&(a(0,"td",27),c(1,"app-replication-state",28),n()),e&2){let t=i.$implicit;l(),p("connected",!!t.localAddress&&!!t.remoteAddress)}}function Qm(e,i){e&1&&(a(0,"th",29),o(1,"Instance"),n())}function Zm(e,i){if(e&1&&(a(0,"td",30),o(1),n()),e&2){let t=i.$implicit;l(),_(t.instance)}}function Km(e,i){e&1&&(a(0,"th",31),o(1,"Streams"),n())}function Jm(e,i){if(e&1){let t=j();a(0,"td",30)(1,"span",32),w("click",function(){let m=I(t).$implicit,C=u(2);return R(C.showReplicationStreams(m.streams||[]))}),o(2),n()()}if(e&2){let t=i.$implicit;l(2),g("",(t.streams||Je(1,la)).length," streams")}}function Xm(e,i){e&1&&(a(0,"th",33),o(1,"Mode"),n())}function es(e,i){if(e&1&&(a(0,"td",34),o(1),n()),e&2){let t=i.$implicit;l(),g(" ",t.push?"PUSH":"PULL"," ")}}function ts(e,i){e&1&&(a(0,"th",35),o(1,"Local Address"),n())}function is(e,i){if(e&1&&(a(0,"td",30),o(1),n()),e&2){let t=i.$implicit;l(),g(" ",t.localAddress||"-"," ")}}function ns(e,i){e&1&&(a(0,"th",35),o(1,"Remote Address"),n())}function as(e,i){if(e&1&&(a(0,"td",30),o(1),n()),e&2){let t=i.$implicit;l(),g(" ",t.remoteAddress||"-"," ")}}function os(e,i){e&1&&(a(0,"th",29),o(1,"Pull From"),n())}function rs(e,i){if(e&1&&(a(0,"td",30),o(1),n()),e&2){let t=i.$implicit;l(),_(t.pullFrom||"-")}}function ls(e,i){e&1&&(a(0,"th",36),o(1,"TX"),n())}function ms(e,i){if(e&1&&(a(0,"td",30),o(1),f(2,"number"),n()),e&2){let t=i.$implicit;l(),_(S(2,1,t.tx)||"-")}}function ss(e,i){e&1&&c(0,"th",37)}function cs(e,i){e&1&&c(0,"td",30)}function ps(e,i){e&1&&c(0,"tr",38)}function ds(e,i){e&1&&c(0,"tr",39)}function us(e,i){if(e&1&&(a(0,"table",1),v(1,5),s(2,zm,1,0,"th",6)(3,Wm,2,1,"td",7),b(),v(4,8),s(5,Qm,2,0,"th",9)(6,Zm,2,1,"td",10),b(),v(7,11),s(8,Km,2,0,"th",12)(9,Jm,3,2,"td",10),b(),v(10,13),s(11,Xm,2,0,"th",14)(12,es,2,1,"td",15),b(),v(13,16),s(14,ts,2,0,"th",17)(15,is,2,1,"td",10),b(),v(16,18),s(17,ns,2,0,"th",17)(18,as,2,1,"td",10),b(),v(19,19),s(20,os,2,0,"th",9)(21,rs,2,1,"td",10),b(),v(22,20),s(23,ls,2,0,"th",21)(24,ms,3,3,"td",10),b(),v(25,22),s(26,ss,1,0,"th",23)(27,cs,1,0,"td",10),b(),s(28,ps,1,0,"tr",24)(29,ds,1,0,"tr",25),n()),e&2){let t=u();p("dataSource",t.slavesDataSource),l(28),p("matHeaderRowDef",t.slaveColumns),l(),p("matRowDefColumns",t.slaveColumns)}}function fs(e,i){e&1&&(a(0,"ya-empty-message",2),o(1,"Not configured"),n())}function _s(e,i){e&1&&c(0,"th",26)}function Cs(e,i){if(e&1&&(a(0,"td",27),c(1,"app-replication-state",28),n()),e&2){let t=i.$implicit;l(),p("connected",!!t.localAddress&&!!t.remoteAddress)}}function hs(e,i){e&1&&(a(0,"th",29),o(1,"Instance"),n())}function Ss(e,i){if(e&1&&(a(0,"td",30),o(1),n()),e&2){let t=i.$implicit;l(),_(t.instance)}}function vs(e,i){e&1&&(a(0,"th",31),o(1,"Streams"),n())}function bs(e,i){if(e&1){let t=j();a(0,"td",30)(1,"span",32),w("click",function(){let m=I(t).$implicit,C=u(2);return R(C.showReplicationStreams(m.streams||[]))}),o(2),n()()}if(e&2){let t=i.$implicit;l(2),g("",(t.streams||Je(1,la)).length," streams")}}function gs(e,i){e&1&&(a(0,"th",33),o(1,"Mode"),n())}function xs(e,i){if(e&1&&(a(0,"td",30),o(1),n()),e&2){let t=i.$implicit;l(),g(" ",t.push?"PUSH":"PULL"," ")}}function ys(e,i){e&1&&(a(0,"th",35),o(1,"Local Address"),n())}function Ts(e,i){if(e&1&&(a(0,"td",30),o(1),n()),e&2){let t=i.$implicit;l(),g(" ",t.localAddress||"-"," ")}}function Ds(e,i){e&1&&(a(0,"th",35),o(1,"Remote Address"),n())}function ws(e,i){if(e&1&&(a(0,"td",30),o(1),n()),e&2){let t=i.$implicit;l(),g(" ",t.remoteAddress||"-"," ")}}function Es(e,i){e&1&&(a(0,"th",29),o(1,"Push To"),n())}function Ms(e,i){if(e&1&&(a(0,"td",30),o(1),n()),e&2){let t=i.$implicit;l(),_(t.pushTo||"-")}}function Is(e,i){e&1&&(a(0,"th",44),o(1,"Local\xA0TX"),n())}function Rs(e,i){if(e&1&&(o(0),f(1,"number")),e&2){let t=u().$implicit;g(" ",S(1,1,t.localTx)||"-"," ")}}function As(e,i){e&1&&o(0," - ")}function ks(e,i){if(e&1&&(a(0,"td",30),s(1,Rs,2,3)(2,As,1,0),n()),e&2){let t=i.$implicit;l(),h(t.localTx>=0?1:-1),l(),h(t.localTx<0?2:-1)}}function Ps(e,i){e&1&&(a(0,"th",44),o(1," Next\xA0TX "),a(2,"ya-help"),o(3," Next Transaction ID expected by the remote Yamcs instance "),n()())}function Ls(e,i){if(e&1&&(a(0,"td",30),o(1),f(2,"number"),n()),e&2){let t=i.$implicit;l(),_(S(2,1,t.nextTx)||"-")}}function $s(e,i){e&1&&c(0,"th",37)}function Fs(e,i){e&1&&c(0,"td",30)}function Ns(e,i){e&1&&c(0,"tr",38)}function Us(e,i){e&1&&c(0,"tr",39)}function Bs(e,i){if(e&1&&(a(0,"table",4),v(1,5),s(2,_s,1,0,"th",6)(3,Cs,2,1,"td",7),b(),v(4,8),s(5,hs,2,0,"th",9)(6,Ss,2,1,"td",10),b(),v(7,11),s(8,vs,2,0,"th",12)(9,bs,3,2,"td",10),b(),v(10,13),s(11,gs,2,0,"th",14)(12,xs,2,1,"td",10),b(),v(13,16),s(14,ys,2,0,"th",17)(15,Ts,2,1,"td",10),b(),v(16,18),s(17,Ds,2,0,"th",17)(18,ws,2,1,"td",10),b(),v(19,40),s(20,Es,2,0,"th",9)(21,Ms,2,1,"td",10),b(),v(22,41),s(23,Is,2,0,"th",42)(24,ks,3,2,"td",10),b(),v(25,43),s(26,Ps,4,0,"th",42)(27,Ls,3,3,"td",10),b(),v(28,22),s(29,$s,1,0,"th",23)(30,Fs,1,0,"td",10),b(),s(31,Ns,1,0,"tr",24)(32,Us,1,0,"tr",25),n()),e&2){let t=u();p("dataSource",t.mastersDataSource),l(31),p("matHeaderRowDef",t.masterColumns),l(),p("matRowDefColumns",t.masterColumns)}}function js(e,i){e&1&&(a(0,"ya-empty-message",2),o(1,"Not configured"),n())}var Vi=class e{constructor(i,t,r){this.dialog=r;this.slaveColumns=["state","instance","streams","mode","localAddress","remoteAddress","pullFrom","tx","actions"];this.masterColumns=["state","instance","streams","mode","localAddress","remoteAddress","pushTo","localTx","nextTx","actions"];this.slavesDataSource=new Y;this.mastersDataSource=new Y;this.hasSlaves$=new O(!1);this.hasMasters$=new O(!1);t.setTitle("Replication"),this.replicationInfoSubscription=i.yamcsClient.createReplicationInfoSubscription(m=>{this.slavesDataSource.data=m.slaves||[],this.mastersDataSource.data=m.masters||[],this.hasSlaves$.next(this.slavesDataSource.data.length>0),this.hasMasters$.next(this.mastersDataSource.data.length>0)})}showReplicationStreams(i){this.dialog.open(ji,{width:"500px",data:{streams:i}})}ngOnDestroy(){this.replicationInfoSubscription?.cancel()}static{this.\u0275fac=function(t){return new(t||e)(d(D),d(A),d(Be))}}static{this.\u0275cmp=x({type:e,selectors:[["ng-component"]],standalone:!0,features:[y],decls:18,vars:6,consts:[[1,"panel-content"],["mat-table","",1,"ya-data-table","expand",3,"dataSource"],["marginTop","0"],[1,"section-divider"],["mat-table","",1,"ya-data-table",3,"dataSource"],["matColumnDef","state"],["mat-header-cell","","class","status",4,"matHeaderCellDef"],["mat-cell","","class","status",4,"matCellDef"],["matColumnDef","instance"],["mat-header-cell","","style","min-width: 130px",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","streams"],["mat-header-cell","","style","min-width: 100px",4,"matHeaderCellDef"],["matColumnDef","mode"],["mat-header-cell","","style","min-width: 70px",4,"matHeaderCellDef"],["mat-cell","","style","text-align: center",4,"matCellDef"],["matColumnDef","localAddress"],["mat-header-cell","","style","min-width: 200px",4,"matHeaderCellDef"],["matColumnDef","remoteAddress"],["matColumnDef","pullFrom"],["matColumnDef","tx"],["mat-header-cell","","style","width: 130px",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"status"],["mat-cell","",1,"status"],[3,"connected"],["mat-header-cell","",2,"min-width","130px"],["mat-cell",""],["mat-header-cell","",2,"min-width","100px"],["matTooltip","Show streams",1,"streams",3,"click"],["mat-header-cell","",2,"min-width","70px"],["mat-cell","",2,"text-align","center"],["mat-header-cell","",2,"min-width","200px"],["mat-header-cell","",2,"width","130px"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""],["matColumnDef","pushTo"],["matColumnDef","localTx"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","nextTx"],["mat-header-cell",""]],template:function(t,r){t&1&&(a(0,"app-admin-page")(1,"app-admin-toolbar"),o(2," Replication "),n(),a(3,"div",0)(4,"h4"),o(5,"Inbound"),n(),s(6,us,30,3,"table",1),f(7,"async"),s(8,fs,2,0,"ya-empty-message",2),a(9,"p"),o(10,"\xA0"),n(),a(11,"div",3),c(12,"mat-divider"),n(),a(13,"h4"),o(14,"Outbound"),n(),s(15,Bs,33,3,"table",4),f(16,"async"),s(17,js,2,0,"ya-empty-message",2),n()()),t&2&&(l(6),h(S(7,2,r.hasSlaves$)?6:8),l(9),h(S(16,4,r.hasMasters$)?15:17))},dependencies:[P,L,Bi,T,B,gt,Ue,z,ne,ae,W,J,ee,X,Q,te,Z,fe,xe,Hn],styles:[".streams[_ngcontent-%COMP%]{border-bottom:1px dotted #888;cursor:pointer}"],changeDetection:0})}};var Vs=(e,i)=>[e,i];function Hs(e,i){e&1&&(a(0,"th",11),o(1,"Tablespace"),n())}function Os(e,i){if(e&1&&(a(0,"td",12),o(1),n()),e&2){let t=i.$implicit;l(),_(t.tablespace||"-")}}function Ys(e,i){e&1&&(a(0,"th",11),o(1,"Data Dir"),n())}function Gs(e,i){if(e&1&&o(0),e&2){let t=u().$implicit;g(" /",t.dbPath," ")}}function qs(e,i){if(e&1&&(a(0,"td",12)(1,"a",13),o(2),s(3,Gs,1,1),n()()),e&2){let t=i.$implicit;l(),p("routerLink",rt(3,Vs,t.tablespace,t.dbPath)),l(),g(" ",t.dataDir," "),l(),h(t.dbPath?3:-1)}}function zs(e,i){e&1&&(a(0,"th",11),o(1,"DB Path"),n())}function Ws(e,i){if(e&1&&(a(0,"td",12),o(1),n()),e&2){let t=i.$implicit;l(),_(t.dbPath||"(root)")}}function Qs(e,i){e&1&&c(0,"th",14)}function Zs(e,i){e&1&&c(0,"td",12)}function Ks(e,i){e&1&&c(0,"tr",15)}function Js(e,i){e&1&&c(0,"tr",16)}var Hi=class e{constructor(i,t){this.displayedColumns=["dataDir","tablespace","dbPath","actions"];this.dataSource=new Y;t.setTitle("Open Databases"),i.yamcsClient.getRocksDbDatabases().then(r=>{this.dataSource.data=r})}static{this.\u0275fac=function(t){return new(t||e)(d(D),d(A))}}static{this.\u0275cmp=x({type:e,selectors:[["ng-component"]],standalone:!0,features:[y],decls:19,vars:3,consts:[[1,"panel-content"],["mat-table","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","tablespace"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","dataDir"],["matColumnDef","dbPath"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"routerLink"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(t,r){t&1&&(a(0,"app-admin-page")(1,"app-admin-toolbar"),o(2," Open databases "),n(),a(3,"div",0)(4,"table",1),v(5,2),s(6,Hs,2,0,"th",3)(7,Os,2,1,"td",4),b(),v(8,5),s(9,Ys,2,0,"th",3)(10,qs,4,6,"td",4),b(),v(11,6),s(12,zs,2,0,"th",3)(13,Ws,2,1,"td",4),b(),v(14,7),s(15,Qs,1,0,"th",8)(16,Zs,1,0,"td",4),b(),s(17,Ks,1,0,"tr",9)(18,Js,1,0,"tr",10),n()()()),t&2&&(l(4),p("dataSource",r.dataSource),l(13),p("matHeaderRowDef",r.displayedColumns),l(),p("matRowDefColumns",r.displayedColumns))},dependencies:[P,L,T,K,z,ne,ae,W,J,ee,X,Q,te,Z],encapsulation:2,changeDetection:0})}};function Xs(e,i){if(e&1){let t=j();a(0,"app-admin-page")(1,"app-admin-toolbar"),c(2,"ya-page-icon-button",1),o(3),a(4,"ya-page-button",2),o(5," Compact "),n(),a(6,"mat-menu",3,0)(8,"button",4),w("click",function(){I(t);let m=u();return R(m.compact("_metadata_"))}),o(9," _metadata_ "),n(),a(10,"button",5),w("click",function(){I(t);let m=u();return R(m.compact("rt_data"))}),o(11," rt_data "),n(),a(12,"button",6),w("click",function(){I(t);let m=u();return R(m.compact("parameter_archive"))}),o(13," parameter_archive "),n(),a(14,"button",7),w("click",function(){I(t);let m=u();return R(m.compact("default"))}),o(15," default "),n()()(),a(16,"div",8)(17,"dl",9)(18,"dt"),o(19,"Tablespace"),n(),a(20,"dd"),o(21),n(),a(22,"dt"),o(23,"DB Path"),n(),a(24,"dd"),o(25),n()(),a(26,"pre",10),o(27),n()()()}if(e&2){let t=De(7),r=u();l(3),at(" ",r.tablespace,"://",r.dbPath," \xA0\xA0\xA0 "),l(),p("matMenuTriggerFor",t),l(17),_(r.tablespace||"-"),l(4),_(r.dbPath||"-"),l(2),_(i)}}var Oi=class e{constructor(i,t,r,m){this.yamcs=i;this.snackBar=m;this.tablespace=r.snapshot.paramMap.get("tablespace");let C=r.snapshot.url;C.length?this.dbPath=C.map(E=>E.path).join("/"):this.dbPath="",t.setTitle(this.tablespace+"://"+this.dbPath),this.properties$=i.yamcsClient.getRocksDbDatabaseProperties(this.tablespace,this.dbPath)}compact(i){this.snackBar.open(`Compacting ${this.tablespace}://${this.dbPath}...`,void 0,{horizontalPosition:"end"}),this.yamcs.yamcsClient.compactRocksDbDatabase(this.tablespace,this.dbPath,{cfname:i}).then(()=>{this.snackBar.open(`Compaction of ${this.tablespace}://${this.dbPath} successful`,void 0,{duration:3e3,horizontalPosition:"end"})}).catch(t=>{this.snackBar.open(`Compaction of ${this.tablespace}://${this.dbPath} failed`,void 0,{duration:3e3,horizontalPosition:"end"})})}static{this.\u0275fac=function(t){return new(t||e)(d(D),d(A),d(k),d(wn))}}static{this.\u0275cmp=x({type:e,selectors:[["ng-component"]],standalone:!0,features:[y],decls:2,vars:3,consts:[["compactMenu","matMenu"],["routerLink","/admin/rocksdb/databases","icon","arrow_back"],["icon","fullscreen_exit","dropdown","true",3,"matMenuTriggerFor"],[1,"ya-menu"],["mat-menu-item","","matTooltip","Information about tables and partitions","matTooltipPosition","right",3,"click"],["mat-menu-item","","matTooltip","TM, PP and events","matTooltipPosition","right",3,"click"],["mat-menu-item","","matTooltip","Parameter Archive","matTooltipPosition","right",3,"click"],["mat-menu-item","","matTooltip","Command history, alarms completeness, timeline, activities, users, buckets, ...","matTooltipPosition","right",3,"click"],[1,"panel-content"],[1,"dl-horizontal"],[2,"font-size","10px","margin","0"]],template:function(t,r){if(t&1&&(s(0,Xs,28,6,"app-admin-page"),f(1,"async")),t&2){let m;h((m=S(1,1,r.properties$))?0:-1,m)}},dependencies:[P,L,T,B,K,yn,ot,Tn,fe,Qe,we],encapsulation:2,changeDetection:0})}};var Yi=class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=x({type:e,selectors:[["app-route-detail"]],inputs:{route:"route"},standalone:!0,features:[y],decls:12,vars:3,consts:[[1,"block-title"],[1,"block"]],template:function(t,r){t&1&&(a(0,"div",0),o(1,"Input Type"),n(),a(2,"div",1),o(3),n(),a(4,"div",0),o(5,"Output Type"),n(),a(6,"div",1),o(7),n(),a(8,"div",0),o(9,"Log Format"),n(),a(10,"div",1),o(11),n()),t&2&&(l(3),g(" ",r.route.inputType,`
`),l(4),g(" ",r.route.outputType,`
`),l(4),g(" ",r.route.logFormat||"-",`
`))},dependencies:[T],encapsulation:2,changeDetection:0})}};var ec=e=>({selected:e});function tc(e,i){e&1&&(a(0,"ya-detail-toolbar"),o(1,"Route Detail"),n(),a(2,"div",17),c(3,"app-route-detail",18),n()),e&2&&(l(3),p("route",i))}function ic(e,i){e&1&&(a(0,"ya-detail-toolbar"),o(1,"Select a route"),n())}function nc(e,i){e&1&&(a(0,"th",19),o(1,"Service"),n())}function ac(e,i){if(e&1&&(a(0,"td",20),o(1),n()),e&2){let t=i.$implicit;l(),_(t.service||"Other")}}function oc(e,i){e&1&&(a(0,"th",19),o(1,"Method"),n())}function rc(e,i){if(e&1&&(a(0,"td",20),o(1),n()),e&2){let t=i.$implicit;l(),_(t.description||"-")}}function lc(e,i){e&1&&(a(0,"th",19),o(1,"Requests"),n())}function mc(e,i){if(e&1&&(a(0,"td",20),o(1),n()),e&2){let t=i.$implicit;l(),_(t.requestCount)}}function sc(e,i){e&1&&(a(0,"th",19),o(1,"Errors"),n())}function cc(e,i){if(e&1&&(a(0,"td",20),o(1),n()),e&2){let t=i.$implicit;l(),_(t.errorCount)}}function pc(e,i){e&1&&(a(0,"th",19),o(1,"HTTP"),n())}function dc(e,i){if(e&1&&(a(0,"td",20),o(1),n()),e&2){let t=i.$implicit;l(),at("",t.httpMethod," ",t.url,"")}}function uc(e,i){e&1&&c(0,"th",21)}function fc(e,i){e&1&&c(0,"td",20)}function _c(e,i){e&1&&c(0,"tr",22)}function Cc(e,i){if(e&1){let t=j();a(0,"tr",23),f(1,"async"),w("click",function(){let m=I(t).$implicit,C=u();return R(C.selectRoute(m))}),n()}if(e&2){let t=i.$implicit,r=u();Me("deprecated",t.deprecated),p("ngClass",Se(5,ec,t===S(1,3,r.selectedRoute$)))}}var Gi=class e{constructor(i,t,r,m){this.yamcs=i;this.route=r;this.router=m;this.filterControl=new q;this.displayedColumns=["method","requestCount","errorCount","http","actions"];this.dataSource=new Y;this.selectedRoute$=new O(null);t.setTitle("API routes"),this.dataSource.filterPredicate=(C,E)=>C.url.toLowerCase().indexOf(E)>=0||C.description.toLowerCase().indexOf(E)>=0}ngAfterViewInit(){let i=this.route.snapshot.queryParamMap;i.has("filter")&&(this.filterControl.setValue(i.get("filter")),this.dataSource.filter=i.get("filter").toLowerCase()),this.filterControl.valueChanges.subscribe(()=>{this.updateURL();let t=this.filterControl.value||"";this.dataSource.filter=t.toLowerCase()}),this.refresh(),this.dataSource.sort=this.sort}refresh(){this.yamcs.yamcsClient.getRoutes().then(i=>{this.dataSource.data=i.routes||[]})}selectRoute(i){this.selectedRoute$.next(i)}updateURL(){let i=this.filterControl.value;this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:i||null},queryParamsHandling:"merge"})}static{this.\u0275fac=function(t){return new(t||e)(d(D),d(A),d(k),d(G))}}static{this.\u0275cmp=x({type:e,selectors:[["ng-component"]],viewQuery:function(t,r){if(t&1&&oe(H,7),t&2){let m;re(m=le())&&(r.sort=m.first)}},standalone:!0,features:[y],decls:33,vars:7,consts:[["matTooltip","Refresh view","icon","refresh",3,"click"],[1,"table-wrapper"],[1,"panel-content"],[1,"filter-bar"],["placeholder","Filter routes",3,"formControl"],["mat-table","","matSort","","matSortActive","requestCount","matSortDirection","desc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","service"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","method"],["matColumnDef","requestCount"],["matColumnDef","errorCount"],["matColumnDef","http"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"ngClass","deprecated","click",4,"matRowDef","matRowDefColumns"],[2,"padding","0 16px"],[3,"route"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row","",3,"click","ngClass"]],template:function(t,r){if(t&1&&(a(0,"app-admin-page")(1,"app-admin-toolbar"),o(2," API routes \xA0\xA0\xA0 "),a(3,"ya-page-icon-button",0),w("click",function(){return r.refresh()}),n()(),a(4,"ya-detail-pane"),s(5,tc,4,1),f(6,"async"),s(7,ic,2,0,"ya-detail-toolbar"),n(),a(8,"div",1)(9,"div",2)(10,"div",3),c(11,"ya-search-filter",4),n(),a(12,"table",5),v(13,6),s(14,nc,2,0,"th",7)(15,ac,2,1,"td",8),b(),v(16,9),s(17,oc,2,0,"th",7)(18,rc,2,1,"td",8),b(),v(19,10),s(20,lc,2,0,"th",7)(21,mc,2,1,"td",8),b(),v(22,11),s(23,sc,2,0,"th",7)(24,cc,2,1,"td",8),b(),v(25,12),s(26,pc,2,0,"th",7)(27,dc,2,2,"td",8),b(),v(28,13),s(29,uc,1,0,"th",14)(30,fc,1,0,"td",8),b(),s(31,_c,1,0,"tr",15)(32,Cc,2,7,"tr",16),n()()()()),t&2){let m;l(5),h((m=S(6,5,r.selectedRoute$))?5:7,m),l(6),p("formControl",r.filterControl),l(),p("dataSource",r.dataSource),l(19),p("matHeaderRowDef",r.displayedColumns),l(),p("matRowDefColumns",r.displayedColumns)}},dependencies:[P,L,Yi,T,bt,B,me,Ae,H,_e,z,ne,ae,W,J,ee,X,Q,te,Z,fe,xt,yt,we,Ee],styles:[".deprecated[_ngcontent-%COMP%]{text-decoration:line-through}.detail[_ngcontent-%COMP%]{background-color:#fafafa;float:right;height:100%;width:450px;overflow:auto;border-left:1px solid #d3d3d3;box-sizing:border-box}.table-wrapper[_ngcontent-%COMP%]{position:relative;overflow:auto;height:100%}.mat-mdc-row[_ngcontent-%COMP%]{cursor:pointer}"],changeDetection:0})}};function hc(e,i){if(e&1&&(a(0,"mat-icon",0),o(1," check_circle "),n()),e&2){let t=u();p("matTooltip",t.service.state)}}function Sc(e,i){if(e&1&&(a(0,"mat-icon",1),o(1," check_circle "),n()),e&2){let t=u();p("matTooltip",t.service.state)}}function vc(e,i){if(e&1&&(a(0,"mat-icon",2),o(1," highlight_off "),n()),e&2){let t=u();p("matTooltip",t.service.state)}}function bc(e,i){if(e&1&&(a(0,"mat-icon",3),o(1," lens "),n()),e&2){let t=u();p("matTooltip",t.service.state)}}var qi=class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=x({type:e,selectors:[["app-service-state"]],inputs:{service:"service"},standalone:!0,features:[y],decls:4,vars:4,consts:[[2,"color","lightgreen",3,"matTooltip"],[1,"success",3,"matTooltip"],[1,"alert",3,"matTooltip"],[1,"down",3,"matTooltip"]],template:function(t,r){t&1&&s(0,hc,2,1,"mat-icon",0)(1,Sc,2,1,"mat-icon",1)(2,vc,2,1,"mat-icon",2)(3,bc,2,1,"mat-icon",3),t&2&&(h(r.service.state==="STARTING"?0:-1),l(),h(r.service.state==="RUNNING"?1:-1),l(),h(r.service.state==="STOPPING"||r.service.state==="FAILED"?2:-1),l(),h(r.service.state==="TERMINATED"||r.service.state==="NEW"?3:-1))},dependencies:[T,ue,fe],encapsulation:2,changeDetection:0})}};var gc=()=>["detail"];function xc(e,i){e&1&&(a(0,"th",15),o(1,"Name"),n())}function yc(e,i){if(e&1&&(a(0,"td",16),o(1),n()),e&2){let t=i.$implicit;l(),_(t.name)}}function Tc(e,i){e&1&&(a(0,"th",15),o(1,"Class"),n())}function Dc(e,i){if(e&1&&(a(0,"td",16),o(1),n()),e&2){let t=i.$implicit;l(),_(t.className)}}function wc(e,i){e&1&&c(0,"th",17)}function Ec(e,i){if(e&1&&(a(0,"td",18),c(1,"app-service-state",19),n()),e&2){let t=i.$implicit;l(),p("service",t)}}function Mc(e,i){e&1&&(a(0,"th",15),o(1,"Failure"),n())}function Ic(e,i){if(e&1){let t=j();a(0,"ya-icon-action",22),w("click",function(){I(t);let m=u(2).$implicit;return R(m.expanded=!1)}),n()}}function Rc(e,i){if(e&1){let t=j();a(0,"ya-icon-action",23),w("click",function(){I(t);let m=u(2).$implicit;return R(m.expanded=!0)}),n()}}function Ac(e,i){if(e&1&&s(0,Ic,1,0,"ya-icon-action",20)(1,Rc,1,0,"ya-icon-action",21),e&2){let t=u().$implicit;h(t.expanded?0:1)}}function kc(e,i){if(e&1&&(a(0,"td",16),o(1),s(2,Ac,2,1),n()),e&2){let t=i.$implicit;l(),g(" ",t.failureMessage||"-"," "),l(),h(t.failureCause?2:-1)}}function Pc(e,i){if(e&1&&(a(0,"td",16)(1,"pre"),o(2),n()()),e&2){let t=i.$implicit,r=u();Nt("colspan",r.displayedColumns.length),l(2),_(t.failureCause||"-")}}function Lc(e,i){e&1&&c(0,"th",24)}function $c(e,i){if(e&1){let t=j();a(0,"ya-more")(1,"button",25),w("click",function(){I(t);let m=u().$implicit,C=u();return R(C.startService.emit(m.name))}),o(2," Start service "),n(),a(3,"button",25),w("click",function(){I(t);let m=u().$implicit,C=u();return R(C.stopService.emit(m.name))}),o(4," Stop service "),n()()}if(e&2){let t=u().$implicit;l(),p("disabled",t.state!=="TERMINATED"&&t.state!=="NEW"),l(2),p("disabled",t.state!=="RUNNING")}}function Fc(e,i){if(e&1&&(a(0,"td",16),s(1,$c,5,2,"ya-more"),n()),e&2){let t=u();l(),h(t.readonly?-1:1)}}function Nc(e,i){e&1&&c(0,"tr",26)}function Uc(e,i){e&1&&c(0,"tr",27)}function Bc(e,i){if(e&1){let t=j();a(0,"tr",28),w("click",function(){let m=I(t).$implicit;return R(m.expanded=!m.expanded)}),n()}if(e&2){let t=i.$implicit;Me("expanded",t.expanded)}}var zi=class e{constructor(){this.displayedColumns=["state","name","className","failureMessage","actions"];this.dataSource=new Y;this.readonly=!1;this.startService=new Rt;this.stopService=new Rt}ngAfterViewInit(){this.dataSource.sort=this.sort}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=x({type:e,selectors:[["app-services-table"]],viewQuery:function(t,r){if(t&1&&oe(H,7),t&2){let m;re(m=le())&&(r.sort=m.first)}},inputs:{dataSource:"dataSource",readonly:"readonly"},outputs:{startService:"startService",stopService:"stopService"},standalone:!0,features:[y],decls:21,vars:5,consts:[["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","","multiTemplateDataRows","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","className"],["matColumnDef","state"],["mat-header-cell","","class","status",4,"matHeaderCellDef"],["mat-cell","","class","status",4,"matCellDef"],["matColumnDef","failureMessage"],["matColumnDef","detail"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-row","","class","item-detail",3,"expanded","click",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","",1,"status"],["mat-cell","",1,"status"],[3,"service"],["icon","expand_less"],["icon","expand_more"],["icon","expand_less",3,"click"],["icon","expand_more",3,"click"],["mat-header-cell","",1,"expand"],["mat-menu-item","",3,"click","disabled"],["mat-header-row",""],["mat-row",""],["mat-row","",1,"item-detail",3,"click"]],template:function(t,r){t&1&&(a(0,"table",0),v(1,1),s(2,xc,2,0,"th",2)(3,yc,2,1,"td",3),b(),v(4,4),s(5,Tc,2,0,"th",2)(6,Dc,2,1,"td",3),b(),v(7,5),s(8,wc,1,0,"th",6)(9,Ec,2,1,"td",7),b(),v(10,8),s(11,Mc,2,0,"th",2)(12,kc,3,2,"td",3),b(),v(13,9),s(14,Pc,3,2,"td",3),b(),v(15,10),s(16,Lc,1,0,"th",11)(17,Fc,2,1,"td",3),b(),s(18,Nc,1,0,"tr",12)(19,Uc,1,0,"tr",13)(20,Bc,1,2,"tr",14),n()),t&2&&(p("dataSource",r.dataSource),l(18),p("matHeaderRowDef",r.displayedColumns),l(),p("matRowDefColumns",r.displayedColumns),l(),p("matRowDefColumns",Je(4,gc)))},dependencies:[qi,T,ot,H,_e,z,ne,ae,W,J,ee,X,Q,te,Z,jn,ft],styles:["tr.item-detail[_ngcontent-%COMP%]:not(.expanded){display:none}"],changeDetection:0})}};var Wi=class e{constructor(i,t,r,m){this.yamcs=i;this.router=t;this.route=r;this.instance="_global";this.filterForm=new gn({instance:new q("_global")});this.instanceOptions$=new O([{id:"_global",label:"_global"}]);this.dataSource=new Y;m.setTitle("Services"),i.yamcsClient.getInstances({filter:"state=RUNNING"}).then(C=>{for(let E of C)this.instanceOptions$.next([...this.instanceOptions$.value,{id:E.name,label:E.name}])}),this.initializeOptions(),this.refresh(),this.filterForm.get("instance").valueChanges.forEach(C=>{this.instance=C,this.refresh()})}initializeOptions(){let i=this.route.snapshot.queryParamMap;i.has("instance")&&(this.instance=i.get("instance"),this.filterForm.get("instance").setValue(this.instance))}startService(i){if(confirm(`Are you sure you want to start ${i} ?`)){let t=this.filterForm.get("instance").value;this.yamcs.yamcsClient.startService(t,i).then(()=>this.refresh())}}stopService(i){if(confirm(`Are you sure you want to stop ${i} ?`)){let t=this.filterForm.get("instance").value;this.yamcs.yamcsClient.stopService(t,i).then(()=>this.refresh())}}refresh(){this.updateURL();let i=this.filterForm.get("instance").value;this.yamcs.yamcsClient.getServices(i).then(t=>{this.dataSource.data=t})}updateURL(){this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{instance:this.instance||null},queryParamsHandling:"merge"})}static{this.\u0275fac=function(t){return new(t||e)(d(D),d(G),d(k),d(A))}}static{this.\u0275cmp=x({type:e,selectors:[["ng-component"]],standalone:!0,features:[y],decls:10,vars:5,consts:[["matTooltip","Refresh view","icon","refresh",3,"click"],[1,"panel-content"],[3,"formGroup"],[1,"filter-bar"],["formControlName","instance",3,"options"],[3,"startService","stopService","dataSource"]],template:function(t,r){t&1&&(a(0,"app-admin-page")(1,"app-admin-toolbar"),o(2," Services \xA0\xA0\xA0 "),a(3,"ya-page-icon-button",0),w("click",function(){return r.refresh()}),n()(),a(4,"div",1)(5,"form",2)(6,"div",3),c(7,"ya-select",4),f(8,"async"),n()(),a(9,"app-services-table",5),w("startService",function(C){return r.startService(C)})("stopService",function(C){return r.stopService(C)}),n()()()),t&2&&(l(5),p("formGroup",r.filterForm),l(2),p("options",S(8,3,r.instanceOptions$)),l(2),p("dataSource",r.dataSource))},dependencies:[P,L,zi,T,B,Re,me,Ie,ke,Pe,fe,we,Wt],encapsulation:2,changeDetection:0})}};var jc=()=>[];function Vc(e,i){e&1&&(a(0,"th",16),o(1,"Id"),n())}function Hc(e,i){if(e&1&&(a(0,"td",17),o(1),n()),e&2){let t=i.$implicit;l(),_(t.id)}}function Oc(e,i){e&1&&(a(0,"th",16),o(1,"User"),n())}function Yc(e,i){if(e&1&&(a(0,"td",17),o(1),n()),e&2){let t=i.$implicit;l(),_(t.username||"-")}}function Gc(e,i){e&1&&(a(0,"th",16),o(1,"IP address"),n())}function qc(e,i){if(e&1&&(a(0,"td",17),o(1),n()),e&2){let t=i.$implicit;l(),_(t.ipAddress||"-")}}function zc(e,i){e&1&&(a(0,"th",16),o(1,"Hostname"),n())}function Wc(e,i){if(e&1&&(a(0,"td",17),o(1),n()),e&2){let t=i.$implicit;l(),_(t.hostname||"-")}}function Qc(e,i){e&1&&(a(0,"th",16),o(1,"Started"),n())}function Zc(e,i){if(e&1&&(a(0,"td",17),o(1),f(2,"datetime"),n()),e&2){let t=i.$implicit;l(),_(S(2,1,t.startTime)||"-")}}function Kc(e,i){e&1&&(a(0,"th",16),o(1,"Last renewed"),n())}function Jc(e,i){if(e&1&&(a(0,"td",17),c(1,"app-ago",18),n()),e&2){let t=i.$implicit;l(),p("time",t.lastAccessTime)("useMissionTime",!1)}}function Xc(e,i){e&1&&(a(0,"th",16),o(1,"Expires in"),n())}function ep(e,i){if(e&1&&(a(0,"td",17),c(1,"app-ago",18),n()),e&2){let t=i.$implicit;l(),p("time",t.expirationTime)("useMissionTime",!1)}}function tp(e,i){e&1&&(a(0,"th",19),o(1,"Client"),n())}function ip(e,i){e&1&&o(0," , ")}function np(e,i){if(e&1&&(s(0,ip,1,0),o(1),f(2,"userAgent")),e&2){let t=i.$implicit,r=i.$index;h(r!==0?0:-1),l(),g(" ",S(2,2,t)," ")}}function ap(e,i){e&1&&o(0," - ")}function op(e,i){if(e&1&&(a(0,"td",17),N(1,np,3,4,null,null,F),s(3,ap,1,0),n()),e&2){let t=i.$implicit;l(),U(t.clients||Je(1,jc)),l(2),h(t.clients?-1:3)}}function rp(e,i){e&1&&c(0,"tr",20)}function lp(e,i){e&1&&c(0,"tr",21)}var Qi=class e{constructor(i,t,r){this.yamcs=i;this.displayedColumns=["id","user","ipAddress","hostname","started","lastAccessTime","expirationTime","clients"];this.tableTrackerFn=(i,t)=>t.id;this.dataSource=new Y;t.setTitle("Sessions"),this.refresh(),this.syncSubscription=r.syncSlow(()=>this.refresh())}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}refresh(){this.yamcs.yamcsClient.getSessions().then(i=>{this.dataSource.data=i||[]})}ngOnDestroy(){this.syncSubscription?.unsubscribe()}static{this.\u0275fac=function(t){return new(t||e)(d(D),d(A),d(Tt))}}static{this.\u0275cmp=x({type:e,selectors:[["ng-component"]],viewQuery:function(t,r){if(t&1&&(oe(H,5),oe(Le,5)),t&2){let m;re(m=le())&&(r.sort=m.first),re(m=le())&&(r.paginator=m.first)}},standalone:!0,features:[y],decls:32,vars:7,consts:[[1,"panel-content"],["mat-table","","matSort","","matSortActive","started","matSortDirection","desc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource","trackBy"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","user"],["matColumnDef","ipAddress"],["matColumnDef","hostname"],["matColumnDef","started"],["matColumnDef","lastAccessTime"],["matColumnDef","expirationTime"],["matColumnDef","clients"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSize","hidePageSize","showFirstLastButtons"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"time","useMissionTime"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(t,r){t&1&&(a(0,"app-admin-page")(1,"app-admin-toolbar"),o(2," Sessions "),n(),a(3,"div",0)(4,"table",1),v(5,2),s(6,Vc,2,0,"th",3)(7,Hc,2,1,"td",4),b(),v(8,5),s(9,Oc,2,0,"th",3)(10,Yc,2,1,"td",4),b(),v(11,6),s(12,Gc,2,0,"th",3)(13,qc,2,1,"td",4),b(),v(14,7),s(15,zc,2,0,"th",3)(16,Wc,2,1,"td",4),b(),v(17,8),s(18,Qc,2,0,"th",3)(19,Zc,3,3,"td",4),b(),v(20,9),s(21,Kc,2,0,"th",3)(22,Jc,2,2,"td",4),b(),v(23,10),s(24,Xc,2,0,"th",3)(25,ep,2,2,"td",4),b(),v(26,11),s(27,tp,2,0,"th",12)(28,op,4,2,"td",4),b(),s(29,rp,1,0,"tr",13)(30,lp,1,0,"tr",14),n(),c(31,"mat-paginator",15),n()()),t&2&&(l(4),p("dataSource",r.dataSource)("trackBy",r.tableTrackerFn),l(25),p("matHeaderRowDef",r.displayedColumns),l(),p("matRowDefColumns",r.displayedColumns),l(),p("pageSize",100)("hidePageSize",!0)("showFirstLastButtons",!0))},dependencies:[P,L,Xn,T,Le,H,_e,z,ne,ae,W,J,ee,X,Q,te,Z,Ct,wt],encapsulation:2,changeDetection:0})}};function mp(e,i){if(e&1){let t=j();a(0,"ya-sidebar-nav-group",22),w("toggle",function(){I(t);let m=u();return R(m.toggleUserManagementGroup())}),a(1,"ya-sidebar-nav-item",23),o(2," Users "),n(),a(3,"ya-sidebar-nav-item",24),o(4," Service accounts "),n(),a(5,"ya-sidebar-nav-item",25),o(6," Groups "),n(),a(7,"ya-sidebar-nav-item",26),o(8," Roles "),n()()}if(e&2){let t=u();p("active",t.userManagementActive)("expanded",t.userManagementExpanded),l(),p("subitem",!0),l(2),p("subitem",!0),l(2),p("subitem",!0),l(2),p("subitem",!0)}}function sp(e,i){e&1&&(a(0,"ya-sidebar-nav-item",9)(1,"mat-icon",7),o(2,"devices"),n(),o(3," Sessions "),n())}function cp(e,i){e&1&&(a(0,"ya-sidebar-nav-item",10)(1,"mat-icon",7),o(2,"attractions"),n(),o(3," Services "),n())}function pp(e,i){e&1&&(a(0,"ya-sidebar-nav-item",11)(1,"mat-icon",7),o(2,"flip_camera_android"),n(),o(3," Processor types "),n())}function dp(e,i){e&1&&(a(0,"ya-sidebar-nav-item",13)(1,"mat-icon",7),o(2,"share"),n(),o(3," Replication "),n())}function up(e,i){if(e&1){let t=j();a(0,"ya-sidebar-nav-group",27),w("toggle",function(){I(t);let m=u();return R(m.toggleRocksDbGroup())}),a(1,"ya-sidebar-nav-item",28),o(2," Open databases "),n()()}if(e&2){let t=u();p("active",t.rocksDbActive)("expanded",t.rocksDbExpanded),l(),p("subitem",!0)}}function fp(e,i){e&1&&(a(0,"ya-sidebar-nav-item",15)(1,"mat-icon",7),o(2,"traffic"),n(),o(3," HTTP traffic "),n())}function _p(e,i){e&1&&(a(0,"ya-sidebar-nav-item",16)(1,"mat-icon",7),o(2,"api"),n(),o(3," API routes "),n())}function Cp(e,i){e&1&&(a(0,"ya-sidebar-nav-item",17)(1,"mat-icon",7),o(2,"access_time"),n(),o(3," Leap seconds "),n())}function hp(e,i){e&1&&(a(0,"ya-sidebar-nav-item",18)(1,"mat-icon",7),o(2,"receipt"),n(),o(3," Threads "),n())}function Sp(e,i){e&1&&(a(0,"ya-sidebar-nav-item",19)(1,"mat-icon",7),o(2,"memory"),n(),o(3," System "),n())}function vp(e,i){if(e&1&&(a(0,"div",21),c(1,"img",29),n()),e&2){let t=u();l(),p("src",t.config.logo,Ft)}}var Zi=class e{constructor(i,t,r){this.userManagementActive=!1;this.userManagementExpanded=!1;this.rocksDbActive=!1;this.rocksDbExpanded=!1;this.config=i.getConfig(),this.user=t.getUser(),this.routerSubscription=r.events.pipe(Pt(m=>m instanceof Bt)).subscribe(m=>{let C=m.url;this.collapseAllGroups(),this.userManagementActive=!1,this.rocksDbActive=!1,C.match(/\/iam.*/)?(this.userManagementActive=!0,this.userManagementExpanded=!0):C.match(/\/rocksdb.*/)&&(this.rocksDbActive=!0,this.rocksDbExpanded=!0)})}collapseAllGroups(){this.userManagementExpanded=!1,this.rocksDbExpanded=!1}toggleUserManagementGroup(){let i=this.userManagementExpanded;this.collapseAllGroups(),this.userManagementExpanded=!i}toggleRocksDbGroup(){let i=this.rocksDbExpanded;this.collapseAllGroups(),this.rocksDbExpanded=!i}showRocksDbItem(){return this.user.hasSystemPrivilege("ControlArchiving")}showAccessControlItem(){return this.user.hasSystemPrivilege("ControlAccess")}showServicesItem(){return this.user.hasSystemPrivilege("ControlServices")}showSystemInfo(){return this.user.hasSystemPrivilege("ReadSystemInfo")}ngOnDestroy(){this.routerSubscription?.unsubscribe()}static{this.\u0275fac=function(t){return new(t||e)(d(Bn),d(je),d(G))}}static{this.\u0275cmp=x({type:e,selectors:[["ng-component"]],standalone:!0,features:[y],decls:35,vars:19,consts:[["messageBar",""],["mode","side",3,"opened","disableClose"],[1,"sidenav-content"],[1,"top","module-title"],[1,"icon32",2,"margin-right","16px"],["dense",""],["routerLink","/admin",3,"exact"],[1,"item-icon"],["label","Access control","icon","supervised_user_circle",3,"active","expanded"],["routerLink","/admin/sessions"],["routerLink","/admin/services"],["routerLink","/admin/processor-types"],["routerLink","/admin/databases"],["routerLink","/admin/replication"],["label","RocksDB","icon","dataset",3,"active","expanded"],["routerLink","/admin/http-traffic"],["routerLink","/admin/routes"],["routerLink","/admin/leap-seconds"],["routerLink","/admin/threads"],["routerLink","/admin/system"],[2,"flex","1 1 auto"],[1,"navbar-logo"],["label","Access control","icon","supervised_user_circle",3,"toggle","active","expanded"],["routerLink","/admin/iam/users",3,"subitem"],["routerLink","/admin/iam/service-accounts",3,"subitem"],["routerLink","/admin/iam/groups",3,"subitem"],["routerLink","/admin/iam/roles",3,"subitem"],["label","RocksDB","icon","dataset",3,"toggle","active","expanded"],["routerLink","/admin/rocksdb/databases",3,"subitem"],[3,"src"]],template:function(t,r){if(t&1&&(c(0,"ya-message-bar",null,0),a(2,"mat-sidenav-container"),f(3,"async"),a(4,"mat-sidenav",1)(5,"div",2)(6,"mat-toolbar",3)(7,"mat-toolbar-row")(8,"mat-icon",4),o(9,"security"),n(),o(10," Admin Area "),n()(),a(11,"mat-nav-list",5)(12,"ya-sidebar-nav-item",6)(13,"mat-icon",7),o(14,"recent_actors"),n(),o(15," Action log "),n(),s(16,mp,9,6,"ya-sidebar-nav-group",8)(17,sp,4,0,"ya-sidebar-nav-item",9)(18,cp,4,0,"ya-sidebar-nav-item",10)(19,pp,4,0,"ya-sidebar-nav-item",11),a(20,"ya-sidebar-nav-item",12)(21,"mat-icon",7),o(22,"storage"),n(),o(23," Databases "),n(),s(24,dp,4,0,"ya-sidebar-nav-item",13)(25,up,3,3,"ya-sidebar-nav-group",14)(26,fp,4,0,"ya-sidebar-nav-item",15)(27,_p,4,0,"ya-sidebar-nav-item",16)(28,Cp,4,0,"ya-sidebar-nav-item",17)(29,hp,4,0,"ya-sidebar-nav-item",18)(30,Sp,4,0,"ya-sidebar-nav-item",19),n(),c(31,"div",20),s(32,vp,2,1,"div",21),n()(),a(33,"mat-sidenav-content"),c(34,"router-outlet"),n()()),t&2){let m=De(1);l(2),Me("message-bar-visible",S(3,17,m.show$)),l(2),p("opened",!0)("disableClose",!0),l(8),p("exact",!0),l(4),h(r.showAccessControlItem()?16:-1),l(),h(r.showAccessControlItem()?17:-1),l(),h(r.showServicesItem()?18:-1),l(),h(r.showSystemInfo()?19:-1),l(5),h(r.showSystemInfo()?24:-1),l(),h(r.showRocksDbItem()?25:-1),l(),h(r.showSystemInfo()?26:-1),l(),h(r.showSystemInfo()?27:-1),l(),h(r.showSystemInfo()?28:-1),l(),h(r.showSystemInfo()?29:-1),l(),h(r.showSystemInfo()?30:-1),l(2),h(r.config.logo?32:-1)}},dependencies:[T,B,dt,K,ue,En,Ln,$n,Pn,Ht,Vt,On,Yn,Gn],styles:["mat-sidenav-container[_ngcontent-%COMP%]{position:absolute;inset:48px 0 0;background-color:var(--y-background-color)}mat-sidenav-container.message-bar-visible[_ngcontent-%COMP%]{top:96px}mat-sidenav[_ngcontent-%COMP%]{width:250px;background-color:#181818;border-right:0!important}.sidenav-content[_ngcontent-%COMP%]{display:flex;height:100%;flex-direction:column}mat-toolbar[_ngcontent-%COMP%]{background-color:#181818;border-bottom:1px solid rgba(255,255,255,.1);box-sizing:content-box;color:#d3d3d3;font-weight:300;font-size:14px}.navbar-logo[_ngcontent-%COMP%]{text-align:center;line-height:0}.navbar-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%}"],changeDetection:0})}};var bp=e=>({process:e,indent:0,last:!1}),gp=()=>[],xp=(e,i,t)=>({process:e,indent:i,last:t});function yp(e,i){if(e&1&&(a(0,"tr")(1,"td"),o(2),n(),a(3,"td",7),o(4),n(),a(5,"td"),o(6),n(),a(7,"td"),o(8),n(),c(9,"td"),n()),e&2){let t=i.$implicit;l(2),_(t.name),l(2),_(t.description||"-"),l(2),_(t.version||"-"),l(2),_(t.vendor||"-")}}function Tp(e,i){e&1&&(a(0,"h4"),o(1,"Plugins"),n(),a(2,"table",4)(3,"tr")(4,"th"),o(5,"Name"),n(),a(6,"th"),o(7,"Description"),n(),a(8,"th"),o(9,"Version"),n(),a(10,"th"),o(11,"Maintainer"),n(),c(12,"th",5),n(),N(13,yp,10,4,"tr",null,F),n(),c(15,"br")),e&2&&(l(13),U(i))}function Dp(e,i){if(e&1&&(a(0,"tr")(1,"td"),o(2),n(),a(3,"td"),o(4),n(),a(5,"td"),o(6),f(7,"formatBytes"),n(),a(8,"td"),o(9),f(10,"formatBytes"),n(),a(11,"td"),o(12),f(13,"formatBytes"),n(),c(14,"td"),n()),e&2){let t=i.$implicit;l(2),_(t.directory),l(2),_(t.type||"-"),l(2),_(S(7,5,t.totalSpace)),l(3),_(S(10,7,t.unallocatedSpace)),l(3),_(S(13,9,t.usableSpace))}}function wp(e,i){e&1&&tn(0)}function Ep(e,i){if(e&1&&(a(0,"div",1)(1,"dl",2)(2,"dt"),o(3,"Yamcs version"),n(),a(4,"dd"),o(5),n(),a(6,"dt"),o(7,"Build"),n(),a(8,"dd"),o(9),n(),a(10,"dt"),o(11,"Server ID"),n(),a(12,"dd"),o(13),n()(),a(14,"dl",3)(15,"dt"),o(16,"OS"),n(),a(17,"dd"),o(18),n(),a(19,"dt"),o(20,"Architecture"),n(),a(21,"dd"),o(22),n(),a(23,"dt"),o(24,"JVM"),n(),a(25,"dd"),o(26),n()(),a(27,"dl",3)(28,"dt"),o(29,"Working directory"),n(),a(30,"dd"),o(31),n(),a(32,"dt"),o(33,"Config directory"),n(),a(34,"dd"),o(35),n(),a(36,"dt"),o(37,"Cache directory"),n(),a(38,"dd"),o(39),n(),a(40,"dt"),o(41,"Data directory"),n(),a(42,"dd"),o(43),n()(),a(44,"dl",3)(45,"dt"),o(46,"Uptime"),n(),a(47,"dd"),o(48),f(49,"duration"),n(),a(50,"dt"),o(51,"Load average"),n(),a(52,"dd"),o(53),f(54,"number"),n(),a(55,"dt"),o(56,"Available processors"),n(),a(57,"dd"),o(58),n(),a(59,"dt"),o(60,"Heap memory"),n(),a(61,"dd"),o(62),f(63,"formatBytes"),f(64,"formatBytes"),f(65,"formatBytes"),n(),a(66,"dt"),o(67,"Non-heap memory"),n(),a(68,"dd"),o(69),f(70,"formatBytes"),f(71,"formatBytes"),f(72,"formatBytes"),n(),a(73,"dt"),o(74,"Thread count"),n(),a(75,"dd"),o(76),n()(),s(77,Tp,16,0),f(78,"async"),a(79,"h4"),o(80,"Root directories"),n(),a(81,"table",4)(82,"tr")(83,"th"),o(84,"Directory"),n(),a(85,"th"),o(86,"Type"),n(),a(87,"th"),o(88,"Total space"),n(),a(89,"th"),o(90,"Unallocated space"),n(),a(91,"th"),o(92,"Usable space"),n(),c(93,"th",5),n(),N(94,Dp,15,11,"tr",null,F),n(),c(96,"br"),a(97,"h4"),o(98,"Process tree"),n(),a(99,"table",4)(100,"tr")(101,"th"),o(102,"PID"),n(),a(103,"th"),o(104,"User"),n(),a(105,"th"),o(106,"Start time"),n(),a(107,"th",5),o(108,"Command"),n()(),s(109,wp,1,0,"ng-container",6),n()()),e&2){let t,r=i,m=u(),C=De(6);l(5),_(r.yamcsVersion||"-"),l(4),_(r.revision||"-"),l(4),_(r.serverId||"-"),l(5),_(r.os),l(4),_(r.arch),l(4),_(r.jvm),l(5),_(r.workingDirectory),l(4),_(r.configDirectory),l(4),_(r.cacheDirectory),l(4),_(r.dataDirectory),l(5),_(S(49,23,r.uptime)),l(5),_(Ne(54,25,r.loadAverage,"1.2-2")||"-"),l(5),_(r.availableProcessors),l(4),nn(" ",S(63,28,r.heapMemory)," (used: ",S(64,30,r.heapMemory-r.usedHeapMemory),", limit: ",S(65,32,r.maxHeapMemory)||"n/a",") "),l(7),nn(" ",S(70,34,r.nonHeapMemory)," (used: ",S(71,36,r.nonHeapMemory-r.usedNonHeapMemory),", limit: ",S(72,38,r.maxNonHeapMemory)||"n/a",") "),l(7),_(r.jvmThreadCount),l(),h((t=S(78,40,m.plugins$))?77:-1,t),l(17),U(r.rootDirectories),l(15),p("ngTemplateOutlet",C)("ngTemplateOutletContext",Se(42,bp,r.process))}}function Mp(e,i){e&1&&(a(0,"span",8),o(1,"\u2514\u2500\u2500"),n())}function Ip(e,i){e&1&&(a(0,"span",8),o(1,"\u251C\u2500\u2500"),n())}function Rp(e,i){if(e&1&&(a(0,"span",8),o(1),n(),s(2,Mp,2,0,"span",8)(3,Ip,2,0,"span",8)),e&2){let t=u(),r=t.indent,m=t.last;l(),_(" ".repeat(r)),l(),h(m?2:3)}}function Ap(e,i){e&1&&tn(0)}function kp(e,i){if(e&1&&s(0,Ap,1,0,"ng-container",6),e&2){let t=i.$implicit,r=i.$index,m=i.$count,C=u().indent;u();let E=De(6);p("ngTemplateOutlet",E)("ngTemplateOutletContext",fn(2,xp,t,C+2,r===m-1))}}function Pp(e,i){if(e&1&&(a(0,"tr")(1,"td"),o(2),n(),a(3,"td"),o(4),n(),a(5,"td"),o(6),f(7,"datetime"),n(),a(8,"td"),s(9,Rp,4,2),o(10),n()(),N(11,kp,1,6,"ng-container",null,F)),e&2){let t=i.process,r=i.indent;l(2),_(t.pid),l(2),_(t.user),l(2),_(S(7,5,t.startTime)||"-"),l(3),h(r?9:-1),l(),g(" ",t.command," "),l(),U(t.children||Je(7,gp))}}var Ki=class e{constructor(i,t){this.yamcs=i;this.info$=new O(null);this.plugins$=new O([]);t.setTitle("System"),this.yamcs.yamcsClient.getGeneralInfo().then(r=>this.plugins$.next(r.plugins||[])),this.systemInfoSubscription=i.yamcsClient.createSystemInfoSubscription(r=>{this.info$.next(r)})}ngOnDestroy(){this.systemInfoSubscription?.cancel()}static{this.\u0275fac=function(t){return new(t||e)(d(D),d(A))}}static{this.\u0275cmp=x({type:e,selectors:[["ng-component"]],standalone:!0,features:[y],decls:7,vars:3,consts:[["processTemplate",""],[1,"panel-content"],[1,"dl-horizontal",2,"margin-top","0"],[1,"dl-horizontal"],["yaDataTable","",1,"expand"],[1,"expand"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"wrap200"],[1,"tree","mono"]],template:function(t,r){if(t&1&&(a(0,"app-admin-page")(1,"app-admin-toolbar"),o(2,"System"),n(),s(3,Ep,110,44,"div",1),f(4,"async"),n(),s(5,Pp,13,8,"ng-template",null,0,_n)),t&2){let m;l(3),h((m=S(4,1,r.info$))?3:-1,m)}},dependencies:[P,L,T,Cn,B,gt,ge,Ct,Qn,Qt],styles:["table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{white-space:nowrap}.tree[_ngcontent-%COMP%]{white-space:pre;color:var(--y-accent)}"],changeDetection:0})}};function Lp(e,i){if(e&1&&(a(0,"small"),o(1),n()),e&2){let t=u();l(),g("(line: ",t.element.lineNumber,")")}}var It=class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=x({type:e,selectors:[["app-trace-element"]],inputs:{element:"element"},standalone:!0,features:[y],decls:4,vars:5,consts:[[3,"innerHTML"]],template:function(t,r){t&1&&(c(0,"span",0),f(1,"classNameHtml"),o(2),s(3,Lp,2,1,"small")),t&2&&(p("innerHTML",S(1,3,r.element.className),ct),l(2),g(".",r.element.methodName,`
`),l(),h(r.element.lineNumber?3:-1))},dependencies:[T,zn],encapsulation:2,changeDetection:0})}};function $p(e,i){e&1&&(a(0,"th",17),o(1,"ID"),n())}function Fp(e,i){if(e&1&&(a(0,"td",18),o(1),n()),e&2){let t=i.$implicit;l(),_(t.id)}}function Np(e,i){e&1&&(a(0,"th",17),o(1,"Name"),n())}function Up(e,i){if(e&1&&(a(0,"td",18)(1,"a",19),o(2),n()()),e&2){let t=i.$implicit;l(),p("routerLink",t.id),l(),g(" ",t.name," ")}}function Bp(e,i){e&1&&c(0,"th",20)}function jp(e,i){if(e&1&&(a(0,"mat-icon",22),o(1,"playlist_play"),n()),e&2){let t=u().$implicit;p("matTooltip",t.state)}}function Vp(e,i){if(e&1&&(a(0,"mat-icon",22),o(1,"timer"),n()),e&2){let t=u().$implicit;p("matTooltip",t.state)}}function Hp(e,i){if(e&1&&(a(0,"mat-icon",22),o(1,"pause"),n()),e&2){let t=u().$implicit;p("matTooltip",t.state)}}function Op(e,i){if(e&1&&(a(0,"mat-icon",22),o(1,"block"),n()),e&2){let t=u().$implicit;p("matTooltip",t.state)}}function Yp(e,i){if(e&1&&(a(0,"td",21),s(1,jp,2,1,"mat-icon",22)(2,Vp,2,1,"mat-icon",22)(3,Hp,2,1,"mat-icon",22)(4,Op,2,1,"mat-icon",22),n()),e&2){let t=i.$implicit;l(),h(t.state==="RUNNABLE"?1:t.state==="TIMED_WAITING"?2:t.state==="WAITING"?3:t.state==="BLOCKED"?4:-1)}}function Gp(e,i){e&1&&(a(0,"th",23),o(1,"Native"),n())}function qp(e,i){if(e&1&&(a(0,"td",18),o(1),n()),e&2){let t=i.$implicit;l(),g(" ",t.native?"Yes":"-"," ")}}function zp(e,i){e&1&&(a(0,"th",23),o(1,"Suspended"),n())}function Wp(e,i){if(e&1&&(a(0,"td",18),o(1),n()),e&2){let t=i.$implicit;l(),g(" ",t.suspended?"Yes":"-"," ")}}function Qp(e,i){e&1&&(a(0,"th",23),o(1,"Group"),n())}function Zp(e,i){if(e&1&&(a(0,"td",18),o(1),n()),e&2){let t=i.$implicit;l(),g(" ",(t.group==null?null:t.group.name)||"-"," ")}}function Kp(e,i){e&1&&(a(0,"th",23),o(1,"Frame"),n())}function Jp(e,i){if(e&1&&c(0,"app-trace-element",24),e&2){let t=u().$implicit;p("element",t.trace[0])}}function Xp(e,i){e&1&&o(0," - ")}function ed(e,i){if(e&1&&(a(0,"td",18),s(1,Jp,1,1,"app-trace-element",24)(2,Xp,1,0),n()),e&2){let t=i.$implicit;l(),h(t.trace?1:2)}}function td(e,i){e&1&&c(0,"th",25)}function id(e,i){e&1&&c(0,"td",18)}function nd(e,i){e&1&&c(0,"tr",26)}function ad(e,i){e&1&&c(0,"tr",27)}function od(e,i){if(e&1&&(a(0,"table",0),v(1,1),s(2,$p,2,0,"th",2)(3,Fp,2,1,"td",3),b(),v(4,4),s(5,Np,2,0,"th",2)(6,Up,3,2,"td",3),b(),v(7,5),s(8,Bp,1,0,"th",6)(9,Yp,5,1,"td",7),b(),v(10,8),s(11,Gp,2,0,"th",9)(12,qp,2,1,"td",3),b(),v(13,10),s(14,zp,2,0,"th",9)(15,Wp,2,1,"td",3),b(),v(16,11),s(17,Qp,2,0,"th",9)(18,Zp,2,1,"td",3),b(),v(19,12),s(20,Kp,2,0,"th",9)(21,ed,3,1,"td",3),b(),v(22,13),s(23,td,1,0,"th",14)(24,id,1,0,"td",3),b(),s(25,nd,1,0,"tr",15)(26,ad,1,0,"tr",16),n()),e&2){let t=u();p("dataSource",t.dataSource),l(25),p("matHeaderRowDef",t.displayedColumns),l(),p("matRowDefColumns",t.displayedColumns)}}var Ji=class e{constructor(){this.displayedColumns=["id","state","name","trace","native","suspended","group","actions"];this.dataSource=new Y}ngAfterViewInit(){this.dataSource.filterPredicate=(i,t)=>i.name.toLowerCase().indexOf(t)>=0,this.dataSource.sort=this.sort}ngOnChanges(){this.dataSource.data=this.threads||[],this.dataSource.filter=this.filter}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=x({type:e,selectors:[["app-threads-table"]],viewQuery:function(t,r){if(t&1&&oe(H,5),t&2){let m;re(m=le())&&(r.sort=m.first)}},inputs:{threads:"threads",filter:"filter"},standalone:!0,features:[$t,y],decls:1,vars:1,consts:[["mat-table","","matSort","","matSortActive","id","matSortDirection","desc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","state"],["mat-header-cell","","class","status",4,"matHeaderCellDef"],["mat-cell","","class","status",4,"matCellDef"],["matColumnDef","native"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","suspended"],["matColumnDef","group"],["matColumnDef","trace"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink"],["mat-header-cell","",1,"status"],["mat-cell","",1,"status"],[3,"matTooltip"],["mat-header-cell",""],[3,"element"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(t,r){t&1&&s(0,od,27,3,"table",0),t&2&&h(r.dataSource?0:-1)},dependencies:[T,K,ue,H,_e,z,ne,ae,W,J,ee,X,Q,te,Z,fe,It],encapsulation:2,changeDetection:0})}};function rd(e,i){if(e&1&&(o(0),f(1,"async")),e&2){let t=u();g(" ALL (",S(1,1,t.allThreadCount$),") ")}}function ld(e,i){if(e&1&&(o(0),f(1,"async")),e&2){let t=u();g(" RUNNABLE (",S(1,1,t.runnableThreadCount$),") ")}}function md(e,i){if(e&1&&(o(0),f(1,"async")),e&2){let t=u();g(" TIMED WAITING (",S(1,1,t.timedWaitingThreadCount$),") ")}}function sd(e,i){if(e&1&&(o(0),f(1,"async")),e&2){let t=u();g(" WAITING (",S(1,1,t.waitingThreadCount$),") ")}}function cd(e,i){if(e&1&&(o(0),f(1,"async")),e&2){let t=u();g(" BLOCKED (",S(1,1,t.blockedThreadCount$),") ")}}var Xi=class e{constructor(i,t,r,m,C){this.yamcs=i;this.route=r;this.router=m;this.filterControl=new q;this.filterValue$=new O(null);this.allThreads$=new pn;this.allThreadCount$=this.allThreads$.pipe(ye(i=>i.length));this.runnableThreads$=this.allThreads$.pipe(ye(i=>i.filter(t=>t.state==="RUNNABLE")));this.runnableThreadCount$=this.runnableThreads$.pipe(ye(i=>i.length));this.timedWaitingThreads$=this.allThreads$.pipe(ye(i=>i.filter(t=>t.state==="TIMED_WAITING")));this.timedWaitingThreadCount$=this.timedWaitingThreads$.pipe(ye(i=>i.length));this.waitingThreads$=this.allThreads$.pipe(ye(i=>i.filter(t=>t.state==="WAITING")));this.waitingThreadCount$=this.waitingThreads$.pipe(ye(i=>i.length));this.blockedThreads$=this.allThreads$.pipe(ye(i=>i.filter(t=>t.state==="BLOCKED")));this.blockedThreadCount$=this.blockedThreads$.pipe(ye(i=>i.length));t.setTitle("Threads"),this.threadDumpURL=i.yamcsClient.getThreadDumpURL(),this.refresh(),this.syncSubscription=C.syncSlow(()=>this.refresh())}refresh(){this.yamcs.yamcsClient.getThreads().then(i=>{this.allThreads$.next(i.threads||[])})}ngAfterViewInit(){let i=this.route.snapshot.queryParamMap;i.has("filter")&&(this.filterControl.setValue(i.get("filter")),this.filterValue$.next(i.get("filter").toLowerCase())),this.filterControl.valueChanges.subscribe(()=>{this.updateURL();let t=this.filterControl.value||"";this.filterValue$.next(t.toLowerCase())})}updateURL(){let i=this.filterControl.value;this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:i||null},queryParamsHandling:"merge"})}ngOnDestroy(){this.syncSubscription?.unsubscribe()}static{this.\u0275fac=function(t){return new(t||e)(d(D),d(A),d(k),d(G),d(Tt))}}static{this.\u0275cmp=x({type:e,selectors:[["ng-component"]],standalone:!0,features:[y],decls:41,vars:33,consts:[["mat-button","","color","primary",3,"href"],[1,"panel-content"],[1,"filter-bar"],["placeholder","Filter threads",3,"formControl"],["animationDuration","0ms",1,"secondary",3,"mat-stretch-tabs"],["mat-tab-label",""],[3,"threads","filter"]],template:function(t,r){t&1&&(a(0,"app-admin-page")(1,"app-admin-toolbar"),o(2," Threads \xA0\xA0\xA0 "),a(3,"a",0)(4,"mat-icon"),o(5,"notes"),n(),o(6," Text dump "),n()(),a(7,"div",1)(8,"div",2),c(9,"ya-search-filter",3),n(),a(10,"mat-tab-group",4)(11,"mat-tab"),s(12,rd,2,3,"ng-template",5),c(13,"br")(14,"app-threads-table",6),f(15,"async"),f(16,"async"),n(),a(17,"mat-tab"),s(18,ld,2,3,"ng-template",5),c(19,"br")(20,"app-threads-table",6),f(21,"async"),f(22,"async"),n(),a(23,"mat-tab"),s(24,md,2,3,"ng-template",5),c(25,"br")(26,"app-threads-table",6),f(27,"async"),f(28,"async"),n(),a(29,"mat-tab"),s(30,sd,2,3,"ng-template",5),c(31,"br")(32,"app-threads-table",6),f(33,"async"),f(34,"async"),n(),a(35,"mat-tab"),s(36,cd,2,3,"ng-template",5),c(37,"br")(38,"app-threads-table",6),f(39,"async"),f(40,"async"),n()()()()),t&2&&(l(3),p("href",r.threadDumpURL,Ft),l(6),p("formControl",r.filterControl),l(),p("mat-stretch-tabs",!1),l(4),p("threads",S(15,13,r.allThreads$))("filter",S(16,15,r.filterValue$)),l(6),p("threads",S(21,17,r.runnableThreads$))("filter",S(22,19,r.filterValue$)),l(6),p("threads",S(27,21,r.timedWaitingThreads$))("filter",S(28,23,r.filterValue$)),l(6),p("threads",S(33,25,r.waitingThreads$))("filter",S(34,27,r.filterValue$)),l(6),p("threads",S(39,29,r.blockedThreads$))("filter",S(40,31,r.filterValue$)))},dependencies:[P,L,T,B,me,Ae,Dn,ue,Gt,qt,zt,Ee,Ji],encapsulation:2,changeDetection:0})}};function pd(e,i){if(e&1&&(a(0,"tr")(1,"td"),c(2,"app-trace-element",5),n()()),e&2){let t=i.$implicit;l(2),p("element",t)}}function dd(e,i){if(e&1&&(a(0,"table",4),N(1,pd,3,1,"tr",null,F),n()),e&2){let t=u();l(),U(t.trace)}}function ud(e,i){e&1&&o(0," Information not available ")}function fd(e,i){if(e&1&&(a(0,"app-admin-page")(1,"app-admin-toolbar"),c(2,"ya-page-icon-button",0),o(3),n(),a(4,"div",1)(5,"dl",2)(6,"dt"),o(7,"ID"),n(),a(8,"dd"),o(9),n(),a(10,"dt"),o(11,"Name"),n(),a(12,"dd"),o(13),n(),a(14,"dt"),o(15,"Native"),n(),a(16,"dd"),o(17),n(),a(18,"dt"),o(19,"Suspended"),n(),a(20,"dd"),o(21),n(),a(22,"dt"),o(23,"Group"),n(),a(24,"dd"),o(25),n()(),a(26,"div",3),c(27,"mat-divider"),n(),a(28,"h4"),o(29,"Stack trace"),n(),s(30,dd,3,0,"table",4)(31,ud,1,0),n()()),e&2){let t=i;l(3),g(" ",t.name," "),l(6),_(t.id),l(4),_(t.name),l(4),g(" ",t.native?"Yes":"No"," "),l(4),g(" ",t.suspended?"Yes":"No"," "),l(4),_((t.group==null?null:t.group.name)||"-"),l(5),h(t.trace?30:31)}}var en=class e{constructor(i,t,r){this.yamcs=t;this.title=r;this.thread$=new O(null);i.paramMap.subscribe(m=>{let C=m.get("id");this.changeThread(Number(C))})}changeThread(i){this.yamcs.yamcsClient.getThread(i).then(t=>{this.thread$.next(t),this.title.setTitle(t.name)})}static{this.\u0275fac=function(t){return new(t||e)(d(k),d(D),d(A))}}static{this.\u0275cmp=x({type:e,selectors:[["ng-component"]],standalone:!0,features:[y],decls:2,vars:3,consts:[["routerLink","..","icon","arrow_back"],[1,"panel-content","ya-link"],[1,"dl-horizontal","no-lead"],[1,"section-divider"],["yaDataTable",""],[3,"element"]],template:function(t,r){if(t&1&&(s(0,fd,32,7,"app-admin-page"),f(1,"async")),t&2){let m;h((m=S(1,1,r.thread$))?0:-1,m)}},dependencies:[P,L,T,B,K,ge,Ue,we,It],encapsulation:2,changeDetection:0})}};var Jv=[{path:"",canActivate:[Zn,Jn,ea],canActivateChild:[Kn],runGuardsAndResolvers:"always",component:Zi,children:[{path:"",pathMatch:"full",component:Jt},{path:"http-traffic",canActivate:[mt],component:vi},{path:"sessions",canActivate:[Ve],component:Qi},{path:"routes",canActivate:[mt],component:Gi},{path:"leap-seconds",canActivate:[mt],component:Ni},{path:"processor-types",canActivate:[mt],component:Ui},{path:"replication",canActivate:[mt],component:Vi},{path:"services",canActivate:[ta],component:Wi},{path:"databases",canActivate:[ln],children:[{path:"",pathMatch:"full",component:Xt},{path:":database",component:ei,children:[{path:"",pathMatch:"full",redirectTo:"tables"},{path:"tables",pathMatch:"full",component:Ci},{path:"tables/:table",component:Si,children:[{path:"",pathMatch:"full",redirectTo:"info"},{path:"info",component:_i},{path:"data",component:ui},{path:"script",component:hi}]},{path:"shell",pathMatch:"full",component:ti},{path:"streams",pathMatch:"full",component:li},{path:"streams/:stream",component:pi,children:[{path:"",pathMatch:"full",redirectTo:"columns"},{path:"columns",component:ii},{path:"data",component:ri},{path:"script",component:ci}]}]}]},{path:"rocksdb",runGuardsAndResolvers:"always",canActivate:[ln],children:[{path:"",pathMatch:"full",redirectTo:"databases"},{path:"databases",pathMatch:"full",component:Hi},{path:"databases/:tablespace",children:[{path:"**",component:Oi}]}]},{path:"iam/service-accounts",pathMatch:"full",component:ki,canActivate:[Ve]},{path:"iam/service-accounts/create",pathMatch:"full",component:xi,canActivate:[Ve]},{path:"iam/users",pathMatch:"full",component:Li,canActivate:[Ve]},{path:"iam/users/create",pathMatch:"full",component:yi,canActivate:[Ve]},{path:"iam/users/:username",pathMatch:"full",component:Fi,canActivate:[Ve]},{path:"iam/users/:username/edit",pathMatch:"full",component:wi,canActivate:[Ve]},{path:"iam/groups",pathMatch:"full",component:Ei,canActivate:[Ve]},{path:"iam/groups/create",pathMatch:"full",component:bi,canActivate:[Ve]},{path:"iam/groups/:name",pathMatch:"full",component:Ii,canActivate:[Ve]},{path:"iam/groups/:name/edit",pathMatch:"full",component:Ti,canActivate:[Ve]},{path:"iam/roles",pathMatch:"full",component:Ri,canActivate:[Ve]},{path:"iam/roles/:name",pathMatch:"full",component:Ai,canActivate:[Ve]},{path:"threads",pathMatch:"full",component:Xi,canActivate:[mt]},{path:"threads/:id",component:en,canActivate:[mt]},{path:"system",pathMatch:"full",component:Ki,canActivate:[mt]}]}];export{Jv as ROUTES};
