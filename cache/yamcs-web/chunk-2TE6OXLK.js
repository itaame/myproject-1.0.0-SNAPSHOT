import{a as mt,b as ct,c as we,f as pt,g as dt,h as ut,i as ht,j as be}from"./chunk-7J5Y77OX.js";import{b as it,c as ot,d as nt,e as rt,f as lt}from"./chunk-WVE4Y3TR.js";import{$b as me,Ab as Oe,Ca as m,Db as O,E as k,Ea as _e,Ed as q,Fa as Ie,Fb as M,Fd as Y,Gb as z,Gd as Ye,Hd as H,Ia as B,Ib as Ne,Id as W,Ie as A,J as h,Jd as J,K as g,Kb as le,Kd as Q,Lb as j,Ld as He,Oa as S,Ob as $e,Pa as R,Pb as L,Pe as y,Pf as et,Qa as Ee,R as Be,Re as We,Sb as U,Se as K,We as Je,X as v,Y as f,a as Re,aa as Z,bc as ze,ca as w,cb as se,cc as je,da as Me,e as G,fc as Le,ff as Qe,ga as ee,ha as Ae,ia as Pe,ja as xe,ka as s,kc as Ue,la as l,lg as X,ma as T,mb as Ve,oc as qe,of as Ke,og as tt,q as ke,qa as te,qb as Fe,ra as d,rg as P,sa as $,sb as Ge,sf as Xe,tf as Ze,tg as at,ug as st,wa as ne,xa as re,ya as ae}from"./chunk-SAZ6MTOG.js";var ce=class c{constructor(t,e,i,o){this.dialogRef=t;this.yamcs=e;this.downloadURL$=new G(null);this.form=i.group({start:[null,O.required],stop:[null,O.required]}),this.form.valueChanges.subscribe(_=>{if(this.form.valid){let b=e.yamcsClient.getPacketsDownloadURL(e.instance,{start:y.toISOString(_.start),stop:y.toISOString(_.stop),format:"raw"});this.downloadURL$.next(b)}else this.downloadURL$.next(null)});let n=o.start,a=o.stop;(!n||!a)&&(a=this.yamcs.getMissionTime(),n=y.subtractDuration(a,"PT1H")),this.form.setValue({start:y.toISOString(n),stop:y.toISOString(a)})}closeDialog(){this.dialogRef.close()}static{this.\u0275fac=function(e){return new(e||c)(f(q),f(X),f(me),f(Y))}}static{this.\u0275cmp=k({type:c,selectors:[["app-download-dump-dialog"]],standalone:!0,features:[B],decls:16,vars:5,consts:[["mat-dialog-title",""],[1,"ya-form",3,"formGroup"],["formControlName","start"],["formControlName","stop"],["align","end"],["mat-dialog-close",""],["appearance","primary",3,"click","link","disabled"]],template:function(e,i){e&1&&(s(0,"h2",0),m(1,"Download Packet Dump"),l(),s(2,"mat-dialog-content")(3,"form",1)(4,"label"),m(5," Start "),T(6,"ya-date-time-input",2),l(),s(7,"label"),m(8," Stop "),T(9,"ya-date-time-input",3),l()()(),s(10,"mat-dialog-actions",4)(11,"ya-button",5),m(12,"CANCEL"),l(),s(13,"ya-download-button",6),S(14,"async"),d("click",function(){return i.closeDialog()}),m(15," DOWNLOAD "),l()()),e&2&&(v(3),w("formGroup",i.form),v(10),w("link",R(14,3,i.downloadURL$))("disabled",!i.form.valid))},dependencies:[P,se,j,M,z,L,U,H,W,Q,J,A,K,Je],encapsulation:2})}};var ue=class c{constructor(t,e){this.dialogRef=t;this.data=e;this.date=new le(null,[O.required]);this.data.date&&this.date.setValue(y.toISOString(this.data.date))}select(){let t=y.toDate(this.date.value);this.dialogRef.close({date:t})}static{this.\u0275fac=function(e){return new(e||c)(f(q),f(Y))}}static{this.\u0275cmp=k({type:c,selectors:[["app-jump-to-dialog"]],standalone:!0,features:[B],decls:11,vars:1,consts:[["mat-dialog-title",""],[1,"ya-form"],[3,"formControl"],["align","end"],["mat-dialog-close",""],["appearance","primary",3,"click"]],template:function(e,i){e&1&&(s(0,"h2",0),m(1,"Jump to date"),l(),s(2,"mat-dialog-content",1)(3,"label"),m(4," Date "),T(5,"ya-date-time-input",2),l()(),s(6,"mat-dialog-actions",3)(7,"ya-button",4),m(8,"CANCEL"),l(),s(9,"ya-button",5),d("click",function(){return i.select()}),m(10,"OK"),l()()),e&2&&(v(5),w("formControl",i.date))},dependencies:[P,M,$e,H,W,Q,J,A,K],encapsulation:2})}};var x=class extends dt{constructor(t,e,i,o,n){super(t),this.label=e,this.borderWidth=0,this.multiline=!1,this.itemBorderColor="rgba(0, 0, 0, 0.1)",this.itemBorderWidth=1,this.itemCornerRadius=0,this.itemTextOverflow="hide",this.itemHeight=20,this.backgroundRGB=i,this.itemBackground=this.backgroundRGB.toCssString(),this.foregroundRGB=o,this.itemTextColor=this.foregroundRGB.toCssString(),this.formatter=n,this.addItemClickListener(a=>{let{start:_,stop:b}=a.item;_&&b?this.timeline.setSelection(_,b):this.timeline.clearSelection()})}setupTooltip(t){this.addItemMouseMoveListener(e=>{let{start:i,stop:o,data:n}=e.item,a=n.name+`
`;if(a+=`Start: ${this.formatter.formatDateTime(i,!0)}
`,a+=`Stop : ${this.formatter.formatDateTime(o,!0)}
`,n.count>=0){let _=(o-i)/1e3;a+=`Count: ${n.count}`,n.count>1&&(a+=` (${(n.count/_).toFixed(3)} Hz)`)}else n.description&&(a+=n.description);t.show(a,e.clientX,e.clientY)}),this.addItemMouseLeaveListener(e=>{t.hide()})}loadData(t){let e=[];for(let i of t.records){let o=y.toDate(i.first).getTime(),n=y.toDate(i.last).getTime(),a={start:o,stop:n,data:{name:t.name,count:i.num}};if(i.num>1){let _=(n-o)/1e3,b=i.num/_;b>=.1?a.label=`${b.toFixed(1)} Hz`:a.label="< 0.1 Hz",b>=1?a.background=this.backgroundRGB.toCssString(1):b>=.3?a.background=this.backgroundRGB.toCssString(b):a.background=this.backgroundRGB.toCssString(.3)}e.push(a)}this.items=e}};var D=class{constructor(t,e,i){this.r=t;this.g=e;this.b=i}toCssString(t){return t===void 0?`rgb(${this.r},${this.g},${this.b})`:`rgba(${this.r},${this.g}, ${this.b}, ${t})`}};var he=class extends mt{constructor(t){super(t);let e=document.createElement("canvas");e.width=30,e.height=30;let i=e.getContext("2d");i.fillStyle="rgba(148, 0, 211, 0.07)",i.fillRect(0,0,30,30),i.beginPath(),i.moveTo(30,0),i.lineTo(0,30),i.strokeStyle="rgba(221, 221, 221, 0.2)",i.stroke(),this.pattern=i.createPattern(e,"repeat")}drawOverlay(t){if(!this.replayRequest)return;let{start:e,stop:i,endAction:o}=this.replayRequest;if(e&&i){let n=Math.round(this.timeline.positionTime(new Date(e).getTime())),a=Math.round(this.timeline.positionTime(new Date(i).getTime()));if(t.fillRect({x:n+.5,y:0,width:a-n,height:t.ctx.canvas.height,fill:this.pattern}),t.strokePath({color:"rgba(148, 0, 211, 0.3)",lineWidth:1,path:new we(n+.5,0).lineTo(n+.5,t.ctx.canvas.height)}),t.strokePath({color:"rgba(148, 0, 211, 0.3)",lineWidth:1,path:new we(a+.5,0).lineTo(a+.5,t.ctx.canvas.height)}),o==="LOOP"){let{fontFamily:_,textSize:b}=this.timeline;t.fillText({x:a-3,y:0,align:"right",baseline:"top",text:"\u221E",color:"darkviolet",font:`${b}px ${_}`})}}}get replayRequest(){return this._replayRequest}set replayRequest(t){this._replayRequest=t,this.reportMutation()}};var I=class extends ct{constructor(t,e){super(t),this.label=e,this.background="#f5f5f5",this.contentHeight=20}};var ge=class c{constructor(t,e,i,o){this.dialogRef=t;this.yamcs=i;this.data=o;let n=i.getMissionTime(),a;this.data&&(this.data.start&&(n=this.data.start),this.data.stop&&(a=this.data.stop)),this.form=e.group({start:[y.toISOString(n),[O.required]],stop:[a?y.toISOString(a):""]})}submit(){let t={start:y.toISOString(this.form.value.start)};this.form.value.stop&&(t.stop=y.toISOString(this.form.value.stop)),this.dialogRef.close(t)}static{this.\u0275fac=function(e){return new(e||c)(f(q),f(me),f(X),f(Y))}}static{this.\u0275cmp=k({type:c,selectors:[["app-modify-replay-dialog"]],standalone:!0,features:[B],decls:20,vars:2,consts:[["mat-dialog-title",""],[1,"ya-form",3,"formGroup"],["formControlName","start"],[1,"hint"],["formControlName","stop"],["align","end"],["mat-dialog-close",""],["appearance","primary",3,"click","disabled"]],template:function(e,i){e&1&&(s(0,"h2",0),m(1,"Configure replay"),l(),s(2,"mat-dialog-content")(3,"form",1)(4,"label"),m(5," Start time "),T(6,"br")(7,"ya-date-time-input",2),l(),T(8,"br"),s(9,"label"),m(10," Stop time "),s(11,"span",3),m(12,"(optional)"),l(),T(13,"ya-date-time-input",4),l(),T(14,"br"),l()(),s(15,"mat-dialog-actions",5)(16,"ya-button",6),m(17,"CANCEL"),l(),s(18,"ya-button",7),d("click",function(){return i.submit()}),m(19,"SUBMIT"),l()()),e&2&&(v(3),w("formGroup",i.form),v(15),w("disabled",!i.form.valid))},dependencies:[P,j,M,z,L,U,H,W,Q,J,A,K],encapsulation:2})}};var kt=["tt"],fe=class c{show(t,e,i){let o=this.tt.nativeElement;o.style.left=e+"px",o.style.top=i+"px",o.style.display="block",o.innerText=t}hide(){let t=this.tt.nativeElement;t.style.display="none"}static{this.\u0275fac=function(e){return new(e||c)}}static{this.\u0275cmp=k({type:c,selectors:[["ng-component"]],viewQuery:function(e,i){if(e&1&&ne(kt,7),e&2){let o;re(o=ae())&&(i.tt=o.first)}},standalone:!0,features:[B],decls:2,vars:0,consts:[["tt",""],[1,"ya-tooltip"]],template:function(e,i){e&1&&T(0,"div",1,0)},styles:[".ya-tooltip[_ngcontent-%COMP%]{position:absolute;display:none;white-space:pre;color:#fff;border-radius:2px;max-width:250px;padding:6px 8px;margin-top:14px;background:#616161e6;font-family:Roboto Mono,monospace;font-size:10px}"]})}};var Bt=["container"];function Mt(c,t){if(c&1){let e=te();s(0,"ya-page-button",28),d("click",function(){let o=h(e),n=$(),a=$();return g(a.enableLoop(n,o.endAction!=="LOOP"))}),m(1),l()}if(c&2){let e=t;w("disabled",!e.start||!e.stop)("icon",e.endAction==="LOOP"?"repeat_on":"repeat"),v(),_e(" Repeat: ",e.endAction==="LOOP"?"on":"off"," ")}}function At(c,t){if(c&1&&Z(0,Mt,2,3,"ya-page-button",27),c&2){let e;ee((e=t.replayRequest)?0:-1,e)}}function Pt(c,t){if(c&1){let e=te();s(0,"ya-button",29),S(1,"async"),d("click",function(){h(e);let o=$();return g(o.fitSelection())}),m(2," Fit selection "),l()}if(c&2){let e=$();w("disabled",!R(1,1,e.rangeSelection$))}}function xt(c,t){if(c&1){let e=te();s(0,"label",30)(1,"input",31),d("change",function(){h(e);let o=$();return g(o.updateLegend())}),l(),m(2),l()}if(c&2){let e=t.$implicit;Me("background",e.bg)("color",e.fg),v(),w("formControlName",e.id),v(),_e(" ",e.name," ")}}function It(c,t){if(c&1&&(s(0,"span"),m(1),S(2,"datetime"),S(3,"datetime"),l()),c&2){let e=t;v(),Ie(" ",Ee(2,2,e==null?null:e.start,!1)," \u2013 ",R(3,5,e==null?null:e.stop)," ")}}var gt=new D(255,204,0),ft=new D(28,75,139),yt=new D(255,165,0),vt=new D(173,94,0),_t=new D(255,255,102),wt=new D(28,75,139),bt=new D(238,232,170),Ct=new D(85,85,85),Tt=new D(255,222,173),St=new D(28,75,139);function ie(c){return"linear-gradient(to right, "+c.toCssString(.3)+" 30%, "+c.toCssString()+")"}var ye=class c{constructor(t,e,i,o,n,a,_,b,ve,C){this.yamcs=e;this.route=i;this.router=o;this.overlay=n;this.dialog=a;this.snackBar=_;this.messageService=b;this.synchronizer=ve;this.formatter=C;this.legendOptions=[{id:"packets",name:"Packets",bg:ie(bt),fg:Ct.toCssString(),checked:!0},{id:"parameters",name:"Parameter Groups",bg:ie(Tt),fg:St.toCssString(),checked:!0},{id:"commands",name:"Commands",bg:ie(gt),fg:ft.toCssString(),checked:!1},{id:"events",name:"Events",bg:ie(_t),fg:wt.toCssString(),checked:!1}];this.processor$=new G(null);this.rangeSelection$=new G(null);this.viewportRange$=new G(null);this.tool$=new G("hand");this.packetNames=[];this.subscriptions=[];t.setTitle("Archive browser"),(e.connectionInfo$.value?.instance?.capabilities||[]).indexOf("ccsds-completeness")!==-1&&(this.legendOptions=[{id:"completeness",name:"Completeness",bg:ie(yt),fg:vt.toCssString(),checked:!0},...this.legendOptions]),this.processor$.next(e.getProcessor()),e.processor&&(this.processorSubscription=this.yamcs.yamcsClient.createProcessorSubscription({instance:e.instance,processor:e.processor},p=>{this.processor$.next(p)})),this.filterForm=new Ne({});let oe=this.route.snapshot.queryParamMap;for(let p of this.legendOptions){let u=p.checked;oe.has(p.id)&&(u=oe.get(p.id)==="true"),this.filterForm.addControl(p.id,new le(u))}let E=new Be(document.body),V=this.overlay.position().flexibleConnectedTo(E).withPositions([{originX:"start",originY:"top",overlayX:"start",overlayY:"top"}]).withPush(!1),F=this.overlay.create({positionStrategy:V}),r=new je(fe);this.tooltipInstance=F.attach(r).instance}hideTooltip(){this.tooltipInstance.hide()}ngAfterViewInit(){this.yamcs.yamcsClient.getPacketNames(this.yamcs.instance).then(t=>{this.packetNames=t.packets||[],this.initializeTimeline()})}initializeTimeline(){this.timeline=new pt(this.container.nativeElement),this.timeline.addViewportChangeListener(n=>{this.viewportRange$.next({start:new Date(n.start),stop:new Date(n.stop)})}),this.viewportRange$.pipe(ke(400)).forEach(n=>{this.refreshData();let a={};for(let _ of this.legendOptions)a[_.id]=this.filterForm.value[_.id];this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParamsHandling:"merge",queryParams:Re({start:new Date(n.start).toISOString(),stop:new Date(n.stop).toISOString()},a)})}),this.timeline.addViewportDoubleClickListener(n=>{this.yamcs.getProcessor()?.replay&&this.yamcs.yamcsClient.editReplayProcessor(this.yamcs.instance,this.yamcs.processor,{seek:new Date(n.time).toISOString()}).catch(_=>this.messageService.showError(_))});let t=this.route.snapshot.queryParamMap;if(t.get("start")&&t.get("stop")){let n=y.toDate(t.get("start")),a=y.toDate(t.get("stop"));this.timeline.setViewRange(n.getTime(),a.getTime())}else{let n=this.yamcs.getMissionTime();n.setUTCHours(0,0,0,0);let a=new Date(n.getTime());a.setUTCDate(n.getUTCDate()+1),this.timeline.setViewRange(n.getTime(),a.getTime())}let e=new ut(this.timeline);e.time=this.yamcs.getMissionTime().getTime();let i=new he(this.timeline);this.subscriptions.push(this.synchronizer.sync(()=>{e.time=this.yamcs.getMissionTime().getTime();let n=this.processor$.value?.replayRequest;i.replayRequest=n})),new ht(this.timeline);let o=new be(this.timeline);o.contentHeight=20,o.label="UTC",o.timezone="UTC",o.frozen=!0,o.fullHeight=!0,this.timeline.addViewportSelectionListener(n=>{n.selection?this.rangeSelection$.next({start:new Date(n.selection.start),stop:new Date(n.selection.stop)}):this.rangeSelection$.next(null)})}fitAll(){let t=[];t.push(this.yamcs.yamcsClient.getPackets(this.yamcs.instance,{limit:1,order:"asc"})),t.push(this.yamcs.yamcsClient.getPackets(this.yamcs.instance,{limit:1,order:"desc"})),Promise.all(t).then(e=>{let i=e[0],o=e[1];if(i.packet?.length&&o.packet?.length){let n=y.toDate(i.packet[0].generationTime),a=y.toDate(o.packet[0].generationTime);this.timeline.setViewRange(n.getTime(),a.getTime())}}).catch(e=>this.messageService.showError(e))}fitSelection(){var t=this.rangeSelection$.value;t&&(this.timeline.setViewRange(t.start.getTime(),t.stop.getTime()),this.timeline.clearSelection())}jumpToToday(){let t=this.yamcs.getMissionTime();t.setUTCHours(0,0,0,0);let e=t.getTime();t.setUTCDate(t.getUTCDate()+1);let i=t.getTime();this.timeline.setViewRange(e,i)}jumpToNow(){let t=this.yamcs.getMissionTime();this.timeline.panTo(t.getTime())}openJumpToDialog(){let t=this.timeline.center;this.dialog.open(ue,{width:"400px",data:{date:new Date(t)}}).afterClosed().subscribe(i=>{i&&this.timeline.panTo(i.date.getTime())})}toggleMove(t){this.timeline.panBy(t),window.clearInterval(this.moveInterval),this.moveInterval=window.setInterval(()=>this.timeline.panBy(t),50)}untoggleMove(){window.clearInterval(this.moveInterval),this.moveInterval=void 0}pageLeft(){let{start:t,stop:e}=this.timeline,i=this.timeline.distanceBetween(t,e);this.timeline.panBy(-i)}pageRight(){let{start:t,stop:e}=this.timeline,i=this.timeline.distanceBetween(t,e);this.timeline.panBy(i)}zoomIn(){this.timeline.zoomIn()}zoomOut(){this.timeline.zoomOut()}setTool(t){this.tool$.next(t),this.timeline.tool=t}replayRange(){let t=this.rangeSelection$.value;if(t){let e=this.processor$.value;e?.replay?this.modifyReplay(e,t):this.startReplay(t)}}startReplay(t){this.dialog.open(ot,{width:"400px",data:{start:t.start,stop:t.stop}}).afterClosed().subscribe(e=>{e&&(this.snackBar.open("Initializing replay...",void 0,{horizontalPosition:"end"}),this.yamcs.yamcsClient.createProcessor(e).then(()=>{this.yamcs.switchContext(this.yamcs.instance,e.name),this.snackBar.open("Joining replay",void 0,{duration:3e3,horizontalPosition:"end"})}).catch(i=>{this.snackBar.open("Failed to initialize replay",void 0,{duration:3e3,horizontalPosition:"end"})}))})}modifyReplay(t,e){this.dialog.open(ge,{width:"400px",data:{start:e.start,stop:e.stop}}).afterClosed().subscribe(i=>{i&&(this.snackBar.open("Updating replay...",void 0,{horizontalPosition:"end"}),this.yamcs.yamcsClient.editReplayProcessor(t.instance,t.name,i).catch(o=>{this.messageService.showError(o)}).finally(()=>this.snackBar.dismiss()))})}enableLoop(t,e){this.yamcs.yamcsClient.editReplayProcessor(t.instance,t.name,{loop:e}).catch(i=>this.messageService.showError(i))}downloadDump(){let t=this.rangeSelection$.value;t&&this.dialog.open(ce,{width:"400px",data:{start:t.start,stop:t.stop}})}updateLegend(){this.refreshData()}refreshData(){let t=this.timeline.stop-this.timeline.start,e=y.clampDate(this.timeline.start-t).toISOString(),i=y.clampDate(this.timeline.stop+t).toISOString(),o=Math.min(Math.floor(t/1e3),2147483647),n=Promise.resolve([]);this.filterForm.value.completeness&&(n=this.yamcs.yamcsClient.streamCompletenessIndex(this.yamcs.instance,{start:e,stop:i,mergeTime:o}).then(C=>this.groupRecordsByName(C)));let a=Promise.resolve([]);this.filterForm.value.packets&&(a=this.yamcs.yamcsClient.streamPacketIndex(this.yamcs.instance,{start:e,stop:i,mergeTime:o}).then(C=>this.groupRecordsByName(C)));let _=Promise.resolve([]);this.filterForm.value.parameters&&(_=this.yamcs.yamcsClient.streamParameterIndex(this.yamcs.instance,{start:e,stop:i,mergeTime:o}).then(C=>this.groupRecordsByName(C)));let b=Promise.resolve([]);this.filterForm.value.commands&&(b=this.yamcs.yamcsClient.streamCommandIndex(this.yamcs.instance,{start:e,stop:i,mergeTime:o}).then(C=>this.groupRecordsByName(C)));let ve=Promise.resolve([]);this.filterForm.value.events&&(ve=this.yamcs.yamcsClient.streamEventIndex(this.yamcs.instance,{start:e,stop:i,mergeTime:o}).then(C=>this.groupRecordsByName(C))),Promise.all([n,a,_,b,ve]).then(C=>{let N=C[0],oe=C[1],E=C[2],V=C[3],F=C[4];for(let r of this.timeline.getBands())r instanceof be||this.timeline.removeChild(r);N.sort((r,p)=>r.name.localeCompare(p.name));for(let r=0;r<N.length;r++){r===0&&new I(this.timeline,"Completeness");let p=N[r],u=new x(this.timeline,p.name,yt,vt,this.formatter);u.borderWidth=r===N.length-1?1:0,u.marginBottom=r===N.length-1?20:0,u.setupTooltip(this.tooltipInstance),u.loadData(p)}if(this.filterForm.value.packets)for(let r=0;r<this.packetNames.length;r++){r===0&&new I(this.timeline,"Packets");let p=this.packetNames[r],u=new x(this.timeline,p,bt,Ct,this.formatter);u.borderWidth=r===this.packetNames.length-1?1:0,u.marginBottom=r===this.packetNames.length-1?20:0,u.setupTooltip(this.tooltipInstance);let De=oe.find(Dt=>Dt.name===p);De&&u.loadData(De)}E.sort((r,p)=>r.name.localeCompare(p.name));for(let r=0;r<E.length;r++){r===0&&new I(this.timeline,"Parameter Groups");let p=E[r],u=new x(this.timeline,p.name,Tt,St,this.formatter);u.borderWidth=r===E.length-1?1:0,u.marginBottom=r===E.length-1?20:0,u.setupTooltip(this.tooltipInstance),u.loadData(p)}V.sort((r,p)=>r.name.localeCompare(p.name));for(let r=0;r<V.length;r++){r===0&&new I(this.timeline,"Commands");let p=V[r],u=new x(this.timeline,p.name,gt,ft,this.formatter);u.borderWidth=r===V.length-1?1:0,u.marginBottom=r===V.length-1?30:0,u.setupTooltip(this.tooltipInstance),u.loadData(p)}F.sort((r,p)=>r.name.localeCompare(p.name));for(let r=0;r<F.length;r++){r===0&&new I(this.timeline,"Events");let p=F[r],u=new x(this.timeline,p.name,_t,wt,this.formatter);u.borderWidth=r===F.length-1?1:0,u.marginBottom=r===F.length-1?20:0,u.setupTooltip(this.tooltipInstance),u.loadData(p)}})}groupRecordsByName(t){let e=new Map;for(let i of t){let o=e.get(i.id.name);o||(o={name:i.id.name,records:[]},e.set(i.id.name,o)),o.records.push(i)}return[...e.values()]}ngOnDestroy(){this.processorSubscription?.cancel(),this.subscriptions.forEach(t=>t.unsubscribe()),this.timeline.disconnect()}static{this.\u0275fac=function(e){return new(e||c)(f(Ve),f(X),f(Fe),f(Ge),f(Le),f(Ye),f(He),f(Ke),f(tt),f(We))}}static{this.\u0275cmp=k({type:c,selectors:[["ng-component"]],viewQuery:function(e,i){if(e&1&&ne(Bt,7),e&2){let o;re(o=ae())&&(i.container=o.first)}},hostBindings:function(e,i){e&1&&d("mouseleave",function(){return i.hideTooltip()})},standalone:!0,features:[B],decls:58,vars:22,consts:[["container",""],["noscroll","true"],["icon","video_settings",3,"click","disabled"],["icon","file_download",3,"click","disabled"],["matTooltip","Refresh view","icon","refresh",3,"click"],[2,"height","24px","margin","6px"],[3,"formGroup"],["icon","west",3,"click"],["icon","chevron_left",3,"mousedown","mouseup","mouseleave"],["icon","chevron_right",3,"mousedown","mouseup","mouseleave"],["icon","east",3,"click"],["matTooltip","Show all archive data","icon","fit_screen",3,"click"],["matTooltip","Zoom to selected range","icon","fit_screen",3,"disabled"],["icon","today",3,"click"],["icon","my_location",3,"click"],["icon","directions",3,"click"],["icon","add",3,"click"],["icon","remove",3,"click"],["matTooltip","Use pan tool","icon","pan_tool",3,"click","toggled"],["matTooltip","Use range selection tool","icon","highlight_alt",3,"click","toggled"],[1,"legend","no-select",3,"background","color"],[1,"timeline-container"],[1,"zoom-actions"],[1,"zoom-actions-inner","elevation-z1"],["mat-button","",3,"click"],[1,"separator"],[1,"info"],[3,"disabled","icon"],[3,"click","disabled","icon"],["matTooltip","Zoom to selected range","icon","fit_screen",3,"click","disabled"],[1,"legend","no-select"],["type","checkbox",3,"change","formControlName"]],template:function(e,i){if(e&1){let o=te();s(0,"app-instance-page",1)(1,"app-instance-toolbar"),m(2," Archive browser \xA0\xA0\xA0 "),s(3,"ya-page-button",2),S(4,"async"),d("click",function(){return h(o),g(i.replayRange())}),m(5," Replay range "),l(),Z(6,At,1,1),S(7,"async"),s(8,"ya-page-button",3),S(9,"async"),d("click",function(){return h(o),g(i.downloadDump())}),m(10," Download dump "),l(),s(11,"ya-page-icon-button",4),d("click",function(){return h(o),g(i.refreshData())}),l()(),s(12,"div",5)(13,"form",6)(14,"ya-button",7),d("click",function(){return h(o),g(i.pageLeft())}),l(),s(15,"ya-button",8),d("mousedown",function(){return h(o),g(i.toggleMove(-50))})("mouseup",function(){return h(o),g(i.untoggleMove())})("mouseleave",function(){return h(o),g(i.untoggleMove())}),l(),s(16,"ya-button",9),d("mousedown",function(){return h(o),g(i.toggleMove(50))})("mouseup",function(){return h(o),g(i.untoggleMove())})("mouseleave",function(){return h(o),g(i.untoggleMove())}),l(),s(17,"ya-button",10),d("click",function(){return h(o),g(i.pageRight())}),l(),m(18," \xA0 "),s(19,"ya-button",11),d("click",function(){return h(o),g(i.fitAll())}),m(20," Fit all "),l(),Z(21,Pt,3,3,"ya-button",12),S(22,"async"),s(23,"ya-button",13),d("click",function(){return h(o),g(i.jumpToToday())}),m(24,"Today"),l(),s(25,"ya-button",14),d("click",function(){return h(o),g(i.jumpToNow())}),l(),s(26,"ya-button",15),d("click",function(){return h(o),g(i.openJumpToDialog())}),m(27,"Jump to..."),l(),m(28," \xA0 "),s(29,"ya-button",16),d("click",function(){return h(o),g(i.zoomIn())}),l(),s(30,"ya-button",17),d("click",function(){return h(o),g(i.zoomOut())}),l(),m(31," \xA0 "),s(32,"ya-button",18),S(33,"async"),d("click",function(){return h(o),g(i.setTool("hand"))}),l(),s(34,"ya-button",19),S(35,"async"),d("click",function(){return h(o),g(i.setTool("range-select"))}),l(),m(36," \xA0\xA0\xA0\xA0 "),Pe(37,xt,3,6,"label",20,Ae),l()(),T(39,"div",21,0),s(41,"div",22)(42,"div",23)(43,"button",24),d("click",function(){return h(o),g(i.zoomIn())}),s(44,"mat-icon"),m(45,"add"),l()(),T(46,"span",25),s(47,"button",24),d("click",function(){return h(o),g(i.zoomOut())}),s(48,"mat-icon"),m(49,"remove"),l()()()(),s(50,"div",26),Z(51,It,4,7,"span"),S(52,"async"),s(53,"ya-help")(54,"p"),m(55," This view allows inspecting the content of the TM Archive, as well as retrieving data as packets. Data is grouped by packet name in bands. For each band, index blocks indicate the presence of data at a particular time range. Note that a single index block does not necessarily mean that there was no gap in the data. When zooming in, more gaps may appear. "),l(),s(56,"p"),m(57,"Pan around by grabbing the canvas."),l()()()()}if(e&2){let o,n;v(3),w("disabled",!R(4,8,i.rangeSelection$)),v(3),ee((o=R(7,10,i.processor$))?6:-1,o),v(2),w("disabled",!R(9,12,i.rangeSelection$)),v(5),w("formGroup",i.filterForm),v(8),ee(R(22,14,i.tool$)==="range-select"?21:-1),v(11),w("toggled",R(33,16,i.tool$)==="hand"),v(2),w("toggled",R(35,18,i.tool$)==="range-select"),v(3),xe(i.legendOptions),v(14),ee((n=R(52,20,i.viewportRange$))?51:-1,n)}},dependencies:[nt,it,P,se,j,Oe,M,z,L,U,Ue,ze,qe,A,Qe,Xe,Ze,et],styles:[".tooltip[_ngcontent-%COMP%]{position:absolute}.timeline-container[_ngcontent-%COMP%]{line-height:0;border-top:1px solid rgba(0,0,0,.1);position:absolute;inset:36px 0 0}.zoom-actions[_ngcontent-%COMP%]{position:absolute;bottom:35px;left:201px;right:0;margin:0 auto;text-align:center}.zoom-actions-inner[_ngcontent-%COMP%]{display:inline-block;background-color:#fafafa}.zoom-actions[_ngcontent-%COMP%]   .mat-button[_ngcontent-%COMP%]{line-height:inherit;min-width:0}.zoom-actions[_ngcontent-%COMP%]   .mat-mdc-button[_ngcontent-%COMP%]:not(:disabled){color:#000}.info[_ngcontent-%COMP%]{position:absolute;bottom:35px;right:0;padding:0 16px;opacity:.75;font-size:small}label.legend[_ngcontent-%COMP%]{font-size:small;padding:3px 5px;margin-right:10px;border:1px solid rgba(0,0,0,.1)}"],changeDetection:0})}};var po=[{path:"",canActivate:[at,rt],canActivateChild:[st],runGuardsAndResolvers:"always",component:lt,children:[{path:"",pathMatch:"full",component:ye}]}];export{po as ROUTES};
