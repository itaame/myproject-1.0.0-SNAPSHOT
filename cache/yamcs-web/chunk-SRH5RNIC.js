import{c as Vt}from"./chunk-664KCE5Z.js";import{Ba as P,Bb as K,C as Ee,Ca as l,Cb as R,D as Ve,Da as b,Db as E,E as h,Ea as f,Eb as xe,Ed as at,Ee as Z,Fb as A,Fd as rt,Fe as At,Gb as se,Gd as mt,Ha as w,Hb as ve,Hd as st,I as qe,Ia as _,Ib as Ke,Id as lt,Ie as ke,J as q,Jb as be,Jd as pt,K as z,Kb as D,Kd as ct,Lb as Xe,Le as St,Nb as De,Oa as C,Ob as L,Pa as y,Pb as Pe,Pe as T,Pf as Ge,Qa as _e,Qb as Y,Rb as ie,Rf as Be,Sb as X,Se as $e,Td as dt,U as Ne,Ud as ut,Wd as gt,X as a,Xd as ft,Y as N,Zb as We,Zd as Ct,Ze as Tt,_b as Ze,a as te,aa as g,ae as Fe,af as k,bc as Ae,ca as p,cb as M,da as Oe,dc as et,df as It,e as F,ea as O,ec as tt,ff as V,ga as u,gc as nt,ge as yt,gf as Ot,ha as ae,ia as Q,ic as it,if as ee,ig as le,ja as J,jc as ot,ka as r,la as m,le as ht,lg as Re,ma as d,na as re,ne as _t,oa as me,oc as j,og as Mt,qa as ne,ra as W,re as xt,rg as v,sa as s,sg as Et,t as He,te as vt,ue as bt,vf as wt,wa as ze,x as I,xa as Qe,ya as Je,zb as B}from"./chunk-SAZ6MTOG.js";function Gt(t,n){if(t&1&&(r(0,"mat-icon",1),l(1,"schedule"),m()),t&2){let e=s(2);p("matTooltip",e.ack.name+": Scheduled")}}function Bt(t,n){if(t&1&&(r(0,"mat-icon",2),l(1,"check_circle_outline"),m()),t&2){let e=s(2);p("matTooltip",e.ack.name+": OK")}}function Rt(t,n){if(t&1&&(r(0,"mat-icon",1),l(1,"lens"),m()),t&2){let e=s(2);p("matTooltip",e.ack.name+": PENDING")}}function Lt(t,n){if(t&1&&(r(0,"mat-icon",3),l(1,"block"),m()),t&2){let e=s(2);p("matTooltip",e.ack.name+": CANCELLED")}}function Yt(t,n){if(t&1&&(r(0,"mat-icon",3),l(1,"block"),m()),t&2){let e=s(2);p("matTooltip",e.ack.name+": DISABLED")}}function Ut(t,n){if(t&1&&(r(0,"mat-icon",4),l(1,"highlight_off"),m()),t&2){let e=s(2);p("matTooltip",e.ack.name+": TIMEOUT")}}function Wt(t,n){if(t&1&&(r(0,"mat-icon",4),l(1,"highlight_off"),m()),t&2){let e=s(2);p("matTooltip",e.ack.name+": "+e.ack.status+" ("+e.ack.message+")")}}function jt(t,n){if(t&1&&g(0,Gt,2,1,"mat-icon",1)(1,Bt,2,1,"mat-icon",2)(2,Rt,2,1,"mat-icon",1)(3,Lt,2,1,"mat-icon",3)(4,Yt,2,1,"mat-icon",3)(5,Ut,2,1,"mat-icon",4)(6,Wt,2,1,"mat-icon",4),t&2){let e,i=s();u((e=i.ack.status)==="SCHEDULED"?0:e==="OK"?1:e==="PENDING"?2:e==="CANCELLED"?3:e==="DISABLED"?4:e==="TIMEOUT"?5:6)}}function Ht(t,n){t&1&&(r(0,"mat-icon",0),l(1,"lens"),m()),t&2&&p("matTooltip","Unknown")}var Se=class t{static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=h({type:t,selectors:[["app-acknowledgment-icon"]],inputs:{ack:"ack"},standalone:!0,features:[_],decls:2,vars:2,consts:[[1,"down","icon16",3,"matTooltip"],[1,"icon16","down",3,"matTooltip"],[1,"icon16",2,"color","#00c752",3,"matTooltip"],[1,"icon16",2,"color","lightgrey",3,"matTooltip"],[1,"icon16",2,"color","red",3,"matTooltip"]],template:function(e,i){e&1&&g(0,jt,7,1)(1,Ht,2,1,"mat-icon",0),e&2&&(u(i.ack?0:-1),a(),u(i.ack?-1:1))},dependencies:[v,Ae,j],styles:["[_nghost-%COMP%]{line-height:0;font-size:0}"],changeDetection:0})}};var qt=(t,n)=>n.name;function zt(t,n){if(t&1&&(r(0,"td",0)(1,"div",4),d(2,"app-acknowledgment-icon",5),m()()),t&2){let e=s().$implicit;a(2),p("ack",e)}}function Qt(t,n){t&1&&(r(0,"span"),l(1,"-"),m())}function Jt(t,n){t&1&&(r(0,"span"),l(1,"-"),m())}function Kt(t,n){if(t&1&&(r(0,"span",3),C(1,"datetime"),l(2),C(3,"deltaWith"),m()),t&2){let e=s().$implicit,i=s();p("matTooltip",y(1,2,e.time)),a(2),f(" ",_e(3,4,e.time,i.command.generationTime)," ")}}function Xt(t,n){if(t&1&&(r(0,"tr"),g(1,zt,3,1,"td",0),r(2,"td",1),l(3),m(),r(4,"td",2),l(5),m(),r(6,"td"),g(7,Qt,2,0,"span")(8,Jt,2,0,"span")(9,Kt,4,7,"span",3),m()()),t&2){let e,i=n.$implicit,o=s();a(),u(o.showIcons?1:-1),a(2),b(i.name==null?null:i.name.replace("Acknowledge_","")),a(2),b(i.status),a(2),u((e=i.status)==="SCHEDULED"?7:e==="PENDING"?8:9)}}var Dt=class t{constructor(){this.inline=!1;this.showIcons=!0}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=h({type:t,selectors:[["app-extra-acknowledgments-table"]],inputs:{command:"command",inline:"inline",showIcons:"showIcons"},standalone:!0,features:[_],decls:3,vars:0,consts:[[2,"width","16px"],[2,"width","150px"],[2,"width","70px"],[3,"matTooltip"],[2,"display","flex","align-items","center"],[3,"ack"]],template:function(e,i){e&1&&(r(0,"table"),Q(1,Xt,10,4,"tr",null,qt),m()),e&2&&(a(),J(i.command.extraAcks))},dependencies:[Se,v,j,Ge,Be],styles:["table[_ngcontent-%COMP%]{width:auto}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:none;padding:0}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:not(:first-child){padding-left:10px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:12px;line-height:16px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#000000a7}"],changeDetection:0})}};function Zt(t,n){t&1&&(r(0,"mat-icon",0),l(1,"cached "),m())}function en(t,n){t&1&&(r(0,"mat-icon",1),l(1,"lens"),m())}var Le=class t{static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=h({type:t,selectors:[["app-transmission-constraints-icon"]],inputs:{command:"command"},standalone:!0,features:[_],decls:2,vars:1,consts:[["matTooltip","Checking transmission constraints",1,"down","icon16","spin"],[1,"down","icon16"]],template:function(e,i){if(e&1&&g(0,Zt,2,0,"mat-icon",0)(1,en,2,0,"mat-icon",1),e&2){let o;u((o=i.command.transmissionConstraints==null?null:i.command.transmissionConstraints.status)==="PENDING"?0:1)}},dependencies:[v,Ae,j],styles:["[_nghost-%COMP%]{line-height:0;font-size:0}.spin[_ngcontent-%COMP%]{animation:yspin 2s infinite linear}"],changeDetection:0})}};function tn(t,n){if(t&1&&(r(0,"td",0)(1,"div",4),d(2,"app-acknowledgment-icon",5),m()()),t&2){let e=s(2);a(2),p("ack",e.command.queued)}}function nn(t,n){if(t&1&&d(0,"app-transmission-constraints-icon",6),t&2){let e=s(3);p("command",e.command)}}function on(t,n){if(t&1&&d(0,"app-acknowledgment-icon",5),t&2){let e=s(3);p("ack",e.command.released)}}function an(t,n){if(t&1&&(r(0,"td")(1,"div",4),g(2,nn,1,1,"app-transmission-constraints-icon",6)(3,on,1,1,"app-acknowledgment-icon",5),m()()),t&2){let e=s(2);a(2),u(e.command.released?-1:2),a(),u(e.command.released?3:-1)}}function rn(t,n){if(t&1&&(r(0,"td")(1,"div",4),d(2,"app-acknowledgment-icon",5),m()()),t&2){let e=s(2);a(2),p("ack",e.command.sent)}}function mn(t,n){if(t&1&&(r(0,"table")(1,"tr"),g(2,tn,3,1,"td",0),r(3,"td",1),l(4,"Queued"),m(),r(5,"td",2),l(6),m(),r(7,"td")(8,"span",3),C(9,"datetime"),l(10),C(11,"deltaWith"),m()()(),r(12,"tr"),g(13,an,4,2,"td"),r(14,"td"),l(15,"Released"),m(),r(16,"td"),l(17),m(),r(18,"td")(19,"span",3),C(20,"datetime"),l(21),C(22,"deltaWith"),m()()(),r(23,"tr"),g(24,rn,3,1,"td"),r(25,"td"),l(26,"Sent"),m(),r(27,"td"),l(28),m(),r(29,"td")(30,"span",3),C(31,"datetime"),l(32),C(33,"deltaWith"),m()()()()),t&2){let e=s();a(2),u(e.showIcons?2:-1),a(4),b((e.command.queued==null?null:e.command.queued.status)||"-"),a(2),p("matTooltip",y(9,12,e.command.queued==null?null:e.command.queued.time)),a(2),f(" ",_e(11,14,e.command.queued==null?null:e.command.queued.time,e.command.generationTime)||"-"," "),a(3),u(e.showIcons?13:-1),a(4),f(" ",(e.command.released==null?null:e.command.released.status)||(e.command.transmissionConstraints==null?null:e.command.transmissionConstraints.status)||"-"," "),a(2),p("matTooltip",y(20,17,e.command.released==null?null:e.command.released.time)),a(2),f(" ",_e(22,19,e.command.released==null?null:e.command.released.time,e.command.generationTime)||"-"," "),a(3),u(e.showIcons?24:-1),a(4),b((e.command.sent==null?null:e.command.sent.status)||"-"),a(2),p("matTooltip",y(31,22,e.command.sent==null?null:e.command.sent.time)),a(2),f(" ",_e(33,24,e.command.sent==null?null:e.command.sent.time,e.command.generationTime)||"-"," ")}}var Pt=class t{constructor(){this.inline=!1;this.showIcons=!0}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=h({type:t,selectors:[["app-yamcs-acknowledgments-table"]],inputs:{command:"command",inline:"inline",showIcons:"showIcons"},standalone:!0,features:[_],decls:1,vars:1,consts:[[2,"width","16px"],[2,"width","150px"],[2,"width","70px"],[3,"matTooltip"],[2,"display","flex","align-items","center"],[3,"ack"],[3,"command"]],template:function(e,i){e&1&&g(0,mn,34,27,"table"),e&2&&u(i.command?0:-1)},dependencies:[Se,v,j,Ge,Be,Le],styles:["table[_ngcontent-%COMP%]{width:auto}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:none;padding:0}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:not(:first-child){padding-left:10px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:12px;line-height:16px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#000000a7}"],changeDetection:0})}};var Ft=class t{constructor(n,e){this.yamcs=n;this.synchronizer=e;this.result$=new F(null);this.dirty=!1}ngOnInit(){let e=new Vt().compile("="+this.expression),i=e.getPVNames();if(i.length){let o=i.map(x=>({name:x})),c;this.subscription=this.yamcs.yamcsClient.createParameterSubscription({instance:this.yamcs.instance,processor:this.yamcs.processor,id:o,abortOnInvalid:!0,sendFromCache:!0,updateOnExpiration:!0,action:"REPLACE"},x=>{x.mapping&&(c=te(te({},c),x.mapping));for(let S of x.values||[])if(S.engValue){let oe=c[S.numericId];e.updateDataSource(oe.name,{value:T.convertValue(S.engValue),acquisitionStatus:S.acquisitionStatus})}if(this.result$.value===null){let S=e.execute();this.result$.next(S)}else this.dirty=!0})}else{let o=e.execute();this.result$.next(o)}this.syncSubscription=this.synchronizer.sync(()=>{if(this.dirty){let o=e.execute();this.result$.next(o),this.dirty=!1}})}ngOnDestroy(){this.subscription?.cancel(),this.syncSubscription?.unsubscribe()}static{this.\u0275fac=function(e){return new(e||t)(N(Re),N(Mt))}}static{this.\u0275cmp=h({type:t,selectors:[["app-live-expression"]],inputs:{expression:"expression"},standalone:!0,features:[_],decls:2,vars:3,template:function(e,i){e&1&&(l(0),C(1,"async")),e&2&&b(y(1,1,i.result$))},dependencies:[M],encapsulation:2,changeDetection:0})}};function sn(t,n){if(t&1&&(r(0,"div",3),l(1," bytes: "),d(2,"ya-interval",6),m()),t&2){let e=s();a(2),p("left",e.type.minBytes)("right",e.type.maxBytes)("singleValueIfEqual",!0)}}function ln(t,n){if(t&1&&(r(0,"ya-help"),l(1),m()),t&2){let e=s();a(),f(" ",e.description," ")}}var pe=class t{constructor(){this.formControl=new D;this.validators=[];this.onChange=n=>{};this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.formControl.valueChanges.subscribe(()=>{let n=this.formControl.value;this.onChange(n)})),this.index===void 0?this.controlName=this.name:this.controlName=String(this.index),this.type.minBytes!==0&&this.validators.push(E.required),this.validators.push(Z.requireHex),this.type.minBytes!==void 0&&this.validators.push(Z.minHexLengthValidator(this.type.minBytes)),this.type.maxBytes!==void 0&&this.validators.push(Z.maxHexLengthValidator(this.type.maxBytes))}get label(){return this.index!==void 0?T.unflattenIndex(this.index,this.dimensions).map(e=>"["+e+"]").join(""):this.name}writeValue(n){this.formControl.setValue(n)}registerOnChange(n){this.onChange=n}registerOnTouched(n){}validate(n){for(let e of this.validators){let i=e(n);if(i)return i}return null}ngOnDestroy(){this.subscriptions.forEach(n=>n.unsubscribe())}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=h({type:t,selectors:[["app-binary-argument"]],inputs:{name:"name",description:"description",type:"type",index:"index",dimensions:"dimensions"},standalone:!0,features:[w([{provide:B,useExisting:I(()=>t),multi:!0},{provide:R,useExisting:I(()=>t),multi:!0}]),_],decls:12,vars:14,consts:[["err",""],[1,"label"],[1,"meta"],[1,"item"],[3,"controlName"],[3,"formControl"],[3,"left","right","singleValueIfEqual"]],template:function(e,i){if(e&1&&(r(0,"div",1)(1,"div",2),C(2,"async"),g(3,sn,3,3,"div",3),r(4,"div",3),C(5,"async"),l(6),m()(),l(7),g(8,ln,2,1,"ya-help"),d(9,"ya-errors",4,0)(11,"ya-binary-input",5),m()),e&2){let o=P(10);a(),O("error",y(2,10,o.invalid$)),a(2),u(i.type.minBytes!==void 0||i.type.maxBytes!==void 0?3:-1),a(),O("error",y(5,12,o.invalid$)),a(2),b(i.type.engType),a(),f(" ",i.label," "),a(),u(i.description?8:-1),a(),p("controlName",i.controlName),a(2),p("formControl",i.formControl)}},dependencies:[v,M,A,L,At,k,V,ee],styles:[".meta[_ngcontent-%COMP%]{position:absolute;top:0;right:0;display:flex}.meta[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{flex:none;background-color:#eee;font-weight:400;font-family:Roboto Mono,monospace;color:#000000a7;padding-left:2px;padding-right:2px;margin-left:10px}.meta.error[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{background-color:#dc143c;color:#fff}.members[_ngcontent-%COMP%], .entries[_ngcontent-%COMP%]{margin-top:5px;padding-top:5px;padding-left:10px;border-left:1px solid rgba(0,0,0,.1)}.meta[_ngcontent-%COMP%]   .item.menu[_ngcontent-%COMP%]:hover{background-color:#009e97;color:#fff;cursor:pointer}",".ng-invalid[_nghost-%COMP%]:not(.ng-pristine)     input{border-color:#dc143c!important}.label[_ngcontent-%COMP%]{position:relative}"],changeDetection:0})}};function pn(t,n){if(t&1&&(r(0,"div",3),d(1,"ya-interval",8),m()),t&2){let e=s();a(),p("left",e.type.rangeMin)("right",e.type.rangeMax)}}function cn(t,n){if(t&1&&(r(0,"div",3),l(1),C(2,"units"),m()),t&2){let e=s();a(),f(" ",y(2,1,e.type.unitSet)," ")}}function dn(t,n){t&1&&(r(0,"div",3),l(1,"unsigned"),m())}function un(t,n){if(t&1&&(r(0,"ya-help"),l(1),m()),t&2){let e=s();a(),f(" ",e.description," ")}}var de=class t{constructor(){this.validators=[];this.onChange=n=>{};this.subscriptions=[];this.formGroup=new ve({enabled:new be(null)})}ngOnInit(){this.subscriptions.push(this.formGroup.valueChanges.subscribe(()=>{let n=this.formGroup.get("enabled").value;this.onChange(n)})),this.index===void 0?this.controlName=this.name:this.controlName=String(this.index),this.validators.push(E.required)}get label(){return this.index!==void 0?T.unflattenIndex(this.index,this.dimensions).map(e=>"["+e+"]").join(""):this.name}writeValue(n){n==="true"?this.formGroup.setValue({enabled:"true"}):n==="false"&&this.formGroup.setValue({enabled:"false"})}registerOnChange(n){this.onChange=n}registerOnTouched(n){}validate(n){for(let e of this.validators){let i=e(n);if(i)return i}return null}ngOnDestroy(){this.subscriptions.forEach(n=>n.unsubscribe())}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=h({type:t,selectors:[["app-boolean-argument"]],inputs:{name:"name",description:"description",type:"type",index:"index",dimensions:"dimensions"},standalone:!0,features:[w([{provide:B,useExisting:I(()=>t),multi:!0},{provide:R,useExisting:I(()=>t),multi:!0}]),_],decls:18,vars:14,consts:[["err",""],[1,"label"],[1,"meta"],[1,"item"],[3,"controlName"],[3,"formGroup"],["type","radio","formControlName","enabled","value","true"],["type","radio","formControlName","enabled","value","false"],[3,"left","right"]],template:function(e,i){if(e&1&&(r(0,"div",1)(1,"div",2),C(2,"async"),g(3,pn,2,2,"div",3)(4,cn,3,3,"div",3)(5,dn,2,0,"div",3),r(6,"div",3),l(7),m()(),l(8),g(9,un,2,1,"ya-help"),d(10,"ya-errors",4,0)(12,"br"),re(13,5),d(14,"input",6),l(15),d(16,"input",7),l(17),me(),m()),e&2){let o=P(11);a(),O("error",y(2,12,o.invalid$)),a(2),u(i.type.rangeMin!==void 0||i.type.rangeMax!==void 0?3:-1),a(),u(i.type.unitSet?4:-1),a(),u(i.type.signed===!1?5:-1),a(2),b(i.type.engType),a(),f(" ",i.label," "),a(),u(i.description?9:-1),a(),p("controlName",i.controlName),a(3),p("formGroup",i.formGroup),a(2),f(" ",i.type.oneStringValue," "),a(2),f(" ",i.type.zeroStringValue," ")}},dependencies:[v,M,K,De,A,se,Pe,X,k,V,ee,le],styles:[".meta[_ngcontent-%COMP%]{position:absolute;top:0;right:0;display:flex}.meta[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{flex:none;background-color:#eee;font-weight:400;font-family:Roboto Mono,monospace;color:#000000a7;padding-left:2px;padding-right:2px;margin-left:10px}.meta.error[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{background-color:#dc143c;color:#fff}.members[_ngcontent-%COMP%], .entries[_ngcontent-%COMP%]{margin-top:5px;padding-top:5px;padding-left:10px;border-left:1px solid rgba(0,0,0,.1)}.meta[_ngcontent-%COMP%]   .item.menu[_ngcontent-%COMP%]:hover{background-color:#009e97;color:#fff;cursor:pointer}",".ng-invalid[_nghost-%COMP%]:not(.ng-pristine)     input{border-color:#dc143c!important}.label[_ngcontent-%COMP%]{position:relative}"],changeDetection:0})}};function fn(t,n){t&1&&(r(0,"th",17),l(1,"Value"),m())}function Cn(t,n){if(t&1&&(r(0,"td",18),l(1),m()),t&2){let e=n.$implicit;a(),f(" ",e.value," ")}}function yn(t,n){t&1&&(r(0,"th",17),l(1,"Label"),m())}function hn(t,n){if(t&1&&(r(0,"td",18)(1,"strong"),l(2),m()()),t&2){let e=n.$implicit;a(2),b(e.label)}}function _n(t,n){t&1&&(r(0,"th",17),l(1,"Hex value"),m())}function xn(t,n){if(t&1&&(r(0,"td",18),l(1),m()),t&2){let e=n.$implicit,i=s();a(),f(" ",i.toHex(e.value)," ")}}function vn(t,n){t&1&&d(0,"tr",19)}function bn(t,n){if(t&1){let e=ne();r(0,"tr",20),W("click",function(){let o=q(e).$implicit,c=s();return z(c.selection.toggle(o))}),m()}if(t&2){let e=n.$implicit,i=s();O("selected",i.selection.isSelected(e))}}var Ye=class t{constructor(n,e){this.dialogRef=n;this.data=e;this.filterControl=new D;this.dataSource=new bt([]);this.selection=new tt;this.displayedColumns=["name","value"];let i=e.type,o=i.dataEncoding?.encoding==="UNSIGNED";this.dataSource.filterPredicate=(c,x)=>{let{label:S,value:oe}=c;return S.toLowerCase().indexOf(x)>=0||String(oe).indexOf(x)>=0||o&&Number(oe).toString(16).indexOf(x)>=0},this.dataSource.data=i.enumValue||[],o&&this.displayedColumns.push("hex")}ngAfterViewInit(){this.filterControl.valueChanges.subscribe(()=>{let n=this.filterControl.value||"";this.dataSource.filter=n.toLowerCase()}),this.dataSource.paginator=this.paginator}selectNext(){let n=this.dataSource.filteredData,e=0;if(this.selection.hasValue()){let i=this.selection.selected[0];n.indexOf(i)!==-1&&(e=Math.min(n.indexOf(i)+1,n.length-1))}this.selection.select(n[e])}selectPrevious(){let n=this.dataSource.filteredData,e=0;if(this.selection.hasValue()){let i=this.selection.selected[0];n.indexOf(i)!==-1&&(e=Math.max(n.indexOf(i)-1,0))}this.selection.select(n[e])}toHex(n){return Number(n).toString(16)}applySelection(){let n=this.selection.selected;n.length&&this.dialogRef.close(n[0])}static{this.\u0275fac=function(e){return new(e||t)(N(at),N(rt))}}static{this.\u0275cmp=h({type:t,selectors:[["app-select-enumeration-dialog"]],viewQuery:function(e,i){if(e&1&&ze(Fe,7),e&2){let o;Qe(o=Je())&&(i.paginator=o.first)}},standalone:!0,features:[_],decls:25,vars:8,consts:[["mat-dialog-title",""],[1,"filter-bar"],["width","100%",3,"onArrowDown","onArrowUp","onEnter","formControl"],[1,"scrollpane"],["mat-table","",1,"ya-data-table",2,"width","100%",3,"dataSource"],["cdkColumnDef","value"],["mat-header-cell","",4,"cdkHeaderCellDef"],["mat-cell","",4,"cdkCellDef"],["cdkColumnDef","name"],["cdkColumnDef","hex"],["mat-header-row","",4,"cdkHeaderRowDef"],["mat-row","",3,"selected","click",4,"cdkRowDef","cdkRowDefColumns"],["align","end"],[3,"pageSize","hidePageSize","showFirstLastButtons"],[2,"flex","1 1 auto"],["mat-dialog-close",""],["appearance","primary",3,"click","disabled"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",3,"click"]],template:function(e,i){e&1&&(r(0,"h2",0),l(1,"Select enumeration state"),m(),r(2,"mat-dialog-content")(3,"div",1)(4,"ya-search-filter",2),W("onArrowDown",function(){return i.selectNext()})("onArrowUp",function(){return i.selectPrevious()})("onEnter",function(){return i.applySelection()}),m()(),r(5,"div",3)(6,"table",4),re(7,5),g(8,fn,2,0,"th",6)(9,Cn,2,1,"td",7),me(),re(10,8),g(11,yn,2,0,"th",6)(12,hn,3,1,"td",7),me(),re(13,9),g(14,_n,2,0,"th",6)(15,xn,2,1,"td",7),me(),g(16,vn,1,0,"tr",10)(17,bn,1,2,"tr",11),m()()(),r(18,"mat-dialog-actions",12),d(19,"mat-paginator",13)(20,"div",14),r(21,"ya-button",15),l(22,"CANCEL"),m(),r(23,"ya-button",16),W("click",function(){return i.applySelection()}),l(24," SELECT "),m()()),e&2&&(a(4),p("formControl",i.filterControl),a(2),p("dataSource",i.dataSource),a(10),p("cdkHeaderRowDef",i.displayedColumns),a(),p("cdkRowDefColumns",i.displayedColumns),a(2),p("pageSize",100)("hidePageSize",!0)("showFirstLastButtons",!0),a(4),p("disabled",i.selection.isEmpty()))},dependencies:[v,A,L,Ct,dt,ut,gt,ft,st,lt,ct,pt,Fe,yt,ht,_t,xt,vt,ke,wt],styles:["td[_ngcontent-%COMP%]{cursor:pointer}.scrollpane[_ngcontent-%COMP%]{overflow:auto;height:200px}.filter-bar[_ngcontent-%COMP%]{display:block}"],changeDetection:0})}};function An(t,n){if(t&1&&(r(0,"ya-help"),l(1),m()),t&2){let e=s();a(),f(" ",e.description," ")}}var ue=class t{constructor(n){this.dialog=n;this.formControl=new D;this.selectOptions$=new F([]);this.validators=[];this.onChange=n=>{};this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.formControl.valueChanges.subscribe(()=>{let e=this.formControl.value;this.onChange(e)})),this.index===void 0?this.controlName=this.name:this.controlName=String(this.index);let n=[];for(let e of this.type.enumValue||[])n.push({id:e.label,label:e.label});this.selectOptions$.next(n),this.validators.push(E.required)}get label(){return this.index!==void 0?T.unflattenIndex(this.index,this.dimensions).map(e=>"["+e+"]").join(""):this.name}writeValue(n){this.formControl.setValue(n)}registerOnChange(n){this.onChange=n}registerOnTouched(n){}openSelectEnumerationDialog(){this.dialog.open(Ye,{width:"600px",data:{type:this.type},panelClass:["no-padding-dialog"]}).afterClosed().subscribe(n=>{n&&this.writeValue(n.label)})}validate(n){for(let e of this.validators){let i=e(n);if(i)return i}return null}ngOnDestroy(){this.subscriptions.forEach(n=>n.unsubscribe())}static{this.\u0275fac=function(e){return new(e||t)(N(mt))}}static{this.\u0275cmp=h({type:t,selectors:[["app-enumeration-argument"]],inputs:{name:"name",description:"description",type:"type",index:"index",dimensions:"dimensions"},standalone:!0,features:[w([{provide:B,useExisting:I(()=>t),multi:!0},{provide:R,useExisting:I(()=>t),multi:!0}]),_],decls:14,vars:12,consts:[["err",""],[1,"label"],[1,"meta"],[1,"item"],[3,"controlName"],[1,"control-group"],[3,"formControl","options"],["matTooltip","Lookup enumeration state","icon","search",3,"click"]],template:function(e,i){if(e&1){let o=ne();r(0,"div",1)(1,"div",2),C(2,"async"),r(3,"div",3),l(4),m()(),l(5),g(6,An,2,1,"ya-help"),d(7,"ya-errors",4,0),r(9,"div",5),d(10,"ya-select",6),C(11,"async"),l(12," \xA0 "),r(13,"ya-button",7),W("click",function(){return q(o),z(i.openSelectEnumerationDialog())}),m()()()}if(e&2){let o=P(8);a(),O("error",y(2,8,o.invalid$)),a(3),b(i.type.engType),a(),f(" ",i.label," "),a(),u(i.description?6:-1),a(),p("controlName",i.controlName),a(3),p("formControl",i.formControl)("options",y(11,10,i.selectOptions$))}},dependencies:[v,M,A,L,j,ke,k,V,Tt],styles:[".meta[_ngcontent-%COMP%]{position:absolute;top:0;right:0;display:flex}.meta[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{flex:none;background-color:#eee;font-weight:400;font-family:Roboto Mono,monospace;color:#000000a7;padding-left:2px;padding-right:2px;margin-left:10px}.meta.error[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{background-color:#dc143c;color:#fff}.members[_ngcontent-%COMP%], .entries[_ngcontent-%COMP%]{margin-top:5px;padding-top:5px;padding-left:10px;border-left:1px solid rgba(0,0,0,.1)}.meta[_ngcontent-%COMP%]   .item.menu[_ngcontent-%COMP%]:hover{background-color:#009e97;color:#fff;cursor:pointer}",".label[_ngcontent-%COMP%]{position:relative}"],changeDetection:0})}};function Sn(t,n){if(t&1&&(r(0,"div",3),d(1,"ya-interval",6),m()),t&2){let e=s();a(),p("left",e.type.rangeMin)("right",e.type.rangeMax)}}function Tn(t,n){if(t&1&&(r(0,"div",3),l(1),C(2,"units"),m()),t&2){let e=s();a(),f(" ",y(2,1,e.type.unitSet)," ")}}function In(t,n){t&1&&(r(0,"div",3),l(1,"unsigned"),m())}function On(t,n){if(t&1&&(r(0,"ya-help"),l(1),m()),t&2){let e=s();a(),f(" ",e.description," ")}}var ge=class t{constructor(){this.formControl=new D;this.validators=[];this.onChange=n=>{};this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.formControl.valueChanges.subscribe(()=>{let n=this.formControl.value;this.onChange(n)})),this.index===void 0?this.controlName=this.name:this.controlName=String(this.index),this.validators.push(E.required),this.validators.push(Z.requireFloat),this.type.signed===!1&&this.validators.push(Z.requireUnsigned),this.type.rangeMax!==void 0&&this.validators.push(E.max(this.type.rangeMax)),this.type.rangeMin!==void 0&&this.validators.push(E.min(this.type.rangeMin))}get label(){return this.index!==void 0?T.unflattenIndex(this.index,this.dimensions).map(e=>"["+e+"]").join(""):this.name}writeValue(n){this.formControl.setValue(n)}registerOnChange(n){this.onChange=n}registerOnTouched(n){}validate(n){for(let e of this.validators){let i=e(n);if(i)return i}return null}ngOnDestroy(){this.subscriptions.forEach(n=>n.unsubscribe())}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=h({type:t,selectors:[["app-float-argument"]],inputs:{name:"name",description:"description",type:"type",index:"index",dimensions:"dimensions"},standalone:!0,features:[w([{provide:B,useExisting:I(()=>t),multi:!0},{provide:R,useExisting:I(()=>t),multi:!0}]),_],decls:13,vars:12,consts:[["err",""],[1,"label"],[1,"meta"],[1,"item"],[3,"controlName"],["type","text","autocomplete","off",3,"formControl"],[3,"left","right"]],template:function(e,i){if(e&1&&(r(0,"div",1)(1,"div",2),C(2,"async"),g(3,Sn,2,2,"div",3)(4,Tn,3,3,"div",3)(5,In,2,0,"div",3),r(6,"div",3),l(7),m()(),l(8),g(9,On,2,1,"ya-help"),d(10,"ya-errors",4,0)(12,"input",5),m()),e&2){let o=P(11);a(),O("error",y(2,10,o.invalid$)),a(2),u(i.type.rangeMin!==void 0||i.type.rangeMax!==void 0?3:-1),a(),u(i.type.unitSet?4:-1),a(),u(i.type.signed===!1?5:-1),a(2),b(i.type.engType),a(),f(" ",i.label," "),a(),u(i.description?9:-1),a(),p("controlName",i.controlName),a(2),p("formControl",i.formControl)}},dependencies:[v,M,K,A,L,k,V,ee,le],styles:[".meta[_ngcontent-%COMP%]{position:absolute;top:0;right:0;display:flex}.meta[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{flex:none;background-color:#eee;font-weight:400;font-family:Roboto Mono,monospace;color:#000000a7;padding-left:2px;padding-right:2px;margin-left:10px}.meta.error[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{background-color:#dc143c;color:#fff}.members[_ngcontent-%COMP%], .entries[_ngcontent-%COMP%]{margin-top:5px;padding-top:5px;padding-left:10px;border-left:1px solid rgba(0,0,0,.1)}.meta[_ngcontent-%COMP%]   .item.menu[_ngcontent-%COMP%]:hover{background-color:#009e97;color:#fff;cursor:pointer}",".ng-invalid[_nghost-%COMP%]:not(.ng-pristine)     input{border-color:#dc143c!important}.label[_ngcontent-%COMP%]{position:relative}"],changeDetection:0})}};function wn(t,n){if(t&1&&(r(0,"div",4),d(1,"ya-interval",11),m()),t&2){let e=s();a(),p("left",e.type.rangeMin)("right",e.type.rangeMax)}}function Mn(t,n){if(t&1&&(r(0,"div",4),l(1),C(2,"units"),m()),t&2){let e=s();a(),f(" ",y(2,1,e.type.unitSet)," ")}}function En(t,n){t&1&&(r(0,"div",4),l(1,"unsigned"),m())}function Vn(t,n){if(t&1){let e=ne();r(0,"div",12),W("click",function(o){return q(e),z(o.stopPropagation())}),l(1," \u2630 "),m()}if(t&2){s();let e=P(9);p("matMenuTriggerFor",e)}}function Nn(t,n){if(t&1&&(r(0,"ya-help"),l(1),m()),t&2){let e=s();a(),f(" ",e.description," ")}}function Dn(t,n){if(t&1&&d(0,"input",9),t&2){let e=s();p("formControl",e.formControl)}}function Pn(t,n){if(t&1&&d(0,"ya-hex-integer-input",10),t&2){let e=s();p("formControl",e.formControl)}}var fe=class t{constructor(){this.formControl=new D;this.validators=[];this.onChange=n=>{};this.subscriptions=[];this.hexToggle$=new F(!1)}ngOnInit(){this.subscriptions.push(this.formControl.valueChanges.subscribe(()=>{let n=this.formControl.value;n!==null&&this.hexToggle$.value&&(n=String(n)),this.onChange(n)})),this.index===void 0?this.controlName=this.name:this.controlName=String(this.index),this.validators.push(E.required),this.validators.push(Z.requireInteger),this.type.signed===!1&&this.validators.push(Z.requireUnsigned),this.type.rangeMax!==void 0&&this.validators.push(E.max(this.type.rangeMax)),this.type.rangeMin!==void 0&&this.validators.push(E.min(this.type.rangeMin))}get label(){return this.index!==void 0?T.unflattenIndex(this.index,this.dimensions).map(e=>"["+e+"]").join(""):this.name}writeValue(n){this.formControl.setValue(n)}registerOnChange(n){this.onChange=n}registerOnTouched(n){}setDisabledState(n){}validate(n){for(let e of this.validators){let i=e(n);if(i)return i}return null}ngOnDestroy(){this.subscriptions.forEach(n=>n.unsubscribe())}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=h({type:t,selectors:[["app-integer-argument"]],inputs:{name:"name",description:"description",type:"type",index:"index",dimensions:"dimensions"},standalone:!0,features:[w([{provide:B,useExisting:I(()=>t),multi:!0},{provide:R,useExisting:I(()=>t),multi:!0}]),_],decls:29,vars:26,consts:[["argMenu","matMenu"],["err",""],[1,"label"],[1,"meta"],[1,"item"],[1,"ya-menu"],["mat-menu-item","",3,"click"],["matTooltip","Input options",1,"item","menu",3,"matMenuTriggerFor"],[3,"controlName"],["type","text","autocomplete","off",3,"formControl"],[3,"formControl"],[3,"left","right"],["matTooltip","Input options",1,"item","menu",3,"click","matMenuTriggerFor"]],template:function(e,i){if(e&1){let o=ne();r(0,"div",2)(1,"div",3),C(2,"async"),g(3,wn,2,2,"div",4)(4,Mn,3,3,"div",4)(5,En,2,0,"div",4),r(6,"div",4),l(7),m(),r(8,"mat-menu",5,0)(10,"button",6),W("click",function(){return q(o),z(i.hexToggle$.next(!0))}),r(11,"mat-icon"),C(12,"async"),l(13,"check"),m(),l(14," Hex input "),m(),r(15,"button",6),W("click",function(){return q(o),z(i.hexToggle$.next(!1))}),r(16,"mat-icon"),C(17,"async"),l(18,"check"),m(),l(19," Decimal input "),m()(),g(20,Vn,2,1,"div",7),m(),l(21),g(22,Nn,2,1,"ya-help"),d(23,"ya-errors",8,1),g(25,Dn,1,1,"input",9),C(26,"async"),g(27,Pn,1,1,"ya-hex-integer-input",10),C(28,"async"),m()}if(e&2){let o=P(24);a(),O("error",y(2,16,o.invalid$)),a(2),u(i.type.rangeMin!==void 0||i.type.rangeMax!==void 0?3:-1),a(),u(i.type.unitSet?4:-1),a(),u(i.type.signed===!1?5:-1),a(2),b(i.type.engType),a(4),Oe("visibility",y(12,18,i.hexToggle$)?"visible":"hidden"),a(5),Oe("visibility",y(17,20,i.hexToggle$)?"hidden":"visible"),a(4),u(i.type.signed===!1?20:-1),a(),f(" ",i.label," "),a(),u(i.description?22:-1),a(),p("controlName",i.controlName),a(2),u(y(26,22,i.hexToggle$)?-1:25),a(2),u(y(28,24,i.hexToggle$)?27:-1)}},dependencies:[v,M,K,A,L,Ae,it,nt,ot,j,k,V,Ot,ee,le],styles:[".meta[_ngcontent-%COMP%]{position:absolute;top:0;right:0;display:flex}.meta[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{flex:none;background-color:#eee;font-weight:400;font-family:Roboto Mono,monospace;color:#000000a7;padding-left:2px;padding-right:2px;margin-left:10px}.meta.error[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{background-color:#dc143c;color:#fff}.members[_ngcontent-%COMP%], .entries[_ngcontent-%COMP%]{margin-top:5px;padding-top:5px;padding-left:10px;border-left:1px solid rgba(0,0,0,.1)}.meta[_ngcontent-%COMP%]   .item.menu[_ngcontent-%COMP%]:hover{background-color:#009e97;color:#fff;cursor:pointer}",".ng-invalid[_nghost-%COMP%]:not(.ng-pristine)     input{border-color:#dc143c!important}.label[_ngcontent-%COMP%]{position:relative}"],changeDetection:0})}};function Fn(t,n){if(t&1&&(r(0,"div",3),l(1," chars: "),d(2,"ya-interval",6),m()),t&2){let e=s();a(2),p("left",e.type.minChars)("right",e.type.maxChars)("singleValueIfEqual",!0)}}function kn(t,n){if(t&1&&(r(0,"div",3),l(1),C(2,"units"),m()),t&2){let e=s();a(),f(" ",y(2,1,e.type.unitSet)," ")}}function $n(t,n){if(t&1&&(r(0,"ya-help"),l(1),m()),t&2){let e=s();a(),f(" ",e.description," ")}}var Ce=class t{constructor(){this.formControl=new D;this.validators=[];this.onChange=n=>{};this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.formControl.valueChanges.subscribe(()=>{let n=this.formControl.value;this.onChange(n)})),this.index===void 0?this.controlName=this.name:this.controlName=String(this.index),this.type.minChars!==void 0&&this.type.minChars!==0&&this.validators.push(E.required),this.type.minChars!==void 0&&this.validators.push(E.minLength(this.type.minChars)),this.type.maxChars!==void 0&&this.validators.push(E.maxLength(this.type.maxChars))}get label(){return this.index!==void 0?T.unflattenIndex(this.index,this.dimensions).map(e=>"["+e+"]").join(""):this.name}writeValue(n){this.formControl.setValue(n)}registerOnChange(n){this.onChange=n}registerOnTouched(n){}validate(n){for(let e of this.validators){let i=e(n);if(i)return i}return null}ngOnDestroy(){this.subscriptions.forEach(n=>n.unsubscribe())}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=h({type:t,selectors:[["app-string-argument"]],inputs:{name:"name",description:"description",type:"type",index:"index",dimensions:"dimensions"},standalone:!0,features:[w([{provide:B,useExisting:I(()=>t),multi:!0},{provide:R,useExisting:I(()=>t),multi:!0}]),_],decls:12,vars:11,consts:[["err",""],[1,"label"],[1,"meta"],[1,"item"],[3,"controlName"],["type","text","autocomplete","off",3,"formControl"],[3,"left","right","singleValueIfEqual"]],template:function(e,i){if(e&1&&(r(0,"div",1)(1,"div",2),C(2,"async"),g(3,Fn,3,3,"div",3)(4,kn,3,3,"div",3),r(5,"div",3),l(6),m()(),l(7),g(8,$n,2,1,"ya-help"),d(9,"ya-errors",4,0)(11,"input",5),m()),e&2){let o=P(10);a(),O("error",y(2,9,o.invalid$)),a(2),u(i.type.minChars!==void 0||i.type.maxChars!==void 0?3:-1),a(),u(i.type.unitSet?4:-1),a(2),b(i.type.engType),a(),f(" ",i.label," "),a(),u(i.description?8:-1),a(),p("controlName",i.controlName),a(2),p("formControl",i.formControl)}},dependencies:[v,M,K,A,L,k,V,ee,le],styles:[".meta[_ngcontent-%COMP%]{position:absolute;top:0;right:0;display:flex}.meta[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{flex:none;background-color:#eee;font-weight:400;font-family:Roboto Mono,monospace;color:#000000a7;padding-left:2px;padding-right:2px;margin-left:10px}.meta.error[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{background-color:#dc143c;color:#fff}.members[_ngcontent-%COMP%], .entries[_ngcontent-%COMP%]{margin-top:5px;padding-top:5px;padding-left:10px;border-left:1px solid rgba(0,0,0,.1)}.meta[_ngcontent-%COMP%]   .item.menu[_ngcontent-%COMP%]:hover{background-color:#009e97;color:#fff;cursor:pointer}",".ng-invalid[_nghost-%COMP%]:not(.ng-pristine)     input{border-color:#dc143c!important}.label[_ngcontent-%COMP%]{position:relative}"],changeDetection:0})}};function Gn(t,n){if(t&1&&(r(0,"ya-help"),l(1),m()),t&2){let e=s();a(),f(" ",e.description," ")}}var ye=class t{constructor(){this.formControl=new D;this.validators=[];this.onChange=n=>{};this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.formControl.valueChanges.subscribe(()=>{let n=this.formControl.value;this.onChange(n)})),this.index===void 0?this.controlName=this.name:this.controlName=String(this.index),this.validators.push(E.required)}get label(){return this.index!==void 0?T.unflattenIndex(this.index,this.dimensions).map(e=>"["+e+"]").join(""):this.name}writeValue(n){this.formControl.setValue(n)}registerOnChange(n){this.onChange=n}registerOnTouched(n){}validate(n){for(let e of this.validators){let i=e(n);if(i)return i}return this.formControl.errors}ngOnDestroy(){this.subscriptions.forEach(n=>n.unsubscribe())}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=h({type:t,selectors:[["app-time-argument"]],inputs:{name:"name",description:"description",type:"type",index:"index",dimensions:"dimensions"},standalone:!0,features:[w([{provide:B,useExisting:I(()=>t),multi:!0},{provide:R,useExisting:I(()=>t),multi:!0}]),_],decls:10,vars:10,consts:[["err",""],[1,"label"],[1,"meta"],[1,"item"],[3,"controlName"],[3,"formControl","showMillis"]],template:function(e,i){if(e&1&&(r(0,"div",1)(1,"div",2),C(2,"async"),r(3,"div",3),l(4),m()(),l(5),g(6,Gn,2,1,"ya-help"),d(7,"ya-errors",4,0)(9,"ya-date-time-input",5),m()),e&2){let o=P(8);a(),O("error",y(2,8,o.invalid$)),a(3),b(i.type.engType),a(),f(" ",i.label," "),a(),u(i.description?6:-1),a(),p("controlName",i.controlName),a(2),p("formControl",i.formControl)("showMillis",!0)}},dependencies:[v,M,A,L,$e,k,V],styles:[".meta[_ngcontent-%COMP%]{position:absolute;top:0;right:0;display:flex}.meta[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{flex:none;background-color:#eee;font-weight:400;font-family:Roboto Mono,monospace;color:#000000a7;padding-left:2px;padding-right:2px;margin-left:10px}.meta.error[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{background-color:#dc143c;color:#fff}.members[_ngcontent-%COMP%], .entries[_ngcontent-%COMP%]{margin-top:5px;padding-top:5px;padding-left:10px;border-left:1px solid rgba(0,0,0,.1)}.meta[_ngcontent-%COMP%]   .item.menu[_ngcontent-%COMP%]:hover{background-color:#009e97;color:#fff;cursor:pointer}",".ng-invalid[_nghost-%COMP%]:not(.ng-pristine)     input{border-color:#dc143c!important}.label[_ngcontent-%COMP%]{position:relative}"],changeDetection:0})}};function Bn(t,n){if(t&1&&(r(0,"ya-help"),l(1),m()),t&2){let e=s();a(),f(" ",e.description," ")}}function Rn(t,n){if(t&1&&d(0,"app-aggregate-argument",6),t&2){let e=s().$index,i=s();p("name",i.name)("type",i.type.elementType)("index",e)("dimensions",i.ownDimensions)("initialValue",i.entryInitialValues[e])}}function Ln(t,n){if(t&1&&d(0,"app-binary-argument",7),t&2){let e=s().$index,i=s();p("name",i.name)("type",i.type.elementType)("index",e)("dimensions",i.ownDimensions)("formControlName",e)}}function Yn(t,n){if(t&1&&d(0,"app-boolean-argument",7),t&2){let e=s().$index,i=s();p("name",i.name)("type",i.type.elementType)("index",e)("dimensions",i.ownDimensions)("formControlName",e)}}function Un(t,n){if(t&1&&d(0,"app-enumeration-argument",7),t&2){let e=s().$index,i=s();p("name",i.name)("type",i.type.elementType)("index",e)("dimensions",i.ownDimensions)("formControlName",e)}}function Wn(t,n){if(t&1&&d(0,"app-float-argument",7),t&2){let e=s().$index,i=s();p("name",i.name)("type",i.type.elementType)("index",e)("dimensions",i.ownDimensions)("formControlName",e)}}function jn(t,n){if(t&1&&d(0,"app-integer-argument",7),t&2){let e=s().$index,i=s();p("name",i.name)("type",i.type.elementType)("index",e)("dimensions",i.ownDimensions)("formControlName",e)}}function Hn(t,n){if(t&1&&d(0,"app-string-argument",7),t&2){let e=s().$index,i=s();p("name",i.name)("type",i.type.elementType)("index",e)("dimensions",i.ownDimensions)("formControlName",e)}}function qn(t,n){if(t&1&&d(0,"app-time-argument",7),t&2){let e=s().$index,i=s();p("name",i.name)("type",i.type.elementType)("index",e)("dimensions",i.ownDimensions)("formControlName",e)}}function zn(t,n){if(t&1&&d(0,"app-array-argument",6),t&2){let e=s().$index,i=s();p("name",e)("type",i.type.elementType)("index",e)("dimensions",i.ownDimensions)("initialValue",i.entryInitialValues[e])}}function Qn(t,n){if(t&1&&(g(0,Rn,1,5,"app-aggregate-argument",6)(1,Ln,1,5,"app-binary-argument",7)(2,Yn,1,5,"app-boolean-argument",7)(3,Un,1,5,"app-enumeration-argument",7)(4,Wn,1,5,"app-float-argument",7)(5,jn,1,5,"app-integer-argument",7)(6,Hn,1,5,"app-string-argument",7)(7,qn,1,5,"app-time-argument",7)(8,zn,1,5,"app-array-argument",6),d(9,"br")),t&2){let e,i=s();u((e=i.type.elementType.engType)==="aggregate"?0:e==="binary"?1:e==="boolean"?2:e==="enumeration"?3:e==="float"?4:e==="integer"?5:e==="string"?6:e==="time"?7:e===(i.type.elementType.engType.endsWith("[]")?i.type.elementType.engType:"")?8:-1)}}var Te=class t{constructor(n,e,i){this.formGroupName=n;this.yamcs=e;this.formArrayName=i;this.ownDimensions=[];this.engType$=new F(null);this.arrayLength$=new F(0);this.formArray=new We([]);this.entryInitialValues=[];this.subscriptions=[];this.pvalCache={};this.topLevelForm.valueChanges.subscribe(()=>{this.updateOwnDimensions(),this.formArray.updateValueAndValidity({onlySelf:!0})}),this.topLevelForm.statusChanges.subscribe(()=>{this.updateOwnDimensions(),this.formArray.updateValueAndValidity({onlySelf:!0})})}get topLevelForm(){return this.formGroupName.formDirective}ngOnInit(){this.formGroupName.control.addControl(this.name,this.formArray),this.updateOwnDimensions();let e=this.type.dimensions.filter(o=>o.parameter!==void 0).map(o=>o.parameter.qualifiedName);if(e=[...new Set(e)],e.length){let o=e.map(x=>({name:x})),c;this.parameterSubscription=this.yamcs.yamcsClient.createParameterSubscription({instance:this.yamcs.instance,processor:this.yamcs.processor,id:o,abortOnInvalid:!1,sendFromCache:!0,updateOnExpiration:!1,action:"REPLACE"},x=>{x.mapping&&(c=te(te({},c),x.mapping));for(let S of x.values||[])if(S.engValue){let oe=c[S.numericId];this.pvalCache[oe.name]=T.convertValue(S.engValue),this.updateOwnDimensions()}})}this.formArray.addValidators(()=>{for(let o=0;o<this.ownDimensions.length;o++){let c=this.ownDimensions[o],x=this.type.dimensions[o];if(c!==void 0&&c<0)return{invalidDimension:{dimension:c}};if(x.argument){if(c===void 0)return{argumentRequired:{name:x.argument}}}else if(x.parameter&&c===void 0)return{parameterRequired:{qualifiedName:x.parameter.qualifiedName,name:x.parameter.name}}}return null}),this.formArray.updateValueAndValidity(),this.initialValue?.length===this.arrayLength$.value&&(this.entryInitialValues=[...this.initialValue]);let i=!0;this.subscriptions.push(this.arrayLength$.pipe(He()).subscribe(o=>{this.formArray.clear();for(let c=0;c<o;c++)if(!this.type.elementType.engType.endsWith("[]")&&this.type.elementType.engType!=="aggregate"){let x=i?this.entryInitialValues[c]??"":"";this.formArray.setControl(c,new be(x))}else this.type.elementType.engType==="aggregate"?this.formArray.setControl(c,new Ke({})):this.formArray.setControl(c,new We([]))})),i=!1}get label(){return this.index!==void 0?T.unflattenIndex(this.index,this.dimensions).map(e=>"["+e+"]").join(""):this.name}updateEngType(){let n=this.type.elementType.engType;n.endsWith("[]")&&(n="array");for(let e of this.ownDimensions)n+=e!==void 0?`[${e}]`:"[?]";this.engType$.next(n)}updateOwnDimensions(){let{dimensions:n}=this.type;if(n){let e=[];for(let o of n)if(o.fixedValue!==void 0)e.push(Number(o.fixedValue));else if(o.argument){let c=this.findClosestControl(o.argument);if(c?.valid&&c.value!==""){let x=Number(c.value);if(isNaN(x))e.push(void 0);else{let S=x*Number(o.slope);S+=Number(o.intercept),e.push(S)}}else e.push(void 0)}else if(o.parameter){let c=this.pvalCache[o.parameter.qualifiedName];if(c!==void 0){let x=Number(c);if(isNaN(x))e.push(void 0);else{let S=x*Number(o.slope);S+=Number(o.intercept),e.push(S)}}else e.push(void 0)}else e.push(void 0);this.ownDimensions=e,this.updateEngType();let i=1;for(let o of this.ownDimensions)if(o===void 0){i=0;break}else i*=o;this.arrayLength$.next(i)}}findClosestControl(n){let e=this.formGroupName.control;for(;e&&e!==this.topLevelForm.control;){if(e instanceof ve&&n in e.controls)return e.controls[n];e=e.parent}}ngOnDestroy(){this.parameterSubscription?.cancel(),this.subscriptions.forEach(n=>n.unsubscribe())}static{this.\u0275fac=function(e){return new(e||t)(N(Y),N(Re),N(ie,8))}}static{this.\u0275cmp=h({type:t,selectors:[["app-array-argument"]],inputs:{name:"name",description:"description",type:"type",index:"index",dimensions:"dimensions",initialValue:"initialValue"},standalone:!0,features:[w([],[{provide:xe,useFactory:(n,e)=>n||e,deps:[[new Ve,new Ee,ie],Y]}]),_],decls:13,vars:11,consts:[["err",""],[1,"label"],[3,"controlName"],[1,"meta"],[1,"item"],[1,"entries",3,"formArrayName"],[3,"name","type","index","dimensions","initialValue"],[3,"name","type","index","dimensions","formControlName"]],template:function(e,i){if(e&1&&(r(0,"div",1),l(1),g(2,Bn,2,1,"ya-help"),d(3,"ya-errors",2,0),r(5,"div",3),C(6,"async"),r(7,"div",4),l(8),C(9,"async"),m()(),r(10,"div",5),Q(11,Qn,10,1,"br",null,ae),m()()),e&2){let o=P(4);a(),f(" ",i.label," "),a(),u(i.description?2:-1),a(),p("controlName",i.name),a(2),O("error",y(6,7,o.invalid$)),a(3),b(y(9,9,i.engType$)),a(2),p("formArrayName",i.name),a(),J(i.formArray.controls)}},dependencies:()=>[t,Ie,pe,de,ue,ge,fe,v,M,A,se,X,ie,k,V,Ce,ye],styles:[".meta[_ngcontent-%COMP%]{position:absolute;top:0;right:0;display:flex}.meta[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{flex:none;background-color:#eee;font-weight:400;font-family:Roboto Mono,monospace;color:#000000a7;padding-left:2px;padding-right:2px;margin-left:10px}.meta.error[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{background-color:#dc143c;color:#fff}.members[_ngcontent-%COMP%], .entries[_ngcontent-%COMP%]{margin-top:5px;padding-top:5px;padding-left:10px;border-left:1px solid rgba(0,0,0,.1)}.meta[_ngcontent-%COMP%]   .item.menu[_ngcontent-%COMP%]:hover{background-color:#009e97;color:#fff;cursor:pointer}",".label[_ngcontent-%COMP%]{position:relative}"],changeDetection:0})}};function Jn(t,n){if(t&1&&(r(0,"ya-help"),l(1),m()),t&2){let e=s();a(),f(" ",e.description," ")}}function Kn(t,n){if(t&1&&d(0,"app-aggregate-argument",5),t&2){let e=s(),i=e.$implicit,o=e.$index,c=s();p("name",i.name)("type",i.type)("description",i.shortDescription)("initialValue",c.memberInitialValues[o])}}function Xn(t,n){if(t&1&&d(0,"app-binary-argument",6),t&2){let e=s().$implicit;p("name",e.name)("type",e.type)("description",e.shortDescription)("formControlName",e.name)}}function Zn(t,n){if(t&1&&d(0,"app-boolean-argument",6),t&2){let e=s().$implicit;p("name",e.name)("type",e.type)("description",e.shortDescription)("formControlName",e.name)}}function ei(t,n){if(t&1&&d(0,"app-enumeration-argument",6),t&2){let e=s().$implicit;p("name",e.name)("type",e.type)("description",e.shortDescription)("formControlName",e.name)}}function ti(t,n){if(t&1&&d(0,"app-float-argument",6),t&2){let e=s().$implicit;p("name",e.name)("type",e.type)("description",e.shortDescription)("formControlName",e.name)}}function ni(t,n){if(t&1&&d(0,"app-integer-argument",6),t&2){let e=s().$implicit;p("name",e.name)("type",e.type)("description",e.shortDescription)("formControlName",e.name)}}function ii(t,n){if(t&1&&d(0,"app-string-argument",6),t&2){let e=s().$implicit;p("name",e.name)("type",e.type)("description",e.shortDescription)("formControlName",e.name)}}function oi(t,n){if(t&1&&d(0,"app-time-argument",6),t&2){let e=s().$implicit;p("name",e.name)("type",e.type)("description",e.shortDescription)("formControlName",e.name)}}function ai(t,n){if(t&1&&d(0,"app-array-argument",5),t&2){let e=s(),i=e.$implicit,o=e.$index,c=s();p("name",i.name)("type",i.type)("description",i.shortDescription)("initialValue",c.memberInitialValues[o])}}function ri(t,n){if(t&1&&(r(0,"div"),g(1,Kn,1,4,"app-aggregate-argument",5)(2,Xn,1,4,"app-binary-argument",6)(3,Zn,1,4,"app-boolean-argument",6)(4,ei,1,4,"app-enumeration-argument",6)(5,ti,1,4,"app-float-argument",6)(6,ni,1,4,"app-integer-argument",6)(7,ii,1,4,"app-string-argument",6)(8,oi,1,4,"app-time-argument",6)(9,ai,1,4,"app-array-argument",5),m()),t&2){let e,i=n.$implicit,o=n.$index;Oe("padding-top",o===0?0:5,"px"),a(),u((e=i.type.engType)==="aggregate"?1:e==="binary"?2:e==="boolean"?3:e==="enumeration"?4:e==="float"?5:e==="integer"?6:e==="string"?7:e==="time"?8:e===(i.type.engType.endsWith("[]")?i.type.engType:"")?9:-1)}}var Ie=class t{constructor(n,e){this.formGroupName=n;this.formArrayName=e;this.memberInitialValues=[]}ngOnInit(){let n=this.formGroupName.control,e;if(this.index===void 0)this.controlName=this.name,e=new ve({}),n.setControl(this.name,e);else{this.controlName=String(this.index);let i=Number(this.index);e=n.controls[this.name].at(i)}for(let i of this.type.member||[]){let o;if(i.type.engType==="aggregate")o={},this.initialValue&&this.initialValue.hasOwnProperty(i.name)&&(o=this.initialValue[i.name]);else if(i.type.engType.endsWith("[]"))o=[],this.initialValue&&this.initialValue.hasOwnProperty(i.name)&&(o=this.initialValue[i.name]);else{o=i.initialValue??"",this.initialValue&&this.initialValue.hasOwnProperty(i.name)&&(o=this.initialValue[i.name]);let c=new D(o);e.setControl(i.name,c)}this.memberInitialValues.push(o)}}get label(){return this.index===void 0?this.name:T.unflattenIndex(this.index,this.dimensions).map(e=>"["+e+"]").join("")}static{this.\u0275fac=function(e){return new(e||t)(N(Y),N(ie,8))}}static{this.\u0275cmp=h({type:t,selectors:[["app-aggregate-argument"]],inputs:{name:"name",description:"description",type:"type",index:"index",dimensions:"dimensions",initialValue:"initialValue"},standalone:!0,features:[w([],[{provide:xe,useFactory:(n,e)=>n||e,deps:[[new Ve,new Ee,ie],Y]}]),_],decls:9,vars:3,consts:[[1,"label"],[1,"meta"],[1,"item"],[1,"members",3,"formGroupName"],[3,"paddingTop"],[3,"name","type","description","initialValue"],[3,"name","type","description","formControlName"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2),l(3,"aggregate"),m()(),l(4),g(5,Jn,2,1,"ya-help"),r(6,"div",3),Q(7,ri,10,3,"div",4,ae),m()()),e&2&&(a(4),f(" ",i.label," "),a(),u(i.description?5:-1),a(),p("formGroupName",i.controlName),a(),J(i.type.member))},dependencies:()=>[t,Te,pe,de,ue,ge,fe,v,A,se,X,Y,V,Ce,ye],styles:[".meta[_ngcontent-%COMP%]{position:absolute;top:0;right:0;display:flex}.meta[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{flex:none;background-color:#eee;font-weight:400;font-family:Roboto Mono,monospace;color:#000000a7;padding-left:2px;padding-right:2px;margin-left:10px}.meta.error[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{background-color:#dc143c;color:#fff}.members[_ngcontent-%COMP%], .entries[_ngcontent-%COMP%]{margin-top:5px;padding-top:5px;padding-left:10px;border-left:1px solid rgba(0,0,0,.1)}.meta[_ngcontent-%COMP%]   .item.menu[_ngcontent-%COMP%]:hover{background-color:#009e97;color:#fff;cursor:pointer}",".label[_ngcontent-%COMP%]{position:relative}"],changeDetection:0})}};function mi(t,n){if(t&1&&d(0,"app-aggregate-argument",0),t&2){let e=s();p("name",e.name)("description",e.description)("type",e.type)("initialValue",e.parsedInitialValue)}}function si(t,n){if(t&1&&d(0,"app-binary-argument",1),t&2){let e=s();p("name",e.name)("description",e.description)("type",e.type)("formControlName",e.name)}}function li(t,n){if(t&1&&d(0,"app-boolean-argument",1),t&2){let e=s();p("name",e.name)("description",e.description)("type",e.type)("formControlName",e.name)}}function pi(t,n){if(t&1&&d(0,"app-enumeration-argument",1),t&2){let e=s();p("name",e.name)("description",e.description)("type",e.type)("formControlName",e.name)}}function ci(t,n){if(t&1&&d(0,"app-float-argument",1),t&2){let e=s();p("name",e.name)("description",e.description)("type",e.type)("formControlName",e.name)}}function di(t,n){if(t&1&&d(0,"app-integer-argument",1),t&2){let e=s();p("name",e.name)("description",e.description)("type",e.type)("formControlName",e.name)}}function ui(t,n){if(t&1&&d(0,"app-string-argument",1),t&2){let e=s();p("name",e.name)("description",e.description)("type",e.type)("formControlName",e.name)}}function gi(t,n){if(t&1&&d(0,"app-time-argument",1),t&2){let e=s();p("name",e.name)("description",e.description)("type",e.type)("formControlName",e.name)}}function fi(t,n){if(t&1&&d(0,"app-array-argument",0),t&2){let e=s();p("name",e.name)("description",e.description)("type",e.type)("initialValue",e.parsedInitialValue)}}function he(t){switch(t.type){case"BOOLEAN":return""+t.booleanValue;case"FLOAT":return""+t.floatValue;case"DOUBLE":return""+t.doubleValue;case"UINT32":return""+t.uint32Value;case"SINT32":return""+t.sint32Value;case"BINARY":return T.convertBase64ToHex(t.binaryValue);case"ENUMERATED":case"STRING":case"TIMESTAMP":return t.stringValue;case"UINT64":return""+t.uint64Value;case"SINT64":return""+t.sint64Value;case"AGGREGATE":let{name:n,value:e}=t.aggregateValue,i={};for(let o=0;o<n.length;o++)i[n[o]]=he(e[o]);return i;case"ARRAY":return t.arrayValue.map(o=>he(o))}}function je(t){if(Array.isArray(t))return t.map(n=>je(n));if(typeof t=="object"){let n={};for(let e in t)n[e]=je(t[e]);return n}else return""+t}var Ue=class t{ngOnInit(){if(this.initialValue&&(this.type.engType==="AGGREGATE"||this.type.engType==="ARRAY"?this.parsedInitialValue=je(JSON.parse(this.initialValue)):this.type.engType==="BOOLEAN"?this.parsedInitialValue=""+(this.initialValue===this.type.oneStringValue):this.parsedInitialValue=this.initialValue),this.templateProvider){let n=this.templateProvider.getAssignment(this.name);n?.type==="AGGREGATE"?this.parsedInitialValue=te(te({},this.parsedInitialValue||{}),he(n)):n?.type==="ARRAY"&&(this.parsedInitialValue=he(n))}}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=h({type:t,selectors:[["app-argument"]],inputs:{name:"name",description:"description",type:"type",initialValue:"initialValue",templateProvider:"templateProvider"},standalone:!0,features:[w([],[{provide:xe,useExisting:Y}]),_],decls:9,vars:1,consts:[[3,"name","description","type","initialValue"],[3,"name","description","type","formControlName"]],template:function(e,i){if(e&1&&g(0,mi,1,4,"app-aggregate-argument",0)(1,si,1,4,"app-binary-argument",1)(2,li,1,4,"app-boolean-argument",1)(3,pi,1,4,"app-enumeration-argument",1)(4,ci,1,4,"app-float-argument",1)(5,di,1,4,"app-integer-argument",1)(6,ui,1,4,"app-string-argument",1)(7,gi,1,4,"app-time-argument",1)(8,fi,1,4,"app-array-argument",0),e&2){let o;u((o=i.type.engType)==="aggregate"?0:o==="binary"?1:o==="boolean"?2:o==="enumeration"?3:o==="float"?4:o==="integer"?5:o==="string"?6:o==="time"?7:o===(i.type.engType.endsWith("[]")?i.type.engType:"")?8:-1)}},dependencies:[Ie,Te,pe,de,ue,ge,fe,v,A,X,Ce,ye],encapsulation:2,changeDetection:0})}};function Ci(t,n){t&1&&d(0,"br")}function yi(t,n){if(t&1&&(g(0,Ci,1,0,"br"),d(1,"app-argument",2)),t&2){let e=n.$implicit,i=n.$index,o=s();u(i!==0?0:-1),a(),p("name",e.name)("description",e.description)("type",e.type)("initialValue",e.initialValue)("templateProvider",o.templateProvider)}}function hi(t,n){t&1&&d(0,"br",4)}function _i(t,n){if(t&1&&(g(0,hi,1,0,"br",4),d(1,"app-argument",3)),t&2){let e=n.$implicit,i=n.$index,o=s();u(i!==0||o.arguments.length?0:-1),a(),p("name",e.name)("description",e.description)("type",e.type)("initialValue",e.initialValue)("templateProvider",o.templateProvider)}}function xi(t,n){t&1&&d(0,"br")}function vi(t,n){t&1&&l(0," argument ")}function bi(t,n){t&1&&l(0," arguments ")}function Ai(t,n){if(t&1){let e=ne();g(0,xi,1,0,"br"),r(1,"ya-text-action",6),W("click",function(){q(e);let o=s(2);return z(o.showAll$.next(!0))}),l(2),g(3,vi,1,0)(4,bi,1,0),l(5," with defaults "),m()}if(t&2){let e=s(2);u(e.arguments.length?0:-1),a(2),f(" Show ",e.argumentsWithInitial.length," "),a(),u(e.argumentsWithInitial.length===1?3:4)}}function Si(t,n){if(t&1&&(g(0,Ai,6,3,"ya-text-action",5),C(1,"async")),t&2){let e=s();u(e.argumentsWithInitial.length&&!y(1,1,e.showAll$)?0:-1)}}function Ti(t,n){t&1&&(r(0,"p"),l(1,"\xA0"),m(),r(2,"h3"),l(3,"Options"),m())}function Ii(t,n){if(t&1&&(r(0,"ya-help",8),d(1,"div",11),m()),t&2){let e=s(2).$implicit;p("dialogTitle",e.verboseName||e.id),a(),p("innerHTML",e.help,Ne)}}function Oi(t,n){if(t&1&&(r(0,"div",7),l(1),g(2,Ii,2,2,"ya-help",8),d(3,"br")(4,"input",9),l(5," true "),d(6,"input",10),l(7," false "),m()),t&2){let e=s().$implicit;a(),f(" ",e.verboseName||e.id," "),a(),u(e.help?2:-1),a(2),p("formControlName","extra__"+e.id),a(2),p("formControlName","extra__"+e.id)}}function wi(t,n){if(t&1&&(r(0,"ya-help",8),d(1,"div",11),m()),t&2){let e=s(2).$implicit;p("dialogTitle",e.verboseName||e.id),a(),p("innerHTML",e.help,Ne)}}function Mi(t,n){if(t&1&&(r(0,"div",7),l(1),g(2,wi,2,2,"ya-help",8),d(3,"ya-date-time-input",12),m()),t&2){let e=s().$implicit;a(),f(" ",e.verboseName||e.id," "),a(),u(e.help?2:-1),a(),p("formControlName","extra__"+e.id)("showMillis",!0)("showClear",!0)}}function Ei(t,n){if(t&1&&(r(0,"ya-help",8),d(1,"div",11),m()),t&2){let e=s(2).$implicit;p("dialogTitle",e.verboseName||e.id),a(),p("innerHTML",e.help,Ne)}}function Vi(t,n){if(t&1&&(r(0,"div",7),l(1),g(2,Ei,2,2,"ya-help",8),d(3,"input",13),m()),t&2){let e=s().$implicit;a(),f(" ",e.verboseName||e.id," "),a(),u(e.help?2:-1),a(),p("formControlName","extra__"+e.id)}}function Ni(t,n){if(t&1&&(g(0,Oi,8,4,"div",7)(1,Mi,4,5,"div",7)(2,Vi,4,3,"div",7),d(3,"br")),t&2){let e,i=n.$implicit;u((e=i.type)==="BOOLEAN"?0:e==="TIMESTAMP"?1:2)}}function Di(t,n){if(t&1&&Q(0,Ni,4,1,"br",null,ae),t&2){let e=s();J(e.commandOptions)}}function Pi(t,n){t&1&&(r(0,"label"),l(1," Comment "),r(2,"span",14),l(3,"(optional)"),m(),d(4,"textarea",15),m())}var kt=class t{constructor(n,e,i){this.enableComment=!0;this.arguments=[];this.argumentsWithInitial=[];this.showAll$=new F(!1);this.hasArguments$=new F(!1);this.form=i.group({args:i.group({})}),this.user=e.getUser(),this.commandOptions=n.getCommandOptions(),this.form.addControl("comment",new be(""));for(let o of this.commandOptions)this.form.addControl("extra__"+o.id,new D(""));this.config=n.getConfig(),this.showAll$.next(!this.config.collapseInitializedArguments)}get argsGroup(){return this.form.get("args")}ngOnChanges(){this.arguments=[],this.argumentsWithInitial=[],this.showAll$.next(!this.config.collapseInitializedArguments);for(let o in this.argsGroup.controls)this.argsGroup.removeControl(o);if(this.form.reset(),this.enableComment){let o=this.templateProvider?.getComment()||"";this.form.controls.comment.setValue(o)}if(!this.command)return;if(this.templateProvider&&this.showCommandOptions())for(let o of this.config.commandOptions||[]){let c=this.templateProvider.getOption(o.id,o.type);c!==void 0&&this.form.controls["extra__"+o.id].setValue(he(c))}let n=[],e=this.command;for(;e;)n.unshift(e),e=e.baseCommand;let i=new Map;for(let o of n){if(o.argument)for(let c of o.argument){if(this.templateProvider){let S=this.templateProvider.getAssignment(c.name);if(S!==void 0){let oe=he(S),Me=c.initialValue;c.type.engType==="boolean"&&Me!==void 0&&(Me=""+(c.type.oneStringValue===Me)),oe===Me?this.argumentsWithInitial.push(c):this.arguments.push(c);continue}}let x=c.initialValue!==void 0;if(x&&c.type.engType==="aggregate"){let S=JSON.parse(c.initialValue);x=this.isAggregateFullyInitialized(c,S)}x?this.argumentsWithInitial.push(c):this.arguments.push(c)}if(o.argumentAssignment)for(let c of o.argumentAssignment)i.set(c.name,c.value)}this.arguments=this.arguments.filter(o=>!i.has(o.name)),this.argumentsWithInitial=this.argumentsWithInitial.filter(o=>!i.has(o.name));for(let o of this.arguments)this.addControl(o,this.templateProvider);for(let o of this.argumentsWithInitial)this.addControl(o,this.templateProvider);this.hasArguments$.next(this.arguments.length>0||this.argumentsWithInitial.length>0)}getAssignments(){let n={};for(let e of[...this.arguments,...this.argumentsWithInitial])if(e.type.engType==="aggregate"){let i=this.argsGroup.get(e.name);n[e.name]=this.getMemberAssignments(i,e.type)}else if(e.type.engType.endsWith("[]")){let i=this.argsGroup.get(e.name);n[e.name]=this.getArrayAssignment(i,e.type.elementType)}else{let i=this.argsGroup.controls[e.name];(!this.isArgumentWithInitialValue(e.name)||i.dirty)&&(e.type.engType==="boolean"?n[e.name]=this.argsGroup.value[e.name]==="true":n[e.name]=String(this.argsGroup.value[e.name]))}return n}getMemberAssignments(n,e){let i={};for(let o of e.member||[])if(o.type.engType==="aggregate"){let c=n.get(o.name);i[o.name]=this.getMemberAssignments(c,o.type)}else if(o.type.engType.endsWith("[]")){let c=n.get(o.name);i[o.name]=this.getArrayAssignment(c,o.type.elementType)}else if(o.type.engType==="boolean"){let c=n.get(o.name);i[o.name]=c.value==="true"}else{let c=n.get(o.name);i[o.name]=c.value}return i}getArrayAssignment(n,e){let i=[];for(let o of n.controls)if(e.engType==="aggregate"){let c=o;i.push(this.getMemberAssignments(c,e))}else if(e.engType.endsWith("[]")){let c=o;i.push(this.getArrayAssignment(c,e))}else e.engType==="boolean"?i.push(o.value==="true"):i.push(o.value);return i}getComment(){return this.form.value.comment||void 0}getExtraOptions(n=!1){let e={};for(let i in this.form.controls)if(i.startsWith("extra__")){let o=this.form.controls[i];if(o.value!==null){let c=i.replace("extra__","");n?e[c]=this.toStructValue(c,o.value):e[c]=this.toYamcsValue(c,o.value)}}return e}toStructValue(n,e){let i;for(let o of this.commandOptions)o.id===n&&(i=o);switch(i.type){case"BOOLEAN":return e==="true";case"NUMBER":return Number(e);default:return String(e)}}toYamcsValue(n,e){let i;for(let o of this.commandOptions)o.id===n&&(i=o);switch(i.type){case"BOOLEAN":return e==="true"?{type:"BOOLEAN",booleanValue:!0}:{type:"BOOLEAN",booleanValue:!1};case"NUMBER":return{type:"SINT32",sint32Value:Number(e)};default:return{type:"STRING",stringValue:String(e)}}}showCommandOptions(){return this.user.hasSystemPrivilege("CommandOptions")}addControl(n,e){if(n.type.engType!=="aggregate"){if(!n.type.engType.endsWith("[]")){let i;if(n.type.engType==="boolean"&&n.initialValue?i=""+(n.initialValue===n.type.oneStringValue):i=n.initialValue,e){let o=e.getAssignment(n.name);o!==void 0&&(i=he(o))}i===void 0&&(i=""),this.argsGroup.addControl(n.name,new D(i))}}}isArgumentWithInitialValue(n){for(let e of this.argumentsWithInitial)if(e.name===n)return!0;return!1}isAggregateFullyInitialized(n,e){for(let i of n.type.member||[]){if(!e.hasOwnProperty(i.name)&&n.initialValue===void 0)return!1;if(i.type.engType==="aggregate"){let o=e[i.name];if(!this.isAggregateFullyInitialized(i,o))return!1}}return!0}static{this.\u0275fac=function(e){return new(e||t)(N(St),N(Et),N(Ze))}}static{this.\u0275cmp=h({type:t,selectors:[["app-command-form"]],inputs:{command:"command",templateProvider:"templateProvider",enableComment:"enableComment"},standalone:!0,features:[qe,_],decls:11,vars:9,consts:[[1,"ya-form",3,"formGroup"],["formGroupName","args"],[3,"name","description","type","initialValue","templateProvider"],[1,"hasInitial",3,"name","description","type","initialValue","templateProvider"],[1,"hasInitial"],["icon","double_arrow"],["icon","double_arrow",3,"click"],[1,"label"],[3,"dialogTitle"],["type","radio","value","true",3,"formControlName"],["type","radio","value","false",3,"formControlName"],[3,"innerHTML"],[3,"formControlName","showMillis","showClear"],["type","text",3,"formControlName"],[1,"hint"],["formControlName","comment","rows","3",2,"width","100%","resize","none"]],template:function(e,i){e&1&&(r(0,"form",0),C(1,"async"),re(2,1),Q(3,yi,2,6,"app-argument",2,ae),Q(5,_i,2,6,"app-argument",3,ae),g(7,Si,2,3),me(),g(8,Ti,4,0)(9,Di,2,0)(10,Pi,5,0,"label"),m()),e&2&&(O("showAll",y(1,7,i.showAll$)),p("formGroup",i.form),a(3),J(i.arguments),a(2),J(i.argumentsWithInitial),a(2),u(i.config.collapseInitializedArguments?7:-1),a(),u(i.enableComment||i.showCommandOptions()&&i.commandOptions.length?8:-1),a(),u(i.showCommandOptions()?9:-1),a(),u(i.enableComment?10:-1))},dependencies:[Ue,v,M,Xe,K,De,A,se,Pe,X,Y,$e,V,It],styles:[".hasInitial[_ngcontent-%COMP%]{display:none}.showAll[_ngcontent-%COMP%]   .hasInitial[_ngcontent-%COMP%]{display:block}"],changeDetection:0})}};var $t=class extends et{constructor(e){super();this.yamcs=e;this.items$=new F([]);this.totalSize$=new F(0);this.loading$=new F(!1)}connect(){return this.items$}loadCommands(e){return this.loading$.next(!0),this.yamcs.yamcsClient.getCommands(this.yamcs.instance,e).then(i=>{this.loading$.next(!1),this.totalSize$.next(i.totalSize);let o=[];for(let c of i.systems||[])o.push({name:c.qualifiedName,system:c});for(let c of i.commands||[])o.push({name:c.qualifiedName,command:c});this.items$.next(o)})}getAliasNamespaces(){let e=[];for(let i of this.items$.value)if(i.command?.alias)for(let o of i.command.alias)o.namespace&&e.indexOf(o.namespace)===-1&&e.push(o.namespace);return e.sort()}disconnect(){this.items$.complete(),this.totalSize$.complete(),this.loading$.complete()}};export{Se as a,Dt as b,Le as c,Pt as d,Ft as e,kt as f,$t as g};
